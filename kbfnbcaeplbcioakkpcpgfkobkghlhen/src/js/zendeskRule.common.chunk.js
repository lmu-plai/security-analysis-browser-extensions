(self.webpackChunk=self.webpackChunk||[]).push([[2970],{65948:(e,t,n)=>{n.r(t),n.d(t,{Zendesk:()=>Z,zendeskTransformBeforeApply:()=>O});var i=n(84714),a=n(58303),r=n(63866),o=n(44287),s=n(18647),l=n(22234),d=n(28958),c=n(22086),p=n(61431),m=n(26761),u=n(95523),v=n(33357),f=n(18122),k=n(90595),g=n(79707),b=n(29483),x=n(27970),E=n(3670),w=n(14527),C=n(95869),R=n(61797);const T=e=>R.RI.isDelta(e)?R.RI.delta(h(e.delta),e.prevLen):e,h=e=>new w.i(e.map(y)),y=e=>C.s.isInsertString(e)&&z(e)?{...e,attributes:{...e.attributes,zendeskMacro:!0}}:e,z=({insert:e})=>e.split("\n").length>5;var Z;function A(e){const t=(0,s.wr)(e,(e=>e.className.includes("ticket section")))||e;return(0,r.z)(t)}function O(e){return!(0,b.OB)().experimentClient.isGateEnabled(k.K.ZendeskTransformReplacementOnlyForString)||(0,g.HD)(e.value)?d.T.transformReplacementNotToTrimSpaces(e):e}!function(e){const t=()=>n(27970).V0,r=l.T.contentEditable("Zendesk.editor",(e=>({integrationName:"Zendesk Editor",extraCondition:e=>e.field.classList.contains("editor"),createLayout:t=>new o.A7(t,{innerElementsField:e.field.closest(".zendesk-editor--rich-text-container")||e.field,createGbuttonShiftBehavior:e=>(0,i.of)({top:-40,left:-10}),scroller:A(t),pretendFieldPositioned:!0}),createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}))),s=p.O$.generic((e=>({genericOpts:{integrationName:"Zendesk Reply (slatejs)",validationRules:[...m.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest(".zendesk-editor--rich-text-container")||e,minimizeEnabled:!1,pretendFieldPositioned:!0}),extraCondition:e=>"true"===e.field.getAttribute("data-slate-editor"),createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}}))),g=l.T.textarea("Zendesk.chat",(()=>({validationRules:[...m.u,(0,u.jw)(25)],createLayout:e=>new o.A7(e,{innerElementsField:e.closest("[name='message']")||e,minimizeEnabled:!1})}))),w=d.T.generic((e=>({integrationName:"Zendesk Agent Chat",validationRules:[...m.u,(0,u.jw)(25)],genericOpts:{mapChange:T,getVBarsIntegrationInfo:t=>a.G({integrationName:t,kind:"zendesk",domain:e.pageContext.domain,isInsideIFrame:!1})},transformReplacementBeforeApply:O,deletionEvent:(0,x.Xw)()?"beforeinput":"keydown"})));e.page=(0,E.$W)({domain:f.Qk,name:"zendesk",eventPropagationHandler:e=>{(0,b.OB)().experimentClient.isGateEnabled(k.K.CentralizeStopEventPropagation)||e.addEventListener("keydown",(e=>{e.stopPropagation()}))}},[r,g,w,s,l.T.contentEditable("Zendesk",(e=>({createLayout:e=>new o.A7(e),extraCondition:()=>!0,createReplacementService:n=>new(t())({eventTarget:e.field,textObserver:n,experimentClient:e.experimentClient,replaceEvent:"paste",deletionEvent:"beforeinput"})}))),(0,c.q)("Zendesk"),l.T.textarea("Zendesk",(()=>({createLayout:e=>new o.A7(e),validationRules:m.u}))),v.k.iframeHostRule])}(Z||(Z={}))}}]);