(self.webpackChunk=self.webpackChunk||[]).push([[8721,751],{58799:(e,t,i)=>{var n=i(57401),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",o="safari-web-extension://__MSG_@@extension_id__/",s=self.GR_RESOURCE_ROOT||a,l=self.GR_RESOURCE_ROOT||r,c=self.GR_RESOURCE_ROOT||o;e.exports={__css:n.toString().replace(new RegExp(a,"g"),s).replace(new RegExp(r,"g"),l).replace(new RegExp(o,"g"),c),...n.locals}},50199:(e,t,i)=>{i.d(t,{I:()=>a,Y:()=>r});var n=i(66861);function a(e){return e.view((0,n.H6)("alwaysAvailableAssistantSettings","cheetah")).view(r)}function r(e){var t,i,n;return!!(null===(t=null==e?void 0:e.alwaysAvailableAssistantSettings)||void 0===t?void 0:t.enabled)&&!1!==(null===(n=null===(i=null==e?void 0:e.cheetah)||void 0===i?void 0:i.status)||void 0===n?void 0:n.cheetahEnabled)}},55916:(e,t,i)=>{i.d(t,{L:()=>a});var n=i(92379);const a=()=>n.createElement("input",{"aria-hidden":"true",tabIndex:-1,style:{position:"absolute",inset:0,opacity:0,cursor:"inherit"}})},12314:(e,t,i)=>{i.d(t,{T:()=>s,B:()=>o});var n=i(39963),a=i(62067),r=i(6266);const o=(e,t)=>{const{authHookDetails:i,userType:a,isGDocs:o=!1}=t;(({name:e,slot:t,experience:i,userType:a,lastKnownUserType:o,isGDocs:s})=>{(0,n.Tb)().authHooks.authHookShown({authHookName:e,authHookSlot:t,authHookExperience:i,userTypeExtended:a,lastKnownUserType:o,writingSurface:(0,r.$H)(!!s)})})({...i,userType:a,isGDocs:o}),null==e||e.authHookShow(i.experience,i.name,i.slot,a)},s=(e,t)=>{const{authHookDetails:i,userType:o,isGDocs:s=!1}=t;(({name:e,slot:t,experience:i,userType:o,lastKnownUserType:s,action:l,isGDocs:c,authType:d=a.uN.Email})=>{(0,n.Tb)().authHooks.authHookClick({authHookName:e,authHookSlot:t,authHookAction:l,authHookExperience:i,authHookAuthType:d,userTypeExtended:o,lastKnownUserType:s,writingSurface:(0,r.$H)(!!c)})})({...i,userType:o,isGDocs:s}),null==e||e.authHookButtonClick(i.action,i.authType,i.experience,i.name,i.slot,o)}},9237:(e,t,i)=>{function n(){return!1}i.d(t,{c:()=>n})},72008:(e,t,i)=>{i.d(t,{t:()=>n});const n=e=>(e=>"Cheetah/_System/Push/SimplifyRewrite"===e)(e)||(e=>"Cheetah/_System/Push/ImproveParagraph"===e)(e)},58041:(e,t,i)=>{i.d(t,{G:()=>l,m:()=>s});var n=i(92379),a=i(55916),r=i(69652),o=i(25640);const s=26,l=n.forwardRef((function({forceTooltipMessage:e,onClick:t,onMouseEnter:i,onMouseLeave:s,addOnePasswordExtensionBypass:l},c){return n.createElement(r.u,{message:"Rewrite with Grammarly",forcedMessage:e},n.createElement("button",{onClick:t,"data-grammarly-part":"cheetah-ideate-button","aria-label":"Rewrite with Grammarly",className:o.ideateButton,ref:c,onMouseEnter:i,onMouseLeave:s,style:l?{position:"relative"}:{}},n.createElement("div",{className:o.ideateButtonIcon}),l&&n.createElement(a.L,null)))}))},20851:(e,t,i)=>{if(i.d(t,{Cr:()=>k,FU:()=>h,OY:()=>_,Td:()=>g,UI:()=>f,XG:()=>C,eC:()=>u,ex:()=>E,gO:()=>l,r4:()=>v,sO:()=>y,xq:()=>p}),1388==i.j)var n=i(90023);if(1388==i.j)var a=i(58303);if(1388==i.j)var r=i(66861);var o=i(25693),s=i(78767);function l(e,t){var i,n,a;const r=null===(a=null===(n=null===(i=null==t?void 0:t.citationBuilder)||void 0===i?void 0:i.domains)||void 0===n?void 0:n[e])||void 0===a?void 0:a.disabled;return void 0!==r?!r:void 0}function c(e,t){return S(t).some((t=>new RegExp(t.domain).test(e)))}function d(e){var t,i;return!(null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.disabled)&&void 0!==i&&i)}function u(e,t){return S(t).some((t=>{const i=new RegExp(t.domain),n=new RegExp(t.pathname);return i.test(e.hostname)&&n.test(e.pathname)}))}function p(e){return a.Y3((()=>{const t=new URL(e).hostname.split(".");return t.slice(t.length-2).join(".")}))}function g(e,t,i,n){return i?function(e,t,i){const n=l(e,i);return d(t)&&(void 0===n&&c(e,t)||!0===n)}(e,t,n):function(e,t,i){return d(t)&&c(e,t)&&!1!==l(e,i)}(e,t,n)}function h(e,t){return S(t).some((t=>new RegExp(t.domain).test(e)&&!0===t.reparse))}const m={verticalLocation:"bottom",horizontalLocation:"left",offsetX:17,offsetY:32};function f(e,t){var i;return(null===(i=S(t).find((t=>new RegExp(t.domain).test(e))))||void 0===i?void 0:i.buttonPosition)||m}function v(e,t,i){return d(t)&&(i?!function(e,t){var i,n;return(null!==(n=null===(i=t.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]).includes(e)}(e,t):c(e,t))}function b(e,t){var i,n,a;const r=new Set(null!==(n=null===(i=e.citationBuilder)||void 0===i?void 0:i.blockedDomains)&&void 0!==n?n:[]);return Object.entries((null===(a=t.citationBuilder)||void 0===a?void 0:a.domains)||{}).filter((([,e])=>void 0!==e&&!e.disabled)).filter((([e])=>{return t=e,!r.has(t);var t})).map((([e])=>e))}function S(e){var t,i;return null!==(i=null===(t=e.citationBuilder)||void 0===t?void 0:t.sources)&&void 0!==i?i:[]}const w=(0,s.hz)((()=>{const e=document.location.href;return(0,o.KK)(e)}));function y(e){const t=e=>`^${e.replace(/\./g,"\\.")}$`;return{sources:S(e.dynamicConfig),explicitlyEnabledDomainsWithRegexStrings:b(e.dynamicConfig,e.page).map((e=>[e,t(e)]))}}const E=(0,s.hz)((e=>{const t=document.location.href;return{url:t,domain:(0,o.KK)(t),isUrlAllowlisted:u(document.location,e)}})),k=(0,s.hz)((()=>s.iy.create()));function C(e){const t=k(),i=w();return(0,n.zG)(e,(0,r.H6)("citeCopyButtonClick","citeCopyIntextClick","citePopupButtonDisable","citePopupButtonShow","citePopupEditClick","citePopupButtonClick","citePopupEditSuccess","citePopupMissingInfoShow","citePopupMissingInfoFormShow","feedbackSentButtonClick","citePopupAddMissingClick"),(e=>({...e,domain:i,sessionId:t})))}function _(e,t){return e.manualInvocation&&!0===l(t.domain,t)}},70708:(e,t,i)=>{i.d(t,{R:()=>n});var n,a=i(39565),r=i(90595),o=i(25693),s=i(16381),l=i(20905),c=i(78767),d=i(29483);!function(e){function t(e,t=(0,d.OB)(),i,n){return((0,o.t_)(i,n)?t.experimentClient.isGateEnabled(r.K.ConnectorGdocs):t.experimentClient.isGateEnabled(r.K.ConnectorNonGdocs))&&e.isMac&&(0,s.i7)()}e.shouldEnableFieldIntegration=t,e.shouldShowPermissionPopup=function(e,i=0,n=(0,d.OB)()){return Promise.resolve(i+l.v0<Date.now()&&t(e,n)&&n.bgRpc.api.isPermissionGranted(a.d.nativeMessaging).then(c.X0))}}(n||(n={}))},39565:(e,t,i)=>{var n;i.d(t,{d:()=>n}),function(e){e.nativeMessaging="nativeMessaging",e.clipboardRead="clipboardRead"}(n||(n={}))},64017:(e,t,i)=>{i.d(t,{n:()=>n});const n=e=>({markG2VBarUsed:async t=>{await e.api.markG2VBarUsed(t)},setG2VBarTypeDeactivated:async t=>{await e.api.setVBarTypeDeactivated(t)},setG2VBarTypesActivated:async t=>{await e.api.setVBarTypesActivated(t)},setG2OnboardingAcceptCount:async t=>{await e.api.setG2OnboardingAcceptCount(t)},setG2OnboardingCompletedStep:async t=>{await e.api.setG2OnboardingCompletedStep(t)},setG2OnboardingDismissed:async t=>{await e.api.setG2OnboardingDismissed(t)},setG2OnboardingPulsatingSeen:async t=>{await e.api.setG2OnboardingPulsatingSeen(t)},setG2OnboardingRevertPresentedCount:async t=>{await e.api.setG2OnboardingRevertPresentedCount(t)},recordG2TranslationLanguages:async t=>{await e.api.recordG2TranslationLanguages(t)},markG2TranslateOnboardingAsSeen:async t=>{await e.api.markG2TranslateOnboardingAsSeen(t)},setG2MultilingualOnboardingShowsCount:async t=>{await e.api.setG2MultilingualOnboardingShowsCount(t)}})},15329:(e,t,i)=>{i.d(t,{V:()=>r,X:()=>o});var n=i(90595),a=i(70843);function r(e){return e.isGateEnabled(n.K.GOSRollout)||"test"===e.getTreatment(a.p.GOSRollout)}function o(e){return!!r(e)&&(e.isGateEnabled(n.K.OggyOnGOS)||"test"===e.getTreatment(a.p.OggyOnGOS))}},1182:(e,t,i)=>{i.d(t,{w:()=>u});var n=i(92379),a=i(48405),r=i(55368),o=i(83507),s=i(99402),l=i(9976);function c({node:e}){const t=n.useContext(l.nS.Context);return n.useEffect((()=>{if(t&&!e.isConnected)return t.prepend(e),()=>e.remove()}),[e]),null}const d=a.D;function u({children:e,display:t,dataGdsTheme:i="light"}){const a=n.useMemo((()=>{const e=document.createElement("div");e.style.position="absolute",e.style.zIndex=String(s.op),e.setAttribute("data-gds-theme",i);const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=(0,o.n)("designSystem"),e.appendChild(t),e}),[]);return n.createElement(n.Fragment,null,n.createElement(d,{default:a},n.createElement(r.A,{scheme:i,style:t?{display:t}:void 0},n.createElement(o.L,{chunkName:"designSystem"},e))),n.createElement(c,{node:a}))}},42744:(e,t,i)=>{i.d(t,{L:()=>a});var n=i(70843);function a(e){return"test"===e.peekTreatment(n.p.GhostProtocol)}},64434:(e,t,i)=>{i.d(t,{b:()=>n});const n=e=>({hwrSetEnabled:async t=>{await e.api.hwrSetEnabled(t)},hwrStartTracking:async t=>{await e.api.hwrStartTracking(t)},hwrStopTracking:async t=>{await e.api.hwrStopTracking(t)},hwrStartTrackingDomain:async t=>{await e.api.hwrStartTrackingDomain(t)},hwrStopTrackingDomain:async t=>{await e.api.hwrStopTrackingDomain(t)},hwrOptOut:async()=>{await e.api.hwrOptOut()},hwrOptIn:async()=>{await e.api.hwrOptIn()},hwrOptInPopupShown:async()=>{await e.api.hwrOptInPopupShown()},hwrDenyClipboardAccess:async()=>{await e.api.hwrDenyClipboardAccess()},hwrAllowClipboardAccess:async()=>{await e.api.hwrAllowClipboardAccess()}})},42175:(e,t,i)=>{i.d(t,{QU:()=>a,Uv:()=>n,XW:()=>s,_f:()=>r,bd:()=>c,dL:()=>o,yg:()=>l,ym:()=>d});const n=2,a=20,r=92,o=10,s=["chat.openai.com","gemini.google.com","www.perplexity.ai","perplexity.ai","chatgpt.com","claude.ai","www.wikipedia.org",".wikipedia.org"],l=["docs.google.com"],c=1e4,d={howItWorks:"https://grammarly.com",learnMoreTransparency:"https://grammarly.com",learnMoreSafety:"https://grammarly.com",learnMoreControl:"https://grammarly.com",reportAnIssue:"https://support.grammarly.com/hc/en-us"}},18838:(e,t,i)=>{if(i.d(t,{C0:()=>c,E3:()=>s,MP:()=>o,Ng:()=>r,YI:()=>l,wg:()=>a}),6168!=i.j)var n=i(42175);const a=6168!=i.j?{kind:"initial",allDomainsTrackingEnabled:!1}:null;function r(e,t,i){if("enabled"===i.kind){const n=i.domainSettings.find((({domain:e})=>e===t));return!!n&&(n.logAllDocuments?!n.pausedDocumentIds.includes(e):n.activeDocumentIds.includes(e))}return!1}function o(e,t,i){var n;if("enabled"===i.kind){const a=i.domainSettings.find((({domain:e})=>e===t));return!!a&&(!!a.logAllDocuments||((null===(n=a.pausedDocumentIds)||void 0===n?void 0:n.includes(e))||a.activeDocumentIds.includes(e)))}return!1}function s(e,t){var i,n;return"enabled"===t.kind&&Boolean(null===(n=null===(i=t.domainSettings)||void 0===i?void 0:i.find((({domain:t})=>t===e)))||void 0===n?void 0:n.logAllDocuments)}function l(e,t,i,a=!1){if("enabled"===(null==t?void 0:t.kind)&&void 0===t.deniedClipboardAccessSince){const r=void 0===t.allowedClipboardAccess?function(e){return"enabled"===(null==e?void 0:e.kind)&&e.domainSettings.some((e=>e.logAllDocuments?e.logAllDocuments:e.activeDocumentIds.length>0))}(t):t.allowedClipboardAccess,o=t.allDomainsTrackingEnabled?""!==e&&n.yg.concat((null==i?void 0:i.blockedDomains)||[]).every((t=>!new RegExp(t).test(e))):n.XW.some((t=>new RegExp(t).test(e)));return r&&(o||a)}return!1}function c(e){return!!e&&("initial"!==e.kind&&"disabled"!==e.kind||"disabled"===e.kind&&e.disabledByUser)}},35614:(e,t,i)=>{i.d(t,{SU:()=>f,U8:()=>b,gm:()=>v,ol:()=>m});var n=i(90023),a=i(92379),r=i(13391),o=i(50750),s=i(59179),l=i(18519),c=i(66878),d=i(84714),u=i(14969),p=i(58303),g=i(90595),h=i(40594);const m=(e,t)=>!e.anonymous&&!e.premium&&t.isGateEnabled(g.K.InProductDiscountSpecialOffer),f=e=>(0,n.zG)(o.D(e.getSpecialOffer({names:["in_product_discount_pro"]})),s.U((0,n.ls)(p.Uo,p.tS((e=>p.ij(e.in_product_discount_pro))),p.UI((e=>!0===e.eligibility)))),l.V(2e3),c.K((()=>(h.Y.create("inProductDiscount").warn("getSpecialOffer request did not finish within 2000ms"),d.of(p.of(!1))))),u.P()),v=(e,t)=>r.h.combine(e,t,((e,t)=>({...e,hasSpecialOffer:t}))),b=a.createContext({hasSpecialOffer:r.h.create(!1)})},24435:(e,t,i)=>{if(i.d(t,{Lt:()=>u,kt:()=>p,nM:()=>l}),6168!=i.j)var n=i(28338);if(6168!=i.j)var a=i(70843);var r=i(90595);if(6168!=i.j)var o=i(99548);if(6168!=i.j)var s=i(85098);const l=(e,t)=>c(e,t)||d(e,t),c=(e,t)=>u(e)&&t===s.N,d=(e,t)=>"test"===e.getTreatment(a.p.KnowledgeHubAtlassian)&&t.endsWith("atlassian.net"),u=e=>e.isGateEnabled(r.K.KnowledgeHubGdocs),p=e=>t=>{switch(t.knowledgeHubCardType.value){case o.fp.SuggestedTerm:return!0;case o.fp.TermDetails:return e;default:return(0,n.L0)(t.knowledgeHubCardType.value)}}},85041:(e,t,i)=>{i.d(t,{c:()=>a});var n=i(90595);const a=e=>e.isGateEnabled(n.K.KnowledgeHubGmail)},78819:(e,t,i)=>{i.d(t,{a:()=>o});var n=i(85041),a=i(90595);var r=i(24435);const o=e=>(0,r.Lt)(e)||(0,n.c)(e)||(e=>e.isGateEnabled(a.K.KnowledgeHubSlack)||e.isGateEnabled(a.K.KnowledgeHubWord))(e)},81248:(e,t,i)=>{i.d(t,{u:()=>a,y:()=>n});var n,a,r=i(28338),o=i(48758),s=i(3038);function l({id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:a,revertDelta:r,highlightRanges:s,highlightTexts:l,transformRange:c,transformText:d,title:u}){return{_tag:o.b.touchTypist,id:e,touchTypistId:t,kind:i,replacement:n,previewDelta:a,revertDelta:r,revision:"",highlightRanges:s,highlightTexts:l,transformRange:c,transformText:d,transforms:[],extraProperties:{},title:u}}!function(e){e.Preview="Preview",e.RecentRevert="RecentRevert",e.Revert="Revert"}(n||(n={})),function(e){function t(e,t){const i=e=>""===e.trim();return i(e)||i(t)?i(t)?`Removed “${e}”`:`Added “${t}”`:e}e.is=function(e){return e._tag===o.b.touchTypist},e.equals=function(e,t){return o.S.ordering.areSame(e,t)},e.createHighlightsMeta=function(e,t){return{highlightId:t,alertId:e.id,...function(e){switch(e){case n.Preview:return{highlightColor:s.hE.Preset.create(s.al.red),highlightDisplayFormat:s.jk.underlineAndPersistentBackground};case n.RecentRevert:return{highlightColor:s.hE.Preset.create(s.al.green),highlightDisplayFormat:s.jk.background};case n.Revert:return{highlightColor:s.hE.Preset.create(s.al.gray),highlightDisplayFormat:s.jk.dottedUnderlineAndBackground};default:(0,r.L0)(e)}}(e.kind),highlightDisappearOnHoverDelay:null,highlightLiveliness:null}},e.fromPreview=function(){return({id:e,touchTypistId:t,begin:i,end:a,original:r,highlight:o,replacement:s,delta:c,reverseDelta:d})=>{const u={start:o.s,end:o.e},p=o.text,g={start:i,end:a},h=r;return l({id:String(e),touchTypistId:t,kind:n.Preview,replacement:s,previewDelta:c,revertDelta:d,highlightRanges:[u],highlightTexts:[p],transformRange:g,transformText:h,title:""})}},e.fromRevert=function(){return({revertId:e,touchTypistId:i,highlightBegin:a,highlightEnd:r,highlightText:o,text:s,isRecent:c,correspondingPreview:d})=>{const u={start:a,end:r},p=u,g=o;return l({id:String(e),touchTypistId:i,kind:c?n.RecentRevert:n.Revert,replacement:s,previewDelta:d.delta,revertDelta:d.reverseDelta,highlightRanges:[u],highlightTexts:[o],transformRange:p,transformText:g,title:t(s,d.replacement)})}},e.createRevertTitle=t}(a||(a={}))},19540:(e,t,i)=>{i.d(t,{c:()=>d});var n=i(13391),a=i(84308),r=i(59179),o=i(20161),s=i(36344),l=i(63532),c=i(55388);class d{constructor(e,t){this._lastSubmittedShortcutValue=e,this._isInputFocused=t,this._isActiveHotkeyChange=n.h.create(!1),this.onApplyHotkeyChange=e=>{e.setTouchTypistHotkey({hotkey:this._tmpHotkey.get()}),this._isActiveHotkeyChange.set(!1)},this.onDismissHotkeyChange=()=>{this._tmpHotkey.set(this._lastSubmittedShortcutValue),this._isActiveHotkeyChange.set(!1)},this.onIsActiveHotkeyChange=()=>{this._isActiveHotkeyChange.set(!0)},this._tmpHotkey=n.h.create(this._lastSubmittedShortcutValue)}listenToHotkeyChange(e){return a.a([this._isActiveHotkeyChange,this._isInputFocused]).pipe(r.U((([e,t])=>e&&t)),o.w((t=>t?(0,c.A8)(self,e):s.E)),l.b((({shortcut:e})=>{this._tmpHotkey.set(e)}))).subscribe()}get isActiveHotkeyChange(){return this._isActiveHotkeyChange}get tmpHotkey(){return this._tmpHotkey}}},55388:(e,t,i)=>{i.d(t,{A8:()=>v,_w:()=>b});var n=i(44071),a=i(13712),r=i(29416),o=i(63532),s=i(97092),l=i(59179),c=i(90572);if(6168!=i.j)var d=i(64271);function u(e){const t=new Set;return e.filter((e=>{const i=e.code.toLowerCase();return!t.has(i)&&(t.add(i),!0)}))}function p(e,t){return"ControlLeft"===e.code||"ControlRight"===e.code?t?"⌃":"Ctrl":"ShiftLeft"===e.code||"ShiftRight"===e.code?"⇧":"AltLeft"===e.code||"AltRight"===e.code?t?"⌥":"Alt":"MetaLeft"===e.code||"MetaRight"===e.code?t?"⌘":"Win":"ArrowUp"===e.code?"↑":"ArrowDown"===e.code?"↓":"ArrowLeft"===e.code?"←":"ArrowRight"===e.code?"→":"Home"===e.code?"Home":"End"===e.code?"End":"PageUp"===e.code?"PageUp":"PageDown"===e.code?"PageDown":"Backspace"===e.code?"Backspace":"Delete"===e.code?"Delete":"Enter"===e.code?"Enter":"Tab"===e.code?"Tab":"Space"===e.code?"Space":e.code.startsWith("F")&&!isNaN(parseInt(e.code.substring(1),10))?e.code:"Escape"===e.code?"ESC":"CapsLock"===e.code?"CapsLock":"NumLock"===e.code?"NumLock":"ScrollLock"===e.code?"ScrollLock":"PrintScreen"===e.code?"PrintScreen":"Pause"===e.code?"Pause":"MediaPlayPause"===e.code?"MediaPlayPause":"VolumeUp"===e.code?"VolumeUp":"VolumeDown"===e.code?"VolumeDown":"AudioVolumeMute"===e.code?"Mute":e.code.startsWith("Digit")?e.code.slice(5):e.code.startsWith("Numpad")?e.code.slice(6):"Equal"===e.code?e.shiftKey?"plus":"=":"Minus"===e.code?"-":"NumpadAdd"===e.code?"plus":"NumpadSubtract"===e.code?"-":"NumpadEqual"===e.code?"=":null}function g(e){return function(t){return{shortcut:t.map((t=>{const i=p(t,e);return i||(t.code.toLowerCase().startsWith("key")?t.code.slice(3):t.code)})).join("")}}}function h(e,t,i){return e.map((e=>{const n=function(e,t,i){return["Tab","Enter","Backspace","ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].some((n=>e===n&&t===p({code:e},i)))}(e.code,t.get(),i);return n&&(e.preventDefault(),e.stopImmediatePropagation()),e}))}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function f(e){return e.sort(((e,t)=>t.code.length-e.code.length))}function v(e,t){const i=n.R(e,"keydown",{capture:!0}).pipe(a.g("code")),d=n.R(e,"keyup",{capture:!0}).pipe(r.b(50));return i.pipe(o.b(m),s.f(d),l.U(u),c.h((e=>e.length>0)),l.U(f),l.U(g(t)))}function b(e,t,i){const a=n.R(e,"keydown",{capture:!0}),r=n.R(e,"keyup",{capture:!0}),s=new Map;return d.T(a.pipe(o.b((e=>{s.set(e.code,e)}))),r.pipe(o.b((e=>{s.delete(e.code)})))).pipe(l.U((()=>[...s.values()])),o.b((e=>h(e,i,t))),l.U(f),l.U((e=>{const{shortcut:i}=g(t)(e);return{shortcut:i,events:e}})))}},53981:(e,t,i)=>{i.d(t,{h:()=>n});const n=e=>({getConfiguration:async t=>await e.api.getUphookHubConfiguration(t),getConfigurationsFromSlots:async t=>await e.api.getUphookHubConfigurationsFromSlots(t),trackConfiguration:async(t,i)=>await e.api.trackUphookHubConfiguration(t,i)})},3620:(e,t,i)=>{i.d(t,{o:()=>n});const n=e=>({getSpecialOffer:async t=>await e.api.getSpecialOffer(t)})},62805:(e,t,i)=>{i.d(t,{Qi:()=>s,jc:()=>l,nE:()=>o});var n=i(90595);const a=e=>e.reduce(((e,t)=>{const i=t.lensType;return e[i]=e[i]?e[i]+1:1,e}),{}),r=e=>{const{experimentClient:t,upgradeHookName:i}=e;if(!t)return!0;const a=t.isGateEnabled(n.K.UphookGnarEvents);var r;return!(!!(r=i)&&("extensionSettings"===r||"plagiarism"===r||"toneDetector"===r))||a},o=(e,t)=>{if(!r(t))return;const{placement:i,bannerType:n,advancedAlerts:o=[],inline:s=!1,numberOfAdvancedAlerts:l,numberOfCriticalAlerts:c,sessionUuid:d,upgradeHookName:u,upgradeHookSlot:p,upgradeHookVariant:g}=t,h=a(o);e.getPremiumButtonShow(i,n,h.clarity,h.correctness,h.delivery,h.engagement,s,(null!=l?l:o.length>0)?o.length:void 0,c,d,u,p,g)},s=(e,t)=>{if(!r(t))return;const{placement:i,bannerType:n,advancedAlerts:o=[],inline:s=!1,numberOfAdvancedAlerts:l,numberOfCriticalAlerts:c,sessionUuid:d,upgradeHookName:u,upgradeHookSlot:p,upgradeHookVariant:g}=t,h=a(o);e.getPremiumButtonClick(i,n,h.clarity,h.correctness,h.delivery,h.engagement,s,(null!=l?l:o.length>0)?o.length:void 0,c,d,u,p,g)},l=(e,t)=>{if(!r(t))return;const{placement:i,bannerType:n,advancedAlerts:o=[],inline:s=!1,numberOfAdvancedAlerts:l,numberOfCriticalAlerts:c,sessionUuid:d,upgradeHookName:u,upgradeHookSlot:p,upgradeHookVariant:g}=t,h=a(o);e.dismissUpHookButtonClick(i,n,h.clarity,h.correctness,h.delivery,h.engagement,s,(null!=l?l:o.length>0)?o.length:void 0,c,d,u,p,g)}},77590:(e,t,i)=>{i.d(t,{B:()=>n});var n,a=i(32073),r=i(90189),o=i(16381),s=i(15380),l=i(13736),c=i(56623),d=i(67960);!function(e){function t(e){const t=()=>{e.bgRpc.api.sendToPopup({kind:s.I.Kind.sendCsLogs,option:{logs:e.historyLogsService.getLogs(),isIframeIntegration:(0,o.n_)()}})};return e.message.on(s.B.Kind.sendCsLogsToPopup,t),{dispose(){e.message.off(s.B.Kind.sendCsLogsToPopup,t)}}}function i(e){return[new c.r("bg",(()=>e.bgRpc.api.getBGLogs()),c.r.getLogsFromSessionStorageFallbackGetter(d.v.bgHistoryLogs)),new c.r("cs",(()=>Promise.resolve(e.historyLogsService.getLogs())),c.r.getLogsFromSessionStorageFallbackGetter(d.v.csHistoryLogs))]}function n(e){return e.message.on(s.B.Kind.downloadDebugReportsFromCS,p),{dispose(){e.message.off(s.B.Kind.sendCsLogsToPopup,p)}}}function u(e){const t=(0,o.n_)()?new a.w0:l.E.initKeyboardShortcutHandler(i(e));return{dispose(){t.unsubscribe()}}}function p(){const e=i((0,r.OB)());l.E.download(e)}e.initSendLogsToPopupHandler=t,e.initDownloadDebugReportsListener=n,e.initKeyboardShortcutHandler=u,e.initListeners=function(e){const i=[t(e),u(e),n(e)];return{dispose(){i.forEach((e=>{e.dispose()}))}}},e.download=p}(n||(n={}))},42192:(e,t,i)=>{i.d(t,{N:()=>s,h:()=>l});var n=i(39953);if(6168!=i.j)var a=i(91957);if(6168!=i.j)var r=i(48758);var o=i(43389);const s=(e,t,i,a)=>{(0,n.zG)(t,o.$.match({withPosition:n=>e.warn(`positioned alert #${t.id} inconsistent with document text: alert (${JSON.stringify(n.transformText)}, ${JSON.stringify(n.highlightTexts)}) vs text (${JSON.stringify(i.slice(n.transformRange.start,n.transformRange.end))}, ${JSON.stringify(n.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`),withTransformJSON:t=>{e.warn(`transformJson alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.transformText)}, ${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(i.slice(t.transformRange.start,t.transformRange.end))}, ${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`)},withSubAlerts:t=>e.warn(`super alert #${t.id} inconsistent with document text: alert (${JSON.stringify(t.highlightTexts)}) vs text (${JSON.stringify(t.highlightRanges.map((e=>i.slice(e.start,e.end))))}) -- ${a}`)}))},l=(e,t)=>{r.S.isCommonAlert(t)&&r.S.isRevertAutoApplyAlert(t)&&e.autoApply.inconsistentRevertAlertError((0,a.Cg)(),t.originalPatternName)}},23650:(e,t,i)=>{var n;i.d(t,{i:()=>n}),function(e){e.textChange="textChange",e.reset="reset",e.alertAccepted="alertAccepted",e.alertUpdate="alertUpdate",e.capiRemove="capiRemove",e.ignore="ignore"}(n||(n={}))},26051:(e,t,i)=>{i.d(t,{IH:()=>a,JH:()=>m,SV:()=>n,W8:()=>h});var n,a,r=i(90023),o=i(55812),s=i(27947),l=i(28338),c=i(74822),d=i(58303);if(6168!=i.j)var u=i(72350);if(6168!=i.j)var p=i(13583);!function(e){let t,i;!function(e){e.alertApply="alertApply",e.alertIgnore="alertIgnore"}(t=e.Kind||(e.Kind={})),function(e){e.assistant="assistant",e.sidebar="sidebar",e.inlineCard="inlineCard"}(i=e.Source||(e.Source={})),e.isAlertApply=function(e){return e.kind===t.alertApply},e.isAlertIgnore=function(e){return e.kind===t.alertIgnore}}(n||(n={})),(0,l.L0)(void 0),function(e){e.create=function(){return new g}}(a||(a={}));class g{constructor(){this.events=new c.x}next(e){this.events.next(e)}}function h(e,t,i){switch(t){case p.H.apply:return d.G({kind:n.Kind.alertApply,source:n.Source.inlineCard,alertId:u.wQ.Id.create(e),freePremium:i});case p.H.ignore:return d.G({kind:n.Kind.alertIgnore,source:n.Source.inlineCard,alertId:u.wQ.Id.create(e),freePremium:i});default:return d.YP}}function m(e,t){return i=>{switch(i.type){case s.lY.Type.alertApply:return(0,r.zG)(e.getById(i.alertId),d.tS(o.bZ.getRawId),d.UI((e=>({kind:n.Kind.alertApply,source:t,alertId:e}))));case s.lY.Type.alertIgnore:return(0,r.zG)(e.getById(i.alertId),d.tS(o.bZ.getRawId),d.UI((e=>({kind:n.Kind.alertIgnore,source:t,alertId:e}))));default:return d.YP}}}},38037:(e,t,i)=>{i.d(t,{M:()=>P,O:()=>M});var n=i(64271),a=i(93440),r=i(59179),o=i(10883),s=i(20161),l=i(14969),c=i(44045),d=i(29479),u=i(90572),p=i(72350),g=i(72008),h=i(33442);var m=i(81248),f=i(23650),v=i(48758),b=i(67385),S=i(26155),w=i(3038),y=i(39963),E=i(20905),k=i(40594),C=i(25714);var _=i(1407);function A(e){return e.isPremium&&e.isHidden}var I=i(84714),T=i(5588);var x=i(78767);function R(e){return(0,n.T)((t=e.textRevisionManager.revisionChanges,t.pipe((0,T.D)((e=>1===Math.abs(e.deltaChanges.length)?(0,a.H)(1e3).pipe((0,r.U)((()=>e))):(0,I.of)(e))))),M(e.textObserver,e.layout)).subscribe((t=>{!function(e,t,i,n,a){if(e){const e=(0,x.DV)((()=>t.processPendingTextRevisions()),(e=>(a.warn("alertProcessor: processing text revision failed",e),null)));try{const r=e&&e.transformedAlerts.map((e=>t.alerts.getAlertById(e.id))).filter((e=>null!==e))||[];try{const e=r.flatMap((e=>i.get(e.id)||[]));n.maintainConsistency(e,void 0,void 0,((e,t)=>r.some((e=>e.id===t.alertId))))}catch(e){a.error("error maintaining highlight consistency",e)}}catch(e){a.error("failed on update/maintain",e)}}try{n.recalculateAllHighlights()}catch(e){a.error("error recalculating highlights",e)}}(t,e.alertProcessor,e.alertIdToHighlightIds,e.highlights,e.log)}));var t}class P{constructor(e,t,i,a,o,s,l,c=k.Y.create("AquaAlertsWiring"),d,u,p,g){this._alertProcessor=e,this._highlights=t,this._alertFilter=i,this._textObserver=a,this._textRevisionManager=o,this._layout=s,this._felog=l,this._log=c,this._isAssistantOpened=d,this._showInlineLockedUIUnderlines=u,this._showColoredLockedUIUnderlines=p,this._isLockedUIExperimentTreatmentGroup=g,this._subs=[],this._alertIdToHighlightIds=new Map,this._alertsToProcessOnFilterChange=this._alertFilter.pipe((0,r.U)((e=>{const t=[],i=[];for(const e of this._alertProcessor.alerts.getAll()){const n=this._alertIdToHighlightIds.get(e.id);n&&n.some((e=>this._highlights.hasHighlight(e)))?i.push(e):t.push(e)}return{addedAlerts:t,updatedAlerts:i,removedAlerts:[],transformedAlerts:[]}}))),this._subs.push(R({alertIdToHighlightIds:this._alertIdToHighlightIds,layout:this._layout,log:this._log,textRevisionManager:this._textRevisionManager,textObserver:this._textObserver,highlights:this._highlights,alertProcessor:this._alertProcessor})),this._subs.push(this._updateHighlightsOnAlertChange()),this._subs.push(function(e,t,i,a){let r=e.getTextSource().getPlainText().length;return(0,n.T)(i.revisionChanges,M(e,t)).subscribe((e=>{if(e){const t=e.deltaChanges.length;if(1===Math.abs(t)){const i=Math.min(...e.changes.map((e=>e.pos)));let n=0;n=r+t-1;const o={start:i,end:n};a.updateHighlightsForTextRange(o,t)}r+=t}}))}(this._textObserver,this._layout,this._textRevisionManager,this._highlights))}static getHighlightColor(e,t,i,n,a){const{ethical_ai_highlight_background_color:r,ethical_ai_highlight_underline_color:o,critical_mistake:s,reactivation_yellow_underlines:l}=e.extraProperties,c=_.p.shouldShowInlineYellowUnderlinesForInProductReactivation(l),d=P._shouldReplaceColorWithYellow(e,t,a,n,i,c);return c&&(0,y.Tb)().sendFemetricsRate("inProductReactivation.shown",{yellowOnClient:d}),s?P._getSimplifiedHighlightColor(e,d):P._getExtendedHighlightColor(e,d,r,o)}static _getSimplifiedHighlightColor(e,t){const{critical_mistake:i}=e.extraProperties;return t?w.hE.Preset.create(w.al.gold):"true"===i?w.hE.Preset.create(w.al.red):e.outcome===b.TC.vox?P._outcomeToHighlightColor[b.TC.vox]:w.hE.Preset.create(w.al.blue)}static _getExtendedHighlightColor(e,t,i,n){return i&&n?w.hE.Custom.create(i,n):t?w.hE.Preset.create(w.al.gold):(0,h.JD)(e.patternName)?w.hE.Preset.create(w.al.gray):(0,g.t)(e.patternName)?w.hE.Preset.create(w.al.green):(e=>e.startsWith("Plagiarism/Plagiarism/UnoriginalContent"))(e.patternName)?w.hE.Preset.create(w.al.plagiarism):e.extraProperties.underline_with_teaser?w.hE.Preset.create(w.al.weHbar):e.impact===p.wQ.Impact.Critical?w.hE.Preset.create(w.al.red):P._outcomeToHighlightColor[e.outcome]}static getHighlightDisplayFormat(e){return e.belongsToKnowledgeHubTermDetails?w.jk.background:e.belongsToKnowledgeHubSuggestedTerm?w.jk.underline:e.isEnclosing?w.jk.enclosing:e.isEnclosed?e.isMain?w.jk.underline:e.isMainStart?w.jk.underlineStart:w.jk.underlineAndBackground:e.belongsToActiveAlert&&e.belongsToSuperAlert?e.isActive?w.jk.underlineAndBackground:w.jk.background:w.jk.underlineAndBackground}static _extractHighlightInfo(e,t){const i="enclosing"===t.type,n=e.highlightRanges.some((e=>"enclosing"===e.type));return{isEnclosing:i,isEnclosed:n,isMain:"main"===t.type,isMainStart:"main_start"===t.type,belongsToKnowledgeHubTermDetails:(0,h.Ed)(e),belongsToKnowledgeHubSuggestedTerm:(0,h.kK)(e)}}static getHighlightMeta(e,t,i,n,a,r,o){if(v.S.isTouchTypistAlert(e))return m.u.createHighlightsMeta(e,t);const{hColor:s,dFormat:l}=this._getHighlightColorAndFormat(e,i,n,a,r,o);return{highlightId:t,alertId:e.id,highlightColor:s,highlightDisplayFormat:l,highlightDisappearOnHoverDelay:null,highlightLiveliness:null}}static _getHighlightColorAndFormat(e,t,i,n,a,r){let o=v.S.isCapiAlert(e)?P.getHighlightColor({...e,isPremium:!e.isFree,isHidden:e.isHidden},i,n,a,r):null,s=v.S.isCapiAlert(e)?P.getHighlightDisplayFormat(P._extractHighlightInfo(e,t)):null;return e._tag===v.b.snippetsTemplate&&(o=w.hE.Preset.create(w.al.green),s=w.jk.background),{hColor:o,dFormat:s}}_addHighlightsFor(e,t){e.highlightRanges.forEach(((i,n)=>{const a=S.y$.Id.create(e.id,n),r=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...r,a]),this._highlights.addHighlight(a,S.NC.expandIfNeeded(i,t),P.getHighlightMeta(e,a,i,this._isAssistantOpened.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get()))}))}_updateHighlightsFor(e,t){const i=this._alertIdToHighlightIds.get(e.id);if(i&&i.length!==e.highlightRanges.length)this._clearHighlightsFor(e.id),this._addHighlightsFor(e,t);else{const n=[];e.highlightRanges.forEach(((a,r)=>{let o;const s=null==i?void 0:i[r];s?o=s:(o=S.y$.Id.create(e.id,r),n.push(o)),this._highlights.updateHighlight(o,S.NC.expandIfNeeded(a,t),P.getHighlightMeta(e,o,a,this._isAssistantOpened.get(),this._showInlineLockedUIUnderlines.get(),this._showColoredLockedUIUnderlines.get(),this._isLockedUIExperimentTreatmentGroup.get()))}));const a=this._alertIdToHighlightIds.get(e.id)||[];this._alertIdToHighlightIds.set(e.id,[...a,...n])}}_updateHighlightsOnAlertChange(){return(0,n.T)(this._alertProcessor.alerts.changes.pipe(C.d5.measure(this._felog.processAlerts.measure)),this._alertsToProcessOnFilterChange.pipe(C.d5.measure(this._felog.processFilterChange.measure))).pipe((0,o.M)(this._alertFilter),(0,r.U)((([{addedAlerts:e,removedAlerts:t,transformedAlerts:i,updatedAlerts:n},a])=>({addedAlerts:e.filter(a),updatedAlerts:n.filter(a),transformedAlerts:i.filter((e=>{const t=this._alertProcessor.alerts.getAlertById(e.id);return!!t&&a(t)})),removedAlerts:[...t.filter((e=>a(e.alert))),...n.filter((e=>!a(e))).map((e=>({id:e.id,alert:e,reason:{_tag:f.i.alertUpdate}})))]}))),u.h((e=>e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0||e.removedAlerts.length>0))).subscribe((e=>{try{for(const t of e.removedAlerts)this._clearHighlightsFor(t.id)}catch(e){this._log.error("failed to remove highlights",e)}if(e.addedAlerts.length>0||e.updatedAlerts.length>0||e.transformedAlerts.length>0){const t=this._textObserver.getTextSource().getPlainText();for(const i of e.addedAlerts)try{this._addHighlightsFor(i,t)}catch(e){this._log.warn(`failed to add highlight for #${i.id}`,e)}for(const i of e.updatedAlerts)try{this._updateHighlightsFor(i,t)}catch(e){this._log.error(`failed to update highlight for #${i.id}`,e)}for(const i of e.transformedAlerts)try{const e=this._alertProcessor.alerts.getAlertById(i.id);e&&this._updateHighlightsFor(e,t)}catch(e){this._log.error(`failed to update highlight geometry for #${i.id}`,e)}}}))}_clearHighlightsFor(e){const t=this._alertIdToHighlightIds.get(e);t&&(this._highlights.removeHighlights(t),this._alertIdToHighlightIds.set(e,[]))}static _shouldReplaceColorWithYellow(e,t,i,n,a,r){if(function(e){const{free_premium:t}=e.extraProperties;return e.inline===p.wQ.Inline.inline&&A(e)&&"uphook"===t}(e))return!0;if(t){const t=!i||!n;return A(e)&&t||r}return!(!function(e){const{free_premium:t}=e.extraProperties;return e.inline===p.wQ.Inline.inline&&A(e)&&"locked"===t}(e)||!a||n)||!!r}getHighlightsForAlert(e){return this._alertIdToHighlightIds.get(e)||[]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}function M(e,t){return e.contentChanges.async.pipe((0,s.w)((()=>t.scroll.changes.pipe((0,l.P)(),(0,c.R)((0,a.H)(E.E0)),(0,d.h)(null)))))}P._outcomeToHighlightColor={[b.TC.correctness]:w.hE.Preset.create(w.al.red),[b.TC.clarity]:w.hE.Preset.create(w.al.blue),[b.TC.engagement]:w.hE.Preset.create(w.al.green),[b.TC.tone]:w.hE.Preset.create(w.al.purple),[b.TC.vox]:w.hE.Preset.create(w.al.gray),[b.TC.knowledgeHub]:w.hE.Preset.create(w.al.lightGreen),[b.TC.other]:w.hE.Preset.create(w.al.gold)}},50787:(e,t,i)=>{i.d(t,{o:()=>o});var n=i(77115),a=i(90572),r=i(559);function o(e,t){const i=t.pipe(a.h((0,n.Kg)(r.hX.is("session_started"),r.hX.is("finish")))).subscribe((t=>{var i;return null===(i=e())||void 0===i?void 0:i.pushStartOrFinishEvent(t)}));return{dispose:()=>i.unsubscribe()}}},4437:(e,t,i)=>{i.d(t,{I:()=>c,O:()=>n});var n,a=i(92379),r=i(68898),o=i(54587),s=i(48886),l=i(28835);!function(e){e.Context=a.createContext(o.Y.invariantContent("AssistantTextResources")),e.holder=s.VF((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(n||(n={}));const c=l.Pj(l.GG({denali:r.m.holder,assistant:n.holder}))((()=>({denali:{}})))},53730:(e,t,i)=>{var n;i.d(t,{O:()=>n}),function(e){e.headerHeight=48,e.panelHeight=106,e.predictionsPreviewHeaderHeight=52,e.predictionInsightHeight=52,e.predictionInsightBottomMargin=16}(n||(n={}))},47268:(e,t,i)=>{i.d(t,{t:()=>P});var n=i(90023),a=i(14527),r=i(95812),o=i(7666),s=i(91219),l=i(88012),c=i(81933),d=i(28338),u=i(12518),p=i(58303),g=i(59833),h=i(73823),m=i(61797),f=i(39214),v=i(26155),b=i(63310),S=i(89803),w=i(74822),y=i(90572),E=i(59179),k=i(954),C=i(68418),_=i(14128),A=i(40594);class I{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new w.x,this.highlightDataChanged=this._highlightDataChanged}getByHighlightId(e){return this._mapByHighlightId.get(e)}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightDataObs(e){return this._highlightDataChanged.pipe(y.h((t=>t===e)),E.U((()=>this.getByHighlightId(e))),k.O(this.getByHighlightId(e)))}}class T{constructor(e,t,i,n,a=(()=>C.E9.zero),r=A.Y.create("DenaliHighlightsUpdater")){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=n,this._getParentScroll=a,this._log=r}register(e,t,i,n){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,n);{const a=new S.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),r={id:e,alertId:n.alertId,mark:a,visualization:i};this._denaliHighlights.set(e,r);const o=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,_.rX)((0,_.mp)(a.range),o),n),r}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,n){const a=this._denaliHighlights.get(e);if(a){this._denaliHighlights.set(e,{...a,visualization:i});const r=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,_.rX)(t.meta.range(),r),n),a}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var x=i(67800),R=i(20905);class P{constructor(e,t,i,a,r,o,s=A.Y.create("DenaliViewAdapter"),d,g){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=a,this._scroller=r,this._selectedHighlightsTracker=o,this._log=s,this._requestAwaitService=d,this._formattingService=g,this._subs=new l.w.Keeper,this._disposed=!1,this._highlightedAlertId=null,this._marks=new Map,this.markChangeApplied=new c.Subject,this._highlightsDataStore=new I,this._highlightUpdater=new T(this._highlightsDataStore,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return b.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._highlightsDataStore.getHighlightDataObs(e).pipe(c.map((e=>e&&e.visualization.type===S.sO.Change.VisualState.Type.highlighted?{[S.sO.Change.VisualState.Source.sidebar]:v.pc.hoveredNeedsAttention,[S.sO.Change.VisualState.Source.text]:v.pc.hovered,[S.sO.Change.VisualState.Source.api]:this._highlightedAlertId===e.alertId?v.pc.hovered:v.pc.none}[e.visualization.source]:v.pc.none)))},this._updateContentsBuffer=new c.Subject,this._flushUpdater=new c.Subject,this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${String(e)}, ${String(t)}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return m.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return m.RI.resFromText(i)}},this.changes=c.mergeStatic((0,n.zG)(m.RI.res(this.getContents().delta),u.g_((()=>c.EMPTY),(e=>c.of(e)))),this._textObserver.contentChanges.async.pipe(c.filter((e=>e.changes.length>0)),c.map((({deltaChange:e})=>e)))),this.activeMarks=new c.BehaviorSubject(p.YP),this.contentUpdated=new c.Subject,this.hoveredMarks=new c.BehaviorSubject(p.YP),this.textChangedAfterPaste=new c.Subject,this.activeWord=new c.BehaviorSubject(p.YP),this.clickedWord=new c.BehaviorSubject(p.YP),this.ongoingSelection=new c.BehaviorSubject(!1),this._log.info(`${P.name} created`),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight(),this._trackFocusedAlert())}_trackFocusedAlert(){return this._highlightsDataStore.highlightDataChanged.pipe(c.map((e=>this._highlightsDataStore.getByHighlightId(e))),c.filter((e=>!!e))).subscribe((e=>{this._highlightedAlertId===e.alertId||e.visualization.type!==S.sO.Change.VisualState.Type.highlighted||e.visualization.source!==S.sO.Change.VisualState.Source.text&&e.visualization.source!==S.sO.Change.VisualState.Source.sidebar?e.alertId===this._highlightedAlertId&&e.visualization.type===S.sO.Change.VisualState.Type.visible&&(this._highlightedAlertId=null,this._log.trace(`Mark ${e.id} unfocused - alertId ${e.alertId}`)):(this._highlightedAlertId=e.alertId,this._log.trace(`Mark ${e.id} focused - alertId ${e.alertId}`))}))}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),m.RI.isFlush(e)?this._flushUpdater.next(void 0):m.RI.isReset(e)?this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,x.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),r.Y1.empty}get contentRect(){throw this._log.trace("contentRect"),Error("not implemented")}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),u.F2(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=v.y$.Id.createFromMark(e.id),i=e.meta.capiAlertId;switch(e.action){case o.v.Change.ActionType.create:{const n=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),a=(null==n?void 0:n.mark)||null;return a&&this._marks.set(a.id,a),a}case o.v.Change.ActionType.update:{const n=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,highlightColor:e.meta.highlightColor,highlightDisplayFormat:e.meta.highlightDisplayFormat,highlightDisappearOnHoverDelay:e.meta.highlightDisappearOnHoverDelay,highlightLiveliness:null}),a=(null==n?void 0:n.mark)||null;return a&&this._marks.set(a.id,a),a}case o.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),this._marks.delete(e.id),null;default:(0,d.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),o.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case o.v.Change.ActionType.create:e.created.set(t.id,u.ij(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.update:e.updated.set(t.id,u.ij(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case o.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,u.F2(void 0))}return e}),o.v.Change.Result.getEmpty()))}scrollToMark(e,t){var i;const n=null!==(i=this._marks.get(e))&&void 0!==i?i:null;return this._log.trace("scrollToMark",{markId:e,mark:n,opts:t}),n?this._scroller.scrollToMark(n,t):(this._log.warn(`Tried to scroll to nonexistent mark with id: ${e}`),c.EMPTY)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe(c.bufferWhen((()=>c.mergeStatic(c.timer((0,R.Xd)(20)),this._flushUpdater).pipe(c.first()))),c.filter((e=>e.length>0)),c.map((e=>e.reduce(((e,t)=>e.compose(t)),new a.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((0,f.g)(e)).then((()=>{const t=(0,f.B)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe(c.map((0,n.ls)(g.UI((e=>{var t;return(0,n.zG)(p.ij(null===(t=this._highlightsDataStore.get(e))||void 0===t?void 0:t.mark),p.hX((e=>(0,n.zG)(e.range(),u.g_(n.W8,(0,n.ff)(s.x.isEnclosingView))))))})),g.oA))).subscribe((e=>this.activeMarks.next(p.G(e))))}_updateContents(e,t){this._updateContentsBuffer.next((0,x.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),h.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(`${P.name} disposed`),this._disposed=!0}}},39214:(e,t,i)=>{i.d(t,{B:()=>c,g:()=>l});var n=i(14527),a=i(95869),r=i(7245),o=i(78767),s=i(79707);function l(e,t=!1){return e.reduce((({actions:e,index:i},r)=>{const s=e[0];return a.s.isInsertString(r)?(e.unshift({pos:{start:i,end:i},value:t&&r.attributes?(new n.i).insert(r.insert,r.attributes):r.insert}),{actions:e,index:i}):a.s.isInsertEmbed(r)?{actions:e,index:i+1}:a.s.isRetain(r)?(t&&r.attributes&&e.unshift({pos:{start:i,end:i+r.retain},value:(new n.i).retain(r.retain,r.attributes)}),{actions:e,index:i+r.retain}):a.s.isDelete(r)?(s&&s.pos.start===s.pos.end&&s.pos.end===i?s.pos={...s.pos,end:s.pos.end+r.delete}:e.unshift({pos:{start:i,end:i+r.delete},value:""}),{actions:e,index:i+r.delete}):void(0,o.vE)(r)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start&&(0,s.HD)(t.value)&&(0,s.HD)(e[e.length-1].value)?e[e.length-1].value=`${String(t.value)}${String(e[e.length-1].value)}`:e.push(t),e)),[])}const c=e=>e.reduce((({formattings:e,index:t},i)=>r.m.hasFormatting(i)?a.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):a.s.isInsertEmbed(i)?{formattings:e,index:t+1}:a.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:a.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:a.s.isInsertEmbed(i)?{formattings:e,index:t+1}:a.s.isRetain(i)?{formattings:e,index:t+i.retain}:a.s.isDelete(i)?{formattings:e,index:t}:void(0,o.vE)(i)),{formattings:[],index:0}).formattings},17513:(e,t,i)=>{i.d(t,{f:()=>s});var n=i(62552),a=i(84308),r=i(20161),o=i(26155);class s{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new n.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,r.w)((i=>null==i?t:(0,a.a)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==o.pc.none?t:e)))))}}},88725:(e,t,i)=>{i.d(t,{W:()=>n});const n=(e,t,i)=>{const n=e.textField.visibleRect.getApproximate();let a=(i||0)-n.client.top;(a<=0||a>=n.size.height)&&(a=n.size.height/2);const r=t.top-a-n.client.top;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:r})))}},25226:(e,t,i)=>{i.d(t,{t:()=>c});var n=i(39953),a=i(31789),r=i(8867),o=i(12518),s=i(14128),l=i(89803);function c({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,c)=>(0,n.zG)(l.Fd.getMarkRect(i),o.vx((()=>(t((0,s.mp)(i.range)),l.Fd.getMarkRect(i)))),o.g_((e=>a._(new Error(`Cannot get mark's rect: ${i.id}: ${e.message}`))),(t=>new r.y((i=>{i.next(void 0),e(t,c)})))))}}},27080:(e,t,i)=>{i.d(t,{H:()=>l});var n=i(90023),a=i(64271),r=i(44071),o=i(59179),s=i(93865);function l(e){const{textField:t,selectionService:i,highlights:l}=e;return(0,a.T)((0,r.R)(t,"click"),(0,r.R)(t,"keyup")).pipe((0,o.U)((()=>{const e=(0,n.zG)(i.getCurrentSelection(),s.Ey);return null===e?[]:l.intersectingHighlightIDs(e)})))}},42901:(e,t,i)=>{i.d(t,{V:()=>n});var n,a=i(53730);!function(e){e.defaultLayout={name:"default",anchorMargin:{top:a.O.headerHeight+a.O.panelHeight,bottom:0,left:16,right:16},anchorOrigin:{horizontal:"right",vertical:"top"},assistantOrigin:{horizontal:"left",vertical:"top"},repositioningStrategy:[{horizontal:"flip",vertical:"translate"},{horizontal:"translate",vertical:"translate"}]}}(n||(n={}))},57492:(e,t,i)=>{i.r(t),i.d(t,{AssistantControllerImpl:()=>Qo,AssistantService:()=>ds,LocalAssistantHighlightCollection:()=>n.c});var n=i(74746),a=i(39953),r=i(92379),o=i(88012),s=i(66006),l=i(28338),c=i(13391),d=i(74822),u=i(90572),p=i(59179),g=i(49601),h=i(20161),m=i(84714),f=i(84308),v=i(44071),b=i(954),S=i(10883),w=i(44045),y=i(63532),E=i(2187),k=i(78129),C=i(58303),_=i(2084),A=i(72350),I=i(55880),T=i(40594),x=i(48758),R=i(57420),P=i(90023),M=i(6083),D=i(53730),F=i(24752),L=i(81933),B=i(33885),U=i(21487),O=i(90207),H=i(38406);const G=({message:e,emoji:t,emojiId:i,icon:n,iconPartName:a})=>r.createElement("div",{className:H.insight},t&&i&&r.createElement("div",{className:H.insight__inline_icon},r.createElement(O.dy,{unicodeHexArray:[i],unicodeLiteral:t})),n&&r.createElement("div",{className:H.insight__inline_icon,"data-grammarly-part":a},n),r.createElement("div",{className:H.insight__inline_text},e));var N,z=i(36493),V=i(98496),W=i(98583);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(N||(N={}));const j=({predictionsVM:e})=>U.UI.mount(X,e.previewFlow),q=U.UI.Grid.make((({slots:e})=>r.createElement("div",{className:W.predictions},r.createElement("div",{className:W.predictions__header},"Predictions"),r.createElement(B.F.Fragment,null,e.children)))),K=({children:e,count:t,dataPartName:i})=>r.createElement(z.Z,{kind:"assistant-priority-lens",dataPartName:i,marginBottom:"12px"},r.createElement("div",{className:W.predictions__card},e,t>0&&r.createElement("div",{className:W.counterContainer},r.createElement(F.CL,null,t)))),$=U.UI.Node.make((({state:e,notify:t})=>r.createElement(V.M,{clickHandler:t("select")},r.createElement(B.F.Fragment,null,e.pipe(L.map((e=>r.createElement(K,{count:e.alertsCount,dataPartName:"emogenie-prediction-card"},r.createElement(G,{key:"tone",message:"off"===e.emotion.brandToneLabel?r.createElement(r.Fragment,null,"May sound ",r.createElement("span",{className:W.predictions__off_brand},"off-brand")):`Sounds ${e.emotion.name}`,emoji:e.emotion.emoji,emojiId:e.emotion.emojiId}))))))))),Y=U.UI.Group.make({tone:(J=$,{tag:"_tag",members:{Some:(0,a.zG)(J,U.UI.contramapState((e=>e.value))),None:U.UI.Node.empty}})});var J;const X=U.UI.Union.make("kind",{[N.hidden]:U.UI.Node.empty,[N.zero]:U.UI.Node.empty,[N.visible]:U.UI.Composite.make(q,Y)});var Q,Z=i(63349),ee=i(88154),te=i(63786),ie=i(82873),ne=i(40172),ae=i(78161),re=i(70880),oe=i(60766),se=i(99887),le=i(64271),ce=i(79256),de=i(36344),ue=i(97927),pe=i(17705),ge=i(90517),he=i(29479),me=i(64443),fe=i(24332),ve=i(11318),be=i(47519),Se=i(932),we=i(95053),ye=i(94169),Ee=i(26473),ke=i(12505),Ce=i(3792),_e=i(25942),Ae=i(43749),Ie=i(77115),Te=i(14944),xe=i(21147);!function(e){function t(e,t){return re.nL.Items.mapper((e=>e.kind),{[we.X.Kind]:e,[ye.R.Kind]:t})}function i(e){return e.kind===we.X.Kind}function n(e){return e.kind===ye.R.Kind}function r(e){return i(e)&&ke.i.isEthicalAIItem(e)}function o(e){return n(e)&&ke.i.isEthicalAIItem(e)}function s(e){return{viewState:(i,n)=>t((t=>({view:t,isLastCard:i,kind:"alertCard",visibleViewportHeight:e(n)})),(t=>({view:t,isLastCard:i,kind:"alertsBundle",visibleViewportHeight:e(n)})))}}e.isSelectableWithAlertItem=(0,Ie.Kg)(i,n),e.getActiveItemWithAlert=re.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveAlignableItem=re.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.getActiveFocusableItem=re.In.getActiveItemOfType(e.isSelectableWithAlertItem),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isAlertsBundle=n,e.isEthicalAIAlertCard=r,e.isEthicalAIAlertsBundle=o,e.defaultOrd=(0,fe.g_)(Te.iP())([(0,a.zG)(Te.C2,Te.Uz((0,Ie.ff)(r))),Te.Zt(((e,t)=>i(e)&&i(t)?we.X.ord.compare(e,t):0))]),e.bundlesOrd=(0,fe.g_)(Te.iP())([(0,a.zG)(Te.C2,Te.Uz((0,Ie.ff)(o))),Te.Zt(((e,t)=>n(e)&&n(t)?ye.R.ord.compare(e,t):0))]),e.item=e=>U.UI.Union.make("kind",{alertCard:ve.p.Card(e),alertsBundle:Se.Q.Card(e)}),e.viewState=s,e.createCardListFlow=()=>(0,be.sJ)(P.Q1),e.listItemOrd=e=>Te.Uz((e=>e.cell.item.view))(e).compare;const l={equals:(e,t)=>e.kind===t.kind&&Ce.s.eqById.equals(e,t)},c=(e,t)=>({equals:(i,n)=>{const a={[we.X.Kind]:e,[ye.R.Kind]:t};return l.equals(i,n)&&function(e,t){return(i,n)=>t[e(i)].equals(i,n)}((e=>e.kind),a)(i,n)}}),d=(0,fe.g_)(xe.uZ())([_e.o.eq,Ce.s.verticalPositionEq,l]);function u(e){const i=we.X.Capabilities.getChangePosition(e);return{changePosition:e=>t(i.changePosition(e),ye.R.changePosition(e))}}function p(e,i){const n=we.X.Capabilities.getAnimatable(e),a=ye.R.Capabilities.getAnimatable(i);return{completeTransition:e=>t(n.completeTransition(e),a.completeTransition(e)),transitionTo:e=>t(n.transitionTo(e),a.transitionTo(e)),changeVisualState:e=>t(n.changeVisualState(e),a.changeVisualState(e))}}function g(e,i,n,a){const r=ye.R.getCardHydrator(a),o=ye.R.getSelect(i,n,r),s=ye.R.getSelectByAlert(i,n,r),l=we.X.Capabilities.getSelect(e);return{select:(e,i)=>t(l.select(e,i),o(e,i)),selectByAlert:(e,i,n)=>t(l.selectByAlert(e,i,n),s(i,e,n)),unselect:(e,i)=>t(l.unselect((0,P.MZ)(e),i),ye.R.unselect((0,P.MZ)(e),i))}}function h(e,a,r,o){return{removeAlertFromItem:(s,l)=>t((t=>we.X.Capabilities.getRemoveAlerts(e,l.itemsOrd)(s,re.In.getActiveItemOfType(i)(l))(t)),(e=>ye.R.Capabilities.getRemoveAlertsCapability(a,r,o,l.itemsOrd)(s,re.In.getActiveItemOfType(n)(l))(e)))}}function m(e,i,n){const a=we.X.Capabilities.getRemove(e);return{remove:(e,r)=>t(a.remove(e,r),(t=>e(t)?ye.R.Capabilities.getRemove(i,n)([t.activeAlert],r(t))(t):t))}}function f(e,i,n){const a=we.X.Capabilities.getUpdateWithAlert(e),r=ye.R.Capabilities.getUpdatableWithAlertsCapability(i,n);return{updateWithAlerts:e=>t(a.updateWithAlerts(e),r(e))}}e.equatable={structEq:c(we.X.eq,ye.R.eq),idEq:c(l,l),visualStateEq:c(d,d)},e.changePosition=u,e.disposable={isScheduledToDispose:t((e=>ke.i.willBeDisposed(e,e.removedAlertsIds)),(e=>ke.i.willBeDisposed(e,e.removedAlertsIds)))},e.hidable={isHidden:t(_e.o.isHidden,_e.o.isHidden)},e.animatableItem=p,e.hasAlertsQueries={isSelectableByAlert:e=>t(ke.i.hasAlert(e.alert.id),ke.i.hasAlert(e.alert.id)),hasAlert:e=>t(ke.i.hasAlert(e),ke.i.hasAlert(e)),hasActiveAlert:t(ke.i.hasActiveAlert,ke.i.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:t(P.jv,P.jv)},e.select=g,e.removeAlert=h,e.remove=m,e.updateWithAlert=f,e.releaseAlert=(t,i,n,a)=>Ae.v.Capabilities.getAlertReleaser({...h(t,i,n,a),...e.disposable}),e.unselectable=(t,i,n,a)=>Ae.v.Capabilities.getUnselectable(re.In.getActiveItem,{...g(t,i,n,a),...e.disposable}),e.selectableByAlert=(t,i,n,a)=>Ae.v.Capabilities.getSelectableByAlert(re.In.getActiveItem,{...e.hasAlertsQueries,...g(t,i,n,a),...Ae.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=(t,i,n,a)=>Ae.v.Capabilities.getSelectableById(re.In.getActiveItem,{...g(t,i,n,a),...e.disposable}),e.updateMeta=()=>({updateMeta:Ae.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=(e,t,i,n)=>Ae.v.Capabilities.getAnimatable(e,{...h(e,t,i,n),...p(e,n),...Ae.v.Capabilities.getHasChecksFeed()});const v=t=>["focused","expanded"].includes(t.visualState.transition.type)&&!e.disposable.isScheduledToDispose(t);function b(e){const i=Ee.Mq.getCardSelections(e);return{nextAlert:t(i.nextAlert,i.nextAlert),prevAlert:t(i.prevAlert,i.prevAlert)}}function S(){return{updateUserInput:e=>t(we.X.updateUserInput(e),ye.R.changeUserInput(e))}}e.alignable={isValidToAlign:t(v,v)},e.alertIterator=b,e.itemReleaser=()=>Ae.v.Capabilities.getItemReleaser(),e.hasAlerts=Ae.v.Capabilities.getHasAlerts,e.getDefaultNextAlertItemFilter=t=>(0,Ie.W9)(e.isSelectableWithAlertItem,(i=>!e.disposable.isScheduledToDispose(i)&&(0,a.zG)(i,e.hasAlertsQueries.hasActiveAlert,C.UI((e=>t.isRegistered(e.alert.id))),C.fS(P.jv)))),e.hasUserInput=S,e.verifiable=()=>Ae.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>{const e=Ce.s.Capabilities.getPojoCloneable().clone;return{clone:t(we.X.Capabilities.getCloneable().clone,e)}},e.getCapabilities=function(t,i,n,a,r=(0,P.a9)(C.YP),o=Ee.IG.Default){return{...s(r),...e.disposable,...e.hidable,...e.equatable,...S(),...e.cloneable(),...u(t),...p(t,a),...g(t,n,o,a),...m(t,o,a),...h(t,n,o,a),...f(t,i,a),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t,n,o,a),...e.unselectable(t,n,o,a),...e.selectableByAlert(t,n,o,a),...e.selectableById(t,n,o,a),...e.updateMeta(t),...e.animatableFeed(t,n,o,a),...e.itemReleaser(),...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(b(n),n,(()=>e.isSelectableWithAlertItem),{...e.hasAlertsQueries,...e.disposable})}}}(Q||(Q={}));var Re=i(18839),Pe=i(13087);const Me=U.UI.Grid.make((({slots:e,view:t})=>r.createElement(B.F.div,{style:{marginBottom:t("spacing").pipe(p.U(Z.ux.rem))}},e.children)));const De=r.forwardRef((function({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:n,header:a,footer:o,capabilities:s,comparator:l},c){const u=E.jw((e=>{let t=7;return t=31*t+(0,te.AC)(e.currentLens.id),t=31*t+(re.nL.hasItems(e)?1231:1237),t}),e).view((e=>re.nL.hasItems(e.get())?e.view(re.nL.Prism.getLens()):null)).view((e=>e?{state:e,spacing:1}:null)),p=r.useContext(Re.Dg).state;return r.createElement(oe.d,{className:m.of(""),name:"cardlist",stateSyncListener:Le(i,n,p),height:Fe(e,i,s),isMaster:!0},r.createElement(r.Fragment,null,a?r.createElement(B.F.div,{className:Pe.headerOrFooterWrapper,mount:e=>n.lens("title").set(C.ij(e))},a):null,r.createElement(B.F.div,{mount:c},u.view((e=>{return e?U.UI.mount((n=e.spacing,(0,P.zG)(ee.A.cardList(Q.item(t.actionEvents)),U.UI.patch("content","cell","item")((e=>(0,P.zG)(U.UI.Knot.make(Me,{children:e.child}),U.UI.squash,U.UI.contramapState((e=>({children:e,root:{spacing:n}})))))))),(e=>(0,P.zG)(Q.createCardListFlow()(t,e,new d.x,ie.i$(i).pipe(b.O(!1)),s,l)))(e.state)):null;var n}))),o?r.createElement(B.F.div,{className:Pe.headerOrFooterWrapper},o):null))})),Fe=(e,t,i)=>{const n=(0,ae.Sd)(i)(e.view(re.nL.mapper((({currentLens:e,alertSource:t})=>C.G({currentLens:e,alertSource:t})))));return f.a([n.pipe(se.oA,p.U((({currentLens:e})=>e.cardsHeight)),b.O(0)),t.paddingTop]).pipe(p.U((([e,t])=>e+t)))},Le=(e,t,i)=>{const n=me.C8.Logging.getLogger("view_models");return le.T(ce.P((()=>m.of(e.paddingTop.set(0)))),t.view("viewport").pipe(h.w(C.g_((()=>de.E),(e=>ue.YC(e).pipe(y.b((()=>n.debug("update card list viewport due to viewport resize event"))),pe.T(i.pipe(ge.j("dragging"),u.h((e=>!e)),h.w(E.b2.rafScheduler),y.b((()=>n.debug("update card list viewport due to drag end event"))))),p.U((()=>e.getBoundingClientRect())),p.U((e=>({top:ne.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),y.b(E.wW(e.viewport))),t.view("scrollProvider").pipe(h.w(C.g_((()=>de.E),(t=>v.R(t,"scroll").pipe(p.U((()=>t.scrollTop)),b.O(t.scrollTop),y.b(E.wW(e.scrollTop)),he.h(E.PU)))))),t.view("title").pipe(h.w(C.g_((()=>m.of(s.UL.empty)),(e=>ue.YC(e)))),p.U((e=>e.height)),L.shareReplay({bufferSize:1,refCount:!0}),y.b(E.wW(e.paddingTop))),t.view("scrollConsumer").pipe(h.w(C.g_((()=>de.E),(t=>e.scrollOffset.pipe(y.b((e=>{t.scrollTop+=e})))))))).pipe(he.h(void 0))},Be=(e,t)=>{const i=Fe(e.lensState,e.cardsListScrollManager,e.capabilities),n=Math.max(600,t.size.height+D.O.headerHeight+D.O.panelHeight);return i.pipe((0,S.M)(e.predictionsPreviewViewModel.previewState),(0,p.U)((([e,t])=>{if(t.kind!==N.visible)return e;const i=[t.tone].filter(C.pC).length;return i>0?e+D.O.predictionsPreviewHeaderHeight+D.O.predictionInsightHeight*i+D.O.predictionInsightBottomMargin:e})),(0,b.O)(0),(0,p.U)((e=>Math.max(e+D.O.headerHeight,n))),(0,p.U)((e=>Math.min(e,750))))};var Ue,Oe=i(25028),He=i(55812),Ge=i(96179),Ne=i(25012),ze=i(45598),Ve=i(92276),We=i(45485),je=i(96136),qe=i(15647),Ke=i(27947),$e=i(89916),Ye=i(90570),Je=i(71188),Xe=i(1774),Qe=i(47636),Ze=i(91643),et=i(51231),tt=i(24220),it=i(31603),nt=i(24666),at=i(12518),rt=i(73823),ot=i(90189),st=i(26051);!function(e){e.createSubscription=function(e,t,i){return e.pipe(L.filter(Ke.lY.isAlertApplyAction)).subscribe((e=>(0,a.zG)(i(e.alertId),_.bw((e=>{"unlocked"===_.Fc(e.extraProperties.freePremium)&&t.freePremiumSuggestionAcceptButtonClick("assistant")})))))}}(Ue||(Ue={}));class lt{constructor(e,t,i){this._cardActions=e,this._gnar=t,this._alertsReader=i,this._subs=[dt(this._cardActions,this._gnar,"assistant"),ct(this._cardActions,this._gnar),Ue.createSubscription(this._cardActions,this._gnar,this._alertsReader.getById)]}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}const ct=(e,t)=>e.pipe(u.h((e=>e.type===Ke.lY.Type.sduiCardAction&&"learn-more"===e.sourceId))).subscribe((()=>{t.learnMoreButtonClick()})),dt=(e,t,i)=>e.pipe(p.U((e=>e.type)),u.h((e=>e===Ke.lY.Type.muteAlertCategory||e===Ke.lY.Type.undoMuteAlertCategory||e===Ke.lY.Type.mutedAlertSuggestionManagementClick||e===Ke.lY.Type.mutedAlertSuccessShow))).subscribe((e=>{switch(e){case Ke.lY.Type.muteAlertCategory:t.mutedAlertsCardTurnOffButtonClick(i);break;case Ke.lY.Type.undoMuteAlertCategory:t.mutedAlertsTurnBackOnButtonClick(i);break;case Ke.lY.Type.mutedAlertSuggestionManagementClick:t.suggestionManagementClick(i);break;case Ke.lY.Type.mutedAlertSuccessShow:t.categoryDeactivatedShow(i)}}));var ut,pt=i(59833),gt=i(66691),ht=i(5958),mt=i(90391),ft=i(62805),vt=i(64181),bt=i(39963),St=i(78767);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard",e.clickOnUpgradeCard="clickOnUpgradeCard"}(t=e.Type||(e.Type={}))}(ut||(ut={}));class wt{constructor(e,t,i,n,r,s){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=n,this._gnar=r,this._isFreeUser=s,this._subs=new o.w.Keeper,this.activeAlert=this._lensState.pipe(L.map((e=>re.nL.hasCards(e)&&M.R.isMainLens(e.currentLens.id)?Q.getActiveItemWithAlert(e.currentLens):C.YP)),L.map((e=>(0,a.zG)(e,C.g_((()=>null),(e=>e.activeAlert)))))),this.successView=c.h.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>Ae.v.WithSuccess.State.isInSuccess(this._capabilities)(e)?t.kind===N.visible?C.G(mt.g.SuccessType.applied):C.G(mt.g.SuccessType.small):C.YP)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,P.ls)(C.UI((e=>e.count)),C.fS((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new L.BehaviorSubject(!1),this.upgradeHookExpanded=(0,a.zG)(this._upgradeHookExpanded,L.distinctUntilChanged()),this.upgradeHookFlow=(0,a.zG)((0,gt.d)(this._upgradeViewModel.advancedAlerts),U.Z.extendActions(L.tap((e=>{e.key===ht.n.State.expanded?"upgrade"===e.action.kind?((0,ft.Qi)(this._gnar,{placement:"advancedIssues",bannerType:"SeeWhatsInPremium",upgradeHookName:"advancedIssues",upgradeHookSlot:"singleCardAssistant"}),(0,bt.Tb)().upgradeHooks.clickUpgradeHook("advancedIssues","singleCardAssistant"),this._upgradeViewModel.openUpgradeUrlFromPlace(vt.L.Place.assistantCardList)):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===ht.n.State.minimized&&"onClick"===e.action.action&&(this._upgradeHookExpandReason.next("click"),this._isFreeUser&&this.assistantActions.next({type:ut.Type.clickOnUpgradeCard}))}))),U.Z.patchState(L.merge(this._minimizeUpgradeHook())),U.Z.patchState(L.merge(this._autoOpenUpgradeHook())),U.Z.patchState(L.tap((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return ht.n.State.hidden;case"expanded":return ht.n.State.expanded;case"minimized":return ht.n.State.minimized;default:(0,St.vE)(e)}}(e.kind))))),U.Z.patchState(L.tap((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new L.BehaviorSubject(C.YP),this.assistantActions=new L.Subject,this.autoFocusEnabled=c.h.create(!0),this.cardListViewportHeight=c.h.create(C.YP),this._onUpgradeButtonMount=new L.ReplaySubject,this._upgradeHookExpandReason=new L.ReplaySubject,this._onUpgradeHookShown=new L.Subject,this._unselectActiveAlert=this.assistantActions.pipe(L.filter((e=>e.type===ut.Type.clickOnEmpty||e.type===ut.Type.clickOnFakeCard||!(!this._isFreeUser||e.type!==ut.Type.clickOnUpgradeCard))),L.tap((()=>this.autoFocusEnabled.set(!1))),L.map((()=>e=>e.patch({currentLens:(0,a.zG)(re.In.getActiveItem(e.currentLens),C.g_((()=>e.currentLens),(t=>re.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:He.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:M.R.isWithAlertsId,what:re.nL.Effect.Applicator.create(L.mergeStatic(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(L.debounceTime(1),L.distinctUntilChanged(),L.filter((e=>e===ht.n.State.minimized))).subscribe((()=>{this._gnar.assistantCollapsedUpgradeHookShow()})),this._onUpgradeButtonMount.pipe(se.oA,L.combineLatest(this.cardListContext.pipe(se.oA,L.first())),L.switchMap((([e,t])=>ue.n(e,{root:t}).pipe(L.first()))),L.filter(pt.Od),L.map((e=>Math.trunc(100*e[0].intersectionRatio))),L.withLatestFrom(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>{this._gnar.assistantExpandedUpgradeHookShow(i,e,t)})),this._lensState.pipe(L.filter(re.nL.hasCards),L.map((e=>re.In.getActiveItem(e.currentLens))),L.pairwise(),L.filter((([e,t])=>C.Wi(e)&&C.pC(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_minimizeUpgradeHook(){return this.activeAlert.pipe(L.distinctUntilChanged(),L.withLatestFrom(this.upgradeHookExpanded),L.filter((([e,t])=>!!(e&&t&&this._isFreeUser))),L.withLatestFrom(this._upgradeViewModel.advancedAlerts),L.map((([e,t])=>(0,a.zG)(t,C.g_((()=>({kind:ht.n.State.hidden})),(e=>({kind:ht.n.State.minimized,alertsCount:e.count})))))))}_autoOpenUpgradeHook(){return this._lensState.pipe(L.filter((e=>(0,a.zG)(e.currentLens.id,M.R.isAllAlerts))),L.map(Ae.v.WithSuccess.State.isInSuccess(this._capabilities)),L.combineLatest(this.havePremiumAlerts,((e,t)=>e&&t)),L.distinctUntilChanged(),L.tap((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),L.withLatestFrom(this._upgradeViewModel.advancedAlerts),L.map((([e,t])=>(0,a.zG)(t,C.g_((()=>({kind:ht.n.State.hidden})),(t=>e?{kind:ht.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:ht.n.State.minimized,alertsCount:t.count}))))))}}var yt,Et=i(5561),kt=i(35431);!function(e){e.settings="settings"}(yt||(yt={}));class Ct{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._entryPoint=void 0}getDomain(){return this._domain}openFeedback(e){this._entryPoint=e,this._gnar.assistantFeedbackButtonClick(),this._assistantLayoutViewModel.pushActiveView({type:Et.a.Type.feedback})}submitFeedback(e){this._entryPoint&&this._gnar.assistantFeedbackSubmitButtonClick(this._entryPoint,e.domain,e.text,(0,kt.dK)(e)?e.score:void 0)}}var _t,At,It=i(16381);!function(e){e.shouldShow=e=>{var t;return!!(null===(t=e.institutionInfo)||void 0===t?void 0:t.voxEnabled)};const t=e=>({onShow:t=>e.gbPromptFormShow(t),onAccept:t=>e.gbPromptAcceptClick(t),onDismiss:t=>e.gbPromptDismissClick(t)});e.getCardsViewModelSendToURLExperiment=(e,i)=>({handleGbPrompt:We.sU.Experiments.handleGbPrompt(e,{account:{styleGuide:(0,It.Um)().styleGuideSettings,writingStyle:(0,It.Um)().writingStyleSettings}},t(i))})}(_t||(_t={})),function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(At||(At={}));class Tt{constructor(e,t,i,n,r,s){this._sessionModel=e,this._layoutVM=t,this._modalManager=i,this._user=n,this._gnar=r,this._closeAssistant=s,this.showSetGoalsActionButton=c.h.create(!0),this.showSettingsActionButton=c.h.create(!0),this.close=()=>{this._closeAssistant()},this.score=L.combineLatestStatic([this._sessionModel.score.view(C.UI((e=>({capiScore:e.rank})))),this._sessionModel.checkingState]).pipe(L.map((([e,t])=>(0,a.zG)(e,C.UI((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,P.ls)(C.tS((e=>e.messages)),C.UI((e=>e.assistantHeader)),C.fS((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,f.a)([this._layoutVM.activeView,this.score]).pipe(L.map((([e,t])=>(0,a.zG)(t,C.g_((()=>({type:"logo"})),(t=>e.type!==Et.a.Type.default?{type:"logo"}:{type:"score",score:t}))))),L.distinctUntilChanged(At.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===Et.a.Type.default?"visible":"hidden")),this._subs=new o.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){if("setGoals"===e)this._subs.push(this._modalManager.show(Oe.Iy.setGoals("user")).subscribe());else(0,l.vE)(e)}_trackHeaderMessageChanges(){const e=this.summary.pipe(L.pairwise()).subscribe((([e,t])=>{var i,n;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,a.zG)(this._sessionModel.textInfo.get(),C.FS))||void 0===i?void 0:i.wordsCount,null===(n=(0,a.zG)(this._sessionModel.score.get(),_.Fc))||void 0===n?void 0:n.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=this._user.subscribe((e=>{e.isAnonymous?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}var xt=i(84705);class Rt{constructor(e,t,i,n,a){this._lensPreviewVM=e,this._layoutVM=t,this._emogenieService=i,this._session=n,this._gnar=a,this._subs=new o.w.Keeper,this.previewState=c.h.create({kind:N.hidden}),this.previewFlow=U.Z.fromSideEffect((e=>{if("tone"===e.action.key){const e=this._emogenieService.viewState.view("prevalentEmotion").get();return e&&this._gnar.emogeniePredictionButtonClick(e.name),this._layoutVM.pushActiveView({type:Et.a.Type.emogenie})}(0,l.vE)(e.action.key)}),this.previewState),this._previewState=(0,P.zG)(L.combineLatestStatic([this._emogenieService.viewState.view((e=>C.ij(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._session.documentLength,this._lensPreviewVM.getLens(M.R.SpecialId.PredictionEmogenie)]),L.map((([e,t,i,n])=>C.pC(e)&&i.trimmed>0?{kind:N.visible,tone:(0,P.zG)(e,C.UI((e=>({emotion:e,alertsCount:n.count,brandToneOffImageUrl:t}))))}:i.trimmed>0?{kind:N.zero}:{kind:N.hidden}))),this._subs.push(this._previewState.subscribe(E.wW(this.previewState)))}dispose(){this._subs.dispose()}}var Pt=i(84766),Mt=i(69478);class Dt{constructor(e,t,i,n){this.feature=t,this._closeAssistant=i,this._gnar=n,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,nt.x)(),(0,k.G)(),(0,S.M)(e.activeView)).subscribe((([[t,i],n])=>{t===Mt.eE.REVIEWING&&n.type===Et.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,S.M)(e.activeView)).subscribe((([t,i])=>{i.type!==Et.a.Type.proofitRequest&&i.type!==Et.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,u.h)((e=>e===Mt.eE.ACCEPTED)));(0,Pt.F)(100).pipe((0,w.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}onSubmitFeedback(e){this._gnar.proofitFeedbackFormSubmit(e.text,e.score)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}var Ft=i(48667),Lt=i(31789),Bt=i(29416),Ut=i(95812),Ot=i(82318),Ht=i(49087);class Gt{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=T.Y.create("SidebarAlignmentViewModelImpl")}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:n},r){return L.defer((()=>this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:n}))).pipe(se.oA,L.map((i=>(0,a.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(Je.j.Features.showLabel),C.G(i),"cardContentTop"),C.Uo))),se.oA,L.switchMap((i=>this._cardPositions.setCardPosition(e,t.has(Je.j.Features.showLabel),!0,i.top))),L.mapTo(E.PU),L.catchError((e=>(this._log.error("Cannot align card to mark",e),L.EMPTY))),L.share())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:n},r,o=C.YP){return L.defer((()=>L.of((0,a.zG)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(Je.j.Features.showLabel),o,"cardContentTop"),C.Uo)).pipe(se.oA))).pipe(L.switchMap((a=>L.mergeStatic(this._markPositions.moveAlertHighlightInViewport({alert:n,highlightIndex:i},ne.r.FromWindowTop.ISO.modify(ne.L.concatC(a.contentOffset))(a.top),Ut.uq.initial),this._cardPositions.setCardPosition(e,t.has(Je.j.Features.showLabel),!0,a.top)))),L.mapTo(E.PU),L.catchError((e=>(this._log.error("Cannot align mark to card",e),L.EMPTY))),L.share())}alignCardTo(e,t,i){const n=i!==Ot.v.Animation.NO_ANIMATION;return L.defer((()=>L.of((0,a.zG)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(Je.j.Features.showLabel),C.G(t),"cardTop"),C.Uo)).pipe(se.oA))).pipe(L.switchMap((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(Je.j.Features.showLabel),n,t.top))),L.mapTo(E.PU),L.catchError((e=>(this._log.error("Cannot align card to required top",e),L.EMPTY))),L.share())}}const Nt=(e,t,i,n,a)=>new Gt(Ht.eZ.getSuperScrollMapper(e,i,c.h.create(16)),Ht.UC.getMapper(t,n,a));var zt;!function(e){e.skip="skip"}(zt||(zt={}));const Vt=(e,t,i,n,r,o=E.b2.rafScheduler)=>{const s=(e,i,n,a)=>{if(n===He.l$.text)return t.alignCardToMark(e,i?Ot.v.Animation.ANIMATE_ALL:Ot.v.Animation.NO_ANIMATION,!0);if(n===re.h8.forceText)return t.alignCardToMark(e,Ot.v.Animation.NO_ANIMATION,!1);{const r=n===He.l$.sidebar;return t.alignMarkToCard(e,r?i?Ot.v.Animation.ANIMATE_ALL:Ot.v.Animation.ANIMATE_MARK:Ot.v.Animation.NO_ANIMATION,a)}},l=L.mergeStatic(e.view(re.nL.mapper((({currentLens:e,alertSource:t})=>C.G({currentLens:e,alertSource:t})))).pipe(L.startWith(C.YP),L.map(C.UI((e=>e.currentLens.id))),L.pairwise(),L.filter((([e,t])=>(0,a.zG)(_.vB(((e,t)=>e!==t))(e,t),C.Gg(P.yR)))),L.mapTo(C.YP)),e.view(re.nL.mapper((({currentLens:e,alertSource:t})=>C.G({currentLens:e,alertSource:t})))).pipe(L.filter(C.Gg((({currentLens:e})=>(0,ae.Bk)(r)(e)))),L.map(C.tS((({currentLens:e,alertSource:t})=>(0,a.zG)(n(e),C.hX(r.isValidToAlign),C.UI((i=>({item:i,source:t,lensId:e.id}))))))))).pipe(L.distinctUntilChanged((0,P.ls)(_.vB(((e,t)=>e.lensId===t.lensId&&e.item.activeAlert.id===t.item.activeAlert.id&&e.item.visualState.transition.type===t.item.visualState.transition.type&&e.item.activeHighlightIndex===t.item.activeHighlightIndex)),C.Gg(P.yR))),L.startWith(C.YP),L.pairwise(),L.map((([e,t])=>(0,a.zG)(t,C.UI((i=>({item:i.item,source:i.source,animate:(0,a.zG)(e,_.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,a.zG)(e,C.hX((e=>!r.isScheduledToDispose(e.item))),C.tS((e=>(0,a.zG)(t,C.UI((t=>[e.item,t.item]))))),C.hX((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),C.UI((([e,t])=>ne.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),L.switchMap(C.g_((()=>L.EMPTY),o)),L.withLatestFrom(i),L.switchMap((([{item:e,source:t,animate:n,suggestedPosition:r},o])=>(0,a.zG)(o,C.g_((()=>s(e,n,t,r)),(t=>(i.set(C.YP),t===zt.skip?L.NEVER:s(e,n,t,r))))))));return{id:"alignmentSideEffect",when:M.R.isWithAlertsId,what:re.nL.Effect.Applicator.create(l.pipe(L.switchMapTo(L.NEVER)))}};function Wt(e,t,i,n,r){return{id:"changeAlertEffect",when:M.R.isWithAlertsId,what:re.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(h.w((e=>{const o=t.get();if(!re.nL.hasCards(o))return Lt._(new l.ej("Cannot update state without cards"));switch(e.type){case Ke.lY.Type.alertMinicardButtonClick:return(0,a.zG)(i.getRegistered(e.alertHighlight.alert.id),C.g_((()=>(r.warn("somehow we got click on non registered alert",e.alertHighlight.alert),de.E)),(()=>m.of(e.alertHighlight))));case Ke.lY.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,a.zG)("right"===e.direction?n.nextAlert(t.card):(0,a.zG)(n.prevAlert(t.card),_.vx(n.anyRegisteredAlert(t.card))),C.g_((()=>de.E),(e=>m.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,a.zG)(i.getRegistered(t.card.activeAlert.id),C.g_((()=>de.E),(()=>m.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,l.vE)(t)}default:return de.E}})),p.U((e=>({alertHighlight:e,alertSource:He.l$.sidebar,options:{order:"lensOrder"}})))))}}function jt(e,t,i){const n=e.pipe(u.h(re.nL.hasCards),Bt.b(0),u.h((e=>e.currentLens.items.size>0&&C.Wi(re.In.getActiveItem(e.currentLens))&&i.get())),p.U((e=>(0,a.zG)(e.currentLens.items.getAt(0),C.tS(Q.checksFeedItemsMapper((e=>C.G(e.activeAlert)),(e=>C.G(e.activeAlert)))),_.bw((()=>t.set(C.G(zt.skip))))))),se.oA,u.h((e=>e.state.type===He.bZ.State.Type.REGISTERED)),nt.x());return{id:"focusFirstCardSideEffect",when:e=>e!==M.R.SpecialId.PredictionEmogenie,what:re.nL.Effect.SwitchLens.create(n.pipe(S.M(e),p.U((([e,t])=>({lensId:t.currentLens.id,alertSource:He.l$.text,options:{order:"lensOrder",toFocus:re.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function qt(e,t,i){const n=e.pipe(p.U((e=>n=>e.type===tt.ay.Type.AppliedAlertAnimationFinished&&n.currentLens.meta.filter(e.alert)&&re.nL.hasItems(n)?n.patch({currentLens:(0,a.zG)(at.Y3((()=>He.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(n.currentLens):n.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),at.fS((()=>n.currentLens))),alertSource:e.alert.state.source}):n)));return{id:"onAlertApply",when:P.W8,what:re.nL.Effect.Applicator.create(n)}}function Kt(e,t){return{id:"lensChangeEffect",when:P.W8,what:re.nL.Effect.SwitchLens.create(e.pipe(S.M(t),u.h((([e,t])=>e.lensId!==t)),p.U((([e])=>({lensId:e.lensId,alertSource:He.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?re.nL.Effect.FocusBehavior.focusFirst:re.nL.Effect.FocusBehavior.noFocus}})))))}}var $t;!function(e){const t=(e,t)=>e.pipe(u.h(Ke.lY.isCreateSnippetAction),p.U((({id:e})=>i=>{const n=(0,P.zG)(i.currentLens.items.update(e,t({type:"success",clockwise:!0})),at.g_((()=>i.currentLens.items),P.yR));return We.sU.itemsLens.set(n,i)})));e.applicatorEffects=(e,i)=>(0,P.zG)([[t(e,i),"suggestedSnippetSuccessEffect"]],pt.UI((([e,t])=>({id:`cardsViewModel.effects.${t}`,when:M.R.isWithAlertsId,what:re.nL.Effect.Applicator.create(e)}))))}($t||($t={}));var Yt=i(86562);function Jt(e,t,i){return{id:"alertSwitchingByClickSideEffect",when:P.W8,what:re.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(L.skip(1),L.switchMap(C.g_((()=>L.EMPTY),L.of)),L.filter((e=>!i||e.alert.lensId!==M.R.SpecialId.Premium)),L.withLatestFrom(t.pipe(L.filter(re.nL.hasCards),L.map((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),L.map((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:He.l$.text,options:{lensId:i,order:"textOrder"}})))))}}var Xt=i(38538),Qt=i(14911),Zt=i(48109),ei=i(20023),ti=i(2245),ii=i(93953);class ni{constructor(e,t,i){this._lensesList=e,this._alertsFilterService=t,this._scoreStatus=i,this.getLens=(0,Ie.HP)((function(e){switch(e){case M.R.SpecialId.AllAlerts:return this._lensesList.view(ai(M.R.Info.allAlerts,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.AllAlerts)));case M.R.SpecialId.PredictionTakeaways:return this._lensesList.view(ai(M.R.Info.predictionTakeaways,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.PredictionTakeaways)));case M.R.SpecialId.PredictionEmogenie:return this._lensesList.view(ai(M.R.Info.predictionEmogenie,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.PredictionEmogenie)));case M.R.SpecialId.RealTimeProofit:return this._lensesList.view(ai(M.R.Info.realTimeProofit,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.RealTimeProofit)));case M.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case M.R.SpecialId.Premium:return this._lensesList.view(ai(M.R.Info.premium,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.Premium)));case M.R.SpecialId.FreePremiumAlerts:return this._lensesList.view(ai(M.R.Info.freePremium,M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(M.R.SpecialId.FreePremiumAlerts)));case M.R.SpecialId.Correctness:case M.R.SpecialId.Clarity:case M.R.SpecialId.Engagement:case M.R.SpecialId.Delivery:case M.R.SpecialId.Vox:case M.R.SpecialId.KnowledgeHub:return this._lensesList.view(ai(M.R.Info.createOutcome(e),M.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,l.vE)(e)}})),this._outcomes=[M.R.SpecialId.Correctness,M.R.SpecialId.Clarity,M.R.SpecialId.Engagement,M.R.SpecialId.Delivery],this._previews=(0,Ie.HP)((()=>Xt.uX((0,Qt.mL)(),pt.IX)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=c.h.create(!1),this._isFree=c.h.create(!1),this._outcomeStatusMask=c.h.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=ei.x.IsDocumentEmpty),t&&(i|=ei.x.IsFreeUser),i})),this._getPlagiarismLens=(0,P.ls)(ai(M.R.Info.plagiarism,{...M.R.Meta.group.empty,percentile:Zt.T.MAX},this._alertsFilterService.getLensesFilter(M.R.SpecialId.Plagiarism)),M.R.WithAlerts.modifyMeta((e=>({...e,percentile:Zt.T.groupSum.concat(Zt.T.MAX,Zt.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,a.zG)(C.ij([this.getLens(M.R.SpecialId.AllAlerts),this.getLens(M.R.SpecialId.Premium)].find((t=>e(t.get())))),C.UI((e=>e.get().id)))}_getPreview(e){return{...M.R.Info.base,logo:C.YP,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,n=this._isFree.view((t=>t&&(e===M.R.SpecialId.Engagement||e===M.R.SpecialId.Delivery))),r=c.h.combine(t.view("count").view((e=>0===e)),n,((e,t)=>e&&!t)),{description:o,stateMessage:s}=(0,ei.O)(e),l=c.h.combine(this._isDocumentEmpty,r,t.view("percentile"),((e,t,i)=>e?Zt.T.MIN:t?Zt.T.MAX:i)).view(Zt.g.fromRatio),d=c.h.create(!1),u=c.h.combine(this._scoreStatus.view((e=>(0,a.zG)(e,C.UI((e=>e===ii.v0.ScoresStatus.SENSITIVE)),C.fS(P.jv)))),t,l,this._outcomeStatusMask,d,s);return{id:e,title:i,description:o,status:u,progress:l,isUnavailable:n}}get nonEmptyLensId(){return(0,a.zG)(C.ij([this.getLens(M.R.SpecialId.AllAlerts),this.getLens(M.R.SpecialId.Premium)].find((e=>e.get().count>0))),C.UI((e=>e.get().id)))}}function ai(e,t,i){return n=>{return new M.R.LensImpl(e,(r=e.id,o=t,e=>(0,a.zG)(ti.P5(M.R.Id.ord)(r,e),C.fS((()=>o))))(n),i);var r,o}}var ri,oi=i(91219),si=i(7378),li=i(16514),ci=i(64702),di=i(93129),ui=i(11042),pi=i(3199),gi=i(66878),hi=i(86214),mi=i(66861),fi=i(38037),vi=i(67385),bi=i(37873),Si=i(89803),wi=i(20905),yi=i(8181);!function(e){e.create=(e,t,i,n,a,r)=>(o,s)=>{const l=s.to.visualState===ci.Bd.highlighted;return Si.sO.Change.getCreateAction({range:o,capiAlertId:e,visualState:l?{type:Si.sO.Change.VisualState.Type.highlighted,source:t()}:{type:Si.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(o(),l),highlightDisappearOnHoverDelay:a,order:r})},e.update=(e,t,i,n,a,r)=>(o,s)=>{const l=s.to.visualState===ci.Bd.highlighted;return Si.sO.Change.getUpdateAction({range:o,capiAlertId:e,visualState:l?{type:Si.sO.Change.VisualState.Type.highlighted,source:t()}:{type:Si.sO.Change.VisualState.Type.visible},highlightColor:i,highlightDisplayFormat:n(o(),l),highlightDisappearOnHoverDelay:a,order:r})},e.remove=e=>t=>Si.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(ri||(ri={}));const Ei=(e,t)=>{const i=e.pipe(p.U(bi.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds)),n=t.pipe(p.U((e=>e.cards)),pi.R(((e,t)=>(0,a.zG)(t,hi.vh.reduce(e,((e,t)=>(e.delete(t.id),e)),((e,t,i)=>e.set(i.id,i.alertIds.map((e=>e.toString())))),((e,t)=>e.set(t.id,t.alertIds.map((e=>e.toString()))))))),new Map),p.U((e=>(0,a.zG)(Array.from(e.values()),pt.xH))),p.U((e=>new Set(e)))),r=t.pipe(p.U((e=>e.feedId===bi.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID))),o=t.pipe(p.U((e=>e.feedId===bi.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),s=t.pipe(p.U((e=>e.feedId===bi.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID))),l=t.pipe(p.U((e=>e.feedId===bi.D1.AssistantFeed.BULK_DISMISS_REVIEW_FEED_ID)));return f.a([i,n,r,o,s,l]).pipe(p.U((([e,t,i,n,a,r])=>i||n?t=>!e.has(t.id):a||r?e=>t.has(e.id):i=>t.has(i.id)&&!e.has(i.id))))};class ki{constructor(e,t,i,n,r,s,l,g,h,f=m.of(void 0),v=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=n,this._ded=r,this._lensState=s,this._filterChanges=l,this._getActiveItemWithAlert=g,this._showPremiumHighlights=h,this._readyObs=f,this._emulateAppliedAlertAnimation=v,this._highlightedAlert=C.YP,this._focusedAlert=C.YP,this._marksMap=new Map,this._subs=new o.w.Keeper,this.events=new d.x,this._alertStateDiff=this._alertList.state.pipe(k.G(),p.U((([e,t])=>si.p.diff(e,t))),u.h((0,Ie.ff)(hi.vh.isEmpty))),this._alertsFilter=c.h.create(P.jv),this._filteredAlerts=c.h.create(C.YP),this._ready=!1,this._log=me.C8.Logging.getLogger("marks_view_model"),this.unhighlightAlertHighlight=()=>{throw new Error("Method not implemented.")},this.getMarkByAlert=e=>(0,a.zG)(this._marksMap.get(e.alert.id),C.ij,C.tS((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,a.zG)(this._alertsReader.getRegistered(oi.P.fromRangeIdToAlertId(e.id)),C.tS((t=>(0,a.zG)(tt.$A.getHighlightIndex(t,e.range()),at.UI((e=>({alert:ui.$.fromModel(t),highlightIndex:e}))),C.Uo)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,a.zG)(this.getMarkByAlert(e),C.g_((()=>m.of(at.t$(new Error("getMarkByAlert returned O.none")))),(e=>this._ded.scrollToMark(e.id,{animate:i,paddingTop:t}).pipe(p.U(at.F2),gi.K((e=>m.of(at.t$(e)))))))),this._createMA=e=>{const t=_.MH(e.rawId),{impact:i,cardLayout:{outcome:n},extra_properties:r}=e.toRawAlert(),o=fi.M.getHighlightColor({inline:e.inline,outcome:vi.DD.createOutcomeType(n),impact:i,extraProperties:r,patternName:e.patternName,isPremium:He.bZ.isPremium(e),isHidden:He.bZ.isHidden(e)},!0,!1,yi.N1.get(),yi.e9.get()),s=this._lensState.view(re.nL.getActiveItem(Q.getActiveItemWithAlert)).view((0,P.ls)(C.hX((t=>t.activeAlert.id===e.id)),C.UI((e=>e.activeHighlightIndex)),C.fS((()=>0)))),l=e=>(t,i)=>{const n=oi.x.isEnclosingView(t),r=e.getHighlightRanges().some(oi.x.isEnclosingView),o=oi.x.isMainView(t),l=oi.x.isMainStartView(t),c=e.getHighlightRanges(),d=(0,a.zG)(c,pt.cx((e=>e.start===t.start&&e.end===t.end)),C.fS((()=>0)))===s.get(),u=He.bZ.isSuperAlert(e);return fi.M.getHighlightDisplayFormat({isEnclosing:n,isEnclosed:r,isMain:o,isMainStart:l,isActive:d,belongsToActiveAlert:i,belongsToSuperAlert:u})},c=M.R.getSortOrder(e.lensType),d=new di.v((t=>(0,a.zG)(this._alertsReader.getById(e.id),C.wp((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),C.G(e)))),C.UI(ui.$.fromModel),_.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),ri.create(t,(()=>Si.sO.Change.VisualState.Source.api),o,l(e),null,c),ri.update(t,(()=>Ci.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),o,l(e),null,c),ri.remove(t),(t=>{t.to.visualState===ci.Bd.applied&&(this.events.next({type:tt.ay.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,d),d},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(ci.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>He.bZ.isRegistered(e)&&!He.bZ.isMuted(e)?(0,a.zG)(C.ij(this._marksMap.get(e.id)),C.g_((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),ci.Oe.isOrWillBe(ci.Bd.success)(e)&&e.scheduleApply(ci.Bd.highlighted),e)))):(0,a.zG)(C.ij(this._marksMap.get(e.id)),C.g_((()=>{}),(t=>(e.allowUpdate&&He.bZ.isCapiDone(e)&&He.bZ.isRated(e)&&ci.Oe.isOrWillBe(ci.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(ci.Bd.success)):(t.scheduleApply(ci.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}getPlagiarismAlertsEditingTracker(){return e=>this._alertList.state.pipe(u.h((0,P.ls)(li.v.iso.get,(e=>e.latestChangeDiff),hi.vh.filter(P.jv,((e,t)=>t.alert.lensType===M.R.Type.Plagiarism&&t.state.type===He.bZ.State.Type.REMOVED&&(t.state.reason===He.bZ.State.Removed.Reason.capiDone||t.state.reason===He.bZ.State.Removed.Reason.textChange)),P.jv),(0,Ie.ff)(hi.vh.isEmpty))),y.b((()=>e())))}focusAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),C.ij,C.UI((t=>{this._focusedAlert=C.G(e.alert.id),t.scheduleApply(ci.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),at.Yo((()=>new Error("Unknown alert"))),at.UI((()=>({dispose:()=>{C.Gg((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=C.YP),(0,a.zG)(this._marksMap.get(e.alert.id),C.ij,C.hX((()=>!(0,a.zG)(this._highlightedAlert,C.Gg((t=>t===e.alert.id))))),C.UI((e=>{e.scheduleApply(ci.Bd.visible),e.apply()})))}})))):at.t$(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,a.zG)(this._marksMap.get(e.id),C.ij,C.UI((t=>{this._highlightedAlert=C.G(e.id),t.scheduleApply(ci.Bd.highlighted),t.apply()})),at.Yo((()=>new Error("Unknown alert"))),at.UI((()=>({dispose:()=>{C.Gg((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=C.YP),(0,a.zG)(this._marksMap.get(e.id),C.ij,C.hX((()=>!(0,a.zG)(this._focusedAlert,C.Gg((t=>t===e.id))))),C.UI((e=>{e.scheduleApply(ci.Bd.visible),e.apply()})))}})))):at.t$(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,a.zG)(this._marksMap.get(e.alert.id),C.ij,C.tS((t=>t.markByIndex(e.highlightIndex))),C.tS((e=>C.Uo(e.range()))),C.g_((()=>at.t$(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:n}=this._ded.getCursor();if(0===n&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,a.zG)(this._ded.setCursor(i,0),at.vx(at.t$))}return at.F2(void 0)}))):at.t$(new Error("marks view model is not ready yet"))}getEnclosingMarkByAlert(e){throw new Error("Method not implemented.")}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return le.T(this._filteredAlerts.pipe(se.cp((({visible:t,hidden:i})=>m.of(e({activeAlerts:(0,mi.qo)(t),removedAlerts:(0,mi.qo)(i)}))))),this._alertStateDiff.pipe(S.M(this._alertsFilter),p.U((([t,i])=>(0,a.zG)(t,hi.vh.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(He.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(S.M(this._showPremiumHighlights),p.U((([{activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:n},a])=>{let r=[];return r=r.concat(e.filter((0,Ie.W9)((0,Ie.Kg)((e=>a&&He.bZ.isPremium(e)&&He.bZ.isHidden(e)||He.bZ.isLocked(e)||He.bZ.isLockedUIUphook(e)),(0,Ie.ff)(He.bZ.isPremium)),(e=>C.pC(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{n.forEach((e=>{this.events.next({type:tt.ay.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,wi.Xd)(20)),r=r.concat(this._handleRemovedAlerts(t.concat(n).filter((e=>this._marksMap.has(e.id))))),r=r.concat(this._handleAlertUpdate(i)),r}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(ge.j("changed"),p.U((e=>e.filter((e=>oi.P.is(e)&&oi.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),u.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).reduce(((e,t)=>(0,a.zG)(this._alertsReader.getById(t.meta.alertId),C.tS((e=>this._alertsReader.getRegistered(e.id))),C.tS((e=>C.ij(this._marksMap.get(e.id)))),_.bw((t=>e.set(t.alert.id,t))),(0,P.a9)(e))),new Map),i=Array.from(t.values());if(i.forEach((e=>{e.scheduleForceUpdate()})),i.length>0){const[e,...t]=i;e.applyWith(t)}}))}_listenFilterChange(){return this._filterChanges.subscribe((e=>{E.wW(this._alertsFilter)(e)}))}_listenFilteredAlerts(){return this._alertsFilter.pipe(S.M(this._alertList.state),p.U((([e,t])=>(0,a.zG)(t,si.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&He.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>C.G(e)))))).subscribe(E.wW(this._filteredAlerts))}}var Ci;!function(e){e.getAlertSource=(e,t,i)=>re.nL.hasCards(t)?(0,a.zG)(i(t.currentLens),C.g_((()=>Si.sO.Change.VisualState.Source.api),(i=>i.activeAlert.id===e.id?(e=>{switch(e){case He.l$.text:case re.h8.forceText:return Si.sO.Change.VisualState.Source.text;case He.l$.sidebar:case re.h8.forceSidebar:return Si.sO.Change.VisualState.Source.sidebar;case He.l$.api:return Si.sO.Change.VisualState.Source.api;default:return(0,l.vE)(e)}})(t.alertSource):Si.sO.Change.VisualState.Source.api))):Si.sO.Change.VisualState.Source.api}(Ci||(Ci={}));var _i=i(59100),Ai=i(50244),Ii=i(31008);function Ti({documentModel:e,features:t,gnar:i,modalOperations:n,upgradeVM:r,source:o}){return(0,Ai.k)(e,function(e,t,i){return{goalsPopupShow:t=>{e.goalsPopupShow(t),(0,ft.nE)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,bt.Tb)().upgradeHooks.showUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},getPremiumButtonClick:()=>{(0,ft.Qi)(e,{placement:"goPremium",bannerType:"setGoalsPopup",upgradeHookName:"assistantGoals",upgradeHookSlot:"gDocsSetGoalsPopup",upgradeHookVariant:"pro"}),(0,bt.Tb)().upgradeHooks.clickUpgradeHook("assistantGoals","gDocsSetGoalsPopup","pro")},goalsFormSuccess:(n,r)=>{const o=()=>_.FX("academic")(n.domain)&&t;return e.goalsFormSuccess((0,a.zG)(n.domain,C.fS((()=>r.domain))),(0,a.zG)(n.goals,C.UI((e=>o()?[]:e)),C.fS((()=>r.goals)),(e=>Array.from(e))),i,(0,a.zG)(n.outcomeContext,C.hX(o),C.UI((0,mi.ei)("type")),C.FS),(0,a.zG)(n.audience,C.hX((0,Ie.ff)(o)),C.FS),(0,a.zG)(n.outcomeContext,C.hX(o),C.UI((0,mi.ei)("citation")),C.FS),(0,a.zG)(n.style,C.hX((0,Ie.ff)(o)),C.FS))}}}(i,t.isStudentsOFE,o),n,o,Ii.R$.defaultContextFallback,t,(()=>r.openUpgradeUrlFromPlace(vt.L.Place.gdocsGoals)),!1)}class xi{constructor(e,t,i,n,a=!1){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._gnar=n,this._isStudentsOFE=a}load(e){switch(e.type){case Oe.dC.SetGoals:return this._loadSetGoals(e.source);case Oe.dC.Performance:return Promise.resolve((()=>({instance:{type:Oe.dC.Performance},component:U.UI.mount(U.UI.Node.empty,(()=>de.E))})));default:return(0,l.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i=Ti({features:{demoMode:!1,isFree:!this._isPremiumUser,isStudentsOFE:this._isStudentsOFE,isEligibleForFreeTrial:!1,assignToFreeTrialEuUkExperiment:P.Q1,isEligibleForFreeTrialEuUk:!1,isEligibleForPro:!1,assignToProVsPremiumExperiment:P.Q1},documentModel:this._documentModel,upgradeVM:this._upgradeViewModel,source:e,modalOperations:t,gnar:this._gnar});return{instance:{type:Oe.dC.SetGoals,source:e},component:U.UI.mount(_i.R.Modal,i)}}))}}var Ri=i(19724),Pi=i(53481),Mi=i(9976);const Di=(e,t)=>e.alertClicked.pipe(p.U((e=>(0,a.zG)(e,C.g_(P.gn,(e=>e.alert))))),u.h(St.fQ),S.M((e=>e.pipe(p.U((e=>re.nL.hasCards(e)&&M.R.isMainLens(e.currentLens.id)?Q.getActiveItemWithAlert(e.currentLens):C.YP)),p.U((e=>(0,a.zG)(e,C.g_((()=>null),(e=>e.activeAlert)))))))(t)),u.h((([e,t])=>e.id!==(null==t?void 0:t.id))),p.U((([e,t])=>e))),Fi=(e,t,i,n,r,o,s,l,g,f,v,w,y,A,I,T,x,R,D,F,L,B,U,O,H,G,N)=>{const z=me.C8.Logging.getLogger("view_models"),V=c.h.create(Ge.A.defaultState),W=c.h.create(!1),j=c.h.create(!1),q=c.h.create(!1),K=Ri.n.isFree(v.view("user").get()),$=ze.t.create({...ze.t.defaultLensFilters,[M.R.SpecialId.AllAlerts]:He.bZ.belongsToAllAlerts},{...ze.t.defaultTextFilters,[M.R.SpecialId.Closed]:P.jv,[M.R.SpecialId.AllAlerts]:(e=>(0,Ie.W9)((()=>!j.get()),(0,Ie.W9)((e=>!q.get()||He.bZ.isInline(e)),e)))(He.bZ.belongsToAllAlerts)}),Y=le.T(j,W,q).pipe(he.h(E.PU)),J=Ge.A.get(e.alertsList.state,e.alertsList.lensesScores,$).subscribe(E.wW(V)),X=new ni(V.view("lenses"),$,e.sessionModel.scoreStatus),Z=(0,je.$y)((0,Pi.a)(t).getContents),ee={features:new Set([Ee.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:Je.j.Density.minimal,shouldAnimateAlertApply:Ee.IG.Default.shouldAnimateAlertApply,cardVisualMode:c.h.create(Je.j.CardVisualMode.RegularLightMode)},te=(0,Ee.Ls)(Z,e.alertsReader,ee,(()=>m.of(C.YP)),e.mutingAlertsReader),ie=ye.R.ItemFactory.create(Z,e.mutingAlertsReader,ee,(()=>m.of(C.YP))),ne=c.h.create(C.YP),ae=((e,t,i)=>n=>{const a=e(),r=e=>e*i(),o=r(1),s=r(2.25);return(0,P.zG)(t(),C.UI((e=>e-1)),C.UI((e=>M.R.isMainLens(a)&&n?e-s-o:e-o)),C.UI((e=>e-r(1))),C.hX((e=>e>0)))})((()=>we.get().currentLens.id),(()=>ne.get()),(()=>Mi.o6)),oe=Q.getCapabilities(te,ie,e.alertsReader,Z,ae),se=new et.gi(Q.equatable.structEq,Q.defaultOrd),ce=(0,et.is)(te,oe),ue=new et.ad((e=>M.R.isAllAlerts(e.id)),se,Q.equatable.structEq,Q.bundlesOrd),pe=(0,et.kn)(ie,ee,(e=>M.R.isAllAlerts(e)),ce,oe),ge=Xe.v.createWithInitialAlerts(ue,pe,$,(0,P.ff)(He.bZ.isMuted),oe),ve=new Ve.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,$.alertCanBeDisplayed),be=new Ze.oq(e.alertsList.state,e.alertsReader,V.view("lenses"),ve,X,ge,pe,oe,$),Se=i.get(),we=c.h.create(be.emptyState(Se).patch({alertSource:He.l$.sidebar})),ke=(0,qe.u0)((()=>t.getCursor().index),be),Ce=new vt.x(e.alertsList,we,3,N,y),_e=new Oe.EQ(new xi(e.sessionModel,Ce,I.get().isPremium,y)),Te=new Yt.C((0,ot.nD)(O())),xe=new We.Xx({flush:()=>t.flushChanges()},new d.x,te,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,a.zG)(e.mutedAlertsCategoriesModel,C.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,It.Um)().suggestionsSettings)})))),C.G(_t.getCardsViewModelSendToURLExperiment(Te,y)),(()=>!1),Q.getActiveItemWithAlert,oe,Te,{bufferTransitions:!0,showGbPrompt:_t.shouldShow(I.get())}),Re=new lt(xe.actionEvents,y,e.alertsReader),Pe=new Et.D(y,x,R,B,U),Me=new Rt(X,Pe,n,e.sessionModel,y),De=new wt(we,Me,Ce,oe,y,K),Fe=new $e.o((()=>at.F2(void 0))),Le=De.upgradeHookExpanded.pipe(nt.x()).subscribe(E.wW(W)),Be=((e,t,i,n=c.h.create(!1),a=c.h.create(!1))=>le.T(e.pipe(u.h((e=>e.currentLens.id!==M.R.SpecialId.Premium)),nt.x(((e,t)=>e.currentLens.id===t.currentLens.id)),nt.x()),i.pipe(S.M(e),p.U((([e,t])=>t)))).pipe(S.M(n,a),p.U((([e,i,n])=>i?(0,Ie.W9)(He.bZ.isPremium,He.bZ.isHidden):n?He.bZ.isPlagiarism:t.alertVisibleInText(e.currentLens.id)))))(we,$,Y,W),Ue=new ki(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,we,Be,Q.getActiveItemWithAlert,W,g,!0),ct=Nt(we,Ue,Fe,t,z),dt=new d.x,ut=we.pipe(p.U((e=>e.currentLens.id))),pt=new Tt(e.sessionModel,Pe,_e,I,y,T),gt=Pe.activeView.pipe(p.U((e=>e.type)),b.O(Et.a.Type.startupPlaceholder),k.G(),p.U((([e,t])=>e===Et.a.Type.startupPlaceholder&&t===Et.a.Type.proofitRequest))).subscribe(E.wW(q)),ht=De.cardListViewportHeight.subscribe(E.wW(ne)),mt=new Ct(Pe,A,y),ft=(0,a.zG)(l,C.UI((e=>new Dt(Pe,e,T,y)))),bt=we.view(re.nL.getActiveAlertHighlight(Q.getActiveItemWithAlert)),yt=new Ne.mN(t,Ue,e.alertsReader,bt,we.view((e=>e.currentLens.meta.filter))),kt=(e=>e.view((e=>(0,a.zG)(C.DT(re.nL.hasItems)(e),C.UI((e=>e.currentLens.items)),C.UI((e=>e.filter((0,Ie.Kg)(Q.isAlertCard,Q.isAlertsBundle)))),C.UI((e=>e.filter((e=>"rendered"===e.visualState.transition.type)))),C.g_((()=>null),(e=>e.values()))))).pipe(b.O([]),u.h(St.Nf),k.G(),p.U((([e,t])=>{const i=new Set(e.map((e=>e.id)));return t.filter((e=>!i.has(e.id)))})),it.J()))(we),At=Di(yt,we),Pt=r.pipe(h.w(C.g_((()=>de.E),(t=>t.initAssistantCardActionsProcessing(xe.actionEvents,e.alertsReader,we,kt,At))))).subscribe(),Mt=o.pipe(h.w(C.g_((()=>de.E),(t=>t.initCardActionsProcessing(xe.actionEvents,e.alertsReader,kt,At,we))))).subscribe(),Lt=s.pipe(h.w(C.g_((()=>de.E),(t=>t.initCardActionsProcessing(xe.actionEvents,e.alertsReader,kt,we))))).subscribe(),Bt=c.h.create((0,a.zG)(f,C.g_((()=>zt.skip),(()=>He.l$.text)),C.G)),Ut=[Jt(yt,we,K),(0,a.zG)(tt.EQ.focusMarkByActiveAlert(we,Ue,e.alertsReader,Q.getActiveFocusableItem,z.getLogger("MarksEffects.focusMarkByActiveAlert")),re.nL.Effect.Producer.delayed(g)),qt(Ue.events,oe,z.getLogger("createOnAlertApplySideEffect")),Wt(xe,we,e.alertsReader,te,z),jt(we,Bt,De.autoFocusEnabled),...xe.getApplicatorEffects(),De.applicatorEffects,Ye.R7(we,Fe,oe,(0,P.MZ)(xe.actionEvents),{cardsAroundActive:10,cardsBeyondViewport:10}),(0,a.zG)(Vt(we,ct,Bt,Q.getActiveAlignableItem,oe),re.nL.Effect.Producer.delayed(g)),Ye.XU(we,Fe,oe),Kt(dt,ut),We.dv.createSendActiveAlertFeedbacksEffect(we,Q.getActiveItemWithAlert,e.alertsService,e.alertsReader,z.getLogger("CardsViewModelEffects.createSendActiveAlertFeedbacksEffect")),...$t.applicatorEffects(xe.actionEvents,oe.transitionTo)],Ot=c.h.create(M.R.SpecialId.AllAlerts),Ht=we.view((e=>e.currentLens.id)).pipe(u.h((e=>e===M.R.SpecialId.AllAlerts))).subscribe(E.wW(Ot)),Gt=(0,qe.VC)(be,ke,Ot,oe),Xt=c.h.create(f),Qt=(0,qe.Dv)((e=>M.R.isMainLens(e.currentLens.id)),Gt,oe),Zt=new qe.vM(e.sessionModel.checkingState,we),ei=(0,a.zG)([(0,a.zG)((e=>qe.Py.whenShouldVerifyCurrentLens(Q.getActiveItemWithAlert,oe)(e)),qe.Py.behaviorToEffect((()=>C.G(re.nL.Effect.FocusBehavior.focusNext)))),(0,a.zG)((0,Ie.W9)((()=>C.pC(Xt.get())),qe.Py.whenNoActiveCard),qe.Py.behaviorToEffect((e=>(0,a.zG)((e=>{const t=(0,C.DT)((0,Ie.Kg)(Q.isAlertCard,Q.isAlertsBundle));return(0,a.zG)(Xt.get(),C.tS((i=>(Xt.set(C.YP),re.nL.hasCards(e)?(0,a.zG)(e.currentLens.items.reduce(((e,n)=>(0,a.zG)(e,C.wp((()=>(0,a.zG)(n,t,C.tS((e=>C.ij(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),C.YP),C.UI((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):C.YP))))})(e),C.UI((e=>re.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,a.zG)((0,Ie.W9)((()=>De.autoFocusEnabled.get()),(0,Ie.W9)(qe.Py.whenFirstOpeningDocumentWithAlerts(Zt),qe.Py.whenNoActiveCard)),qe.Py.behaviorToEffect((()=>C.G(re.nL.Effect.FocusBehavior.focusFirst))))],(0,fe.g_)((0,fe._e)(C.gW())())),ti=qe.Py.getStateTransformer(ei,Qt,e.alertsReader,oe,(e=>De.autoFocusEnabled.get()&&"text"!==e.alertSource),P.Q1,Ot),ii=Ae.v.Items.getItemsPositionsUpdateTransformer(oe),ai=(0,P.ls)(ti,rt.L9(ii)),ri=new Qe.l(we,be,e.alertsReader,e.alertsService,Ut,Q.getActiveItemWithAlert,ai),oi=dt.pipe(p.U((({lensId:e})=>e)),u.h((e=>e===M.R.SpecialId.AllAlerts)),nt.x()).subscribe((e=>{i.set(e)})),si=Pe.activeView.pipe(p.U((e=>{switch(e.type){case Et.a.Type.default:return i.get();case Et.a.Type.emogenie:return M.R.SpecialId.PredictionEmogenie;case Et.a.Type.proofitReview:return M.R.SpecialId.RealTimeProofit;default:return null}})),u.h(St.fQ),nt.x(),p.U((e=>[e,e===M.R.SpecialId.AllAlerts]))).subscribe((([e,t])=>dt.next({lensId:e,focusFirstCard:t}))),li=c.h.create(C.YP),ci=N();ci&&ci.capiMessages.pipe(u.h((e=>"start"===e.action))).subscribe((e=>li.set(C.G(e))));const di=new Ft.X(v,w,G,A),ui=xe.actionEvents.pipe(u.h(Ke.lY.isOpenIdeasGallery)).subscribe((()=>self.open((0,It.Um)().grammarlyIdeasSales,"_blank"))),pi=(0,xt.W)(D),gi=xe.actionEvents.subscribe((0,P.ls)((0,st.JH)(e.alertsReader,st.SV.Source.assistant),_.bw((e=>{(async()=>{e.kind===st.SV.Kind.alertApply&&e.source===st.SV.Source.assistant&&await H.incrementCounter(),L.next(e)})()}))));return{lensState:we,cardsViewModel:xe,lensPreviewViewModel:X,cardsListScrollManager:Fe,upgradeViewModel:Ce,alertProcessor:F,assistantHeaderViewModel:pt,assistantLayoutViewModel:Pe,assistantCardListViewModel:De,lensChanged:dt,predictionsPreviewViewModel:Me,assistantFeedbackViewModel:mt,assistantSettingsViewModel:di,assistantProofitViewModel:ft,assistantModalManager:_e,marksViewModel:Ue,gnar:y,positionViewModel:pi,user:I,capabilities:oe,isSingleCardAssistant:!1,dispose:()=>{gi.unsubscribe(),xe.dispose(),ri.dispose(),Ue.dispose(),Me.dispose(),oi.unsubscribe(),J.unsubscribe(),si.unsubscribe(),pt.dispose(),De.dispose(),_e.hideAll(),Ht.unsubscribe(),ht.unsubscribe(),gt.unsubscribe(),ui.unsubscribe(),Mt.unsubscribe(),Lt.unsubscribe(),Pt.unsubscribe(),Le.unsubscribe(),(0,a.zG)(ft,_.bw((e=>e.dispose()))),Re.dispose()}}};var Li,Bi=i(8794),Ui=i(60943),Oi=i(82760),Hi=i(6199),Gi=i(53473),Ni=i(35614);!function(e){e.AccountCreation="accountCreation",e.Tour="tour",e.TryWebsite="tryWebsite",e.ViewApps="viewApps"}(Li||(Li={}));const zi={completedItems:[]};var Vi,Wi;!function(e){e.installed="installed",e.notInstalled="notInstalled"}(Vi||(Vi={})),function(e){e.macExtension="macExtension",e.windowsExtension="windowsExtension",e.mobileIOS="mobile-ios",e.mobileAndroid="mobile-android"}(Wi||(Wi={}));class ji{constructor(e,t,i,n){this.anonymous=e,this.state=t,this.gnar=i,this._dapiActions=n,this.actions={updateChecklistState:e=>{var t;this._dapiActions.setGetStartedChecklistState((t=e,encodeURI(JSON.stringify({...t,completedItems:t.completedItems.filter((e=>null!=e&&"string"==typeof e))}))))}}}get userClientState(){return e=this.state.user,new Map(Object.values(Wi).map((t=>[t,e.groups.includes(t)?Vi.installed:Vi.notInstalled])));var e}get isStudent(){var e,t;return"school"===(null===(t=null===(e=this.state.user)||void 0===e?void 0:e.customFields)||void 0===t?void 0:t.frontend_role)}get checklistState(){return this.state.dapi["DN:getStartedChecklistSettings"]?(e=>{try{const t=decodeURI(e),i=JSON.parse(t);if("completedItems"in i&&Array.isArray(i.completedItems)){const e=i.completedItems.filter((e=>null!==e&&"string"==typeof e));return{...i,completedItems:e}}}catch(e){return zi}return zi})(this.state.dapi["DN:getStartedChecklistSettings"]):zi}}var qi=i(32073),Ki=i(90595);class $i{constructor(e,t,i,n){if(this._cardsViewModel=t,this._subs=new qi.w0,this._successReportFooterBulkDismissAlertsCount=c.h.create(0),this.showBulkDismissFeed=()=>{this._cardsViewModel.actionEvents.next(bi.fr.create([{type:"pushAssistantFeed",feedId:bi.D1.AssistantFeed.BULK_DISMISS_CARD_FEED_ID}]))},n.isGateEnabled(Ki.K.SduiBulkDismiss)){const t=e.pipe(p.U(bi.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),p.U((e=>e.size)),nt.x());this._subs.add(f.a([t,i.pipe(nt.x())]).pipe(p.U((([e,t])=>t?e:0))).subscribe(E.wW(this._successReportFooterBulkDismissAlertsCount)))}}get successReportFooterBulkDismissAlertsCount(){return this._successReportFooterBulkDismissAlertsCount.view()}dispose(){this._subs.unsubscribe()}}var Yi,Ji=i(20932),Xi=i(36337),Qi=i(11335),Zi=i(47781),en=i(58336);!function(e){const t=e=>(0,a.zG)(re.In.getActiveItemOfType(n)(e),C.tS(Hi.P.Capabilities.toAlertItem));function i(e){return re.nL.Items.mapper((e=>e.kind),{[Hi.P.Kind]:e})}function n(e){return e.kind===Hi.P.Kind}function r(){return{viewState:()=>e=>(e.kind,Hi.P.Kind,{view:e,kind:"alertRefSDUI"})}}e.isSelectableItem=n,e.getActiveItemWithAlert=function(e){return t(e)},e.getActiveAlignableItem=e=>t(e),e.getActiveFocusableItem=e=>t(e),e.checksFeedItemsMapper=i,e.isAlertRefSDUI=n,e.defaultOrd=t=>(0,fe.g_)(Te.iP())([(0,a.zG)(Te.C2,Te.Uz((0,Ie.ff)(Hi.P.Item.isBulkAcceptSDUI))),(0,a.zG)(Te.C2,Te.Uz(Hi.P.Item.isBulkDismissSDUI)),e.getByActiveAlertPositionOrd(t)]),e.sduiToChecksFeedOrd=function(t){return i=>Te.Zt(((n,a)=>Xi.e.isSDUIItem(n)&&Xi.e.isSDUIItem(a)?Xi.e.getOrd(i).compare(n,a):e.getByActiveAlertPositionOrd(t).compare(n,a)))},e.getByActiveAlertPositionOrd=e=>(0,fe.g_)(Te.iP())([(0,a.zG)(He.h$.ordHRange,Te.Uz((t=>(0,a.zG)(e.hasActiveAlert(t),C.UI((e=>e.alert)),C.fS((()=>({getHighlightRanges:()=>[{start:0,end:0}]})))))))]),e.item=e=>Ji.UI.Union.make("kind",{alertRefSDUI:Qi.p.SingleCard(e),empty:Zi.Q.Empty}),e.viewState=r,e.createCardListFlow=en.p,e.listItemOrd=e=>Te.Uz((e=>e.cell.item.view))(e).compare;const o={equals:(e,t)=>e.kind===t.kind&&Ce.s.eqById.equals(e,t)},s=e=>({equals:(t,i)=>{const n={[Hi.P.Kind]:e};return o.equals(t,i)&&function(e,t){return(i,n)=>t[e(i)].equals(i,n)}((e=>e.kind),n)(t,i)}});function l(){return{changePosition:e=>i(Hi.P.Capabilities.changePosition(e))}}function c(){return{completeTransition:e=>i(Hi.P.Capabilities.animatable.completeTransition(e)),transitionTo:e=>i(Hi.P.Capabilities.animatable.transitionTo(e)),changeVisualState:e=>i(Hi.P.Capabilities.animatable.changeVisualState(e))}}function d(){return{select:(e,t)=>i(Hi.P.Capabilities.select.select(e,t)),selectByAlert:(e,t,n)=>i(Hi.P.Capabilities.select.selectByAlert(e,t,n)),unselect:(e,t)=>i(Hi.P.Capabilities.select.unselect((0,P.MZ)(e),t))}}function u(){return{removeAlertFromItem:(e,t)=>i((i=>i.id===bi.D1.SuccessReport.ID?i:Hi.P.Capabilities.removeAlert.removeAlertFromItem(e,t)(i)))}}function p(){return{remove:(e,t)=>i(Hi.P.Capabilities.remove.remove(e,t))}}function g(){return{updateWithAlerts:e=>i(P.yR)}}function h(){return{nextAlert:i((()=>C.YP)),prevAlert:i((()=>C.YP))}}function m(){return{updateUserInput:e=>i(P.yR)}}e.equatable={structEq:s(Hi.P.eq),idEq:s(o),visualStateEq:s(Hi.P.eq)},e.changePosition=l,e.disposable={isScheduledToDispose:i(Hi.P.Capabilities.disposable.isScheduledToDispose)},e.hidable={isHidden:i(_e.o.isHidden)},e.animatableItem=c,e.hasAlertsQueries={isSelectableByAlert:e=>i(Hi.P.Capabilities.hasAlerts.isSelectableByAlert(e)),hasAlert:e=>i(Hi.P.Capabilities.hasAlerts.hasAlert(e)),hasActiveAlert:i(Hi.P.Capabilities.hasAlerts.hasActiveAlert)},e.changePositionStrategyQueries={useReferenceHeightOnRemove:i(P.jv)},e.select=d,e.removeAlert=u,e.remove=p,e.updateWithAlert=g,e.releaseAlert=()=>Ae.v.Capabilities.getAlertReleaser({...u(),...e.disposable}),e.unselectable=()=>Ae.v.Capabilities.getUnselectable(re.In.getActiveItem,{...d(),...e.disposable}),e.selectableByAlert=()=>Ae.v.Capabilities.getSelectableByAlert(re.In.getActiveItem,{...e.hasAlertsQueries,...d(),...Ae.v.Capabilities.getHasChecksFeed(),...e.disposable}),e.selectableById=()=>Ae.v.Capabilities.getSelectableById(re.In.getActiveItem,{...d(),...e.disposable}),e.updateMeta=()=>({updateMeta:Ae.v.Capabilities.getMetaUpdatable().updateMeta}),e.animatableFeed=e=>Ae.v.Capabilities.getAnimatable(e,{...u(),...c(),...Ae.v.Capabilities.getHasChecksFeed()}),e.alignable={isValidToAlign:i((t=>!e.disposable.isScheduledToDispose(t)))},e.alertIterator=h,e.itemReleaser=()=>Ae.v.Capabilities.getItemReleaser(),e.hasAlerts=Ae.v.Capabilities.getHasAlerts,e.hasUserInput=m,e.verifiable=()=>Ae.v.Capabilities.getVerifiable(e.disposable),e.cloneable=()=>({clone:i(Ce.s.Capabilities.getPojoCloneable().clone)});const f={getFeatures:i((e=>Hi.P.Item.isBulkDismissSDUI(e)?[Hi.P.Features.BulkDismiss]:Hi.P.Item.isBulkAcceptSDUI(e)?[Hi.P.Features.BulkAccept]:[]))};e.getCapabilities=function(t,i){return{...r(),...e.disposable,...e.hidable,...e.equatable,...m(),...e.cloneable(),...l(),...c(),...d(),...p(),...u(),...g(),...e.hasAlertsQueries,...e.changePositionStrategyQueries,...e.alignable,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatableFeed(t),...e.itemReleaser(),...f,...e.verifiable(),shouldAnimatePositionChange:()=>()=>!1,...e.cloneable(),...e.hasAlerts(h(),i,(()=>e.isSelectableItem),{...e.hasAlertsQueries,...e.disposable})}}}(Yi||(Yi={}));class tn{constructor(e,t){this._sub=new qi.w0;const i=(0,a.zG)(e,p.U((0,P.ls)((e=>e.actions),pt.Ew((e=>"openCreateSnippetModal"===e.type)))),se.oA);this._sub.add((0,a.zG)(i,S.M(t.pipe(p.U(C.pF((()=>null)))))).subscribe((([e,t])=>{t&&t.showSnippetsEditor(e.snippetContent)})))}dispose(){this._sub.unsubscribe()}}class nn{constructor(e,t){this._domain=e,this._gnar=t}getDomain(){return this._domain}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick("single_card_assistant",e.domain,e.text,(0,kt.dK)(e)?e.score:void 0)}}var an,rn=i(76786);!function(e){e.correct="correct",e.incorrect="incorrect",e.neutral="neutral"}(an||(an={}));class on{constructor(e,t,i,n,r){this._learnMoreInfo=c.h.create(null),this._sub=new qi.w0;const o=(0,a.zG)(n,p.U((0,P.ls)((e=>e.actions),pt.Ew((e=>"openLearnMore"===e.type||"switchView"===e.type&&"learn-more"===e.selected)))),se.oA);this._sub.add((0,a.zG)(o,S.M(e),p.U((([e,n])=>{let o=null;if(re.nL.hasItems(n)){const s=(0,a.zG)(r(n.currentLens),C.pF((()=>null))),l=s?(0,a.zG)(t.getById(s.activeAlert.id),C.pF((()=>null))):null,c=(0,a.zG)(C.ij(l),C.tS(He.bZ.getRawId),C.pF((()=>null))),d=c?i.alerts.getAlertById(c):null;d&&x.S.isCapiAlert(d)&&(o={title:d.todo,showTitleOnContent:"switchView"===e.type,details:d.details||d.explanation,examples:(0,a.zG)(rn.J.parse(d.examples,d.point.includes("Italicization")),C.UI((e=>e.map((e=>e.map((e=>({type:e.color===rn.J.Color.green?an.correct:e.color===rn.J.Color.red?an.incorrect:an.neutral,title:(0,a.zG)(e.title,C.UI((e=>`${e}:`)),C.pF((()=>null))),text:e.text,useItalicText:!e.hasItalic}))))).flat())),C.pF((()=>[])))})}return o}))).subscribe(E.wW(this._learnMoreInfo)))}get learnMoreInfo(){return this._learnMoreInfo.view()}dispose(){this._sub.unsubscribe()}}class sn{get header(){return this._header}constructor(e,t){this.popView=new d.x,this._header=c.h.create(C.YP),this._subs=new o.w.Keeper,this._subs.push((0,P.zG)(this.popView,S.M(f.a([t.sduiManager.state,t.sduiFeedManager.feed])),p.U((([e,[t,i]])=>bi.D1.AssistantFeed.Header.getSelectedViewBackButtonActions(t,i.feedId))),se.oA,y.b((t=>e.actionEvents.next(bi.fr.create(t))))).subscribe()),this._subs.push(t.sduiFeedManager.header.pipe(p.U(C.of)).subscribe(E.wW(this._header)))}dispose(){this._subs.dispose()}}var ln=i(70843);class cn{constructor(e,t,i,n,a,r){this._cardEvents=e,this._alertProcessor=t,this._pageState=i,this._actions=n,this._experimentClient=a,this._gnar=r,this._subs=new qi.w0,this.currentCard=c.h.create(void 0),this._getExtraFooterOutcomeType=e=>{var t,i;if(e){const n=this._alertProcessor.alerts.getAlertById(e.toString());if(n&&x.S.isCapiAlert(n)){const e=n.outcome;if((0,vi.wF)(e)&&!(null===(i=null===(t=this._pageState.get().lifetimeAlertStats)||void 0===t?void 0:t.seen)||void 0===i?void 0:i[e]))return this._actions.setHasSeenSuggestionType(e),e}}},this.onShow=()=>{var e;this._gnar.firstAcceptFooterShow(null!==(e=this.extraFooterOutcomeType.get())&&void 0!==e?e:"other","assistant")},this._pageState.get().showFirstSuggestionFooters&&"test"===this._experimentClient.getTreatment(ln.p.ProgressiveExposure)?(this._subs.add(this._cardEvents.subscribe((e=>{if(e.type===Ke.eI.Kind.completeTransitionTo){const t=e.id;"number"!=typeof t&&"string"!=typeof t||this.currentCard.set(t)}}))),this.extraFooterOutcomeType=this.currentCard.view((e=>this._getExtraFooterOutcomeType(e)))):this.extraFooterOutcomeType=c.h.create(void 0)}dispose(){this._subs.unsubscribe()}}var dn=i(83816),un=i(86349),pn=i(62101),gn=i(14325);const hn=e=>e.pipe(u.h((e=>"sdui_add"===e.kind||"sdui_update"===e.kind)),p.U((e=>e.sdui)),u.h((e=>"assistantFeed"===e.type&&"default-feed"===e.id)),p.U((e=>gn.ab.getCardPropsForFeed(e))),b.O({})),mn=(e,t,i)=>[{type:"text",id:un.JX.from("text"),meta:{label:"You accepted "},size:pn.yH.Regular,text:"You accepted ",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:`${i}`},size:pn.yH.Regular,text:`${i}`,textColor:pn.Il.CoreNeutral50,format:[pn.SQ.Bold],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:" suggestions and improved your quality score by "},size:pn.yH.Regular,text:" suggestions and improved your quality score by ",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:""+(e-t)},size:pn.yH.Regular,text:""+(e-t),textColor:pn.Il.CoreNeutral50,format:[pn.SQ.Bold],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:" points."},size:pn.yH.Regular,text:" points.",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1}],fn=[{type:"text",id:un.JX.from("text"),meta:{label:"Keep it up! You’ve earned a perfect quality score."},size:pn.yH.Regular,text:"Keep it up! You’ve earned a perfect quality score.",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1}];var vn;!function(e){e[e.default=0]="default",e[e.withQualityScore=1]="withQualityScore",e[e.withPerformanceScore=2]="withPerformanceScore"}(vn||(vn={}));class bn{constructor(e,t,i,n,r,o,s,l){this._sduiManager=e,this._sduiBufferService=i,this._statisticsService=n,this._upgradeHookCardExists=o,this._sessionModel=s,this._experimentClient=l,this._subs=new qi.w0,this.shouldShowSuccessReportWithPerformanceScore=(e,t)=>e===ii.v0.ScoresStatus.OK&&t>=3&&"test"===this._experimentClient.getTreatment(ln.p.PerformanceScoreSuccessState),this.shouldShowSuccessReportWithQualityScore=e=>e===ii.v0.ScoresStatus.OK&&("text"===this._experimentClient.getTreatment(ln.p.QualityScore)||"progress_bar"===this._experimentClient.getTreatment(ln.p.QualityScore)),this.focusSuccessReportStateTransformer=({state:e,metadata:t})=>{if(!re.nL.hasCards(e))return at.t$({state:e,metadata:t});const i=re.nL.Prism.getLens();return at.t$({state:i.modify((e=>C.pC(e.cardIndex)||e.items.size>1||(0,a.zG)(e.items.getAt(0),C.UI((e=>e.id!==bi.D1.SuccessReport.ID)),C.fS(P.jv))?e:{...e,cardIndex:C.G(0)}),e),metadata:t})};const c=this._sduiManager.state.pipe(p.U((e=>bi.D1.GButton.getPushAssistantFeedAction(e,bi.D1.GButton.DEFAULT_GBUTTON_ID))),se.oA,p.U((e=>e.feedId))),d=r.pipe(p.U((e=>re.nL.hasSuccess(e)&&re.nL.hasItems(e)&&(0===e.currentLens.items.size||(0,a.zG)(e.currentLens.items.getAt(0),C.UI((e=>e.id===bi.D1.SuccessReport.ID)),C.fS(P.jv)))))),u=t.feed.pipe(S.M(c),p.U((([e,t])=>e.feedId===t)));this.isSuccess=f.a([d,u]).pipe(p.U((([e,t])=>e&&t)))}_getSuccessMessages(e,t){return{title:t<2?"Looking good so far":e>0?`${e} ${(0,dn._6)(e,"issue addressed","issues addressed")}`:"Nice job!",subTitle:t<2?"Keep writing to see suggestions.":e>0?"All clear!":"You made that look easy!"}}_getSduiKnownId(e){switch(e){case vn.withQualityScore:return bi.D1.SuccessReport.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID;case vn.withPerformanceScore:return bi.D1.SuccessReport.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID;default:return bi.D1.SuccessReport.SUCCESS_REPORT_CARD_ID}}_getSuccessReportSDUI(e,t,i,n){const{title:a,subTitle:r}=this._getSuccessMessages(e,t),o=[{type:"block",id:un.JX.from("block"),parts:[{type:"image",id:un.JX.from("image"),meta:{},name:un.yL.unknown("success_report_image"),url:"https://assets.grammarly.com/icons/v1/notification-ok.svg",width:2,height:2}],name:un.yL.unknown("success_report_image_block"),spacing:{top:pn.T.D1,right:pn.T.D0,bottom:pn.T.D075,left:pn.T.D0},horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),size:pn.yH.Regular,meta:{label:a},text:a,textColor:pn.Il.CoreNeutral90,format:[pn.SQ.Bold],selectable:!1}],name:un.yL.unknown("success_report_title_block"),horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),size:pn.yH.Regular,meta:{label:r},text:r,textColor:pn.Il.CoreNeutral50,format:[],selectable:!1}],name:un.yL.unknown("success_report_subtitle_block"),horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_subtitle_space_1_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_subtitle_space_2_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_subtitle_space_3_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_subtitle_space_4_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}}],s=this._getSduiKnownId(null==n?void 0:n.layout),l=n?(t=>{switch(t.layout){case vn.withPerformanceScore:return((e,t,i)=>[{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_top_spacing_block"),spacing:{top:pn.T.D1,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),meta:{label:`${e}`},size:pn.yH.HeadingLevel1,text:`${e}`,textColor:pn.Il.CoreNeutral90,format:[pn.SQ.Bold],selectable:!1}],name:un.yL.unknown("success_report_score_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D025,left:pn.T.D0},horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),meta:{label:"Out of 100"},size:pn.yH.Medium,text:"Out of 100",textColor:pn.Il.CoreNeutral90,format:[pn.SQ.Bold],selectable:!1}],name:un.yL.unknown("success_report_out_of_100_block"),horizontalAlign:pn.Kq.Center},{type:"row",id:un.JX.from("row"),left:[{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_you_corrected_left_spacing_block"),fraction:1,horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),meta:{label:"You corrected "},size:pn.yH.Regular,text:"You corrected ",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:`${i}`},size:pn.yH.Regular,text:`${i}`,textColor:pn.Il.CoreNeutral50,format:[pn.SQ.Bold],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:" issues and improved your writing by "},size:pn.yH.Regular,text:" issues and improved your writing by ",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:""+(e-t)},size:pn.yH.Regular,text:""+(e-t),textColor:pn.Il.CoreNeutral50,format:[pn.SQ.Bold],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:" points."},size:pn.yH.Regular,text:" points.",textColor:pn.Il.CoreNeutral50,format:[],selectable:!1}],name:un.yL.unknown("success_report_you_corrected_text_block"),fraction:4,horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_you_corrected_right_spacing_block"),fraction:1,horizontalAlign:pn.Kq.Center}],right:[],verticalAlign:pn.g$.Middle,name:un.yL.unknown("success_report_you_corrected_row"),spacing:{top:pn.T.D025,right:pn.T.D0,bottom:pn.T.D025,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[{type:"button",id:bi.D1.SuccessReport.OPEN_PERFORMANCE_SCORE_INTERACTION_ID,meta:{label:"See Details"},name:un.yL.unknown("success_report_see_details_button"),kind:pn.Lv.Primary,state:pn.BN.Enabled,label:{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),meta:{label:"See Details"},size:pn.yH.Regular,text:"See Details",textColor:pn.Il.CoreNeutral0,format:[],selectable:!1}],name:un.yL.unknown("textContainer"),spacing:{top:pn.T.D0,right:pn.T.D05,bottom:pn.T.D0,left:pn.T.D05},verticalAlign:pn.g$.Middle},actions:[{type:"pushAssistantFeed",feedId:"performance-score-feed"},{type:"notify",userAction:pn.nz.Click}],shape:pn.jL.Square}],name:un.yL.unknown("success_report_cta_block"),spacing:{top:pn.T.D025,right:pn.T.D0,bottom:pn.T.D0,left:pn.T.D0},horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:pn.T.D1,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0}}])(t.score,t.lowestScore,e);case vn.withQualityScore:return((e,t,i)=>[{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_top_spacing_block"),spacing:{top:pn.T.D125,right:pn.T.D0,bottom:pn.T.D125,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[{type:"image",id:un.JX.from("image"),meta:{},name:un.yL.unknown("illustration"),url:"https://assets.grammarly.com/sdui/v1/paper-plane.svg",width:5,height:5}],name:un.yL.unknown("success_report_illustration_block"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D1,left:pn.T.D0},horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[{type:"text",id:un.JX.from("text"),meta:{label:"Quality Score: "},size:pn.yH.Medium,text:"Quality Score: ",textColor:pn.Il.CoreNeutral90,format:[pn.SQ.Bold],selectable:!1},{type:"text",id:un.JX.from("text"),meta:{label:`${e}`},size:pn.yH.Medium,text:`${e}`,textColor:pn.Il.CoreNeutral90,format:[pn.SQ.Bold],selectable:!1}],name:un.yL.unknown("success_report_quality_score_block"),horizontalAlign:pn.Kq.Center},{type:"row",id:un.JX.from("row"),left:[{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_you_accepted_left_spacing_block"),fraction:8,horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:e>=100&&t>=100?fn:mn(e,t,i),name:un.yL.unknown("success_report_you_accepted_text_block"),fraction:84,horizontalAlign:pn.Kq.Center},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_you_accepted_right_spacing_block"),fraction:8,horizontalAlign:pn.Kq.Center}],right:[],verticalAlign:pn.g$.Middle,name:un.yL.unknown("success_report_you_accepted_row"),spacing:{top:pn.T.D0,right:pn.T.D0,bottom:pn.T.D0,left:pn.T.D0}},{type:"block",id:un.JX.from("block"),parts:[],name:un.yL.unknown("success_report_bottom_spacing_block"),spacing:{top:pn.T.D125,right:pn.T.D0,bottom:pn.T.D125,left:pn.T.D0}}])(t.score,t.lowestScore,e);case vn.default:return o}})(n):o;return{type:"assistantCard",id:s,meta:{},child:{type:"viewStack",id:"card-viewStack",views:{"default-suggestion":{type:"column",id:un.JX.from("column"),children:l,name:un.yL.unknown("success_report_content_column")},"tone-insights":{type:"nativeToneInsightsModal",id:"card-nativeToneInsightsModal"},feedback:{type:"nativeFeedbackModal",id:"card-nativeFeedbackModal"},settings:{type:"nativeSettingsModal",id:"card-nativeSettingsModal"}},selected:"default-suggestion"},onFocus:[{type:"switchView",where:"openToneDetectorButton-viewStack",selected:"show-open-tone-detector-button"},{type:"switchView",where:"card-viewStack",selected:"default-suggestion"},{type:"switchView",where:"header-viewStack",selected:"default-suggestion"},{type:"notify",userAction:pn.nz.Focus}],onBlur:[],properties:i}}initSuccessReportSDUIEmulation(){const e=this._statisticsService.sessionStats.view((e=>e?e.alertsStats.accepted.total:0)),t=this._statisticsService.generalScore.view((e=>null!=e?e:0)).pipe(nt.x()),i=this._statisticsService.lowestGeneralScore.view((e=>null!=e?e:0)).pipe(nt.x()),n=this._sessionModel.scoreStatus.pipe(nt.x(),p.U(C.fS((()=>ii.v0.ScoresStatus.ERROR))));this._subs.add(f.a([this.isSuccess.pipe(nt.x()),this._sduiManager.state.pipe(p.U(bi.D1.SuccessReport.findSuccessReportSduiItem),p.U(C.pC),nt.x()),this._upgradeHookCardExists,t,i,n]).pipe(S.M(hn(this._sduiBufferService.capiEvents)),p.U((([[e,t,i,n,a,r],o])=>{var s,l,c,d;const u=null!==(l=null===(s=this._statisticsService.sessionStats.get())||void 0===s?void 0:s.alertsStats.accepted.total)&&void 0!==l?l:0,p=null!==(d=null===(c=this._statisticsService.sessionStats.get())||void 0===c?void 0:c.alertsStats.dismissed.total)&&void 0!==d?d:0,g=this._statisticsService.wordsCount.get(),h=this.shouldShowSuccessReportWithPerformanceScore(r,u+p),m=this.shouldShowSuccessReportWithQualityScore(r);if(!e||i||t)return!(!e||!t)||!(e||!t)&&(this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_remove",sduiRootId:bi.D1.SuccessReport.ID}),!1);{const e=this._getSuccessReportSDUI(u,g,o,h?{layout:vn.withPerformanceScore,score:n,lowestScore:a}:m?{layout:vn.withQualityScore,score:n,lowestScore:a}:{layout:vn.default});return this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_add",rev:0,sduiRootId:bi.D1.SuccessReport.ID,sdui:e}),!0}})),h.w((a=>a?f.a([e,this._statisticsService.wordsCount,t,i,n,hn(this._sduiBufferService.capiEvents)]).pipe(y.b((([e,t,i,n,a,r])=>{var o,s;const l=null!==(s=null===(o=this._statisticsService.sessionStats.get())||void 0===o?void 0:o.alertsStats.dismissed.total)&&void 0!==s?s:0,c=this.shouldShowSuccessReportWithPerformanceScore(a,e+l),d=this.shouldShowSuccessReportWithQualityScore(a),u=this._getSuccessReportSDUI(e,t,r,c?{layout:vn.withPerformanceScore,score:i,lowestScore:n}:d?{layout:vn.withQualityScore,score:i,lowestScore:n}:{layout:vn.default});this._sduiBufferService.pushCapiSduiEvent({kind:"sdui_update",rev:0,sduiRootId:bi.D1.SuccessReport.ID,sdui:u})}))):de.E))).subscribe())}dispose(){this._subs.unsubscribe()}}var Sn=i(46108);const wn={"Style/ToneImprovement/ConfidentRewrite/ToneAI":"1f91d","Style/ToneImprovement/PersonableRewrite/ToneAI":"1f917","Style/ToneImprovement/PositiveFraming/ToneAI":"1f64c"},yn=["Style/Sensitivity/SupportUkraine/WarLanguage","Style/Sensitivity/ExtremelySensitive/SuicideIdeation"],En=e=>e.patternName.startsWith("Style/Sensitivity")&&!yn.some((t=>e.patternName===t));var kn;!function(e){e.isToneImprovementSuggestionInfo=function(e){return"emojiId"in e},e.isInclusiveLanguageToneSuggestionInfo=function(e){return"iconId"in e&&"inclusive_language"===e.toneCategory},e.createToneImprovementSuggestionUphookInfo=function(e){const t=e._raw.minicardTitle||e._raw.title||"",i=t.replace(Sn.V,"").trim(),n=t.match(Sn.V),a=n&&n.length?n[0]:null,r=wn[e.patternName];return{...a?{emojiLiteral:a}:r?{emojiId:r}:{},title:i,alertId:e.id,toneCategory:i,patternName:e.patternName,isUphook:!0}},e.isToneImprovementSuggestionUphookInfo=function(e){return"isUphook"in e&&e.isUphook}}(kn||(kn={}));class Cn{constructor(e,t,i,n,a,r,o,s,l,d){this._alertsReader=e,this._getSessionUuid=i,this._gnar=n,this.emogenieService=a,this._upgradeViewModel=r,this._cardActions=s,this._sduiItems=l,this._experimentClient=d,this._sub=new qi.w0;const u=this._sduiItems.view(bi.D1.StrongAlertRef.getStrongAlertRefBulkDismissAlertIds),p=c.h.combine(t,u,((e,t)=>si.p.reduce([],((e,i)=>(t.has(i.id)||e.push(i.alert),e)))(e))),g=a.viewState.view("isBrandTonesEnabled"),h=o.view("isPremium");this.toneSuggestionInfo=c.h.combine(p,g,h,((e,t,i)=>Cn.getToneSuggestionInfoFromAlerts(e,t,i))).view()}static getToneSuggestionInfoFromAlerts(e,t,i){let n;if(i){n=e.filter((e=>e.patternName.startsWith("Style/ToneImprovement")||En(e))).map((e=>{var t,i,n;return En(e)?{iconId:null!==(t=e._raw.extra_properties.icon_id)&&void 0!==t?t:"",title:e.miniCardTitle,alertId:e.id,toneCategory:"inclusive_language",patternName:e.patternName}:{emojiId:null!==(i=e._raw.extra_properties.emoji_id)&&void 0!==i?i:"",title:He.bZ.isToneAI(e)?e.miniCardTitle:e.miniCardTitle.replace(Sn.V,"").trim(),alertId:e.id,toneCategory:null!==(n=e._raw.extra_properties.tone)&&void 0!==n?n:"",patternName:e.patternName}}))}else{n=e.filter((e=>e._raw.hidden&&(e=>e.patternName.startsWith("Style/ToneImprovement"))(e))).map(kn.createToneImprovementSuggestionUphookInfo)}const a=new Set(n.map((e=>e.toneCategory))),r=n[0],o=t?"Want to sound more on-brand?":a.size>1?"Strike the right tone":null==r?void 0:r.title;return r?{...r,title:o}:r}_getCurrentSessionUuid(){return(0,a.zG)(this._getSessionUuid(),C.fS((()=>"")))}onShowToneSuggestionInfo(e){const t=kn.isToneImprovementSuggestionInfo(e)?e.emojiId:kn.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=kn.isToneImprovementSuggestionUphookInfo(e);this._gnar.toneDetectorToneSuggestionInfoShow(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i&&((0,ft.nE)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro",experimentClient:this._experimentClient}),(0,bt.Tb)().upgradeHooks.showUpgradeHook("toneDetector","emogenieReport","pro"))}onClickToneSuggestionInfoCta(e){const t=kn.isToneImprovementSuggestionInfo(e)?e.emojiId:kn.isInclusiveLanguageToneSuggestionInfo(e)?e.iconId:e.emojiId||e.emojiLiteral||"",i=kn.isToneImprovementSuggestionUphookInfo(e);if(this._gnar.toneDetectorToneSuggestionInfoCtaClick(i,e.patternName,this._getCurrentSessionUuid(),e.title,t),i)(0,ft.Qi)(this._gnar,{placement:"toneDetector",upgradeHookName:"toneDetector",upgradeHookSlot:"emogenieReport",upgradeHookVariant:"pro",experimentClient:this._experimentClient}),(0,bt.Tb)().upgradeHooks.clickUpgradeHook("toneDetector","emogenieReport","pro"),this._upgradeViewModel.openUpgradeUrlFromPlace(vt.L.Place.toneSuggestion);else{const t=this._sduiItems.get(),i=(0,a.zG)(this._alertsReader.getById(e.alertId),C.tS(He.bZ.getRawId),C.tS((e=>bi.D1.getByAlertId(t,e))),_.MH);this._cardActions.next(bi.fr.create([bi.D1.AssistantFeed.createPushAssistantFeedAction(bi.D1.AssistantFeed.TONE_INSIGHTS_SUGGESTIONS_FEED_ID,i.id)]))}}dispose(){this._sub.unsubscribe()}}class _n{constructor(e){this._subs=new qi.w0,this._upgradeHookCard=c.h.create(C.YP),this._upgradeHookCardFocused=c.h.create(!1),this.processUpgradeHookSduiCardActions=(e,t)=>e.pipe(S.M(this._upgradeHookCard),p.U((([{actions:e,cardId:i},n])=>{e.forEach((e=>{"upgradeToPremium"===e.type?t.openUpgradeUrlFromPlace(vt.L.Place.assistantCardList):"notify"===e.type&&e.userAction===pn.nz.Focus&&(0,P.zG)(n,C.g_(P.jv,(e=>e.id.toString()===i)),(e=>{this._upgradeHookCardFocused.set(e)}))}))}))).subscribe(),this._subs.add(e.pipe(p.U(bi.D1.StrongAlertRef.findStrongAlertRefUpgradeHookSduiItem)).subscribe(E.wW(this._upgradeHookCard)))}get upgradeHookCard(){return this._upgradeHookCard.view()}get upgradeHookCardExists(){return this._upgradeHookCard.view(C.pC)}get upgradeHookCardFocused(){return this._upgradeHookCardFocused.view()}dispose(){this._subs.unsubscribe()}}var An=i(47137),In=i(71798),Tn=i(53768),xn=i(12403),Rn=i(68472),Pn=i(14969),Mn=i(77590),Dn=i(99402),Fn=i(69652),Ln=i(76468),Bn=i(7913),Un=i(84241);const On=({feedbackVM:e,entryPoint:t})=>r.createElement(Fn.u,{showDelay:Dn.gk,message:"Leave feedback"},r.createElement("div",{className:Un.feedbackButton,onClick:()=>e.openFeedback(t),"data-grammarly-part":"assistant-feedback-btn"},r.createElement(Ln.A,{color:Bn.Z.blue50}),"Anything we can improve?"));var Hn=i(99438);const Gn=({children:e,popActiveView:t,panelClassName:i,contentClassName:n,footer:a,onClickBack:o,hideBackButton:s=c.h.create(!1),dataPartName:l})=>r.createElement("div",{className:Hn.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},r.createElement(B.F.Fragment,null,s.view((e=>!e&&r.createElement(V.M,{className:Hn.viewOverlayGoBack,clickHandler:()=>o?o():t(),dataGrammarlyPart:"assistant-go-back"},"<- Back")))),r.createElement("div",{className:i||Hn.defaultViewOverlayPanel},r.createElement("div",{className:n||Hn.content,"data-grammarly-part":l},e),a&&r.createElement("div",{className:Hn.footer},a)));var Nn=i(82914),zn=i(1695),Vn=i(64835),Wn=i(63202),jn=i(91957),qn=i(4972),Kn=i(19523),$n=i(25768);const Yn=({assistantSettingsViewModel:e,upgradeViewModel:t,experimentClient:i,assistantFeedbackViewModel:n,onClose:a,children:o})=>{const{domain:s,actions:l,state:d,hasInProductDiscountSpecialOffer:p}=e,g=r.useRef(c.h.create(C.YP));r.useEffect((()=>{l.getConfiguration("assistantSettingsPopup").then((e=>{(0,P.zG)(e,at.UI((e=>{g.current.set(C.ij(e))})))}))}),[]);const h=r.useCallback((({overrideUrl:e})=>{t.openUpgradeUrlWithOverride(vt.L.Place.extensionSettingsAssistant,e)}),[t]),[m,f]=r.useState(!!d.view("page","enabled").get()),v={checked:m,update:f},b=r.createElement(B.F.div,{role:"region","aria-label":"Grammarly settings"},d.view((({user:e,page:t,dynamicConfig:n,dapi:a})=>r.createElement(Vn.a7,{actions:l,config:{enabled:!0,domain:s},settings:t,user:e,dapi:a,dynamicConfig:n,siteCategory:qn.y.other,isReportBugFeatureAllowed:!i.isGateEnabled(Ki.K.HideReportBugByGrammarlyEmployeeFeature),openReportBugForm:e=>{self.open(Kn.WY(e))},openDebugPage:()=>{self.open(chrome.runtime.getURL("src/debug.html"))},openUrl:e=>self.open(e),placement:"assistant",showCitationBuilderToggle:!1,siteSwitcherChecked:v,isIndianEnglishDialectSupported:i.isGateEnabled(Ki.K.IndianEnglishDialect)||i.isGateEnabled(Ki.K.IndianEnglishDialectInternal),isAutoApplySupported:i.isGateEnabled(Ki.K.SuggestionDeliveryAutoApply),downloadDebugReports:()=>Mn.B.download()}))),n?r.createElement(On,{feedbackVM:n,entryPoint:yt.settings}):null),S=r.createElement(zn.z,{kind:"primary",type:"submit",onClick:()=>{l.toggleSite(m,s),Nn.J.checkingToggleClick("assistant",qn.y.other,m?"on":"off",s),(0,bt.Tb)().toggleExtension(m,"assistant",(0,jn.Cg)(s)),null==a||a()},className:$n.settingsViewDoneButton,dataGrammarlyPart:"single-card-assistant-settings-done-button"},"Done"),w=r.createElement(B.F.Fragment,null,(0,Ni.gm)(d,p).view((({user:e,hasSpecialOffer:t})=>r.createElement(Wn.Z,{user:e,openSubscriptionDialog:h,isAssistant:!0,hasInProductDiscountSpecialOffer:t,uphookConfiguration:g.current,trackUphookHubEvent:(e,t)=>{t.pipe((0,u.h)(C.pC),(0,Pn.P)()).subscribe((t=>{l.trackConfiguration(e,t.value)}))},experimentClient:i}))),S);return o({content:b,footer:w})},Jn=({viewModels:e,experimentClient:t})=>r.createElement(Yn,{onClose:()=>e.assistantLayoutViewModel.popActiveView(),assistantSettingsViewModel:e.assistantSettingsViewModel,upgradeViewModel:e.upgradeViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,experimentClient:t},(({content:t,footer:i})=>r.createElement(Gn,{dataPartName:"settings-view-overlay",popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),panelClassName:$n.settingsViewOverlayPanel,contentClassName:$n.settingsViewOverlayContent,footer:i},t)));var Xn=i(47900),Qn=i(85837),Zn=i(70411);const ea={caption:"Compose an email",buttons:[{id:"gmail",icon:"gmail",label:"Gmail",href:"https://mail.google.com/#compose"},{id:"outlook",icon:"outlook",label:"Outlook",href:"https://outlook.office.com/mail/"}]},ta={caption:"Edit a document",buttons:[{id:"gDocs",icon:"gdocs",label:"Google Docs",href:"https://docs.google.com/"},{id:"word",icon:"word",label:"Word",href:"https://www.microsoft365.com/launch/word"}]},ia=[ea,ta,{caption:"Update your profile",buttons:[{id:"linkedIn",icon:"linkedIn",label:"LinkedIn",href:"https://www.linkedin.com/feed/"}]}],na=[ea,ta,{caption:"Send a message",buttons:[{id:"slack",icon:"slack",label:"Slack",href:"https://app.slack.com/client/"},{id:"teams",icon:"teams",label:"Teams",href:"https://teams.microsoft.com/"}]}],aa=({isStudent:e})=>(r.useEffect((()=>{Nn.J.getStartedUseCasesShow()}),[]),r.createElement("div",{className:Zn.getStartedUseCases},r.createElement("section",{className:Zn.copyContainer},r.createElement("p",{className:Zn.title},"Now, see Grammarly in action"),r.createElement("p",{className:Zn.subtitle},"Start writing something new, or proofread a piece of text you already wrote.")),r.createElement("section",{className:Zn.ctaContainer},(e?ia:na).map((({caption:e,buttons:t})=>r.createElement("div",{key:e},r.createElement("p",{className:Zn.ctaCaption},e),r.createElement("div",{className:Zn.ctaButtons},t.map((({id:e,icon:t,label:i,href:n})=>r.createElement(In.zx,{key:e,className:Zn.externalLink,"data-part":`use-case-link-${e}`,"aria-label":e,name:`get-started-use-cases-${e}`,styleType:Xn.Z.Type.Base,href:n,target:"_blank",onClick:()=>{Nn.J.getStartedUseCasesLinkClick(e)}},t&&r.createElement("div",{...(0,Qn.Sh)(Zn.icon,Zn[t])}),r.createElement("span",null,i)))))))))));var ra=i(53814),oa=i(97258),sa=i(24044),la=i(15380);const ca=[{id:Li.AccountCreation,title:"Create an account",description:"Sign up for free or sign in to an existing account to start receiving writing insights."},{id:Li.Tour,title:"Take a quick tour",description:"Want to see how Grammarly works?"},{id:Li.TryWebsite,title:"Try writing with Grammarly",description:"Get suggestions wherever you write online with the browser extension."},{id:Li.ViewApps,title:"Explore other Grammarly products",description:"Get suggestions from Grammarly when you write on all your favorite platforms and devices."}],da=[{id:"gmail",text:"Try it in Gmail",icon:"gmail",href:"https://mail.google.com/#compose"},{id:"outlook",text:"Try it in Microsoft Outlook",icon:"outlook",href:"https://outlook.live.com/mail"},{id:"gDocs",text:"Try it in Google Docs",icon:"gdocs",href:"https://docs.google.com"}],ua=[{id:"desktop",text:"Grammarly for Desktop",href:"https://www.grammarly.com/desktop"},{id:"keyboard",text:"The Grammarly Keyboard",href:"https://www.grammarly.com/mobile"}];var pa=i(75607);const ga=({label:e,href:t,onClick:i})=>r.createElement(In.zx.Primary,{className:pa.link,"data-part":e.toLowerCase().split(" ").join("-"),onClick:i,target:t?"_blank":"_self",href:t},e),ha=({items:e,onClick:t})=>r.createElement(r.Fragment,null,e.map((({id:e,text:i,icon:n,href:a})=>r.createElement(In.zx,{key:e,className:pa.externalLink,"data-part":`try-${e}`,"aria-label":e,name:`get-started-${e}`,styleType:Xn.Z.Type.Base,href:a,target:"_blank",onClick:()=>t(e)},n&&r.createElement("div",{...(0,Qn.Sh)(pa.icon,pa[n])}),r.createElement("span",null,i))))),ma=(e,t)=>{const i=e.find((e=>!t.has(e.id)));return null==i?void 0:i.id};var fa=i(9838);const va=({completed:e,total:t})=>r.createElement("div",{className:fa.progressBarBg},r.createElement("div",{"data-name":"progress-bar","aria-label":"completionProgress",className:fa.progressBar,role:"progressbar","aria-valuenow":e,style:{width:(e<=t&&e>=0?e/t*100:e<0?0:100)+"%"}}));var ba,Sa;!function(e){e.Complete="complete",e.Incomplete="incomplete"}(ba||(ba={})),function(e){e.macDesktop="macDesktop",e.winDesktop="winDesktop",e.android="android",e.iOS="iOS"}(Sa||(Sa={}));const wa=e=>{switch(e){case Wi.macExtension:return Sa.macDesktop;case Wi.windowsExtension:return Sa.winDesktop;case Wi.mobileAndroid:return Sa.android;case Wi.mobileIOS:return Sa.iOS;default:(0,l.vE)(e)}},ya=({getStartedChecklistViewModel:e,notify:t})=>{const{anonymous:i,checklistState:n,gnar:a,actions:o,userClientState:s}=e,[l,c]=r.useState((()=>{const e=new Set([...n.completedItems,...i?[]:[Li.AccountCreation]]);return{items:e,count:e.size}})),[d,u]=r.useState(((e,t)=>{const i=ma(e,t);return i?new Set([i]):new Set})(ca,l.items)),p=(e,i)=>{const r=new Set,d=new Set(l.items);if(e!==Li.AccountCreation){l.items.has(e)||(d.add(e),c({items:d,count:d.size}),Object.values(Li).every((e=>d.has(e)))&&t());const p=ma(ca,d);r.delete(e),p&&r.add(p),u(r);const g=Object.values(Wi).filter((e=>s.get(e)===Vi.installed)).map(wa);a.getStartedLinkClick(g,i,e,d.size,ca.length),o.updateChecklistState({...n,completedItems:[...d]})}},g=e=>l.items.has(e)?ba.Complete:ba.Incomplete;return r.useEffect((()=>{a.getStartedChecklistShow(Array.from(l.items),ma(ca,l.items))}),[]),r.createElement("div",{className:sa.getStartedChecklist},r.createElement(oa.K,{size:24,type:"full",className:sa.logo}),r.createElement(Xn.Z.H3,{className:sa.title},"Welcome! Here are a few steps to get you started."),r.createElement(Xn.Z.Base,{className:sa.progressCaption},"You’ve completed ",r.createElement("strong",null,l.count)," out of"," ",r.createElement("strong",null,ca.length)," steps."),r.createElement(va,{total:ca.length,completed:l.count}),r.createElement(ra.W,{allChecklistItems:ca,completedItems:l,expandedItems:d,onExpandItem:e=>{const t=new Set,n=g(e),r=i?Li.AccountCreation:e,o=g(r);if(a.getStartedSectionClick(n,e),0===d.size)t.add(r),a.getStartedItemExpand(o,r);else{const[i]=d;i!=e?(t.add(r),a.getStartedItemCollapse(n,i),a.getStartedItemExpand(o,r)):a.getStartedItemCollapse(n,i)}u(t)},getCTA:e=>((e,t)=>{switch(e){case"accountCreation":return r.createElement(ga,{label:"Sign up",href:"https://www.grammarly.com/signup",onClick:()=>t(Li.AccountCreation,Li.AccountCreation)});case"tour":return r.createElement(ga,{label:"Start tour",onClick:()=>{t(Li.Tour,Li.Tour),(0,ot.OB)().bgRpc.api.sendToFocusTab({kind:la.B.Kind.showOnboardingDialog})}});case"tryWebsite":return r.createElement(ha,{items:da,onClick:e=>t(Li.TryWebsite,e)});case"viewApps":return r.createElement(ha,{items:ua,onClick:e=>t(Li.ViewApps,e)});default:return null}})(e,p)}))};var Ea=i(72314);const ka=({htmlToSanitize:e,...t})=>r.createElement("div",{...t,dangerouslySetInnerHTML:{__html:(0,Ea.sanitize)(e)}});var Ca=i(73717);const _a=({title:e,details:t,examples:i})=>r.createElement("div",{className:Ca.learnMore},void 0!==e?r.createElement("div",{className:Ca.learnMoreTitle},(0,dn.kC)(e)):null,r.createElement(ka,{htmlToSanitize:t}),i.map(((e,t)=>{const i=e.type===an.correct,n=e.type===an.incorrect,a=i||n?r.createElement("div",{...(0,Qn.Sh)(Ca.learnMoreExampleIcon,i?Ca.learnMoreExampleCorrectIcon:null,n?Ca.learnMoreExampleIncorrectIcon:null)}):null;return r.createElement("div",{className:Ca.learnMoreExample,key:`learn-more-example-${t}`},e.title?r.createElement(r.Fragment,null,r.createElement("div",{className:Ca.learnMoreExampleIconAndTitle},a,r.createElement("div",{className:Ca.learnMoreExampleTitle},e.title)),r.createElement(ka,{...(0,Qn.Sh)(a?Ca.learnMoreExampleTextMarginLeft:null,e.useItalicText?Ca.learnMoreExampleTextItalic:null),htmlToSanitize:e.text})):r.createElement(ka,{...(0,Qn.Sh)(e.useItalicText?Ca.learnMoreExampleTextItalic:null),htmlToSanitize:e.text}))}))),Aa=({learnMoreInfo:e})=>r.createElement(B.F.Fragment,null,e.view((e=>e?r.createElement(_a,{title:e.showTitleOnContent?e.title:void 0,details:e.details,examples:e.examples}):null)));var Ia=i(26050),Ta=i(99576);const xa=({browser:e,className:t,title:i="BETA",color:n="blue"})=>"safari"!==e?r.createElement(Ta.C,{title:i,className:t,kind:"blue"===n?"primary":"green"===n?"success":(0,P.Rz)(n)}):null,Ra=({popActiveView:e,browser:t,onClickBack:i,children:n})=>{const[a,o]=r.useState(!1);return r.createElement(Gn,{dataPartName:"proofit-view-overlay",popActiveView:e,panelClassName:Ia.proofitViewOverlayPanel,onClickBack:i},r.createElement("div",{className:Ia.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||a||(e.focus(),o(!0))}},r.createElement("div",{className:Hn.defaultViewOverlayHeader},r.createElement("div",{className:Ia.proofitViewOverlayHeader},"Expert Writing Help",r.createElement(xa,{browser:t,className:Ia.proofitViewOverlayHeaderBetaBadge}))),n))};var Pa=i(2087),Ma=i(20061);var Da=i(48658),Fa=i(91775),La=i(68057);const Ba=({turnaroundTime:e})=>r.createElement("div",{className:Fa.proofitHowItWorksSteps},r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStep,Fa.proofitHowItWorksStepOne)},"Your draft will be minimized and shared with writing experts.",r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumberContainer,Fa.proofitHowItWorksStepOneNumberContainer)},r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumber,Fa.proofitHowItWorksStepOneNumber)},"1"))),r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStep,Fa.proofitHowItWorksStepTwo)},"You will see progress indication. The average turnaround is ",e," seconds.",r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumberContainer,Fa.proofitHowItWorksStepTwoNumberContainer)},r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumber,Fa.proofitHowItWorksStepTwoNumber)},"2"))),r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStep,Fa.proofitHowItWorksStepThree)},"Your draft will re-open with revisions highlighted.",r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumberContainer,Fa.proofitHowItWorksStepThreeNumberContainer)},r.createElement("div",{...(0,Qn.Sh)(Fa.proofitHowItWorksStepNumber,Fa.proofitHowItWorksStepThreeNumber)},"3")))),Ua=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:n=null,isLoading:a=!1,style:o,onTogglePrivacyInfo:s,showPrivacyInfo:l,disableHowItWorksInfo:c=!1,onDisableHowItWorksInfo:d,showHowItWorksInfo:u,onShowHowItWorksInfo:p})=>{const[g,h]=r.useState(null!=l&&l),[m,f]=r.useState(null!=u&&u),v=t>0?t:0;var b,S;r.useEffect((()=>{null==s||s(g)}),[g]),r.useEffect((()=>{h(null!=l&&l)}),[l]),r.useEffect((()=>{f(null!=u&&u)}),[u]),b=()=>null==p?void 0:p(),S=m,r.useEffect((()=>{S&&b()}),[S]);const w=r.useCallback((()=>{c||m?i():f(!0)}),[c,m,i]);return r.createElement("div",{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...o}},r.createElement("div",{className:La.proofitRequestForm},g?r.createElement(r.Fragment,null,r.createElement("div",{className:La.proofitRequestFormPrivacyInfoTitle},"How we protect you"),r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescription},r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItem},r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draft—no prior messages or contact details.")),r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItem},r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),r.createElement("div",{className:La.proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),r.createElement(zn.z,{kind:"outlined",onClick:()=>h(!1)},"Continue")):r.createElement(r.Fragment,null,m?r.createElement(Ba,{turnaroundTime:e}):r.createElement(r.Fragment,null,r.createElement("div",{className:La.proofitRequestFormImg}),r.createElement("div",{className:La.proofitRequestFormTitle},"Get instant writing help"),r.createElement("div",{className:La.proofitRequestFormDescription},"Our writing experts are standing by to review your email."),r.createElement("div",{className:La.proofitRequestFormCostAndTime},r.createElement("div",{className:La.proofitRequestFormCost},r.createElement("div",{className:La.proofitRequestFormCostAndTimeTitle},v," free ",(0,dn._6)(v,"review","reviews")),r.createElement("div",{className:La.proofitRequestFormCostAndTimeSubtitle},"left this month",r.createElement("sup",null,"*"))),r.createElement("div",{className:La.proofitRequestFormTime},r.createElement("div",{className:La.proofitRequestFormCostAndTimeTitle},e," seconds"),r.createElement("div",{className:La.proofitRequestFormCostAndTimeSubtitle},"average turnaround")))),r.createElement(zn.z,{kind:"primary",className:La.proofitRequestFormRequestBtn,disabled:Boolean(n||a),onClick:w},a?r.createElement("div",{className:Da.proofitRequestFormBtnLoadingSpinner}):c||m?"Start review":"Request now"),n||a?n?r.createElement("div",{className:La.proofitRequestFormUnavailableMsg},r.createElement(Ma.Q,{info:n})):null:r.createElement(zn.z,{kind:"link",onClick:()=>h(!0)},"Learn how we protect your privacy"),r.createElement("div",{...(0,Qn.Sh)(La.proofitRequestFormFootnote,m?La.proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:La.proofitRequestFormFootnoteFreeTrial)},m?r.createElement(Pa.J,{labelId:"proofit-request-form-how-it-works-dont-show-again",onChange:d},"Don't show this again"):r.createElement("span",null,r.createElement("sup",null,"*")," included with your Premium subscription")))))},Oa=({proofitVM:e,...t})=>{const i=(0,Re.fW)(),[n,a]=r.useState(!1),[o,s]=r.useState(!1),l=r.createElement(B.F.Fragment,null,(0,f.a)([e.feature.layoutCreated,e.feature.requestInfo,e.feature.turnaroundTime,e.feature.quotaRemaining,e.feature.requestDisabledInfo,e.feature.disableHowItWorksInfo]).pipe((0,p.U)((([t,l,c,d,u,p])=>t&&l.status!==Mt.eE.REVIEWING?r.createElement(Ua,{turnaroundTime:c,freeTrialQuota:d,onSubmit:()=>e.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:u,isLoading:l.status===Mt.eE.PREPARING||l.status===Mt.eE.PRE_SUBMIT,showPrivacyInfo:n,onTogglePrivacyInfo:a,disableHowItWorksInfo:p,onDisableHowItWorksInfo:t=>e.feature.onDisableHowItWorksInfo(t),showHowItWorksInfo:o,onShowHowItWorksInfo:()=>s(!0)}):null))));return t.insideSingleCardAssistant?l:r.createElement(Ra,{popActiveView:t.popActiveView,browser:t.browser,onClickBack:()=>{n?a(!1):o?s(!1):t.popActiveView()}},l)};var Ha=i(46154),Ga=i(44258);const Na=({suggestionsMade:e,onAccept:t,onFeedbackFormSubmitted:i})=>r.createElement("div",{className:Ga.proofitReviewForm,"data-grammarly-part":"proofit-review-form"},r.createElement("div",{className:Ga.proofitReviewFormTitle},"Our experts made ",e," ",(0,dn._6)(e,"suggestion","suggestions")),r.createElement("div",{className:Ga.proofitReviewFormDescription},"Are you satisfied with the suggestions that our experts provided?"),r.createElement("div",{className:Ga.proofitFeedbackForm},r.createElement(Ha.q,{hideLogo:!0,hideTitle:!0,hideTextBoxTitle:!0,withScore:!0,placeholderText:"How can we improve?",onSubmit:i,showPostSubmitScreen:!1})),r.createElement("div",{className:Ga.proofitDoneButton},r.createElement(zn.z,{kind:"link",onClick:t},"Done"))),za=({proofitVM:e,...t})=>{const i=(0,Re.fW)(),n=r.createElement(B.F.Fragment,null,(0,f.a)([e.feature.layoutCreated,e.feature.requestInfo]).pipe((0,p.U)((([t,n])=>t&&n.status===Mt.eE.REVIEWING?r.createElement(Na,{suggestionsMade:n.suggestionsMade,onAccept:()=>e.onCompleteRequest(i),onFeedbackFormSubmitted:t=>{e.onSubmitFeedback(t),e.onCompleteRequest(i)}}):null))));return t.insideSingleCardAssistant?n:r.createElement(Ra,{popActiveView:t.popActiveView,browser:t.browser},n)};var Va=i(55879),Wa=i(19282),ja=i(75021);const qa=({message:e,children:t,placement:i,size:n,hideAfter:a,onClose:o,dataGrammarlyPart:s="ui-kit-popover-notification"})=>{const[l,c]=r.useState(!1);return r.useEffect((()=>{let e;return a>0&&(c(!0),e=self.setTimeout((()=>{c(!1),null==o||o()}),a)),()=>{e&&self.clearTimeout(e)}}),[a]),r.createElement(Wa.J,{dataGrammarlyPart:s,isOutsideReferenceElement:!1,headerContent:r.createElement("div",{className:ja.popoverNotificationMessage},e),mainContent:null,show:l,placement:i,size:n,onClose:()=>{c(!1),null==o||o()},showArrow:!1,includeMainContentPadding:!1},t)};var Ka=i(92607),$a=i(8015),Ya=i(14487);const Ja=({emotion:e,isBrandTonesEnabled:t,index:i,onFeedback:n})=>{const[a,o]=r.useState(0),s=r.createElement(Fn.u,{message:`${e.prevalence} intensity`,showDelay:300},r.createElement("div",{className:Ya.emogenieReportItemEmotionIntensity},[0,1,2,3,4].map((t=>{const i=t/5<=e.confidence;return r.createElement("div",{key:`${e.name}-intensity-${t}`,...(0,Qn.Sh)(Ya.emogenieReportItemEmotionIntensityDot,i&&Ya.emogenieReportItemEmotionIntensityDotActive)})})))),l=r.createElement(Fn.u,{message:e.brandToneDescription,showDelay:300},r.createElement("div",null,r.createElement(Va.JO.Info,{width:10,className:"off"===e.brandToneLabel?Ya.emogenieBrandToneInfoIconOff:Ya.emogenieBrandToneInfoIconOn}))),c=r.createElement(Ta.C,{title:r.createElement(r.Fragment,null,e.brandToneLabel,"-BRAND ",l),kind:"off"===e.brandToneLabel?"error":"primary"}),d=e.brandToneLabel?c:s,u=`emotion-${i}-${e.name}`;return r.createElement(B.F.div,{...(0,Qn.Sh)(Ya.emogenieReportItem,t?Ya.emogenieReportItemBrandTone:null),"data-grammarly-part":"tone-detector-emotion","data-tone-detector-emotion-name":e.name},r.createElement("div",{role:u},r.createElement("div",{className:Ya.emogenieReportItemEmotion},r.createElement("div",{className:Ya.emogenieReportItemEmotionEmojiAndNameContainer},r.createElement(qa,{dataGrammarlyPart:"tone-detector-emotion-feedback-notification",message:"Thank you for the feedback!",hideAfter:a,placement:"right",onClose:()=>o(0),size:"medium"},r.createElement("div",{className:Ya.emogenieReportItemEmotionEmojiAndName},r.createElement(O.dy,{size:"small-medium",unicodeHexArray:[e.emojiId],unicodeLiteral:e.emoji,className:Ya.emogenieReportItemEmotionEmoji}),r.createElement("span",{className:Ya.emogenieReportItemEmotionName},e.name)))),r.createElement("div",{className:Ya.emogenieReportItemEmotionBadgeOrIntensity},d),r.createElement(Ka.m,{dataGrammarlyPart:"tone-detector-emotion-actions-menu",ariaMenuId:`${e.name}-emotion-actions-menu`,ariaMenuLabel:`${e.name} Emotion Actions Menu`,sections:[{title:"Help us improve",items:[{id:"tone-detector-emotion-actions-menu-item-like",icon:r.createElement("div",{className:Ya.emogenieReportItemEmootionActionsMenuThumsUpIcon}),label:"Tone seems correct",onClick:()=>{n({emotionName:e.name,feedbackType:A.y_.EMOTION_LIKE}),o(1200)}},{id:"tone-detector-emotion-actions-menu-item-dislike",icon:r.createElement("div",{className:Ya.emogenieReportItemEmootionActionsMenuThumsDownIcon}),label:"Tone seems incorrect",onClick:()=>{n({emotionName:e.name,feedbackType:A.y_.EMOTION_DISLIKE}),o(1200)}}]}],size:"medium",placement:"left"},r.createElement($a.h,{dataGrammarlyPart:"tone-detector-emotion-actions-menu-button",className:Ya.emogenieReportItemEmotionActionsMenuButton},r.createElement("div",{className:Ya.emogenieReportItemEmotionActionsMenuIcon}))))))};var Xa=i(33839),Qa=i(11510);const Za=({emotions:e,isBrandTonesEnabled:t,toneSuggestionInfo:i,onMount:n,onReportEmotionFeedback:a,...o})=>{let s;switch(r.useEffect(n,[]),!0){case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel&&e.confidence>.75)):s="Your tone may sound off to readers";break;case e.some((e=>e.brandToneLabel&&"off"===e.brandToneLabel)):s="Something sounds slightly off...";break;case e.some((e=>e.brandToneLabel&&"on"===e.brandToneLabel)):s=t?"You're on-brand! Great job!":"Your writing sounds clear and aligned. Great job!";break;default:s="How this may sound to readers:"}return r.createElement("div",{className:Qa.emogenieReport,"data-grammarly-part":"tone-detector"},r.createElement("div",{className:Qa.emogenieReportHeader},r.createElement("div",{className:Qa.emogenieReportHeaderTitle},s),o.showBetaLabel?r.createElement(xa,{browser:o.browser}):null),r.createElement("div",{className:Qa.emogenieReportItems,"data-grammarly-part":"tone-detector-emotions"},e.map(((e,i)=>r.createElement(Ja,{key:e.name,index:i,emotion:e,isBrandTonesEnabled:t,onFeedback:a})))),i?r.createElement(er,{...i}):null)},er=({onMount:e,emojiId:t,emojiLiteral:i,iconId:n,title:a,onClickCta:o,ctaText:s,isUphook:l})=>(r.useEffect(e,[]),r.createElement("div",{className:Qa.emogenieReportToneSuggestionInfo},r.createElement("div",{className:Qa.emogenieReportToneSuggestionInfoEmojiAndTitle},t?r.createElement(O.dy,{size:"small-medium",unicodeHexArray:[t],unicodeLiteral:null,className:Qa.emogenieReportToneSuggestionInfoEmoji}):i?r.createElement(O.dy,{size:"small-medium",unicodeHexArray:null,unicodeLiteral:i,className:Qa.emogenieReportToneSuggestionInfoEmoji}):n?r.createElement("img",{alt:n,src:`https://assets.grammarly.com/icons/v1/${n}.svg`,style:{width:20,height:20},className:Qa.emogenieReportToneSuggestionInfoEmoji}):null,r.createElement("div",null,a)),l?r.createElement(Xa.Y,{onClick:o,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta",cta:"Get Pro"}):r.createElement(zn.z,{kind:"primary",onClick:o,dataGrammarlyPart:"tone-detector-tone-suggestion-info-cta"},s))),tr=({emogenieService:e,toneSuggestionInfo:t,onShowToneSuggestionInfo:i,onClickToneSuggestionInfoCta:n,showBetaLabel:a,browser:o})=>r.createElement(B.F.Fragment,null,c.h.combine(e.viewState,null!=t?t:c.h.create(void 0),(({report:t,isBrandTonesEnabled:s},l)=>{let c;if(l&&(c={title:l.title,onMount(){null==i||i(l)},onClickCta(){null==n||n(l)},ctaText:"See suggestions",isUphook:!1},kn.isToneImprovementSuggestionUphookInfo(l)&&(c={...c,isUphook:!0,emojiId:l.emojiId,emojiLiteral:l.emojiLiteral}),c=kn.isInclusiveLanguageToneSuggestionInfo(l)?{...c,iconId:l.iconId}:{...c,emojiId:l.emojiId}),t&&Array.isArray(t.emotions)){const i={emotions:t.emotions,isBrandTonesEnabled:s,onMount:()=>e.actions.trackReportShow(s),onReportEmotionFeedback:t=>e.actions.reportEmotionFeedback(t),toneSuggestionInfo:c};return a?r.createElement(Za,{...i,showBetaLabel:!0,browser:o}):r.createElement(Za,{...i,showBetaLabel:!1})}return null})));var ir;!function(e){e.Feedback="feedback",e.Settings="settings",e.ToneInsight="toneInsight",e.LearnMore="learnMore"}(ir||(ir={}));const nr=r.createContext({isEnabled:!1,currentView:null,setCurrentView:()=>{}}),ar=({children:e,view:t})=>{const{setCurrentView:i,isEnabled:n}=r.useContext(nr);return r.useEffect((()=>{if(n)return i(t),()=>i(null)}),[n,t]),r.createElement(r.Fragment,null,e)};var rr=i(86399),or=i(54659);const sr=e=>{const t=t=>"known"===t.source.kind?r.createElement(e.designSystem.icon[t.source.name],{key:t.source.name,backgroundColor:t.backgroundColor}):r.createElement(e.designSystem.image,{key:t.source.name,backgroundColor:t.backgroundColor,...t.source});return r.createElement(or.v.Dropdown,{label:t(e.icon),placement:"top right",theme:{button:dr.button,item:dr.item},"aria-label":e.menu.meta.label,onAction:t=>(0,P.zG)(e.menu.sections,rr.tS((e=>e.items)),rr.Ew((e=>e.id===String(t))),_.bw((t=>e.onClick(t.onClickActions,t.id)())))},e.menu.sections.map(((e,i)=>r.createElement(or.v.Section,{key:i,title:e.title},e.items.map((e=>r.createElement(or.v.Item,{key:e.id,textValue:e.id},e.icon&&t(e.icon),e.text)))))))},lr={flexShrink:0,alignItems:"center",justifyContent:"center",height:Z.ux.rem(2),width:Z.ux.rem(2)},cr={$nest:{"& i":{height:Z.ux.rem(2),width:Z.ux.rem(2)}}},dr=Z.ux.stylesheet({button:[lr],item:[cr]});var ur=i(97579);const pr={...(0,An.T)({default:{},hovered:{backgroundColor:Tn.NeutralGray10},clicked:{},disabled:{},toggled:{},hidden:{}})},gr=Z.ux.stylesheet({main:[xn.o_],primary:[xn.U8],secondary:[pr,xn.P5],toggle:xn.hc,round:[xn.$O],yellow:xn.g2,outlined:[pr,xn.Yf],link:[xn.wy],darkPrimary:[xn.hx],darkSecondary:[xn.kG],ggoPrimary:[xn.KF]});const hr=({children:e})=>r.createElement("div",{className:ur.singleCardAssistantNativeContentWithPadding},e),mr=({children:e,maxHeight:t})=>r.createElement("div",{style:{maxHeight:t,overflowY:"auto"}},e),fr=Z.ux.style(xn.o_,(0,An.T)({default:{backgroundColor:Tn.Gold20,color:Tn.Gold90,lineHeight:Z.ux.rem(2),transitionDuration:".2s",$nest:{"& span":{color:Tn.Gold90}}},hovered:{backgroundColor:Tn.Gold30,$nest:{"& i":{fill:Tn.Gold90,stroke:Tn.Gold90},"& span":{color:Tn.Gold90}}},disabled:{},clicked:{},toggled:{},hidden:{}}),{$nest:{"& i":{fill:Tn.Gold90,stroke:Tn.Gold90},"& span":{color:Tn.Gold90}}}),vr=()=>{const e=(0,xn.ND)(),t=e.primary;return{...e,primary:e=>"goPremium"===e.name?r.createElement(In.zx.Primary,{name:e.name,onClick:e.onClick,className:fr},e.text):r.createElement(t,{...e})}};const br=(e,t,i,n,o,s,l,g,v,b,w,y,k,A,I,T,x,D,F,L,B,U,O,H,G,N,z)=>{const V=me.C8.Logging.getLogger("SingleCardAssistant.ViewModels"),W=c.h.create(Ge.A.defaultState),j=ze.t.create(ze.t.defaultLensFilters,{...ze.t.defaultTextFilters,[M.R.SpecialId.Closed]:P.jv,[M.R.SpecialId.AllAlerts]:He.bZ.belongsToAllAlerts}),q=Ge.A.get(e.alertsList.state,e.alertsList.lensesScores,j).subscribe(E.wW(W)),K=new ni(W.view("lenses"),j,e.sessionModel.scoreStatus),$=(0,je.$y)((0,Pi.a)(t).getContents),Y={features:new Set([Ee.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:Je.j.Density.minimal,shouldAnimateAlertApply:Ee.IG.Default.shouldAnimateAlertApply,cardVisualMode:c.h.create(Je.j.CardVisualMode.RegularLightMode)},J=(0,Ee.Ls)($,e.alertsReader,Y,(()=>m.of(C.YP)),e.mutingAlertsReader),X=Yi.getCapabilities(J,e.alertsReader),Q=new et.gi(Yi.equatable.structEq,Yi.defaultOrd(X)),Z=()=>()=>P.yR,ee=Xe.v.createWithInitialAlerts(Q,Z,j,(0,P.ff)(He.bZ.isMuted),X),te=new Ve.F.Impl(e.alertsList.state,e.positionManager,e.alertsReader,j.alertCanBeDisplayed),ie=new Ze.oq(e.alertsList.state,e.alertsReader,W.view("lenses"),te,K,ee,Z,X,j),ne=c.h.create(ie.emptyState(M.R.SpecialId.AllAlerts).patch({alertSource:He.l$.sidebar})),ae=new Yt.C((0,ot.nD)(T())),oe=new We.Xx({flush:()=>t.flushChanges()},new d.x,J,e.alertsService,e.alertsReader,(()=>Promise.resolve()),(()=>Promise.resolve()),(0,P.zG)(e.mutedAlertsCategoriesModel,C.UI((e=>({model:e,openSuggestionsManagement:()=>self.open((0,It.Um)().suggestionsSettings)})))),C.G(_t.getCardsViewModelSendToURLExperiment(ae,s)),P.jv,Yi.getActiveItemWithAlert,X,ae,{bufferTransitions:!0,showGbPrompt:_t.shouldShow(g.get())}),se=new Ui.q(L.sduiFeedbackService,X,ne,L.sduiManager,L.sduiFeedManager,e.alertsReader,{...e.plagiarismClient,...e.writingExpertClient},oe,ae),le=se.sduiActionEvents.subscribe((({actions:e})=>e.forEach((e=>{"closeCard"===e.type&&v()})))),ce=new nn(l,s),ue=new lt(oe.actionEvents,s,e.alertsReader),pe=new $e.o((()=>at.F2(void 0))),ge=new vt.x(e.alertsList,ne,3,z,s),he=new _n(L.sduiManager.state),fe=he.processUpgradeHookSduiCardActions(se.sduiActionEvents,ge),ve=he.upgradeHookCardFocused,be=L.sduiFeedManager.feed.pipe(p.U((e=>e.feedId===bi.D1.AssistantFeed.PERFORMANCE_SCORE_FEED))),Se=c.h.create(!1),we=f.a([ve,be]).pipe(p.U((([e,t])=>e||t))).subscribe(E.wW(Se)),ye=f.a([Ei(L.sduiManager.state,L.sduiFeedManager.feed),Se]).pipe(p.U((([e,t])=>i=>e(i)&&!He.bZ.isHidden(i)||t&&He.bZ.isPremium(i)&&He.bZ.isHidden(i)||He.bZ.isLocked(i)||He.bZ.isLockedUIUphook(i)))),ke=new ki(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,ne,ye,Yi.getActiveItemWithAlert,Se,i,!0),Ce=Nt(ne,ke,pe,t,V),_e=ne.view(re.nL.getActiveAlertHighlight(Yi.getActiveItemWithAlert)),Ie=new Ne.mN(t,ke,e.alertsReader,_e,ne.view((e=>e.currentLens.meta.filter))),Te=new Cn(e.alertsReader,e.alertsList.state,(()=>C.ij(null==y?void 0:y.sessionUuid)),s,F,ge,g,oe.actionEvents,L.sduiManager.state,x),xe=new on(ne,e.alertsReader,w,se.sduiActionEvents,Yi.getActiveItemWithAlert),Re=new tn(se.sduiActionEvents,N),Pe=new bn(L.sduiManager,L.sduiFeedManager,L.sduiBufferService,A,ne,he.upgradeHookCardExists,e.sessionModel,x);Pe.initSuccessReportSDUIEmulation();const Me=new $i(L.sduiManager.state,oe,Pe.isSuccess,x),De=Ie.alertClicked.pipe(Bi.T(1),h.w(C.g_((()=>de.E),m.of)),u.h((e=>e.alert.lensId!==M.R.SpecialId.Premium||(0,yi.cN)(x))),S.M(L.sduiManager.state),p.U((([t,i])=>(0,P.zG)(e.alertsReader.getById(t.alert.id),C.tS(He.bZ.getRawId),C.tS((e=>bi.D1.getByAlertId(i,e))),_.MH))),S.M(L.sduiFeedManager.feed)).subscribe((([e,t])=>{let i;i=t.feedId===bi.D1.AssistantFeed.TONE_INSIGHTS_CARD_FEED_ID||t.feedId===bi.D1.AssistantFeed.PERFORMANCE_SCORE_FEED?[bi.D1.AssistantFeed.createPopAssistantFeedAction(),bi.D1.AssistantFeed.createFocusAssistantCardAction(e.id)]:[bi.D1.AssistantFeed.createFocusAssistantCardAction(e.id)],oe.actionEvents.next(bi.fr.create(i))})),Fe=((e,t,i,n)=>e.pipe(Bi.T(1),h.w(C.g_((()=>de.E),m.of)),u.h((e=>e.alert.lensId===M.R.SpecialId.Premium)),S.M(t,i)).subscribe((([e,t,i])=>{if(i.feedId===bi.D1.AssistantFeed.PERFORMANCE_SCORE_FEED){const e=(0,P.zG)(t,C.g_((()=>bi.D1.NativeUpgradeHook.ID),(e=>e.id))),i=[bi.D1.AssistantFeed.createPopAssistantFeedAction(),bi.D1.AssistantFeed.createFocusAssistantCardAction(e)];n.next(bi.fr.create(i))}})))(Ie.alertClicked,he.upgradeHookCard,L.sduiFeedManager.feed,oe.actionEvents),Le=[(0,P.zG)(tt.EQ.focusMarkByActiveAlert(ne,ke,e.alertsReader,Yi.getActiveFocusableItem,V.getLogger("MarksEffects.focusMarkByActiveAlert")),re.nL.Effect.Producer.delayed(i)),...oe.getApplicatorEffects(),...se.getApplicatorEffects(),(0,P.zG)(Vt(ne,Ce,c.h.create(C.YP),Yi.getActiveAlignableItem,X),re.nL.Effect.Producer.delayed(i)),Oi.N.PrevNextNavigation.sideEffect(Oi.N.PrevNextNavigation.Events.fromSduiCardActions(se.sduiActionEvents),ne,X),Hi.P.SideEffects.createSDUIFeedSideEffect(X,L.sduiFeedManager.feed,Yi.sduiToChecksFeedOrd(X),e.alertsReader)],Be=({state:e,metadata:t})=>{if(!re.nL.hasCards(e))return at.t$({state:e,metadata:t});const i=re.nL.Prism.getLens();return at.t$({state:i.modify((e=>C.pC(e.cardIndex)||e.items.size>1||(0,a.zG)(e.items.getAt(0),C.UI((e=>e.id!==bi.D1.NativeUpgradeHook.ID)),C.fS(P.jv))?e:{...e,cardIndex:C.G(0)}),e),metadata:t})},Ue=Ae.v.Items.getRemoveDisposedItemsTransformer(X),Oe=Gi.i.DisablePrevNextButtons.create(X),qe=Ae.v.Items.getSingleItemFeedPositionsUpdateTransformer(X),Ke=(0,P.ls)(Be,rt.L9(Pe.focusSuccessReportStateTransformer),rt.L9(Ue),rt.L9(Oe),rt.L9(qe)),Ye=new Qe.l(ne,ie,e.alertsReader,e.alertsService,Le,Yi.getActiveItemWithAlert,Ke),it=c.h.create(C.YP);y&&y.capiMessages.pipe(u.h((e=>"start"===e.action))).subscribe((e=>it.set(C.G(e))));const nt=new Ft.X(n,o,G,l,(0,Ni.ol)(n.view("user").get(),x)),ct=oe.actionEvents.subscribe((0,P.ls)((0,st.JH)(e.alertsReader,st.SV.Source.assistant),_.bw((e=>(e.kind===st.SV.Kind.alertApply&&e.source===st.SV.Source.assistant&&D.incrementCounter(),k.next(e)))))),dt=(0,xt.W)(b),ut=I.pipe(h.w(C.g_((()=>de.E),(t=>t.initSingleCardAssistantActionsProcessing(e.alertsReader,Di(Ie,ne)))))).subscribe(),pt=new sn(oe,L),gt=new Et.D(s,O,H,B),ht=(0,P.zG)(U,C.UI((e=>new Dt(gt,e,v,s)))),mt=new cn(oe.actionEvents,w,n.view("page"),o,x,s),ft=new ji(g.get().isAnonymous,n.get(),s,G),bt=function(e,t,i,n,a,o,s,l,c,d){const u=()=>s.next(void 0);return{...Rn.k,button:vr(),dropDownMenuButton:sr,nativeToneInsightsModal:()=>r.createElement(ar,{view:ir.ToneInsight},r.createElement(hr,null,r.createElement(tr,{emogenieService:e.emogenieService,toneSuggestionInfo:e.toneSuggestionInfo,onShowToneSuggestionInfo:t=>e.onShowToneSuggestionInfo(t),onClickToneSuggestionInfoCta:t=>e.onClickToneSuggestionInfoCta(t),showBetaLabel:!0,browser:l}))),nativeLearnMoreModal:()=>r.createElement(ar,{view:ir.LearnMore},r.createElement(mr,{maxHeight:216},r.createElement(hr,null,r.createElement(Aa,{learnMoreInfo:t.learnMoreInfo})))),nativeFeedbackModal:()=>r.createElement(ar,{view:ir.Feedback},r.createElement(hr,null,r.createElement(Ha.q,{domain:i.getDomain(),hideDomainHelpText:!0,onClose:u,align:"left",title:r.createElement("span",null,"How do you like Grammarly?"),onSubmit:e=>{i.submitFeedback(e)},withScore:!0,hideLogo:!0,hideTextBoxTitle:!0,placeholderText:"How can we improve?",compactDisplay:!0}))),nativeSettingsModal:()=>r.createElement(ar,{view:ir.Settings},r.createElement(hr,null,r.createElement(Yn,{onClose:u,assistantSettingsViewModel:n,upgradeViewModel:a,experimentClient:o},(({content:e,footer:t})=>r.createElement(r.Fragment,null,e,t))))),nativeProofitModal:()=>(0,P.zG)(c,C.g_((()=>null),(e=>{const t=e.feature.dialogCaller().type;return t===R.WT.proofitReview?r.createElement(hr,null,r.createElement(za,{proofitVM:e,insideSingleCardAssistant:!0})):t===R.WT.proofitRequest?r.createElement(hr,null,r.createElement(Oa,{proofitVM:e,insideSingleCardAssistant:!0})):null}))),nativeGetStartedChecklistModal:({notify:e})=>{const t="test"===o.getTreatment(ln.p.ChecklistUX);return r.createElement(hr,null,t?r.createElement(aa,{isStudent:d.isStudent}):r.createElement(ya,{getStartedChecklistViewModel:d,notify:e}))}}}(Te,xe,ce,nt,ge,x,pt.popView,B,ht,ft),St={...Rn.k,button:(0,xn.ND)(gr)},wt=ne.lens(re.nL.Prism.getLens());return{checksFeedItem:()=>Yi.item(bt),checksFeedFlow:()=>Yi.createCardListFlow(wt,X),lensState:ne,cardsViewModel:oe,lensPreviewViewModel:K,cardsListScrollManager:pe,alertProcessor:w,checkingService:y,assistantFeedbackViewModel:ce,assistantSettingsViewModel:nt,getStartedChecklistViewModel:ft,marksViewModel:ke,upgradeViewModel:ge,gnar:s,user:g,positionViewModel:dt,isSingleCardAssistant:!0,statisticsService:A,toneDetectorViewModel:Te,learnMoreViewModel:xe,createSnippetModalViewModel:Re,closeAssistant:v,bulkDismissViewModel:Me,nativeViewsViewModel:pt,successReportViewModel:Pe,outcomeExtraFooterViewModel:mt,designSystem:bt,headerDesignSystem:St,sduiEngine:L,sduiCardsViewModel:se,dispose:()=>{ct.unsubscribe(),oe.dispose(),Ye.dispose(),ke.dispose(),q.unsubscribe(),ue.dispose(),ut.unsubscribe(),Re.dispose(),xe.dispose(),Te.dispose(),null==Me||Me.dispose(),null==pt||pt.dispose(),Pe.dispose(),De.unsubscribe(),Fe.unsubscribe(),fe.unsubscribe(),le.unsubscribe(),se.dispose(),mt.dispose(),he.dispose(),we.unsubscribe()}}};var Sr=i(11478),wr=i(71783),yr=i(21100),Er=i(68898),kr=i(95014),Cr=i(10826),_r=i(16270),Ar=i(4437),Ir=i(48879);const Tr=r.forwardRef((function({children:e,onClick:t,className:i=Ir.cardList,footer:n,...a},o){const l=oe.d.Elements.create(),c=(0,P.zG)(l.view("viewport"),se.oA,p.U(s.UL.fromEl));return r.createElement("div",{...a,onClick:t,className:i,ref:e=>{"function"==typeof o?o(e):o&&(o.current=e);const t=C.ij(e);l.lens("scrollConsumer").set(t),l.lens("scrollProvider").set(t),l.lens("viewport").set(t)}},r.createElement(kr.l.RootVirtualContainer,{name:"cardListConnector",viewport:c},e(l)),n)}));var xr=i(24938),Rr=i(30025),Pr=i(65965),Mr=i(97774);const Dr=r.forwardRef((({successView:e},t)=>{const i=r.useContext(Er.m.Context),n=(0,Rr.hM)((0,Rr.JT)((0,a.zG)(e,se.oA),i));return r.createElement("div",{className:Mr.compactSuccessLens,ref:t},r.createElement("div",{className:Mr.compactSuccessLensContainer},U.UI.mount(Pr.q,n)))}));Dr.displayName="SuccessLens";const Fr=r.forwardRef((function({viewModels:e},t){return r.createElement("div",{className:xr.mainView},r.createElement(Br,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities}))})),Lr=({position:e,isSuccess:t,children:i})=>r.createElement(B.F.Fragment,null,e.pipe(nt.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),p.U((e=>e.visible?r.createElement(B.F.div,{...(0,Qn.Sh)(xr.cardListFooterStatic,e.animationInProgress?xr.cardListFooterAnimate:void 0,t?void 0:xr.cardListFooterDynamic),style:t?{}:{transform:s.ux.translateY(e.offset)}},i):null)))),Br=r.forwardRef((function({state:e,assistantCardListViewModel:t,cardsViewModel:i,cardsListScrollManager:n,capabilities:o,...s},l){const c=E.jw((e=>{let t=7;return t=31*t+(0,te.AC)(e.currentLens.id),t=31*t+(Ae.v.WithSuccess.State.isInSuccess(o)(e)?1231:1237),t}),e),d=(0,a.zG)(c,p.U((e=>{const t=e.get();return Ae.v.WithSuccess.State.isInSuccess(o)(t)}))),u=(0,a.zG)(Fe(e,n,o),S.M(e),p.U((([e,t])=>({visible:!re.nL.hasCards(t)||C.Wi(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),b.O({visible:!1,offset:0,animationInProgress:!0}));return r.createElement(Tr,{className:xr.cardList,onClick:e=>{e.target.getAttribute("class")===xr.cardList&&t.assistantActions.next({type:ut.Type.clickOnEmpty})},footer:r.createElement(B.F.Fragment,null,(0,a.zG)(d,p.U((e=>r.createElement(Lr,{key:"assistant-footer",position:u,isSuccess:e},r.createElement(j,{predictionsVM:s.predictionsPreviewViewModel})))))),ref:e=>{t.cardListViewportHeight.set(C.ij(null==e?void 0:e.offsetHeight))}},(s=>r.createElement(B.F.Fragment,null,(0,a.zG)(f.a([d,t.havePremiumAlerts]),p.U((([a,c])=>a&&!c?r.createElement(r.Fragment,null,r.createElement(Dr,{successView:t.successView,ref:l})):r.createElement(De,{state:e,cardsViewModel:i,cardsListScrollManager:n,connectorElements:s,ref:l,header:r.createElement(r.Fragment,null,c?r.createElement("div",{className:xr.upgradeHookWrapper,"data-role":"uphook-wrapper"},U.UI.mount(ht.n.TogglablePanel,t.upgradeHookFlow)):null),comparator:Q.listItemOrd,capabilities:o})))))))})),Ur=r.forwardRef((function({viewModels:e,header:t,footer:i,className:n},a){return r.createElement(Tr,{ref:t=>{"function"==typeof a?a(t):a&&(a.current=t),e.assistantCardListViewModel.cardListViewportHeight.set(C.ij(null==t?void 0:t.offsetHeight))},className:n},(n=>r.createElement(De,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:n,header:t,footer:i,comparator:Q.listItemOrd,capabilities:e.capabilities})))}));var Or=i(83507),Hr=i(16726),Gr=i(8100);const Nr=r.lazy((()=>i.e(2826).then(i.bind(i,49312)).then((({BrandTonesActivationUphookView:e})=>({default:e}))))),zr=r.forwardRef((function({emogenieService:e,viewModels:t},i){const n=r.createElement(r.Fragment,null,r.createElement(Vr,{isBrandTonesEnabled:e.viewState.view("isBrandTonesEnabled"),institutionLogo:e.viewState.view("report").view((e=>null==e?void 0:e.institutionLogo)),institutionName:e.viewState.view("institutionName"),browser:t.assistantLayoutViewModel.browser}),r.createElement(tr,{emogenieService:e,showBetaLabel:!1,browser:t.assistantLayoutViewModel.browser}),r.createElement(B.F.Fragment,null,e.viewState.view((t=>!t.isBrandTonesEnabled&&!t.isBrandTonesConfigured&&!t.settings.hideBrandTonesActivationUphook&&t.settings.shouldShowBrandTonesActivationUphook&&r.createElement(r.Suspense,{fallback:r.createElement(r.Fragment,null)},r.createElement(Or.L,{chunkName:"brandTonesActivationUphook"},r.createElement(Nr,{trackShow:e.actions.trackBrandToneActivationUphookShow,onActivateClick:e.actions.brandToneActivationUphookCTAClick,onDismissClick:e.actions.brandToneActivationUphookDismissClick})))))));return r.createElement(Gn,{dataPartName:"emogenie-view-overlay",popActiveView:()=>t.assistantLayoutViewModel.popActiveView(),panelClassName:Hn.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},r.createElement(B.F.Fragment,null,t.lensPreviewViewModel.getLens(M.R.SpecialId.PredictionEmogenie).pipe(L.map((e=>e.count>0)),L.distinctUntilChanged(),L.map((e=>e?r.createElement(Ur,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:r.createElement(r.Fragment,null,n,r.createElement("div",{className:Gr.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):r.createElement("div",{className:Hn.gradientViewOverlayContent},n))))))}));zr.displayName="EmogenieView";const Vr=({isBrandTonesEnabled:e,institutionLogo:t,institutionName:i,browser:n})=>r.createElement(B.F.Fragment,null,c.h.combine(e,t,i,((e,t,i)=>r.createElement("div",{className:Hn.defaultViewOverlayHeader},r.createElement("div",{className:Hr.emogenieViewOverlayHeader},e?r.createElement("div",null,t?r.createElement("img",{className:Hn.logo,src:t,alt:"logo"}):null,i," Tone detector"):"Tone detector",r.createElement(xa,{browser:n,className:Hr.emogenieViewOverlayHeaderBetaBadge})))))),Wr=({feedbackVM:e,layoutVM:t})=>r.createElement(Gn,{dataPartName:"feedback-view-overlay",popActiveView:()=>t.popActiveView(),panelClassName:Hn.gradientViewOverlayPanel},r.createElement("div",{className:Hn.gradientViewOverlayContent},r.createElement("div",{className:Hn.defaultViewOverlayHeader},"Product Feedback"),r.createElement(Ha.q,{domain:e.getDomain(),onClose:()=>t.popActiveView(),align:"left",style:{height:"calc(100% - 48px)"},onSubmit:t=>e.submitFeedback(t),withScore:!0,fixSubmitButtonOverflowBottomPadding:!0,hideLogo:!0})));var jr=i(97225),qr=i(70711);const Kr=r.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:n,fontSize:a=9,isLoading:o})=>{const s=e/2,l=s-t/2,c=2*l*Math.PI,d=(o?75:i)/100*c,u=c-d,p=(e=>{const{red40:t,yellow50:i,green50:n}=Bn.Z;return e<65?t:e<95?i:n})(i);return r.createElement("div",{...(0,Qn.Sh)(qr.scoreRing,o&&qr.loading),style:n},r.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},r.createElement("circle",{fill:"white",r:l,cx:s,cy:s}),r.createElement("circle",{stroke:Bn.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:l,cx:s,cy:s}),r.createElement("circle",{stroke:p,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:u},r:l,cx:s,cy:s}),r.createElement("text",{className:qr.scoreText,x:"50%",y:"-35%",fontSize:a,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!o?i:"")))}));var $r=i(55260);const Yr=e=>{const t=U.Z.animatingFlow((()=>e.headerVM.logoScore),Jr);return r.createElement("div",{className:$r.logo_score},U.UI.mount(to,t))},Jr=(e,t)=>(0,a.zG)(e,C.hX((e=>e.type!==t.type)),C.UI((()=>jr.Hk("fadeout","fadein")))),Xr=U.UI.Node.make((()=>r.createElement(oa.K,{className:$r.grammarly_logo,size:22}))),Qr=U.UI.Node.make((({view:e})=>r.createElement(B.F.div,{className:$r.score_container,"data-grammarly-part":"assistant-score"},(0,a.zG)(e("score"),(0,p.U)((({capiScore:e,isLoading:t})=>r.createElement(r.Fragment,null,r.createElement(Kr,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),Zr=U.UI.Union.make("type",{logo:Xr,score:Qr}),eo=U.UI.Transition.make({fadein:$r.logoscore_fadein},{fadeout:$r.logoscore_fadeout}),to=U.UI.Animated.make(eo,Zr);var io=i(16134),no=i(87866);const ao=e=>{const[t,i]=r.useState(!1),[n,o]=r.useState(!1),s=e.viewModels.assistantLayoutViewModel,l=e.viewModels.assistantHeaderViewModel,d=r.useContext(Ar.O.Context),u=(0,a.zG)(e.viewModels.assistantProofitViewModel,C.UI((e=>e.feature)),C.UI((t=>r.createElement(B.F.Fragment,null,f.a([t.layoutCreated,s.activeView.view((e=>e.type===t.assistantViewType()))]).pipe(p.U((([i,n])=>i?r.createElement(Fn.u,{message:d.proofitTooltip,showDelay:Dn.gk,disabled:n},r.createElement($a.h,{onClick:()=>{n?s.popActiveView():(e.viewModels.gnar.proofitButtonClick("assistant_header"),s.pushActiveView({type:t.assistantViewType()}))},dataGrammarlyPart:"assistant-header-action-btn-proofit"},r.createElement("div",{className:$r.headerActionBtnProofitIcon}))):null)))))),C.WG),g=r.createElement(io.P,{onClick:l.close,tooltipMessage:"Close panel",dataGrammarlyPart:"assistant-header-action-btn-close"});return r.createElement(Fn.u,{message:"Grab and drag to move panel",showDelay:Dn.gk,disabled:t},r.createElement("div",{...(0,Qn.Sh)($r.header,n&&$r.actions_hovered),ref:e.draggableRef,onMouseDown:()=>i(!0),onMouseOut:()=>i(!1)},r.createElement(Yr,{headerVM:l}),r.createElement(ro,null),r.createElement(B.F.div,{className:$r.headerActions,onMouseOver:()=>o(!0),onMouseOut:()=>o(!1)},s.isHeaderNavigationEnabled.view((e=>e?r.createElement(r.Fragment,null,u,r.createElement(B.F.Fragment,null,l.showSetGoalsActionButton.view((e=>e&&r.createElement(Fn.u,{message:d.setGoalsTooltip,showDelay:Dn.gk},r.createElement($a.h,{onClick:()=>l.open("setGoals"),dataGrammarlyPart:"assistant-header-action-btn-set-goals"},r.createElement("div",{className:$r.headerActionBtnGoalsIcon})))))),r.createElement(B.F.Fragment,null,c.h.combine(l.showSettingsActionButton,s.activeView,((e,t)=>{const i=t.type===Et.a.Type.settings;return e&&r.createElement(no.l,{onClick:()=>i?s.popActiveView():s.pushActiveView({type:Et.a.Type.settings}),enableTooltip:!i,dataGrammarlyPart:"assistant-header-action-btn-settings"})}))),g):g)))))},ro=()=>r.createElement("div",{className:$r.draggableWrapper,"data-grammarly-part":"assistant-draggable-handler"},r.createElement("div",{className:$r.draggable})),oo=({modalManager:e})=>r.createElement(B.F.Fragment,null,e.state.view((0,P.ls)(C.UI((({component:e})=>e)),C.WG)));var so=i(55885),lo=i(27327),co=i(93751);const uo=({children:e})=>r.createElement(r.Fragment,null,r.createElement(lo.o,{"data-grammarly-part":"gdocs-sidebar",className:co.wrapper},e),r.createElement(so.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}));var po=i(92759),go=i(8536),ho=i(36650),mo=i(79825),fo=i(63189);const vo=({children:e,experimentClient:t})=>{const i=t.isGateEnabled(Ki.K.ExtensionA11yUIFixes),[n,a]=r.useState(null),o=r.useMemo((()=>({currentView:n,setCurrentView:a,isEnabled:i})),[n,i]);return r.createElement(nr.Provider,{value:o},e)},bo=r.memo((function({viewModels:e,experimentClient:t,emogenieService:i,height:n,ready:o,OuterElementsPortalSource:l}){const d=new Yt.C((0,ot.nD)());(0,fo.X)("viewModels",e);const u=(0,Re.IQ)(),p=(0,Re.e8)(),g=r.useContext(Re.Dg).state.pipe(L.filter((e=>!e.dragging)),L.startWith(po.h.create())),h=r.useContext(go.Y4),m=(0,ho.C7)(),f=c.h.create(s.UL.empty);(0,mo.A)(L.combineLatestStatic([g,h]).pipe(L.map((([e,t])=>{const i=t.top+e.translate.y,n=t.left+e.translate.x,a=m.height-i-t.height,r=m.width-n-t.width;return{height:t.height,width:t.width,top:i,left:n,bottom:a,right:r}})),L.tap(E.wW(f)))),(0,mo.A)(g.pipe(L.tap((t=>e.positionViewModel.onDrag(t))))),(0,mo.A)(e.assistantLayoutViewModel.activeView.pipe(L.pairwise(),L.tap((([t,i])=>{t.type!==i.type&&Et.a.isDefault(i)&&e.cardsListScrollManager.paddingTop.set(0)}))));const v=r.useRef(null);return r.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(C.ij(v.current));const t=v.current?ue.rl(v.current,{subtree:!0,childList:!0}):L.NEVER,i=f.view((e=>({top:e.top,left:e.left}))),n=(0,a.zG)(t,L.timeout((0,wi.m9)(1)),L.debounceTime(10),L.first()).subscribe((()=>o(i,u)),(()=>{o(i,u,!0)}));return()=>{n.unsubscribe()}}),[]),r.createElement(So,{environment:d,viewport:f,experimentClient:t},r.createElement(B.F.div,{"data-grammarly-part":"assistant-popup-content",...(0,Qn.Sh)(xr.assistant,u.pipe(L.startWith(!1),L.map((e=>e?xr.dragging:null)))),style:{height:n,maxHeight:"90vh"}},r.createElement(ao,{viewModels:e,draggableRef:p}),e.assistantLayoutViewModel.activeView.view((n=>Et.a.isDefault(n)?r.createElement(Fr,{viewModels:e,ref:v,key:"default-view"}):Et.a.isEmogenie(n)?r.createElement(zr,{emogenieService:i,viewModels:e,experimentClient:t,key:"emogenie-view",ref:v}):Et.a.isFeedback(n)?r.createElement(Wr,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,key:"feedback-view"}):Et.a.isSettings(n)?r.createElement(Jn,{viewModels:e,experimentClient:t,key:"settings-view"}):Et.a.isProofitRequest(n)&&C.pC(e.assistantProofitViewModel)?r.createElement(Oa,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):Et.a.isProofitReview(n)&&C.pC(e.assistantProofitViewModel)?r.createElement(za,{browser:e.assistantLayoutViewModel.browser,popActiveView:()=>e.assistantLayoutViewModel.popActiveView(),proofitVM:e.assistantProofitViewModel.value,key:"proofit-review-view"}):null))),r.createElement(l,null,r.createElement(uo,null,r.createElement(oo,{modalManager:e.assistantModalManager}))),r.createElement(Sr.X,null))})),So=({environment:e,viewport:t,children:i,experimentClient:n})=>{var a;const o=r.useRef((0,Ar.I)(Er.m.getConfig(e.has(Yt.U.Flag.isAppleSystem)?"mac":"windows"))),s=null===(a=r.useContext(Mi.nS.Context))||void 0===a?void 0:a.host;return r.createElement(Cr.p.Manager,{cardWidth:Cr.p.withCardWidthEffect(Cr.p.defaultSizeObserver,(e=>{Cr.p.setRootCssVar(s||document.documentElement,e)}))},r.createElement(Yt.U.Context.Provider,{value:e},r.createElement(yr.a.Context.Provider,{value:e},r.createElement(Ar.O.Context.Provider,{value:o.current.assistant},r.createElement(Er.m.Context.Provider,{value:o.current.denali},r.createElement(_r.TG.ContextMock,null,r.createElement(kr.l.RootVirtualContainer,{viewport:t,name:"draggable"},r.createElement(wr.G.DefaultProvider,null,r.createElement(uo,null,r.createElement(vo,{experimentClient:n},i))))))))))};var wo=i(2914);const yo=({textFieldRect:e,viewModels:t,children:i})=>{const{initialPositionOffset:n}=t.positionViewModel,a={...e.client,...e.size},o=(0,ho.C7)(),s=t.assistantLayoutViewModel.layout;return r.createElement(wo._,{bounds:o,hasDragHandle:!0},(({translate:e})=>r.createElement(go.sX,{anchorRect:a,viewportRect:o,anchorOrigin:s.anchorOrigin,elementOrigin:s.assistantOrigin,anchorMargin:s.anchorMargin,repositioning:s.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:n.left,vertical:n.top}},(({top:t,left:n})=>r.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",transform:`translate(${e.x}px, ${e.y}px)`,zIndex:Dn.Eq,top:t,left:n}},i)))))};var Eo=i(10335),ko=i(41166);const Co=({alignmentRect:e,viewModels:t,onDomRectChange:i,anchor:n,experimentClient:a,onMaxHeightChange:o,children:s})=>{const c=(0,ho.C7)(),{top:d,setTop:u,left:p,setLeft:g,width:h,height:m,positionerRef:f}=(0,ko.G)(),{x:v,y:b,setDragState:S}=(0,Eo.f)(d,u,p,g),w=c.height;r.useEffect((()=>{const e=c.height-d-m,t=c.width-p-h;if(i({top:d,left:p,bottom:e,right:t,height:m,width:h}),o){o(w)}}),[d,p,h,m,w]);const y="textField"===n?{anchorOrigin:{horizontal:"right",vertical:"bottom"},elementOrigin:{horizontal:"left",vertical:"bottom"},anchorMargin:{top:0,bottom:0,left:16,right:16},repositioning:[{horizontal:"flip",vertical:"translate"}]}:"GButton"===n?{anchorOrigin:{horizontal:"right",vertical:"top"},elementOrigin:{horizontal:"right",vertical:"bottom"},anchorMargin:{top:4,bottom:4,left:0,right:0},repositioning:[{horizontal:"translate",vertical:"flip"}]}:(0,l.vE)(n);let E;a.isGateEnabled(Ki.K.ExtensionA11yUIFixes)&&(E=e=>!e.target.closest("button"));const{bottom:k,right:C}=function(e,t,i,n,a){const r=a.height-n,o=a.width-i,s=Math.max(0,Math.min(r,r-e)),l=Math.max(0,Math.min(o,o-t));return{bottom:s,right:l}}(d,p,h,m,c);return r.createElement(wo._,{hasDragHandle:!0,bounds:c,onChangeDragState:S,dragEventFilter:E},r.createElement(go.sX,{...y,anchorRect:e,viewportRect:c,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:t.positionViewModel.initialPositionOffset.left,vertical:t.positionViewModel.initialPositionOffset.top},onChangePosition:e=>f.current.next(e)},r.createElement("div",{style:{position:"fixed",transform:`translate(${v}px, ${b}px)`,zIndex:Dn.Eq,bottom:k,right:C}},s)))};var _o=i(19957),Ao=i(1539),Io=i(39991),To=i.n(Io);const xo={[ir.Settings]:"Grammarly settings are active",[ir.Feedback]:"Grammarly feedback form is active",[ir.ToneInsight]:"Grammarly tone settings are active",[ir.LearnMore]:"Additional information about Grammarly suggestion is active"},Ro=()=>{const{currentView:e,isEnabled:t}=r.useContext(nr);if(!t)return null;const i=null===e?"Grammarly assistant is active":xo[e];return r.createElement("div",{"aria-live":"assertive","aria-atomic":!0,className:To().viewAnnouncer,"data-grammarly-part":"assistant-view-announcer"},r.createElement("p",null,i))};var Po=i(85004),Mo=i(36706);const Do=({dragHandle:e,headerContent:t,className:i,children:n,includeContentPadding:a,footer:o,dataGrammarlyPart:s="single-card-assistant",maxHeight:l,onHeightChange:c})=>{const[d,u]=r.useState(0),[p,g]=r.useState(0),[h,m]=r.useState(0),f=r.useRef(null),v=r.useRef(null),b=r.useRef(null);r.useEffect((()=>{null==c||c(d+p+h)}),[d,p,h]);const S=r.useRef(null);r.useEffect((()=>{var e;return f.current?(null===(e=S.current)||void 0===e||e.disconnect(),S.current=Po.N.getResizeObserver((()=>{f.current&&u(f.current.getBoundingClientRect().height)})),S.current.observe(f.current)):u(0),()=>{var e;return null===(e=S.current)||void 0===e?void 0:e.disconnect()}}),[f.current]);const w=r.useRef(null);r.useEffect((()=>{var e;return v.current?(null===(e=w.current)||void 0===e||e.disconnect(),w.current=Po.N.getResizeObserver((()=>{v.current&&g(v.current.getBoundingClientRect().height)})),w.current.observe(v.current)):g(0),()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.disconnect()}}),[v.current]);const y=r.useRef(null);return r.useEffect((()=>{var e;return b.current?(null===(e=y.current)||void 0===e||e.disconnect(),y.current=Po.N.getResizeObserver((()=>{b.current&&m(b.current.getBoundingClientRect().height)})),y.current.observe(b.current)):m(0),()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.disconnect()}}),[o,b.current]),r.useEffect((()=>{v.current&&(v.current.scrollTop=0)}),[v.current,p]),r.createElement(r.Fragment,null,r.createElement("div",{...(0,Qn.Sh)(Mo.singleCardAssistant,i),style:l?{maxHeight:l}:void 0,"data-grammarly-part":s,role:"region","aria-label":"Grammarly assistant"},r.createElement("header",{"data-grammarly-part":s+"-header","aria-label":"Grammarly assistant toolbar",...(0,Qn.Sh)(Mo.singleCardAssistantHeader,e?Mo.singleCardAssistantHeaderDraggable:null),ref:t=>{f.current=t,null==e||e(t)}},r.createElement(B.F.Fragment,null,t)),r.createElement("div",{"data-grammarly-part":s+"-content",...(0,Qn.Sh)(Mo.singleCardAssistantContent,a?Mo.singleCardAssistantContentWithPadding:null),ref:v},n),o?r.createElement("footer",{"data-grammarly-part":s+"-footer",className:Mo.singleCardAssistantFooter,ref:b,onClick:()=>o.onClick()},r.createElement("div",{className:Mo.singleCardAssistantFooterText},o.content),o.tooltip&&r.createElement(Fn.u,{message:o.tooltip,showDelay:Dn.gk},r.createElement($a.h,{onClick:()=>o.onClick()},r.createElement("div",{className:Mo.singleCardAssistantFooterButtonIcon})))):null),r.createElement(Ro,null))};var Fo=i(19078),Lo=i(90449),Bo=i(80025),Uo=i(46148),Oo=i(15238),Ho=i.n(Oo);const Go={clarity:Fo.G,correctness:Lo.a,tone:Bo.D,engagement:Uo.L},No=({suggestionType:e})=>{const t=Go[e];return r.createElement("div",{className:Ho().container},r.createElement(t,null),"Your first ",e," suggestion!")},zo=r.memo((function({viewModels:e,height:t,domRect:i,ready:n,maxHeight:o,experimentClient:s}){const l=new Yt.C((0,ot.nD)());(0,fo.X)("viewModels",e);const c=(0,Re.IQ)(),d=(0,Re.e8)(),g=r.useContext(Re.Dg).state.pipe(u.h((e=>!e.dragging)),b.O(po.h.create()));(0,mo.A)(g.pipe(y.b((t=>{e.positionViewModel.onDrag(t)})))),r.useEffect((()=>{const e=i.view((e=>({top:e.top,left:e.left})));n(e,c)}),[]);const h=e.nativeViewsViewModel.header.view(C.g_((()=>r.createElement(r.Fragment,null)),(t=>r.createElement(_o.P,{key:"header",sduiRootId:t.id,content:t,designSystem:e.headerDesignSystem,notify:(i,n,a)=>e.cardsViewModel.actionEvents.next({type:Ke.lY.Type.sduiCardAction,sourceId:i,cardId:t.id,actions:n,scope:a}),transitions:[],prevContent:C.YP,onAnimationEnd:P.Q1,onMount:P.Q1})))),m=e.checksFeedFlow(),v=(0,a.zG)(m,Ji.Z.extendActions(y.b((t=>{"content"===t.key&&"card"===t.action.key&&"alertRefSDUI"===t.action.action.key&&e.cardsViewModel.actionEvents.next(t.action.action.action)}))));return r.createElement(So,{environment:l,viewport:i,experimentClient:s},r.createElement(B.F.Fragment,null,f.a([e.bulkDismissViewModel.successReportFooterBulkDismissAlertsCount,e.outcomeExtraFooterViewModel.extraFooterOutcomeType]).pipe(p.U((([i,n])=>r.createElement(Do,{key:"single-card-assistant",className:ur.singleCardAssistant,dragHandle:d,headerContent:h,maxHeight:o,footer:Vo(e,i,n),onHeightChange:e=>t.set(e)},Ji.UI.mount(Ao.c.assistant(e.checksFeedItem(e.cardsViewModel.actionEvents)),v)))))),r.createElement(Sr.X,null))}));function Vo(e,t,i){return t>0?function(e,t){return{content:r.createElement(r.Fragment,null,"We hid ",t," ",(0,dn._6)(t,"suggestion","suggestions")," that didn’t seem relevant to your text. Want to review"," ",(0,dn._6)(t,"it","them"),"?"),tooltip:"Review suggestions",onClick:()=>{e.bulkDismissViewModel.showBulkDismissFeed()}}}(e,t):void 0!==i?function(e){return{content:r.createElement(No,{suggestionType:e}),onClick:()=>null}}(i):void 0}var Wo=i(68418),jo=i(559),qo=i(55285),Ko=i(78994);var $o=i(25635),Yo=i(81095);function Jo(e,t){return(0,P.zG)(t,C.g_((()=>e),(({feedId:t})=>e.filter((e=>"pushAssistantFeed"===e.type&&e.feedId!==t)))))}function Xo(e,t){if(e.isSingleCardAssistant){if(t.type===R.WT.sdui){const i=function(e){const t=(0,P.zG)(e.find((e=>"pushAssistantFeed"===e.type)),C.ij,C.g_((()=>[]),(e=>null!=e.cardId?[e.cardId,e.feedId]:[e.feedId])),pt.UI((e=>(0,P.ls)($o.a.get(Yo.j.Item.Id.from(e)),C.pC))));return e=>t.every((t=>t(e)))}(t.action.actions);return e.sduiEngine.sduiManager.state.pipe(u.h(i),Pn.P()).subscribe((i=>e.cardsViewModel.actionEvents.next(t.action)))}const i=(0,P.zG)(function(e){const t=e.type;switch(t){case R.WT.gButton:case R.WT.card:case R.WT.snippetsAppAction:return C.G({id:bi.D1.GButton.DEFAULT_GBUTTON_ID,getContent:bi.D1.GButton.getContent});case R.WT.emogenie:return C.G({id:bi.D1.GButton.TONE_GBUTTON_ID,getContent:bi.D1.GButton.getContent});case R.WT.getStartedChecklist:return C.G({id:bi.D1.GButton.GET_STARTED_GBUTTON_ID,getContent:bi.D1.GButton.getContent});case R.WT.proofitRequest:case R.WT.proofitReview:return C.G({id:bi.D1.Proofit.ID,getContent:bi.D1.Proofit.getContent});default:(0,l.L0)(t)}}(t),C.fS((()=>({id:bi.D1.GButton.DEFAULT_GBUTTON_ID,getContent:bi.D1.GButton.getContent}))));return e.sduiEngine.sduiManager.state.pipe(p.U((e=>i.getContent(e,i.id))),se.oA,Pn.P(),S.M(e.sduiEngine.sduiManager.state),p.U((([e,i])=>{const n=t.type===R.WT.card?t.alertId:null;return(0,P.zG)(C.ij(n),C.tS((e=>bi.D1.getByAlertId(i,e))),C.UI((e=>e.id)),C.g_((()=>({initialSduiItemId:C.YP,openingButtonActions:e.actions})),(t=>({initialSduiItemId:C.G(t),openingButtonActions:e.actions}))))})),p.U((({initialSduiItemId:i,openingButtonActions:n})=>{const a=Jo(n,e.sduiEngine.sduiFeedManager.currentFeed),r=bi.fr.create(a);return(0,P.zG)(i,C.g_((()=>((t.type===R.WT.proofitRequest||t.type===R.WT.proofitReview)&&a.some((e=>"pushAssistantFeed"===e.type))&&e.gnar.proofitButtonClick("gmail_toolbar"),r)),(e=>({...r,actions:r.actions.map((t=>"pushAssistantFeed"===t.type?{...t,cardId:e}:t))}))))}))).subscribe((t=>e.cardsViewModel.actionEvents.next(t)))}return t.type===R.WT.emogenie?e.assistantLayoutViewModel.pushActiveView({type:Et.a.Type.emogenie}):t.type===R.WT.proofitRequest?e.assistantLayoutViewModel.pushActiveView({type:Et.a.Type.proofitRequest}):t.type===R.WT.proofitReview?e.assistantLayoutViewModel.pushActiveView({type:Et.a.Type.proofitReview}):e.assistantLayoutViewModel.pushActiveView({type:Et.a.Type.default}),qi.w0.EMPTY}class Qo{constructor(e,t){this._params=e,this._felog=t,this._log=T.Y.create("AssistantControllerImpl"),this._integration=null,this._viewModels=c.h.create(null),this._assistantPopupIsReady=new d.x,this._initPerformance=void 0,this._openMeasure=void 0,this._height=c.h.create(0),this._domRect=c.h.create(s.UL.empty),this._maxHeight=c.h.create((0,ho.C7)().height),this._openState=c.h.create("closed"),this._subs=new o.w.Keeper,this.openState=this._openState.view(),this.open=e=>{var t,i;const n=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,customFields:e.customFields,institutionInfo:e.institutionInfo,isGrammarlyEmployee:Ri.n.isGrammarlyEmployee(e),isTestUser:Ri.n.isTestUser(e),isFreeTrial:Ri.n.isFreeTrial(e)}))),r=this._viewModels.get();if(null!==r)this._subs.push(Xo(r,e));else{this._openMeasure=this._felog.assistant.openTime.startMeasure();const r=this._felog.assistant.initTime.startMeasure();this._openState.set("opening");const o=this._params.assistantService.createIntegration({gnar:this._params.gnar,felog:this._felog,snippetsFeature:this._params.snippetsFeature,experimentClient:this._params.experimentClient});if(!o)return this._log.warn("tried to open assistant with checking service not initialized"),r.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(i=(t=this._params).onOpen)||void 0===i||i.call(t,o),this._integration=o;const s=(0,a.zG)(C.ij(e.type===R.WT.card?e.alertId:null),C.UI(A.wQ.Id.create)),l=C.pC(o.engine.sduiEngine)?(0,a.zG)(_.MH(o.engine.sduiEngine),(({sduiBufferService:e,sduiFeedbackService:t,sduiPopoverManager:i})=>((e,t,i,n,r)=>{const o=(0,a.zG)(e.capiEvents,u.h(jo.hX.is("sdui_add","sdui_remove","sdui_update")),u.h((e=>"sdui_remove"===e.kind||!bi.D1.InlineCard.isInlineCard(e.sdui)))),s=new qo.A(t,o,i,r),l=new Ko._(s.state);return{sduiBufferService:e,sduiFeedbackService:n,sduiManager:s,sduiFeedManager:l,dispose:()=>{s.dispose(),l.dispose()}}})(e,o.engine.alertsList.state,o.engine.getByRawAlertId,t,i)),(e=>{const t=br(o.engine,o.denaliViewAdapter,this._assistantPopupIsReady,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.checkingService,this._params.cardEvents,this._params.statisticsService,this._params.toneAIFeature,(()=>this._params.envFactory()),this._params.experimentClient,this._params.userEngagedByAlertsAcceptedService,this._params.emogenieService,e,this._params.browser,C.ij(this._params.proofitFeature),this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.dapiActions,this._params.snippetsFeature,(()=>this._params.checkingService));return{...t,dispose:()=>{t.dispose(),e.dispose()}}})):Fi(o.engine,o.denaliViewAdapter,o.document.settings.lens("selectedLens"),this._params.emogenieService,this._params.toneAIFeature,this._params.ethicalAIFeature,this._params.snippetsFeature,C.ij(this._params.proofitFeature),this._assistantPopupIsReady,s,this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,n,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.alertProcessor,this._params.cardEvents,this._params.browser,this._params.layout.assistant,(()=>this._params.envFactory()),this._params.userEngagedByAlertsAcceptedService,this._params.dapiActions,(()=>this._params.checkingService));this._subs.push(Xo(l,e)),l.isSingleCardAssistant&&this._subs.push(l.cardsViewModel.actionEvents.pipe(u.h(I.t.isSduiCardAction),u.h((e=>e.sourceId===bi.D1.Proofit.ID)),p.U((e=>Jo(e.actions,l.sduiEngine.sduiFeedManager.currentFeed))),u.h((e=>e.length>0))).subscribe((()=>{l.gnar.proofitButtonClick("assistant_header")}))),this._initPerformance=r.endMeasure(),this._viewModels.set(l)}},this.close=()=>{var e,t,i,n;null!==this._viewModels.get()&&(this._trackAssistantClose(),(0,a.zG)(C.ij(this._integration),C.tS((e=>e.engine.sduiEngine)),C.UI((()=>this._viewModels.get())),C.UI((e=>e.sduiCardsViewModel.onAssistantClose()))),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this._openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(n=this._viewModels.get())||void 0===n||n.dispose(),this._viewModels.set(null))},this._asyncReadyCbSub=null,this._getReadyFn=()=>{const e=this._felog.assistant.renderTime.startMeasure();return(t,i,n)=>{const a=e.endMeasure();let r;if((0,l.kG)(!!this._openMeasure,"Expected Assistant to be open"),n)this._openMeasure.cancelMeasure();else{const e=this._openMeasure.endMeasure();r=null==e?void 0:e.duration,this._initPerformance&&a&&e&&e.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:a.duration,total:e.duration})}this._asyncReadyCbSub=g.E.schedule((()=>{this._openState.set("open"),this._assistantPopupIsReady.next(void 0),this._trackAssistantOpen(t,r),this._trackAssistantDrag(t,i)}))}},this._applyIframeOffset=e=>{var t,i;const n=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return n?{...e,size:{width:n.width,height:n.height},client:{...e.client,left:n.left+e.client.left,top:n.top+e.client.top},offset:{...e.offset,left:n.left+e.offset.left,top:n.top+e.offset.top},page:{...e.page,left:n.left+e.page.left,top:n.top+e.page.top}}:e}}get view(){return this._viewModels.pipe(h.w((e=>null===e?m.of(null):f.a([v.R(self,"resize").pipe(b.O(null)),this._maxHeight]).pipe(S.M(this._params.layout.textField.rect.behavior),S.M(f.a([this._params.layout.gbutton.positionBehavior,this._params.layout.gbutton.sizeBehavior]).pipe(p.U((([e,t])=>{const i=t.heightAndWidth,n=t.heightAndWidth;return{top:e.client.top-n,left:e.client.left-i,width:i,height:n}})))),p.U((([[[t,i],n],a])=>{const o=this._applyIframeOffset(n),s=this._getReadyFn();let l;const c="test"===this._params.experimentClient.getTreatment(ln.p.SingleCardAssistantNextToTextField);l=c?{...o.client,...o.size}:a;const d=e=>{this._maxHeight.set(e)};return e.isSingleCardAssistant?r.createElement(Co,{anchor:c?"textField":"GButton",alignmentRect:l,viewModels:e,onDomRectChange:e=>{this._domRect.set(e)},onMaxHeightChange:d,experimentClient:this._params.experimentClient},r.createElement(zo,{viewModels:e,height:this._height,ready:s,maxHeight:i,domRect:this._domRect.view(),experimentClient:this._params.experimentClient})):r.createElement(yo,{textFieldRect:o,gButtonRect:a,viewModels:e},r.createElement(bo,{viewModels:e,experimentClient:this._params.experimentClient,emogenieService:this._params.emogenieService,height:Be(e,o).pipe(w.R(this._assistantPopupIsReady.asObservable()),y.b(E.wW(this._height))),ready:s,OuterElementsPortalSource:this._params.OuterElementsPortalSource}))}))))))}get activeView(){return this._viewModels.pipe(h.w((e=>{var t;return(null==e?void 0:e.isSingleCardAssistant)?m.of(null):null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:m.of(null)})))}dispose(){var e;this.close(),this._subs.dispose(),null===(e=this._asyncReadyCbSub)||void 0===e||e.unsubscribe()}_trackAssistantOpen(e,t){var i,n;const a=this._viewModels.get();if(null!==a){const r=a.isSingleCardAssistant?{top:0,left:0}:a.positionViewModel.initialPositionOffset,{statisticsService:o}=this._params,s=o.alertCounts.get(),l=0===r.top&&0===r.left?a.isSingleCardAssistant||"default"===a.assistantLayoutViewModel.layout.name?"smart":"hardcoded":"sticky",c=a.isSingleCardAssistant?"default":a.assistantLayoutViewModel.activeView.get().type;this._params.gnar.assistantPopupShow(c,this._height.get(),e.get().left,e.get().top,s.unmutedCapiAlerts,s.filter((e=>x.S.isCapiAlert(e)&&e.outcome===vi.TC.clarity)).visibleNotInlineCapiAlerts,s.visibleInlineCapiAlerts,s.filter((e=>x.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,o.wordsCount.get(),l,null!==(n=null===(i=this._params.checkingService)||void 0===i?void 0:i.sessionUuid)&&void 0!==n?n:"",void 0,t,o.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),n=this._viewModels.get(),a=(null==n?void 0:n.isSingleCardAssistant)?"default":null!==(e=null==n?void 0:n.assistantLayoutViewModel.activeView.get().type)&&void 0!==e?e:Et.a.Type.default;this._params.gnar.assistantPopupCloseButtonClick(a,i.unmutedCapiAlerts,i.filter((e=>x.S.isCapiAlert(e)&&e.outcome===vi.TC.clarity)).visibleNotInlineCapiAlerts,i.visibleInlineCapiAlerts,i.filter((e=>x.S.isCapiAlert(e)&&"priority"===e.assistantView)).unmutedCapiAlerts,void 0)}_trackAssistantDrag(e,t){const i=e.get();let n=i;this._subs.push(t.pipe(k.G(),u.h((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();Wo.E9.l1Distance(t,n)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),n=t)})))}}var Zo=i(17513),es=i(23650),ts=i(47268),is=i(84034),ns=i(12547),as=i(57475);class rs{constructor(e,t,i,n,a,r,o,s,l,c){this.connectionState=e,this.gnar=t,this.user=i,this._hoverProvider=n,this.document=a,this.formattingService=r,this.denaliViewAdapter=o,this.capiProxy=s,this.engine=l,this.experimentClient=c,n.setAssistantHover(o.highlightHoverProvider)}static create(e){var t;const i=new ts.t(e.highlights,e.textObserver,e.replacementService,e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),n=ns.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.textRevisionManager,e.customEventsFilter),a=(0,as.r)(n,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,is.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.snippetsFeature,e.sduiBufferService,e.sduiPopoverManager,e.felog,e.experimentClient,(t=>t.forEach((t=>e.alertProcessor.removeAlert(t,{_tag:es.i.alertAccepted})))));return new rs(e.connectionState,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,n,a,e.experimentClient)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var os=i(88725),ss=i(25226);class ls{constructor({layout:e}){this._scroller=(0,ss.t)({scrollToMarkRect(t,i){(0,os.W)(e,t,null==i?void 0:i.paddingTop)},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var cs=i(57495);class ds{constructor(e){this._params=e,this.sidebarEvents=new d.x,this.hoverProvider=new Zo.f(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.positionModel=(0,cs.j)(this._params.originalTextField,this._params.state,this._params.fieldSettings,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(p.U((e=>""===e.newText.trim())),nt.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(e){var t,i;const{layout:n,highlights:a,textObserver:r,replacementService:o,alertProcessor:s,textRevisionManager:l,state:c,document:d,requestAwaitService:u,formattingService:p,sduiBufferService:g,sduiPopoverManager:h}=this._params;if(null==this._checkingService)return null;const m=null===(i=(t=this._params).getCheckingServicePreviousState)||void 0===i?void 0:i.call(t);m&&(this._checkingService.state.value=m);const f=this._params.createAssistantScroller?this._params.createAssistantScroller():new ls({layout:n}),{user:v}=c.get();return rs.create({layout:n,alertProcessor:s,textRevisionManager:l,connectionState:c.view((e=>e.connection)),highlights:a,textObserver:r,replacementService:o,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:e.gnar,felog:e.felog,user:{isPremium:v.premium,isAnonymous:v.anonymous,customFields:v.customFields,isGrammarlyEmployee:Ri.n.isGrammarlyEmployee(v),isTestUser:Ri.n.isTestUser(v),isFreeTrial:Ri.n.isFreeTrial(v)},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:f,sidebarEvents:this.sidebarEvents,document:d,alertsTransformer:this._params.alertsTransformer,requestAwaitService:u,formattingService:p,getExistingAlerts:this._params.getExistingAlerts?()=>this._params.getExistingAlerts?this._params.getExistingAlerts():null:void 0,snippetsFeature:e.snippetsFeature,experimentClient:e.experimentClient,sduiBufferService:g,sduiPopoverManager:h,customEventsFilter:this._params.customEventsFilter})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},84034:(e,t,i)=>{i.d(t,{q:()=>a});var n=i(48758);function a(e){return Array.from(e.alerts.getAll()).filter(n.S.isCapiAlert)}},57475:(e,t,i)=>{i.d(t,{r:()=>V});var n=i(18117),a=i(24332),r=i(90023),o=i(39953),s=i(94579),l=i(75708),c=i(85443),d=i(55812),u=i(36863),p=i(98902),g=i(71255),h=i(98162),m=i(78398),f=i(84146),v=i(7378),b=i(68020),S=i(88012),w=i(81933),y=i(2187),E=i(31008),k=i(86214),C=i(12518),_=i(73823),A=i(58303),I=i(2084),T=i(59833),x=i(61797),R=i(559),P=i(72350),M=i(75430),D=i(42192),F=i(19328),L=i(13391),B=i(86291);var U=i(43389),O=i(38709),H=i(90595),G=i(40866),N=i(40594),z=i(50787);const V=(e,t,i,d,v,k,V,j,q,K,$,Y)=>{const J=N.Y.create("createEngine"),X=new S.w.Keeper,Q=function(e,t,i){const n=L.h.create(A.YP),a=L.h.create(A.YP);return{score:L.h.create(A.YP),scoreStatus:L.h.create(A.YP),title:L.h.create(void 0),textInfo:L.h.create(A.YP),checkingState:L.h.create(e.checkingState),asyncChecksState:L.h.create(e.asyncChecksState),context:i,contextCompleteness:i.view(F.j.calculateCompleteness),updateContext:e=>{const t=!E.R$.eq.equals(i.get(),e);return i.set(e),t},defaultContext:n,updateDefaultContext:e=>{const t=!(0,o.zG)((0,r.bc)([n.get(),e],I.vB(E.R$.eq.equals)));return n.set(e),t},documentText:t.getText(),documentLength:L.h.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:L.h.create(F.dM.group.empty),calculateStats:()=>B.Vi(e.requestDocStats).then((e=>(a.set(A.G(e)),e))),recentDocumentStats:a}}(e,t,i),Z=t.changes.pipe(w.scan(((e,i)=>x.RI.isReset(i)?(0,o.zG)(i.text,C.g_((()=>t.getText()),r.yR)):x.RI.isDelta(i)?(0,o.zG)(x.RI.resFromText(e).compose(i),_.VS((e=>e.text)),C.g_((()=>t.getText()),r.yR)):e),""));X.push(e.events.pipe(w.withLatestFrom(Z),w.tap((([e,t])=>{if("alert_received"===e.kind){const i=(0,O.IM)(e.alert,G.Q.fromString("fake"));U.$.isConsistentWithText(i,t)||(K.alerts.inconsistentAlertWithText("assistant",null==i?void 0:i._tag),(0,D.N)(J,i,t,"logging"))}}))).subscribe(),e.events.pipe(w.tap((t=>{Q.checkingState.set(e.checkingState),R.hX.is("text_info")(t)?Q.textInfo.set(A.G(t.data)):R.hX.is("finish")(t)?(Q.score.set(t.score),Q.scoreStatus.set(t.scoreStatus)):R.hX.is("feedback_ack")(t)?((0,o.zG)(t,A.DT(R.hX.isUserFeedbackWithGeneralScore),A.UI((e=>e.outcomeScores.GeneralScore)),A.UI((e=>Math.trunc(100*e))),I.bw((e=>Q.score.modify((0,r.ls)(A.UI((t=>({...t,rank:e}))),I.vx(A.G({errorRateScore:0,rank:e}))))))),(0,o.zG)(t,A.DT(R.hX.isUserFeedbackWithScoreStatus),A.UI((e=>e.scoreStatus)),I.bw((e=>Q.scoreStatus.set(A.G(e)))))):R.hX.is("session_started")(t)&&Q.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),...$.isGateEnabled(H.K.CheetahClearSDUIBufferOnReconnect)?[]:[(0,z.o)((()=>A.WG(j)),e.events)],v.contentChanges.async.pipe(w.debounceTime(300),w.map((e=>e.newText)),w.map((e=>({full:e.length-1,trimmed:e.trim().length}))),w.tap(y.wW(Q.documentLength))).subscribe()),(0,o.zG)(k(),A.UI((e=>{Q.updateDefaultContext(E.R$.parseDefault(e.defaultDocumentContext))})));const ee=new b.Xr,te=new p.Ek,ie=(0,a.g_)((0,a.Zm)())(T.oA([A.G((e=>(0,o.zG)(V.get(),A.g_((()=>e),(t=>t.addSnippetsTriggerToAlert(e))))))])),ne=new s.a,ae=new u.SC(ee,te,(()=>t.getContents().delta),e.events,e,Q.counters,ie,void 0,ne),re=l.e.create(ae.state),oe=new c.k(re,ae._ops);X.push(h.R.init(h.R.UserTextChangesSync.create(t),e.events,g.nR.ignoreTEResult(e),g.nR.ignoreResult(ee),te,g.Av.merge([ae])).subscribe()),e.loadAlerts(d()),ae.flushAlerts(),$.isGateEnabled(H.K.DontSyncAlertApplicationsWithInlineMode)||X.push(W(ae.state,Y));const se=A.G(m.J.CategoriesModel.create(e.events,e,ae.state,oe,P.JW.ScopeType.GLOBAL)),le=A.G(f.k.create(re)),ce=(0,o.zG)((0,n.gz)(A.Kw)(j,q),A.UI((([t,i])=>({sduiBufferService:t,sduiFeedbackService:new M.Q(e),sduiPopoverManager:i})))),de={enablePlagiarismSearch:e.enablePlagiarismSearch,disablePlagiarismSearch:e.disablePlagiarismSearch,enablePlagiarismAndAiDetectorSearch:e.enablePlagiarismAndAiDetectorSearch,disablePlagiarismAndAiDetectorSearch:e.disablePlagiarismAndAiDetectorSearch},ue={requestWritingExpert:e.requestWritingExpert,enableWritingExpert:e.enableWritingExpert,disableWritingExpert:e.disableWritingExpert};return{alertsList:ae,alertsReader:re,alertsService:oe,positionManager:ee,getByRawAlertId:ne.getByRawAlertId.bind(ne),sessionModel:Q,mutedAlertsCategoriesModel:se,mutingAlertsReader:le,shutdown:()=>{ae.dispose(),X.dispose()},sduiEngine:ce,plagiarismClient:de,writingExpertClient:ue}},W=(e,t)=>e.pipe(w.startWith(v.p.empty),w.pairwise(),w.map((([e,t])=>v.p.diff(e,t))),w.map((e=>(0,o.zG)(e,k.vh.reduce([],((e,t)=>(0,o.zG)(t.alert,A.DT((e=>d.bZ.isApplied(e))),A.UI((e=>e.rawId)),A.fS((()=>A.YP)),A.g_((()=>e),(t=>[...e,t])))),r.yR,r.yR))))).subscribe((e=>{e.length&&t(e)}))},57495:(e,t,i)=>{i.d(t,{j:()=>o});var n=i(13391),a=i(68418),r=i(38456);const o=(e,t,i,n)=>{const o=t.view("page","domain").get(),s=(0,r.U)(e,o),l=i.view((({widgetOffset:e})=>null!=e?e:a.E9.zero));return{initialPositionOffset:l,updateInitialPositionOffset:e=>{a.E9.equals(e,l.get())||n.field.patchFieldSettings({fieldId:s,fieldSettings:{widgetOffset:e}})}}};n.h.create({top:0,left:0})},5561:(e,t,i)=>{i.d(t,{D:()=>l,a:()=>n});var n,a=i(81933),r=i(42901),o=i(64670),s=i(78767);!function(e){let t;!function(e){e.default="default",e.emogenie="emogenie",e.feedback="feedback",e.settings="settings",e.proofitRequest="proofitRequest",e.proofitReview="proofitReview",e.startupPlaceholder="startupPlaceholder"}(t=e.Type||(e.Type={})),e.isDefault=function(t){return t.type===e.Type.default},e.isEmogenie=function(t){return t.type===e.Type.emogenie},e.isFeedback=function(t){return t.type===e.Type.feedback},e.isSettings=function(t){return t.type===e.Type.settings},e.isProofitRequest=function(t){return t.type===e.Type.proofitRequest},e.isProofitReview=function(t){return t.type===e.Type.proofitReview}}(n||(n={}));class l extends o.A{constructor(e,t,i,o,l=r.V.defaultLayout){super({type:n.Type.startupPlaceholder},{type:n.Type.default}),this.browser=o,this.layout=l,this._sub=new a.Subscription,this._sub.add(t.subscribe((e=>{if(e.length>0)for(;!this.activeViewHasAlerts();)this.popActiveView()})));const c=new Set([n.Type.emogenie]);this._sub.add(i.pipe(a.debounceTime(100),a.filter(s.fQ)).subscribe((()=>{if(c.has(this._activeView.get().type))for(;this._activeView.get().type!==this._defaultView.type;)this.popActiveView()}))),this._sub.add(this._activeView.subscribe((t=>{switch(t.type){case n.Type.settings:return void e.assistantSettingsShow();case n.Type.proofitRequest:return void e.proofitRequestFormShow();default:return}})))}activeViewHasAlerts(){switch(this._activeView.get().type){case n.Type.default:case n.Type.emogenie:return!0;default:return!1}}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}get isHeaderNavigationEnabled(){return this._activeView.view((e=>e.type!==n.Type.feedback))}dispose(){this._sub.unsubscribe()}}},84705:(e,t,i)=>{i.d(t,{W:()=>a});var n=i(68418);const a=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(n.E9.plus(t,n.E9.fromCartesian(i.translate)))}}}},48667:(e,t,i)=>{i.d(t,{X:()=>o});var n=i(13391),a=i(58303),r=i(35614);class o{constructor(e,t,i,o,s=!1){this._contentScriptState=e,this._contentScriptActions=t,this._dapiActions=i,this.domain=o,this._canRequestInProductDiscountSpecialOffer=s,this.hasInProductDiscountSpecialOffer=n.h.create(a.YP),this.state=this._contentScriptState.view((e=>({user:e.user,page:e.page,dynamicConfig:e.dynamicConfig,dapi:e.dapi}))),this.actions={toggleSite:(e,t)=>{this._contentScriptActions.toggleSite({enabled:e,domain:t})},toggleDefs:e=>{this._contentScriptActions.toggleDefs(e)},toggleAutocorrect:e=>{this._contentScriptActions.toggleAutocorrect(e)},toggleAlwaysAvailableAssistant:e=>{this._contentScriptActions.toggleAlwaysAvailableAssistant(e)},cheetahToggleInlineRewrite:e=>{this._contentScriptActions.cheetahToggleInlineRewrite(e)},cheetahToggleInlineQuickReply:e=>{this._contentScriptActions.cheetahToggleInlineQuickReply(e)},toggleCitationBuilderForDomain:e=>{this._contentScriptActions.toggleCitationBuilderForDomain(e)},changeStrongDialect:e=>{this._dapiActions.changeStrongDialect(e)},setDesktopIntegration:e=>{this._contentScriptActions.setDesktopIntegration(e)},setEmogenieEmojiState:e=>{this._dapiActions.setEmogenieEmojiState(e)},setSerengetiState:e=>{this._dapiActions.setSerengetiState(e)},toggleKnowledgeHub:e=>{this._contentScriptActions.toggleKnowledgeHub(e)},toggleTouchTypist:e=>{this._contentScriptActions.toggleTouchTypist(e)},toggleTouchTypistByUser:e=>{this._contentScriptActions.toggleTouchTypistByUser(e)},setTouchTypistToggledByUser:e=>{this._contentScriptActions.setTouchTypistToggledByUser(e)},setTouchTypistHotkey:e=>{this._contentScriptActions.setTouchTypistHotkey(e)},toggleGOSDebugger:e=>{this._contentScriptActions.patchCommonSettings({gOSDebuggerEnabled:e})},setGOSAppletChannel:e=>{this._contentScriptActions.patchCommonSettings({gOSAppletChannel:e})},setGOSAssistantAppletUrl:e=>{this._contentScriptActions.patchCommonSettings({gOSAssistantAppletUrl:e})},hwrSetEnabled:e=>{this._contentScriptActions.hwrSetEnabled(e)},setKeyboardShortcut:(e,t)=>{this._contentScriptActions.setKeyboardShortcut({[e]:t})},getConfiguration:e=>this._contentScriptActions.getConfiguration(e),trackConfiguration:(e,t)=>this._contentScriptActions.trackConfiguration(e,t),toggleEnhancedScreenReaderUXSupport:e=>{this._contentScriptActions.toggleEnhancedScreenReaderUXSupport(e)}},this._canRequestInProductDiscountSpecialOffer&&(0,r.SU)(this._contentScriptActions).subscribe((e=>this.hasInProductDiscountSpecialOffer.set(e)))}}},10335:(e,t,i)=>{i.d(t,{f:()=>r});var n=i(92379),a=i(92759);const r=(e,t,i,r)=>{const[o,s]=n.useState(a.h.create()),[l,c]=n.useState(null),[d,u]=n.useState(null),p=null!=d?d:o.translate;return n.useEffect((()=>{!o.dragging&&o.dragEnd&&(t(e+p.y),r(i+p.x),c(o.translate),u({x:0,y:0}))}),[o]),n.useEffect((()=>{o.dragging&&d&&l&&u({x:o.translate.x-l.x,y:o.translate.y-l.y})}),[o]),{dragState:o,setDragState:s,x:p.x,y:p.y}}},41166:(e,t,i)=>{i.d(t,{G:()=>s});var n=i(92379),a=i(62552),r=i(78129),o=i(8536);const s=()=>{const[e,t]=n.useState(o.KC.top),[i,s]=n.useState(o.KC.left),[l,c]=n.useState(o.KC.height),[d,u]=n.useState(o.KC.width),p=n.useRef(new a.X(o.KC));return n.useEffect((()=>{const n=p.current.pipe(r.G()).subscribe((([n,a])=>{const r=((e,t,i)=>{if(e===o.KC.left||t.left!==i.left)return i.left})(i,n,a),l=((e,t,i)=>e===o.KC.top?i.top:t.height!==i.height?Math.max(e-(i.height-t.height),0):void 0)(e,n,a);void 0!==l&&t(l),void 0!==r&&s(r),u(a.width),c(a.height)}));return()=>n.unsubscribe()}),[e,i]),{top:e,setTop:t,left:i,setLeft:s,height:l,width:d,positionerRef:p}}},46108:(e,t,i)=>{i.d(t,{V:()=>n});i(42087);const n=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g},7245:(e,t,i)=>{i.d(t,{m:()=>n});var n,a=i(95869);!function(e){e.isInlineFormatting=function(e){return"bold"in e||"italic"in e||"underline"in e||"link"in e},e.isListFormatting=function(e){return"list"in e},e.isHeaderFormatting=function(e){return"header"in e},e.hasFormatting=function(t){return!a.s.isDelete(t)&&void 0!==t.attributes&&(e.isInlineFormatting(t.attributes)||e.isListFormatting(t.attributes)||e.isHeaderFormatting(t.attributes))}}(n||(n={}))},31394:(e,t,i)=>{i.d(t,{V:()=>n});var n,a=i(58041);!function(e){e.gbuttonInnerSize=22,e.gButtonPadding=2,e.gButtonGroupPadding=2,e.gButtonTopLeftMargin=1,e.gButtonMinimizedSize=12,e.getGButtonComponentSize=(t=e.gButtonMaxSize)=>e.gbuttonInnerSize*t/e.gButtonMaxSize,e.getEmogenieSize=e.getGButtonComponentSize,e.getTotalWidth=(t,i,n)=>{const r=[];i&&!n&&r.push(e.getEmogenieSize()+-1),n&&r.push(a.m);const o=r.reduce(((e,t)=>e+t),0);return(e.gButtonMaxSize+o)*t/e.gButtonMaxSize},e.gButtonMaxSize=e.gbuttonInnerSize+2*e.gButtonPadding+2*e.gButtonGroupPadding;e.getGButtonSize=(t,i)=>Math.max(Math.min(t,i,e.gButtonMaxSize),24)}(n||(n={}))},15100:(e,t,i)=>{var n;i.d(t,{P:()=>n}),function(e){e.OFFLINE="offline",e.POPUP_VISIBLE="popup_visible",e.POPUP_VISIBLE_ALLOW_HOVER="popup_visible_allow_hover",e.DATA_CONTROL_ACTIVE="data_control_active",e.USER_EDC_BLOCKED="user_edc_blocked",e.ASSISTANT_VISIBLE="assistant_visible",e.USER_CLAIMED="user_claimed",e.SIGNED_OUT_GB="signed_out_gb",e.STAND_WITH_UKRAINE="stand_with_ukraine",e.POPUP_VISIBLE_SDUI="popup_visible_sdui",e.INACTIVE_INTEGRATION="inactive_integration"}(n||(n={}))},31818:(e,t,i)=>{if(i.d(t,{RU:()=>b,oJ:()=>S}),6168!=i.j)var n=i(84308);if(6168!=i.j)var a=i(93440);if(6168!=i.j)var r=i(29479);if(6168!=i.j)var o=i(954);if(6168!=i.j)var s=i(59179);if(6168!=i.j)var l=i(29416);if(6168!=i.j)var c=i(90572);if(6168!=i.j)var d=i(14969);if(6168!=i.j)var u=i(66798);var p=i(16381);if(6168!=i.j)var g=i(42495);if(6168!=i.j)var h=i(99216);if(6168!=i.j)var m=i(90595);var f=i(95404);if(6168!=i.j)var v=i(40594);function b(e){self.open((0,f.jv)(e)?e:(0,p.Um)().standWithUkraine)}class S{constructor(e,t,i,p,f,S,w,y){this._pupupController=e,this._pageState=t,this._popupDynamicConfig=i,this._csActions=p,this._experimentClient=f,this._alertCounts=S,this._checkingStatus=w,this._gnar=y,this._subs=[],this._log=v.Y.create("StandWithUkraineBannerService"),this.actions={onHelpUkraine:()=>{var e;b(null===(e=this._popupDynamicConfig.get())||void 0===e?void 0:e.popupHelpButtonLink),this._gnar.standWithUkraineHelpButtonClick()}},this._subs.push((0,n.a)([(0,a.H)(1.5*u.cK).pipe((0,r.h)(!0),(0,o.O)(!1)),this._pageState.pipe((0,s.U)((e=>e.standWithUkraineBannerPopupWasShown))),this._checkingStatus.pipe((0,l.b)(h.qo),(0,s.U)((e=>e===g.H.inProgress)),(0,o.O)(!0)),this._alertCounts.pipe((0,s.U)((e=>0===e.unmutedCapiAlerts)))]).pipe((0,s.U)((([e,t,i,n])=>{return e&&!t&&!i&&n&&(!(a=this._experimentClient).isGateEnabled(m.K.StandWithUkraineGrammarlySuspended)&&a.isGateEnabled(m.K.StandWithUkraineTheme));var a})),(0,c.h)((e=>!!e)),(0,d.P)()).subscribe((()=>{const e=this._popupDynamicConfig.get();this._pupupController.updateState({type:"standWithUkraineBanner",...e?{popupTitleHTML:e.popupTitleHTML,popupBodyHTML:e.popupBodyHTML,popupHelpButtonLabelHTML:e.popupHelpButtonLabelHTML,popupIconResetButtonLabelHTML:e.popupIconResetButtonLabelHTML}:{}}),this._csActions.showStandWithUkraineBannerPopup(),this._gnar.standWithUkraineHelpPopupShow()})))}dispose(){try{this._subs.forEach((e=>e.unsubscribe()))}catch(e){this._log.warn("Failed to dispose",e)}}}},6882:(e,t,i)=>{i.d(t,{Zz:()=>l,h4:()=>o,uT:()=>s});var n=i(92379);if(6168!=i.j)var a=i(41195);var r=i(31e3);const o=({sanitizedTitle:e})=>n.createElement("div",{className:r.header},n.createElement("div",{className:r.flag},n.createElement("div",{className:r.flagTop}),n.createElement("div",{className:r.flagBottom})),n.createElement("div",{className:r.title,dangerouslySetInnerHTML:{__html:e}})),s=({sanitizedBody:e})=>n.createElement(n.Fragment,null,e.map((e=>n.createElement("p",{key:e,className:r.paragraph,dangerouslySetInnerHTML:{__html:e}})))),l=e=>n.createElement(a.X,{style:{width:280},onClose:e.onClose,includeMainContentPadding:!1,mainContent:n.createElement("div",{className:r.content,"data-has-footer":e.popupFooter?"true":"false"},n.createElement(o,{sanitizedTitle:e.sanitizedPopupTitle}),n.createElement(s,{sanitizedBody:e.sanitizedPopupBody}),e.popupFooter?e.popupFooter:null)})},6188:(e,t,i)=>{i.d(t,{c:()=>n});var n,a=i(72314);!function(e){e.sanitizeSuspendTitle=function(e){return e?(0,a.sanitize)(e):"Grammarly is unavailable in your country"},e.sanitizeSuspendBody=function(e){return e?e.map(a.sanitize):["In response to Russia’s invasion of Ukraine, we have suspended service to accounts in Russia and Belarus."]},e.sanitizeSuspendLearnMoreLabel=function(e){return e?(0,a.sanitize)(e):"Learn more"}}(n||(n={}))},32295:(e,t,i)=>{i.r(t),i.d(t,{StandWithUkraineGrammarlySuspendedPopup:()=>c,StandWithUkraineSuspendFooter:()=>d});var n=i(92379);if(6168!=i.j)var a=i(6188);if(6168!=i.j)var r=i(82914);var o=i(1695);if(6168!=i.j)var s=i(6882);var l=i(59776);const c=e=>(n.useEffect((()=>{r.J.standWithUkraineSuspendPopupShow()}),[]),n.createElement(s.Zz,{onClose:()=>{e.onClose(),r.J.standWithUkraineSuspendCloseButtonClick()},sanitizedPopupTitle:a.c.sanitizeSuspendTitle(e.popupTitleHTML),sanitizedPopupBody:a.c.sanitizeSuspendBody(e.popupBodyHTML),popupFooter:n.createElement(d,{onLearnMore:()=>{e.onLearnMore(),r.J.standWithUkraineSuspendLearnMoreButtonClick()},sanitizedLearnMoreButtonLabelHTML:a.c.sanitizeSuspendLearnMoreLabel(e.popupLearnMoreButtonLabelHTML)})})),d=e=>n.createElement(o.z,{className:l.learnMoreButton,onClick:e.onLearnMore},n.createElement("span",{dangerouslySetInnerHTML:{__html:e.sanitizedLearnMoreButtonLabelHTML}}))},99216:(e,t,i)=>{if(i.d(t,{VF:()=>_,qo:()=>C}),6168!=i.j)var n=i(93440);if(6168!=i.j)var a=i(84308);if(6168!=i.j)var r=i(90572);if(6168!=i.j)var o=i(24666);if(6168!=i.j)var s=i(20161);if(6168!=i.j)var l=i(29479);if(6168!=i.j)var c=i(954);if(6168!=i.j)var d=i(29416);if(6168!=i.j)var u=i(59179);if(6168!=i.j)var p=i(90595);if(6168!=i.j)var g=i(50199);if(6168!=i.j)var h=i(6266);if(6168!=i.j)var m=i(42495);if(6168!=i.j)var f=i(67385);if(6168!=i.j)var v=i(15100);if(6168!=i.j)var b=i(49403);if(6168!=i.j)var S=i(90790);if(6168!=i.j)var w=i(16381);if(6168!=i.j)var y=i(19724);if(6168!=i.j)var E=i(78767);if(6168!=i.j)var k=i(43795);const C=200,_=e=>{const t=(0,S.PS)(e.models.expanded.visible.view((e=>!e))),i=e.emogenieService.viewState.view("prevalentEmotion").pipe((0,r.h)(E.fQ),(0,o.x)(((e,t)=>e.emojiId!==t.emojiId)),(0,s.w)((e=>(0,n.H)(3e3).pipe((0,l.h)(void 0),(0,c.O)(e)))),(0,c.O)(void 0)),_=e.readyState.pipe((0,r.h)((e=>e===f.kQ.firstTextCheckCompleted||e===f.kQ.disconnected)),(0,l.h)(!0),(0,c.O)(!1));return{gButtonProps:(0,a.a)([(0,a.a)([e.csState,e.checkingStatus.pipe((0,d.b)(C)),e.statisticsService.assistantAlertCounts,e.statisticsService.generalScore,e.statisticsService.wordsCount,e.minimized]),(0,a.a)([e.models.gButton.disabledReason,e.models.expanded.visible,i,e.inactiveIntegrationController.state.enabled,_])]).pipe((0,u.U)((([[i,n,a,r,o,s],[l,c,d,u,f]])=>{var S,E;const C=e.experimentClient.isGateEnabled(p.K.DomainClaimedUserCopyWithInstitutionDetails),_="data_control"===i.extensionFSM.stage||y.n.isEdcBlocked(i.user)||l===v.P.SIGNED_OUT_GB||u||C&&l===v.P.USER_CLAIMED;if(s&&c)return null;const A=y.n.getType(i.user),I=l===v.P.OFFLINE,T=l===v.P.STAND_WITH_UKRAINE,x=(0,b.U)(e.experimentClient,{isAnonymous:A===y.F.anonymous,authUserDetails:(0,h.no)(i.page)}),R=(()=>{var e;const{customSessionTimeoutInfo:t}=i.user;if(!(0,k.Xv)(t))return!1;const n=null===(e=null==i?void 0:i.page)||void 0===e?void 0:e.sessionTimeoutValue;return(0,k.dU)(n)})(),P=C?T:l===v.P.USER_CLAIMED||T,M=C&&l===v.P.USER_CLAIMED,D=(0,w.Am)()||null!==l&&[v.P.OFFLINE,v.P.ASSISTANT_VISIBLE,v.P.SIGNED_OUT_GB,v.P.INACTIVE_INTEGRATION].includes(l),F=null!==(E=null===(S=i.dynamicConfig.standWithUkraineGrammarlySuspendedPopup)||void 0===S?void 0:S.gButtonHoverTooltipText)&&void 0!==E?E:"In response to Russia’s invasion of Ukraine, Grammarly has suspended service to accounts in Russia and Belarus.";return{disabled:_,offline:I,checking:n===m.H.inProgress,initialized:f,userType:A,minimized:s,errors:a,generalScore:r,wordsCount:o,showWarning:P,showDomainClaimedUserWarning:M,showSessionTimeoutWarning:R,showLoggedOutWarning:x,animation:t,badgeDisabled:D,emotion:d,tooltip:T?F:void 0,tooltipDelay:T&&F?500:void 0,onMount:e.onMount,onStartChecking:e.onStartChecking,onDoneChecking:e.onDoneChecking,addOnePasswordExtensionBypass:(0,g.Y)(i.page)}})),(0,c.O)(null))}}},74746:(e,t,i)=>{i.d(t,{c:()=>a});var n=i(27080);class a{constructor(e){this._highlights=e}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,n.H)({...e,highlights:this._highlights})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}},26155:(e,t,i)=>{i.d(t,{NC:()=>o,WF:()=>p,pc:()=>c,qH:()=>r,y$:()=>s});var n=i(90023);if(6168!=i.j)var a=i(24666);var r,o,s,l,c,d=i(13391),u=i(78767);function p(e){return e.rect.map((e=>e.size)).behavior.pipe((0,a.x)(((e,t)=>e.height===t.height&&e.width===t.width)))}!function(e){let t;!function(e){e.invalidate="invalidate",e.preserve="preserve"}(t=e.ChangeType||(e.ChangeType={}))}(r||(r={})),function(e){e.everything=d.h.create({filter:e=>!0,type:e.ChangeType.preserve})}(r||(r={})),function(e){function t(e,t){const i=e.end-e.start==1,n="a"===t.slice(e.start,e.end);return i&&!n}e.is=function(e){const t=e;return(0,u.Nf)(t.increasedLeft)&&"number"==typeof t.increasedLeft&&(0,u.Nf)(t.increasedRight)&&"number"==typeof t.increasedRight},e.expandIfNeeded=function(e,i){if(t(e,i)){const t=e.start>0?1:0,n=e.end!==i.length?1:0;return{start:e.start-t,end:e.end+n,increasedLeft:t,increasedRight:n}}return{...e}},e.shouldExpand=t}(o||(o={})),function(e){let t;!function(e){let t=0;e.create=function(e,i){return t++,`${e}-${t}${void 0!==i?`|${i}`:""}`},e.createFromMark=function(e){return`${e}`}}(t=e.Id||(e.Id={}))}(s||(s={})),function(e){e.Mock=class{constructor(){this.addHighlight=n.W8,this.updateHighlight=n.W8,this.removeHighlights=n.Q1,this.removeAllHighlights=n.Q1,this.recalculateHighlight=n.Q1,this.recalculateAllHighlights=n.Q1,this.maintainConsistency=n.Q1,this.hasHighlight=n.W8,this.updateHighlightsForTextRange=n.Q1,this.dispose=n.Q1,this.geometry=d.h.create(new Map)}intersectingHighlightIDs(e){return[]}}}(l||(l={})),function(e){e.none="none",e.hovered="hovered",e.hoveredNeedsAttention="hovered_needs_attention"}(c||(c={}))},13583:(e,t,i)=>{if(i.d(t,{H:()=>c,c:()=>d}),6168!=i.j)var n=i(58303);if(6168!=i.j)var a=i(72350);if(6168!=i.j)var r=i(62067);if(6168!=i.j)var o=i(40594);if(6168!=i.j)var s=i(67385);if(6168!=i.j)var l=i(3351);var c;!function(e){e.apply="apply",e.ignore="ingnore",e.acknowledge="acknowledge",e.mute="mute",e.addToDictionary="addToDictionary",e.hide="hide"}(c||(c={}));class d{constructor(e,t,i,a,r,s,c,d,u,p,g=!1,h=o.Y.create("InlineCardModelImpl")){this.alert=e,this.sdui=t,this._replacementService=i,this._removeAlert=a,this._checkingService=r,this._viewActions=s,this._snippetsEvents=c,this._openGrammarlyGo=d,this._formattingService=u,this._experimentClient=p,this._disableHoverToOpen=g,this._log=h,this._wasShown=!1,this._wasReplaced=!1,this._wasIgnored=!1,this._wasAddedToDictionary=!1,this._wasHidden=!1,this._wasAcknowledged=!1,this._wasMuted=!1,this._shouldSendFeedback=n.Wi(this.sdui)||(0,l.T)(this.sdui),this.onSnippetsEditor=e=>{this._snippetsEvents.next(e)},this.onOpenGrammarlyGo=e=>{this._openGrammarlyGo(e)}}get wasAddedToDictionary(){return this._wasAddedToDictionary}onShown(){n.Wi(this.sdui)&&!this._wasShown&&(this._checkingService.onAlertSimpleFeedback(a.wQ.Id.create(this.alert.id),a.PZ.LOOKED,this._disableHoverToOpen?a.e3.Click:a.e3.Hover),this._wasShown=!0)}async onReplace(e){if(this._wasReplaced)this._log.warn(`onReplace called more than once for #${this.alert.id}`);else try{this._replacementService.canPerformReplacement({pos:this.alert.transformRange,oldValue:this.alert.transformText,value:e},{alert:this.alert})?(this._log.info("replacing",[this.alert.transformRange,e]),this._checkingService.onAlertApplied(this.alert,a.e3.Inline,e,void 0,void 0,this._shouldSendFeedback),await this._replacementService.performReplacement({pos:this.alert.transformRange,value:e,oldValue:this.alert.transformText},{alert:this.alert})):this._log.error(`can't perform replacement for #${this.alert.id} upon replace click`),this._wasReplaced=!0,this._removeAlert(this.alert.id,c.apply,s.DD.isFreePremiumUnlocked(this.alert)),this._viewActions.onAlertApplied()}catch(e){this._log.error(`failed to perform replacement for #${this.alert.id}`,e)}}onIgnore(){this._wasIgnored?this._log.warn(`onIgnore called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertIgnored(this.alert,a.e3.Inline),this._removeAlert(this.alert.id,c.ignore,s.DD.isFreePremiumUnlocked(this.alert)),this._wasIgnored=!0)}onMute(e){this._wasMuted?this._log.warn(`onMute called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertMuted(e),this._removeAlert(this.alert.id,c.mute,s.DD.isFreePremiumUnlocked(this.alert)),this._wasMuted=!0)}onHide(){this._wasHidden?this._log.warn(`onHide called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(a.wQ.Id.create(this.alert.id),a.PZ.HIDE,a.e3.Inline),this._removeAlert(this.alert.id,c.hide,s.DD.isFreePremiumUnlocked(this.alert)),this._wasHidden=!0)}onAcknowledge(){this._wasAcknowledged?this._log.warn(`onAcknowledge called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertAcknowledged(a.wQ.Id.create(this.alert.id),a.e3.Inline),this._removeAlert(this.alert.id,c.acknowledge,s.DD.isFreePremiumUnlocked(this.alert)),this._wasAcknowledged=!0)}onOpenExpandedView(e){this._viewActions.openExpandedViewFromInlineCard(e)}onOpenExpandedViewBySduiAction(e){this._viewActions.openExpandedViewFromSduiInlineCard(e)}onShowUnifiedLoginReminder(){this._viewActions.showUnifiedLoginReminder()}onAddToDictionary(){this._wasAddedToDictionary?this._log.warn(`onAddToDictionary called more than once for #${this.alert.id}`):(this._shouldSendFeedback&&this._checkingService.onAlertSimpleFeedback(a.wQ.Id.create(this.alert.id),a.PZ.ADD_TO_DICTIONARY,a.e3.Inline),this._removeAlert(this.alert.id,c.addToDictionary,s.DD.isFreePremiumUnlocked(this.alert)),this._wasAddedToDictionary=!0)}openPlanComparisonPage(e){this._viewActions.openPlanComparisonPage(e)}openSignUpPage(e){this._viewActions.openSignUpPage(e)}openSigninPage(e,t){this._viewActions.openSigninPage(e,void 0,t)}openGoogleSignupFlow(e){this._viewActions.openGoogleSignupFlow(e,{utmCampaign:"inlineCard",utmSource:e.action===r.VP.SignIn?"signinHook":"signupHook"})}openAccountChooserFlow(e){this._viewActions.openAccountChooserFlow(e,{utmCampaign:"inlineCard",utmSource:e.action===r.VP.SignUp?"signupHook":"signinHook"})}}},8181:(e,t,i)=>{i.d(t,{N1:()=>g,S3:()=>m,cN:()=>v,e9:()=>h,tJ:()=>p});var n=i(13391),a=i(25693),r=i(70843),o=i(90595);if(6168!=i.j)var s=i(19724);if(6168!=i.j)var l=i(40594);const c=n.h.create(!1),d=n.h.create(!1),u=n.h.create(!1),p=6168!=i.j?c:null,g=d,h=u,m=(e,t,i=l.Y.create("InlineLockedUIUnderlines.activateInlineUnderlines"))=>{i.debug("Trying to activate Inline locked underlines"),s.n.isFree(e.view("user").get())&&(v(t)&&(i.debug("Should show underlines for locked inline suggestions are activated"),c.set(!0),u.set(!0)),f(t)&&d.set(!0))},f=e=>{const t=e.peekTreatment(r.p.LockedUIWithNewUx);return null!==t&&"control"!==t},v=e=>(e=>!(0,a.Lu)()&&"unlimited_pool"===e.peekTreatment(r.p.LockedUIChrome))(e)||(e=>"unlimited_pool"===e.peekTreatment(r.p.LockedUIGDoc)&&(0,a.Lu)())(e)||(e=>e.isGateEnabled(o.K.LockedUIRollout))(e)},1407:(e,t,i)=>{var n;i.d(t,{p:()=>n}),function(e){e.shouldShowInlineYellowUnderlinesForInProductReactivation=e=>"true"===e}(n||(n={}))},81743:(e,t,i)=>{i.d(t,{N:()=>n});var n,a=i(8867),r=i(62552),o=i(36344),s=i(9642),l=i(93790),c=i(24666),d=i(8794),u=i(59179),p=i(78767);class g{constructor(e,t,i){this._getImmediateValue=e,this._source=t,this._compare=i,this._subject=null,this.behavior=new a.y((e=>{const t=this._source.subscribe(e);return{unsubscribe:()=>{t.unsubscribe(),this._subject=null}}})).pipe((0,s.O)((()=>(this._subject=new r.X(this._getImmediateValue()),this._subject))),(0,l.x)(),(0,c.x)(this._compare)),this.changes=this.behavior.pipe((0,d.T)(1)),this.getCurrent=this._getImmediateValue}getApproximate(){return this._subject?this._subject.getValue():this._getImmediateValue()}map(e,t=p.fS){return new g((()=>e(this._getImmediateValue())),this.changes.pipe((0,u.U)(e)),t)}}!function(e){function t(e,t,i){return new g(e,t.pipe((0,u.U)(e)),i)}e.create=t,e.createOptimized=function(e,t,i){return new g(e,t.pipe((0,u.U)((t=>void 0!==t?t:e()))),i)},e.constant=function(e){return t((()=>e),(0,o.c)(),(()=>!0))}}(n||(n={}))},82048:(e,t,i)=>{if(i.d(t,{By:()=>A,FJ:()=>v,RV:()=>E,Ti:()=>m,We:()=>b,Yq:()=>_,_i:()=>S,bk:()=>C,dk:()=>k,kP:()=>w,nX:()=>h,tQ:()=>f,x$:()=>y}),6168!=i.j)var n=i(44071);if(6168!=i.j)var a=i(64271);if(6168!=i.j)var r=i(59179);if(6168!=i.j)var o=i(24666);if(6168!=i.j)var s=i(31394);if(6168!=i.j)var l=i(68418);if(6168!=i.j)var c=i(45523);if(6168!=i.j)var d=i(78767);if(6168!=i.j)var u=i(47557);var p=i(49629);if(6168!=i.j)var g=i(81743);function h(e){return[(0,n.R)(e,"scroll"),(0,n.R)(e,"mousewheel"),(0,n.R)(e,"touchmove")]}function m(e){return(0,a.T)(...h(e),c.x.create(e,{attributes:!1,childList:!0,subtree:!0,characterData:!0}),(0,n.R)(e,"keydown"),(0,n.R)(e,"keyup"))}function f(e){return{left:parseFloat(e.paddingLeft)||0,top:parseFloat(e.paddingTop)||0,right:parseFloat(e.paddingRight)||0,bottom:parseFloat(e.paddingBottom)||0}}const v=p.S.hz4,b=p.S.sec2,S=p.S.hz30;function w(e,t){const i=e.height-t.bottom-t.top,n=e.width-t.left-t.right;return s.V.getGButtonSize(n,i)}function y(e,t=0,i=e.container,n={top:0,left:0}){return{zIndex:e.zIndex.map((e=>e+1),d.fS),position:e.textFieldRect.behavior.pipe(r.U((e=>{const i=Math.max(e.padding.right,t),a=Math.max(e.padding.bottom,t);return{...l.Cv.create({top:e.position.top+e.height-a+n.top,left:e.position.left+e.width-i+n.left}),effectivePadding:{right:i,bottom:a,left:e.padding.left,top:e.padding.top},textFieldHeight:e.height,textFieldWidth:e.width}})),o.x(d.fS)),container:i}}function E(e){return g.N.create((()=>((0,u.YN)(e)||0)+1),b,d.fS)}function k(e,t){return C(e,t,(e=>e))}function C(e,t,i){const n=[];let a=0,r=e;for(;r.parentElement&&a!==t;)n.push(i(r.parentElement)),r=r.parentElement,a++;return n}function _(e,t){let i=0,n=e;for(;i<t&&n.parentElement;)n=n.parentElement,i++;return i<t?null:n}function A(e,t){return(0,a.T)(...k(e,t).map((e=>(0,n.R)(e,"scroll"))))}},64670:(e,t,i)=>{i.d(t,{A:()=>a});var n=i(13391);class a{constructor(e,t){this._viewHistory=[],this._startupPlaceHolder=e,this._activeView=n.h.create(this._startupPlaceHolder),this._defaultView=t}get activeView(){return this._activeView.view()}get lastView(){return this._viewHistory[this._viewHistory.length-1]||this._defaultView}pushActiveView(e){const t=this._activeView.get();e.type!==t.type&&(t.type!==this._startupPlaceHolder.type&&this._viewHistory.push(t),this._activeView.set(e))}popActiveView(){const e=this._viewHistory.pop()||this._defaultView;this._activeView.set(e)}replaceActiveView(e){e.type!==this._activeView.get().type&&this._activeView.set(e)}}},37873:(e,t,i)=>{i.d(t,{D1:()=>r,Oe:()=>a,fr:()=>n});var n,a,r,o=i(86399),s=i(39953),l=i(27947),c=i(58303),d=i(25635),u=i(14325),p=i(62101);!function(e){e.create=function(e){return{type:l.lY.Type.sduiCardAction,sourceId:"native",cardId:"",actions:e,scope:{alertRefs:[]}}}}(n||(n={})),function(e){e.create=function(e,t,i="inline",n={alertRefs:[]}){return{type:l.lY.Type.sduiCardAction,sourceId:i,cardId:t,actions:e,scope:n}}}(a||(a={})),function(e){function t(e,t){return d.a.find((e=>e.id.toString()===t))(e)}function i(e,t){return d.a.find((e=>e.content.type===t))(e)}let n,a,r,l,g,h,m,f,v,b;e.getById=t,e.findAllByType=i,e.getByAlertId=function(e,t){return d.a.find((e=>{const i=u.ab.getAllAlertIds(e.content);return 1===i.length&&i[0]===t}))(e)},function(e){e.BulkDismiss="bulk_dismiss",e.BulkAccept="bulk_accept"}(n=e.Features||(e.Features={})),function(e){e.isInlineCard=e=>(0,s.zG)(u.ab.findFirst(e,"inlineCard",u.ab.TreeTraversal.PreOrder),c.pC)}(a=e.InlineCard||(e.InlineCard={})),function(e){e.isPopoverStack=e=>(0,s.zG)(u.ab.findFirst(e,"popoverStack",u.ab.TreeTraversal.PreOrder),c.pC)}(r=e.PopoverStack||(e.PopoverStack={})),function(e){function t(e){return"strongAlertRef"===e.type}function i(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefBulkDismiss}function n(e){return d.a.find((e=>i(e.content)))(e)}function a(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefUpgradeHook}e.isStrongAlertRefContent=t,e.isStrongAlertRefBulkDismissContent=i,e.isStrongAlertRefBulkAcceptContent=function(e){var i;return t(e)&&"known"===(null===(i=e.name)||void 0===i?void 0:i.kind)&&e.name.value===p.MU.StrongAlertRefBulkAccept},e.findStrongAlertRefBulkDismissSduiItem=n,e.getStrongAlertRefBulkDismissAlertIds=function(e){return(0,s.zG)(n(e),c.UI((e=>new Set(e.alertIds.map((e=>e.toString()))))),c.fS((()=>new Set)))},e.isStrongAlertRefUpgradeHookContent=a,e.findStrongAlertRefUpgradeHookSduiItem=function(e){return d.a.find((e=>a(e.content)))(e)}}(l=e.StrongAlertRef||(e.StrongAlertRef={})),function(e){function n(e){return"gButton"===e.type}function a(t){return t.type===e.PLAGIARISM_TYPE}function r(e,i){return(0,s.zG)(t(e,i),c.UI((e=>e.content)),c.hX(n))}e.DEFAULT_GBUTTON_ID="gButton-default",e.TONE_GBUTTON_ID="gButton-tone",e.GET_STARTED_GBUTTON_ID="gButton-get-started",e.PLAGIARISM_TYPE="gButton:plagiarism",e.isGButtonContent=n,e.isGButtonPlagiarismContent=a,e.getContent=r,e.getPlagiarismContent=function(t){return(0,s.zG)(i(t,e.PLAGIARISM_TYPE),c.UI((e=>e.content)),c.hX(a))},e.getPushAssistantFeedAction=function(e,t){return(0,s.zG)(r(e,t),c.UI((e=>e.actions)),c.tS((e=>c.ij(e.find(m.isPushAssistantFeedAction)))))}}(g=e.GButton||(e.GButton={})),function(e){e.isViewStackContent=function(e){return"viewStack"===e.type},e.getSelectedContent=function(e){return c.ij(e.views[e.selected])}}(h=e.ViewStack||(e.ViewStack={})),function(e){function i(e){return"assistantFeed"===e.type}let n;e.BULK_DISMISS_CARD_FEED_ID="bulk-dismiss-card-feed",e.BULK_DISMISS_REVIEW_FEED_ID="bulk-dismiss-review-feed",e.TONE_INSIGHTS_CARD_FEED_ID="tone-insights-card-feed",e.TONE_INSIGHTS_SUGGESTIONS_FEED_ID="tone-insights-suggestions-feed",e.PERFORMANCE_SCORE_FEED="performance-score-feed",e.isAssistantFeedContent=i,e.getContent=function(e,n){return(0,s.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))},e.createFocusAssistantCardAction=function(e){return{type:"focusAssistantCard",cardId:e}},e.createPopAssistantFeedAction=function(){return{type:"popAssistantFeed"}},e.createPushAssistantFeedAction=function(e,t){return{type:"pushAssistantFeed",feedId:e,cardId:t}},e.isPushAssistantFeedAction=function(e){return"pushAssistantFeed"===e.type},function(t){function i(e){return(0,s.zG)(c.G(u.ab.reduce(e,((e,t)=>"button"===t.type&&"back"===t.name.value?e.concat(t.actions):e),u.ab.TreeTraversal.PostOrder,[])),c.hX(o.Od))}function n(e,i){return(0,s.zG)(t.getContent(e,i),c.tS(h.getSelectedContent))}t.getContent=function(t,i){return(0,s.zG)(e.getContent(t,i),c.UI((e=>e.header)),c.hX(h.isViewStackContent))},t.getBackButtonActions=i,t.getSelectedViewContent=n,t.getSelectedViewBackButtonActions=function(e,t){return(0,s.zG)(n(e,t),c.tS(i))}}(n=e.Header||(e.Header={}))}(m=e.AssistantFeed||(e.AssistantFeed={})),function(e){function i(e){return"proofitButton"===e.type}e.ID="proofit-button",e.isProofitContent=i,e.getContent=function(e,n){return(0,s.zG)(t(e,n),c.UI((e=>e.content)),c.hX(i))}}(f=e.Proofit||(e.Proofit={})),function(e){e.ID="upgrade_hook",e.findUpgradeHookSduiItem=function(i){return t(i,e.ID)}}(v=e.NativeUpgradeHook||(e.NativeUpgradeHook={})),function(e){e.ID="success_report",e.SUCCESS_REPORT_CARD_ID="success_report@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_PERFORMANCE_SCORE_CARD_ID="success-report-with-performance-score@Short-known:card-assistantCard",e.SUCCESS_REPORT_WITH_QUALITY_SCORE_CARD_ID="success-report-with-quality-score@Short-known:card-assistantCard",e.OPEN_PERFORMANCE_SCORE_INTERACTION_ID="success-state-known:open-performance-score",e.findSuccessReportSduiItem=function(i){return t(i,e.ID)}}(b=e.SuccessReport||(e.SuccessReport={}))}(r||(r={}))},93865:(e,t,i)=>{function n(e){return e.length>0?e[0]:null}function a(e){return 1===e.length?e[0]:null}function r(e){return 1===e.length?e[0]:e.length>0?e.reduce(((e,t)=>t.start===t.end?e:e.start===e.end?t:{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)})):null}i.d(t,{Ey:()=>n,Ls:()=>r,qq:()=>a})},49403:(e,t,i)=>{if(i.d(t,{U:()=>o}),6168!=i.j)var n=i(70843);if(6168!=i.j)var a=i(25693);if(6168!=i.j)var r=i(19724);const o=(e,t)=>"test"===((e,t)=>{const{previousUserType:i,wasAuthenticatedUser:o}=t.authUserDetails,s=!o||i===r.F.anonymous;return(0,a.Lu)()&&t.isAnonymous&&s?e.getTreatment(n.p.FullySignedInQuickSignupOnLaunch):null})(e,t)},16415:(e,t,i)=>{i.d(t,{q:()=>n});var n,a=i(25693);!function(e){function t(e,t){if(!e||!t)return!0;return!t.includes(e)}function i(e,t){var i;return Boolean((null==t?void 0:t.isDesktopIntegrationEnabled)&&(null===(i=e.llamaIntegration)||void 0===i?void 0:i.enabled))}function n(e,i,n,r){var o,s;const l=r?(0,a.KK)(r):void 0,c=i.isLlamaInstalled&&(null===(o=n.llamaIntegration)||void 0===o?void 0:o.enabled);return t(l,null===(s=n.llamaIntegration)||void 0===s?void 0:s.disabledByDomain)&&(c||"true"===e.showDesktopIntegrationExtensionToggle)}e.isEnabled=i,e.showSettingPopupToggle=n,e.showDisabledByDesktopExtensionGButton=function(e,t,a,r){return n(t,e,a,r)&&i(a,e)},e.isIntegrationEnabled=function(e,n,a){var r;return!(!e||!a)&&(t(n,null===(r=a.llamaIntegration)||void 0===r?void 0:r.disabledByDomain)&&i(a,e))}}(n||(n={}))},85098:(e,t,i)=>{i.d(t,{N:()=>n});const n="docs.google.com"},98692:(e,t,i)=>{i.d(t,{b:()=>w,f:()=>n});var n,a=i(92379),r=i(50635),o=i(69554),s=i(31702),l=i(12314),c=i(56863),d=i(6266),u=i(62067),p=i(47052),g=i(67505),h=i(74609),m=i(28898),f=i(35248),v=i(95404),b=i(91409);!function(e){e.hide="hideGdocsSigninPopupMessage"}(n||(n={}));const S=e=>e===u.VP.SignUp,w=e=>{const{userType:t,slot:i,authUserDetails:n,bgRpcApi:w}=e,y={source:"authHook",slot:i,name:u.Vi.Default,experience:u.VP.SignUp,lastKnownUserType:(0,d.qf)(n)},E=i=>{var n;const a={...y,action:i,authType:u.uN.Email},r={utmCampaign:"gdocsPopup",utmSource:S(i)?"signupHook":"signinHook"},o=S(i)?(0,v.Xc)(a,r):(0,v.s7)(a,r);h.J.gdocsRegisterPromptButtonClick(i),(0,l.T)(h.J,{authHookDetails:a,userType:t,isGDocs:!0}),(0,f.B)((0,m.O)().experimentClient)?w.launchAuthFlow(S(i),{...(0,c.xW)(a),...(0,v.OC)((0,v.g7)(r))}):e.openSigninPage(o),null===(n=e.onClick)||void 0===n||n.call(e)};return a.useEffect((()=>{(0,l.B)(h.J,{authHookDetails:y,userType:t,isGDocs:!0})}),[]),a.createElement("div",{className:b.wrapper},a.createElement(p.h,{onClose:e.onClose}),a.createElement("div",{className:b.animation}),a.createElement(r.k,{direction:"column",align:"center",paddingBottom:6,gap:4,className:b.content},a.createElement(o.X,{as:"h2",variant:"heading-xsmall",className:b.title},"Welcome to Grammarly for Google Docs!"),a.createElement(s.x,{as:"p",variant:"text-small"},"Sign up to turn on Grammarly suggestions in your Google Docs."),a.createElement(g.R,{onSignUp:()=>{E(u.VP.SignUp)},onSignIn:()=>{E(u.VP.SignIn)}})))}},5546:(e,t,i)=>{if(i.d(t,{E:()=>o,M:()=>r}),3075==i.j)var n=i(90595);var a=i(20905);const r=(e,t)=>e.anonymous&&(!t.hideGdocsSigninPopupTime||t.hideGdocsSigninPopupTime+a.g0<Date.now()),o=(e,t,i)=>e.anonymous&&i.isGateEnabled(n.K.StandWithUkraineGrammarlySuspended)&&(!t.hideGdocsStandWithUkraineSuspendedPopup||t.hideGdocsStandWithUkraineSuspendedPopup+a.g0<Date.now())},86562:(e,t,i)=>{i.d(t,{C:()=>l,U:()=>n});var n,a=i(92379),r=i(21100),o=i(54587),s=i(73823);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...r.a.Flag},e.Context=a.createContext(o.Y.invariantContent("Environment"))}(n||(n={}));class l{constructor(e){this._flags=new Set,this.actions={openUrl:e=>s.vM((()=>{document.location.href=e.toString()})),openPopup:e=>s.vM((()=>{const t=self.open(e.toString(),void 0,"noreferrer");t&&(t.opener=null)}))},e&&this._flags.add(n.Flag.isAppleSystem),this._flags.add(n.Flag.supportsSVGDominantBaseline),this._flags.add(n.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}},64181:(e,t,i)=>{i.d(t,{L:()=>n,x:()=>E});var n,a=i(39953),r=i(55812),o=i(15530),s=i(7378),l=i(13391),c=i(77115),d=i(84308),u=i(59179),p=i(2187),g=i(64443),h=i(58303),m=i(73823),f=i(12518),v=i(62805),b=i(90189),S=i(38709),w=i(39963),y=i(40866);!function(e){let t;!function(e){e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant",e.toneSuggestion="toneSuggestion"}(t=e.Place||(e.Place={}))}(n||(n={}));class E{constructor(e,t,i,n,a){this._alertsList=e,this._lensState=t,this._maxAlertCategories=i,this.getCheckingService=n,this.gnar=a,this._log=g.C8.Logging.getLogger("UpgradeViewModel"),this._advancedAlerts=l.h.create([]),this.advancedAlerts=this._advancedAlerts.view((e=>e.length>0?h.G({count:e.length,alerts:()=>this._formatLiteAlerts(E._getGroupedLiteAlerts(e))}):h.YP)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(c.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i,lensName:"",bundleInfo:h.YP}]:t},this._connectionId=y._.createWithRandomId("sidebar"),d.a([this._lensState.view("currentLens").view("id").view((()=>e=>r.bZ.isRegistered(e)&&r.bZ.isPremium(e))),this._alertsList.state]).pipe(u.U((([e,t])=>s.p.reduce([],((t,{alert:i})=>(e(i)&&t.push(i),t)))(t)))).subscribe(p.wW(this._advancedAlerts))}openSignupUrl(){}trackUpgradeButtonShow(e){var t,i;const n=this._advancedAlerts.get();(0,v.nE)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),this.gnar.assistantExpandedUpgradeHookShow(n.length,100),(0,w.Tb)().upgradeHooks.showUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}trackUpgradeButtonClick(e){var t,i;const n=this._advancedAlerts.get();(0,v.Qi)(this.gnar,{placement:e.placement,bannerType:e.bannerType,advancedAlerts:n,upgradeHookName:e.upgradeHookName,upgradeHookSlot:e.upgradeHookSlot,sessionUuid:null!==(i=null===(t=this.getCheckingService())||void 0===t?void 0:t.sessionUuid)&&void 0!==i?i:""}),(0,w.Tb)().upgradeHooks.clickUpgradeHook(e.upgradeHookName,e.upgradeHookSlot)}openUpgradeUrlFromPlace(e){(0,a.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),utmCampaign:e})})),f.fS((e=>this._log.fatal("unexpected error on open upgrade page",e))))}openUpgradeUrlWithOverride(e,t){t?(0,a.zG)(m.vM((()=>{(0,b.OB)().bgRpc.api.openSubscriptionPage({currentAlerts:this._getCapiAlerts(),overrideUrl:t,utmCampaign:e})})),f.fS((e=>this._log.fatal("unexpected error on open upgrade page",e)))):this.openUpgradeUrlFromPlace(e)}_getCapiAlerts(){return this._advancedAlerts.get().map((e=>(0,S.IM)(E._toRawAlertWithPossibleWrongId(e),y.Q.create(this._connectionId,0))))}static _getGroupedLiteAlerts(e){return o.Q.group(e.map((e=>e.toLiteAlert())))}static _toRawAlertWithPossibleWrongId(e){return{...e.toRawAlert(),id:(0,a.zG)(e.rawId,h.fS((()=>e.id)))}}}},63838:(e,t,i)=>{i.d(t,{r:()=>a});var n=i(84674);const a=(e,t)=>{const i=(0,n.gC)(e),a=t.api.getTabId();return{cheetahInitialOnboardingShown:()=>{const t=i().common.cheetah;return a.then((a=>e.patch({extensionSettings:(0,n.k1)(i(),{cheetah:{...t,initialOnboardingShownTabId:a}})})))},cheetahInitialBTSOnboardingShown:()=>{const t=i().common.cheetah;return a.then((a=>e.patch({extensionSettings:(0,n.k1)(i(),{cheetah:{...t,initialBTSOnboardingShownTabId:a}})})))},cheetahReloadStatus:async()=>{await t.api.fetchCheetahStatus()},cheetahSetStatus:async t=>{var a,r,o,s,l,c,d,u,p,g,h,m,f;const v=i().common.cheetah;return e.patch({extensionSettings:(0,n.k1)(i(),{cheetah:{...v,status:{...null==v?void 0:v.status,cheetahEnabled:null===(o=null!==(a=t.cheetahEnabled)&&void 0!==a?a:null===(r=null==v?void 0:v.status)||void 0===r?void 0:r.cheetahEnabled)||void 0===o||o,entryPointsConfig:{inlineRewriteEnabled:null===(u=null!==(l=null===(s=t.settings)||void 0===s?void 0:s.inlineRewriteEnabled)&&void 0!==l?l:null===(d=null===(c=null==v?void 0:v.status)||void 0===c?void 0:c.entryPointsConfig)||void 0===d?void 0:d.inlineRewriteEnabled)||void 0===u||u,inlineQuickReplyEnabled:null===(f=null!==(g=null===(p=t.settings)||void 0===p?void 0:p.inlineQuickReplyEnabled)&&void 0!==g?g:null===(m=null===(h=null==v?void 0:v.status)||void 0===h?void 0:h.entryPointsConfig)||void 0===m?void 0:m.inlineQuickReplyEnabled)||void 0===f||f}}}})})},cheetahToggleInlineRewrite:async e=>{var n,a,r,o,s;const l=i().common.cheetah;await t.api.setCheetahStatus({cheetahEnabled:null===(a=null===(n=null==l?void 0:l.status)||void 0===n?void 0:n.cheetahEnabled)||void 0===a||a,entryPointsConfig:{inlineRewriteEnabled:e,inlineQuickReplyEnabled:null===(s=null===(o=null===(r=null==l?void 0:l.status)||void 0===r?void 0:r.entryPointsConfig)||void 0===o?void 0:o.inlineQuickReplyEnabled)||void 0===s||s}})},cheetahToggleInlineQuickReply:async e=>{var n,a,r,o,s;const l=i().common.cheetah;await t.api.setCheetahStatus({cheetahEnabled:null===(a=null===(n=null==l?void 0:l.status)||void 0===n?void 0:n.cheetahEnabled)||void 0===a||a,entryPointsConfig:{inlineRewriteEnabled:null===(s=null===(o=null===(r=null==l?void 0:l.status)||void 0===r?void 0:r.entryPointsConfig)||void 0===o?void 0:o.inlineRewriteEnabled)||void 0===s||s,inlineQuickReplyEnabled:e}})}}}},7909:(e,t,i)=>{i.d(t,{T:()=>n});const n=e=>{const t=()=>{var t;return null!==(t=e.view("growthSettings").get())&&void 0!==t?t:{}};return{patchGrowthSettings:async i=>{const n=t();return e.patch({growthSettings:{...n,...i}})},setChromeStoreSignup:async i=>{var n;const a=t(),r=null!==(n=a.chromeStoreSignup)&&void 0!==n?n:{};return e.patch({growthSettings:{...a,chromeStoreSignup:{...r,...i}}})}}}},52698:(e,t,i)=>{i.d(t,{W:()=>n});const n=e=>({toggleKnowledgeHub:async t=>{await e.api.setKnowledgeHubSettings({isEnabled:t})}})},38456:(e,t,i)=>{i.d(t,{U:()=>d});var n=i(82048);function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function r(e,t){return e<<t|e>>>32-t}const o=3432918353,s=461845907;class l{getHash(e,t=0){const i=(new TextEncoder).encode(e),n=i.length%4,l=i.length-n;let c,d=t,u=0;for(c=0;c<l;c+=4)d=a(r(d^a(r(a(i[c]|i[c+1]<<8|i[c+2]<<16|i[c+3]<<24,o),15),s),13),5)+3864292196;switch(u=0,n){case 3:u^=i[c+2]<<16;case 2:u^=i[c+1]<<8;case 1:u^=i[c],d^=a(r(a(u,o),15),s)}return p=a((p=d^i.length)^p>>>16,2246822507),((p=a(p^p>>>13,3266489909))^p>>>16)>>>0;var p}}var c;!function(e){e.preferred=l}(c||(c={}));const d=(e,t)=>{const i=(0,n.bk)(e,-1,(e=>e.nodeName)),a=`${t},${e.nodeName},${i.join()}`;return(new c.preferred).getHash(a).toString()}},18839:(e,t,i)=>{i.d(t,{Dg:()=>l,IQ:()=>u,e8:()=>c,fW:()=>d});var n=i(92379),a=i(63532),r=i(81933),o=i(79825),s=i(92759);const l=n.createContext({state:r.of(s.h.create()),onMount:()=>{}});function c(){return n.useContext(l).onMount}function d(){const e=n.useContext(l).state,[t,i]=n.useState(s.h.create());return(0,o.A)(e.pipe((0,a.b)((e=>i(e))))),t}function u(){return n.useContext(l).state.pipe(r.pluck("dragging"))}},92759:(e,t,i)=>{var n;i.d(t,{h:()=>n}),function(e){e.create=function(){return{translate:{x:0,y:0},lastTranslate:{x:0,y:0},dragging:!1,dragStart:!1,dragEnd:!1}}}(n||(n={}))},2914:(e,t,i)=>{i.d(t,{_:()=>P});var n=i(92379),a=i(63532),r=i(50699),o=i(79825),s=i(78953),l=i(18839),c=i(92759),d=i(90023),u=i(62552),p=i(84308),g=i(59179),h=i(90572),m=i(85004),f=i(32330),v=i(84714),b=i(55341),S=i(32734),w=i(24666),y=i(20161),E=i(44071),k=i(44045),C=i(84908),_=i(10883),A=i(17610),I=i(3199),T=i(18647),x=i(78767);function R(e=v.of((e=>e)),t){const i=n.useRef(new b.t(1)),r=n.useRef(i.current.pipe(function(e=v.of(d.yR),t=(()=>!0)){return(0,d.ls)(h.h(x.fQ),w.x(),y.w((i=>E.R(i,"mousedown").pipe(h.h((e=>!e.button)),h.h((e=>t(e))),a.b((e=>e.preventDefault())),g.U((e=>({element:i,startPos:{x:e.clientX,y:e.clientY}}))),y.w((t=>E.R((0,T.Jj)(t.element),"mousemove").pipe(k.R(E.R((0,T.Jj)(t.element),"mouseup",{capture:!0})),C.p(10),g.U((({clientX:e,clientY:i})=>({kind:"dragInProgress",element:t.element,startPos:t.startPos,delta:{x:e-t.startPos.x,y:i-t.startPos.y}}))),_.M(e),g.U((([e,t])=>({...e,delta:t(e.delta)}))),A.l({kind:"dragDone"}))))))),I.R(((e,t)=>"dragDone"===t.kind?{translate:e.translate,lastTranslate:e.translate,dragging:!1,dragStart:!1,dragEnd:e.dragging}:{dragging:!0,dragStart:!e.dragging,dragEnd:!1,lastTranslate:e.lastTranslate,translate:{x:t.delta.x+e.lastTranslate.x,y:t.delta.y+e.lastTranslate.y}}),c.h.create()))}(e,t),S.B())),o=n.useCallback((e=>i.current.next(e)),[i.current]);return[r.current,o]}const P=n.forwardRef((function({children:e,hasDragHandle:t,bounds:i,dragEventFilter:v,onChangeDragState:b},S){const w=n.useRef(null),y=(0,r.K)(i),[E,k]=function(e,t,i){const r=n.useRef(null),s=n.useRef(new u.X(null)),l=n.useRef(p.a([e,s.current]).pipe(g.U((([e,t])=>t&&e?(0,f.N)(t,e):d.yR)))),[c,v]=R(l.current,i);(0,o.A)(c.pipe(h.h((e=>e.dragStart)),a.b((()=>b())))),n.useEffect((()=>{var e;return t.current&&(null===(e=r.current)||void 0===e||e.disconnect(),r.current=m.N.getResizeObserver(b),r.current.observe(t.current)),()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.disconnect()}}),[t.current]);const b=()=>{t.current&&s.current.next(t.current.getBoundingClientRect())};return[c,v]}(y,w,v),[C,_]=n.useState(c.h.create()),A=n.useRef({state:E,onMount:k});(0,o.A)(E.pipe((0,a.b)((e=>{_(e),null==b||b(e)}))));const I={ref:(0,s.l)([S,w,...(0,s.O)(e)?[e.ref]:[]],t?void 0:k)};return n.createElement(l.Dg.Provider,{value:A.current},n.cloneElement("function"==typeof e?e(C):e,I))}))},32330:(e,t,i)=>{function n(e,t){const i=e.left<t.left?t.left:e.left+e.width>t.left+t.width?t.left+t.width-e.width:e.left,n=e.top<t.top?t.top:e.top+e.height>t.top+t.height?t.top+t.height-e.height:e.top;return{...e,left:i,top:n}}function a(e,t){return i=>{const a=n({left:e.left+i.x,top:e.top+i.y,width:e.width,height:e.height},t);return{x:a.left-e.left,y:a.top-e.top}}}i.d(t,{N:()=>a,m:()=>n})},8536:(e,t,i)=>{i.d(t,{KC:()=>d,Y4:()=>u,sX:()=>p});var n=i(92379),a=i(62552),r=i(24666),o=i(81933),s=i(78953),l=i(85004),c=i(36650);const d={top:-1e4,left:-1e4,flippedHorizontal:!1,flippedVertical:!1,width:0,height:0},u=n.createContext(o.of(d)),p=n.forwardRef((({children:e,anchorRect:t,anchorOrigin:i={vertical:"bottom",horizontal:"left"},elementOrigin:o={vertical:"top",horizontal:"left"},offset:p={horizontal:0,vertical:0},postRepositioningOffset:g,repositioning:h={horizontal:"translate",vertical:"flip"},anchorMargin:m={top:0,left:0,bottom:0,right:0},viewportMargin:f=16,viewportRect:v=(0,c.C7)(),stickToTarget:b=!0,onChangePosition:S},w)=>{const y=n.useRef(null),E=n.useRef(null),k=n.useRef(new a.X(d)),[C,_]=n.useState(k.current.value),A=[v.top,v.left,v.width,v.height,t.top,t.left,t.width,t.height,i.horizontal,i.vertical,o.horizontal,o.vertical,p.horizontal,p.vertical,null==g?void 0:g.horizontal,null==g?void 0:g.vertical,m.top,m.right,m.bottom,m.left,f,b];n.useEffect((()=>{const e=k.current.pipe((0,r.x)(((e,t)=>function(e,t){return Math.floor(e.top)===Math.floor(t.top)&&Math.floor(e.left)===Math.floor(t.left)&&Math.floor(e.width)===Math.floor(t.width)&&Math.floor(e.height)===Math.floor(t.height)}(e,t)))).subscribe((e=>{_(e),null==S||S(e)}));return()=>e.unsubscribe()}),[]);const I=()=>{var e,n;const a=null===(e=y.current)||void 0===e?void 0:e.clientWidth,r=null===(n=y.current)||void 0===n?void 0:n.clientHeight,s=(0,c.C7)();if(a&&r){const e=(0,c.kl)(a,r,s,t,i,o,m,{top:f,bottom:f,left:f,right:f},p,g,h,b);k.current.next({...e,width:a,height:r})}};n.useEffect((()=>{var e;return y&&y.current&&(null===(e=E.current)||void 0===e||e.disconnect(),E.current=l.N.getResizeObserver(I),E.current.observe(y.current)),()=>{var e;return null===(e=E.current)||void 0===e?void 0:e.disconnect()}}),[y.current,...A]),n.useLayoutEffect((()=>{I()}),A);const T={ref:(0,s.l)([w,y,...(0,s.O)(e)?[e.ref]:[]])};return n.createElement(u.Provider,{value:k.current},n.cloneElement("function"==typeof e?e(C):e,T))}));p.displayName="Positioner"},36493:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(92379),a=i(85837),r=i(39515);const o=({kind:e="inline",onClick:t,dataPartName:i="card",marginBottom:o,children:s})=>n.createElement("div",{"data-grammarly-part":i,...(0,a.Sh)(r.card,["inline","inline-fixed-width","inline-fit-content"].includes(e)?r.cardInline:null,"inline"===e?r.cardInlineRegular:null,"inline-fixed-width"===e?r.cardInlineFixedWidth:null,"inline-fit-content"===e?r.cardInlineFitContent:null,["assistant-priority-lens","assistant-all-lens"].includes(e)?r.cardAssistant:null,"assistant-all-lens"===e?r.cardAssistantAllLens:null,t?r.cardClickable:null),onClick:t,style:{marginBottom:o}},s)},90790:(e,t,i)=>{if(i.d(t,{PS:()=>u}),6168!=i.j)var n=i(39953);var a=i(92379),r=i(33885);if(6168!=i.j)var o=i(59179);if(6168!=i.j)var s=i(58303);if(6168!=i.j)var l=i(97225);var c=i(21487),d=i(29998);const u=e=>function({children:t}){const i=e.pipe(o.U((e=>e?{type:"visible",children:t}:{type:"hidden"})));return a.createElement(p,{state:i},t)},p=({state:e})=>{const t=c.Z.animatingFlow((()=>e),g);return a.createElement("div",{className:d.buttonAndBadgeWrapper},c.UI.mount(b,t))},g=(e,t)=>(0,n.zG)(e,s.hX((e=>e.type!==t.type)),s.UI((()=>l.Hk("hide","show")))),h=c.UI.Node.make((()=>null)),m=c.UI.Node.make((({view:e})=>a.createElement(r.F.Fragment,null,e("children")))),f=c.UI.Union.make("type",{hidden:h,visible:m}),v=c.UI.Transition.make({show:`${d.animateIn}`},{hide:`${d.animateOut}`}),b=c.UI.Animated.make(v,f)},99576:(e,t,i)=>{i.d(t,{C:()=>o});var n=i(92379),a=i(85837),r=i(58963);const o=({kind:e="primary",dataGrammarlyPart:t="ui-kit-badge",title:i,boldTitle:o=!1,className:s,...l})=>n.createElement("div",{"data-grammarly-part":t,...(0,a.Sh)(r.badge,s,"primary"===e?r.badgePrimary:null,"success"===e?r.badgeSuccess:null,"gold"===e?r.badgeGold:null,"error"===e?r.badgeError:null,l.rounded?r.badgeRounded:null,!l.rounded||l.size&&"small"!==l.size?null:r.badgeRoundedSmall,l.rounded&&"medium"===l.size?r.badgeRoundedMedium:null,l.rounded&&"large"===l.size?r.badgeRoundedLarge:null)},n.createElement("div",{...(0,a.Sh)(r.badgeTitle,o?r.badgeTitleBold:null)},i))},87866:(e,t,i)=>{i.d(t,{l:()=>d});var n=i(92379),a=i(85837),r=i(99402),o=i(8015),s=i(69652),l=i(75361),c=i.n(l);const d=({enableTooltip:e=!1,size:t="medium",...i})=>n.createElement(s.u,{message:"Settings",showDelay:r.gk,disabled:!e},n.createElement(o.h,{...i},n.createElement("div",{...(0,a.Sh)("small"===t?c().settingsButtonSmallIcon:null,"medium"===t?c().settingsButtonMediumIcon:null)})))},2087:(e,t,i)=>{i.d(t,{J:()=>d});var n=i(90023),a=i(92379),r=i(2852),o=i(85837),s=i(99887),l=i(63532),c=i(55987);const d=({onChange:e,labelId:t,className:i,checkboxClassName:d,labelClassName:u,checked:p,children:g,disabled:h,useDS:m,dataGrammarlyPart:f="ui-kit-checkbox",tabIndex:v=0,onMount:b=n.Q1})=>{const[S,w]=a.useState(null!=p&&p);a.useEffect((()=>{w(Boolean(p))}),[p]);const y=t=>{t.preventDefault(),t.stopPropagation(),w(!S),null==e||e(!S)},{ref:E,onMount:k}=r.P.useElWatcher();return a.useEffect((()=>{const e=E.pipe(s.oA,l.b(b)).subscribe();return()=>e.unsubscribe()}),[]),a.createElement("div",{"data-grammarly-part":f,...(0,o.Sh)(c.checkboxContainer,i)},a.createElement("div",{...(0,o.Sh)(c.checkbox,d,S?c.checkboxChecked:null,m?c.checkboxDS:null),role:"checkbox","aria-checked":S,tabIndex:v,"aria-labelledby":t,onKeyDown:e=>{" "===e.key&&y(e)},onClick:h?n.Q1:y,ref:k},S?a.createElement("div",{className:c.checkboxCheckmark}):null),a.createElement("label",{id:t,onClick:y,className:u},g))}},90207:(e,t,i)=>{i.d(t,{Uq:()=>s,dy:()=>c,gT:()=>l});var n=i(92379),a=i(68823),r=i(85837),o=i(69588);const s=e=>[...e].map((e=>{var t,i;return null!==(i=null===(t=e.codePointAt(0))||void 0===t?void 0:t.toString(16))&&void 0!==i?i:""})).filter((e=>"fe0f"!==e.toLowerCase())),l=e=>`${a.g}${e.join("-")}.svg`,c=({size:e="small",unicodeHexArray:t,unicodeLiteral:i,className:a})=>{const[c,u]=n.useState(!1),[p,g]=n.useState(""),[h,m]=n.useState("");n.useEffect((()=>{if(u(!1),m(l(t||s(i))),t&&!i)try{g((e=>String.fromCodePoint(...e.map((e=>parseInt(e,16)))))(t))}catch(e){g("Invalid")}else g(i)}),[t,i]);const f=(0,r.Sh)(o.emoji,c?o.emojiAlt:null,a),v=d(e);return c?n.createElement("span",{...f,style:{fontSize:v},"data-grammarly-part":"ui-kit-emoji"},p):h?n.createElement("img",{onError:()=>u(!0),alt:p,src:h,...f,style:{width:v,height:v},"data-grammarly-part":"ui-kit-emoji"}):null},d=(e="small")=>{switch(e){case"extra-small":return"12px";case"small":return"16px";case"small-medium":return"20px";case"small-gbutton":return"22px";case"medium":return"24px";case"large":return"32px";case"extra-large":return"64px";default:return`${e}px`}}},27327:(e,t,i)=>{i.d(t,{o:()=>o});var n=i(92379),a=i(85837),r=i(15376);const o=n.forwardRef((function({children:e,className:t,...i},o){return n.createElement("div",{...i,...(0,a.Sh)(r.fontWrapper,t),ref:o},e)}))},55885:(e,t,i)=>{i.d(t,{p:()=>r});var n=i(92379),a=i(67513);const r=({thin:e=!1,thinItalic:t=!1,extraLight:i=!1,extraLightItalic:r=!1,light:o=!1,lightItalic:s=!1,regular:l=!1,italic:c=!1,medium:d=!1,mediumItalic:u=!1,semiBold:p=!1,semiBoldItalic:g=!1,bold:h=!1,boldItalic:m=!1,extraBold:f=!1,extraBoldItalic:v=!1,black:b=!1,blackItalic:S=!1})=>n.createElement("div",{"data-grammarly-part":"fonts-preloader",className:a.fontsPreloader},e?n.createElement("span",{className:a.interThin}):null,t?n.createElement("span",{className:a.interThinItalic}):null,i?n.createElement("span",{className:a.interExtraLight}):null,r?n.createElement("span",{className:a.interExtraLightItalic}):null,o?n.createElement("span",{className:a.interLight}):null,s?n.createElement("span",{className:a.interLightItalic}):null,l?n.createElement("span",{className:a.interRegular}):null,c?n.createElement("span",{className:a.interItalic}):null,d?n.createElement("span",{className:a.interMedium}):null,u?n.createElement("span",{className:a.interMediumItalic}):null,p?n.createElement("span",{className:a.interSemiBold}):null,g?n.createElement("span",{className:a.interSemiBoldItalic}):null,h?n.createElement("span",{className:a.interBold}):null,m?n.createElement("span",{className:a.interBoldItalic}):null,f?n.createElement("span",{className:a.interExtraBold}):null,v?n.createElement("span",{className:a.interExtraBoldItalic}):null,b?n.createElement("span",{className:a.interBlack}):null,S?n.createElement("span",{className:a.interBlackItalic}):null)},46418:(e,t,i)=>{i.d(t,{G:()=>S});var n=i(92379),a=i(59179),r=i(33885),o=i(99402),s=i(8536),l=i(27327),c=i(4636);const d=({anchor:e,popup:t,color:i="white",size:a=u})=>{const r=function(e,t,i=u){const n=function(e){switch(e){case"left":return"right";case"right":return"left";case"top":return"bottom";case"bottom":return"top";default:return null}}(function(e,t){const i=t.left+t.width<e.left,n=t.left>e.left+e.width,a=t.top+t.height<e.top,r=t.top>e.top+e.height,o=i||n,s=a||r;return i&&!s?"left":n&&!s?"right":a&&!o?"top":r&&!o?"bottom":null}(e,t));if("bottom"===n){const n=Math.round(e.left-t.left+e.width/2-i/2);return p(n,t.width,i)?{top:"100%",left:`${n}px`,side:"bottom"}:null}if("top"===n){const n=Math.round(e.left-t.left+e.width/2-i/2);return p(n,t.width,i)?{bottom:"100%",left:`${n}px`,side:"top"}:null}if("right"===n){const n=Math.round(e.top-t.top+e.height/2-i/2);return p(n,t.height,i)?{top:`${n}px`,left:"100%",side:"right"}:null}if("left"===n){const n=Math.round(e.top-t.top+e.height/2-i/2);return p(n,t.height,i)?{top:`${n}px`,right:"100%",side:"left"}:null}return null}(e,t,a);if(!r)return null;const{side:o,...s}=r;return n.createElement("div",{style:{position:"absolute",borderStyle:"solid",borderColor:"transparent",color:"transparent",background:"transparent",pointerEvents:"none",borderWidth:`${a}px`,...g(o,a,i),...s}})},u=10;function p(e,t,i){return e>i&&e<t-i}function g(e,t,i){const n=-t/2;switch(e){case"top":return{marginLeft:n,borderBottomColor:i};case"bottom":return{marginLeft:n,borderTopColor:i};case"left":return{marginTop:n,borderRightColor:i};case"right":return{marginTop:n,borderLeftColor:i};default:return{}}}var h=i(20785),m=i(53278),f=i(18403),v=i.n(f);const b=({message:e,style:t,anchorRect:i,tooltipRect:a,arrowSize:r,withGrammarlyIcon:o,withCenteredGrammarlyIcon:s})=>n.createElement("div",{className:v().tooltip,style:null!=t?t:{maxWidth:"200px"}},o&&n.createElement(h.T,{type:"mini",className:v().tooltipIcon,arrowColor:m.bd.black,backgroundColor:m.bd.white}),!o&&s&&n.createElement(h.T,{type:"mini",arrowColor:m.bd.black,backgroundColor:m.bd.white}),n.createElement("div",null,e,n.createElement(d,{anchor:i,popup:a,size:r,color:"#333954"}))),S=()=>{const e=n.useContext(c.d);return n.createElement(r.F.Fragment,null,e.tooltips.pipe((0,a.U)((e=>e?n.createElement(s.sX,{...w(e.anchor,e.position,e.offset)},(t=>n.createElement(l.o,{style:{top:t.top,left:t.left,position:"fixed",zIndex:o.lH},"data-grammarly-part":"tooltip-view"},n.createElement(b,{message:e.message,style:e.style,anchorRect:e.anchor,tooltipRect:t,arrowSize:6,withGrammarlyIcon:e.withGrammarlyIcon,withCenteredGrammarlyIcon:e.withCenteredGrammarlyIcon})))):null))))};function w(e,t,i={horizontal:0,vertical:0},n=6){return{anchorRect:e,anchorOrigin:{horizontal:"top"===t||"bottom"===t?"center":t,vertical:"left"===t||"right"===t?"center":t},elementOrigin:{horizontal:"top"===t||"bottom"===t?"center":"left"===t?"right":"left",vertical:"left"===t||"right"===t?"center":"bottom"===t?"top":"bottom"},repositioning:{horizontal:"top"===t||"bottom"===t?"translate":"flip",vertical:"left"===t||"right"===t?"translate":"flip"},anchorMargin:{top:n,bottom:n,left:n,right:n},offset:{horizontal:i.horizontal||0,vertical:i.vertical||0}}}},31152:(e,t,i)=>{i.d(t,{y:()=>d});var n=i(92379);if(6168!=i.j)var a=i(28338);if(6168!=i.j)var r=i(85837);if(6168!=i.j)var o=i(3038);var s=i(15765);const l={blue:s.highlightColorBlue,green:s.highlightColorGreen,lightGreen:s.highlightColorLightGreen,gray:s.highlightColorGray,purple:s.highlightColorPurple,red:s.highlightColorRed,gold:s.highlightColorGold,plagiarism:s.highlightColorPlagiarism,weHbar:s.highligthColorWeHbar};function c(e,t){switch(e){case o.jk.background:return s.highlightBackgroundOnly;case o.jk.enclosing:return s.highlightEnclosing;case o.jk.underline:return s.highlightUnderlineOnly;case o.jk.underlineStart:return"solid"===t?s.highlightUnderlineOnly:s.highlightUnderlineStartOnly;case o.jk.dottedUnderlineAndBackground:return s.highlightDottedUnderlineAndBackground;case o.jk.underlineAndBackground:return;case o.jk.underlineAndPersistentBackground:return s.highlightUnderlineAndPersistentBackground;default:(0,a.L0)(e)}}const d=e=>(n.useEffect((()=>{var t;null===(t=e.onMount)||void 0===t||t.call(e,e.alertId)}),[]),n.createElement(n.Fragment,null,e.rects.map(((t,i)=>{var a,d,u;const p=e.rects.length>1?`${e.id}-${i}`:e.id;return n.createElement("div",{key:p,"data-key":p,"data-grammarly-part":"highlight","data-highlight-format":e.displayFormat,"data-highlight-color-name":o.hE.getColorName(e.color),style:{top:t.top,left:t.left,width:t.width,height:Math.max(0,t.height+Number(e.heightOffset)),...o.hE.isPreset(e.color)?(0,o.Y4)(null===(a=e.underlineStartParts)||void 0===a?void 0:a[i],e.color.color):void 0},...(0,r.Sh)(s.highlight,o.hE.isPreset(e.color)?l[e.color.color]:void 0,e.hovered?s.highlightHovered:void 0,e.disappear?s.highlightDisappear:void 0,e.needsAttention?s.highlightNeedsAttention:void 0,c(e.displayFormat,null===(u=null===(d=e.underlineStartParts)||void 0===d?void 0:d[i])||void 0===u?void 0:u.kind),e.liveliness===o.iY.static?s.highlightStatic:e.liveliness===o.iY.inert?s.highlightInert:void 0,e.theme?"dark"===e.theme?s.dark:s.light:null)},n.createElement("div",{className:s.highlightBackground,style:o.hE.isCustom(e.color)?{backgroundColor:e.color.color.background}:void 0}),n.createElement("div",{...(0,r.Sh)(s.highlightUnderline,e.isWEHighlight?s.highlightHbar:null,"regular"===e.underlineAnimationSpeed?s.highlightUnderlineAnimatedRegular:null,"slow"===e.underlineAnimationSpeed?s.highlightUnderlineAnimatedSlow:null),style:o.hE.isCustom(e.color)?{backgroundColor:e.color.color.underline}:void 0}))}))))},3038:(e,t,i)=>{i.d(t,{Y4:()=>h,al:()=>n,hE:()=>a,iY:()=>o,jk:()=>r,y$:()=>g});var n,a,r,o,s=i(92379);if(6168!=i.j)var l=i(63349);if(6168!=i.j)var c=i(53768);if(6168!=i.j)var d=i(28338);if(6168!=i.j)var u=i(4141);if(6168!=i.j)var p=i(31152);!function(e){e.blue="blue",e.green="green",e.lightGreen="lightGreen",e.gray="gray",e.purple="purple",e.red="red",e.gold="gold",e.plagiarism="plagiarism",e.weHbar="weHbar"}(n||(n={})),function(e){let t,i;function n(e){return"preset"===e.kind}!function(e){e.create=function(e){return{kind:"preset",color:e}}}(t=e.Preset||(e.Preset={})),function(e){e.create=function(e,t){return{kind:"custom",color:{background:e,underline:t}}}}(i=e.Custom||(e.Custom={})),e.isCustom=function(e){return"custom"===e.kind},e.isPreset=n,e.getColorName=function(e){return n(e)?e.color:"custom"}}(a||(a={})),function(e){e.underline="underline",e.underlineStart="underlineStart",e.background="background",e.underlineAndBackground="underlineAndBackground",e.underlineAndPersistentBackground="underlineAndPersistentBackground",e.dottedUnderlineAndBackground="dottedUnderlineAndBackground",e.enclosing="enclosing"}(r||(r={})),function(e){e.isInteractable=function(t){return t!==e.enclosing}}(r||(r={})),function(e){e.animated="animated",e.static="static",e.inert="inert"}(o||(o={}));const g=({heightOffset:e=0,hovered:t=!1,needsAttention:i=!1,underlineAnimationSpeed:n="regular",liveliness:a=o.animated,theme:l,...c})=>{var d;const[g,h]=s.useState(!1);(0,u.x)((()=>h(!0)),null!==(d=c.disappearOnHoverDelay)&&void 0!==d?d:0,[c.disappearOnHoverDelay,t,i,g],(()=>null!==c.disappearOnHoverDelay&&c.disappearOnHoverDelay>=0&&(t||i)&&!g)),s.useEffect((()=>{h(!1)}),[c.disappearOnHoverDelay]),s.useEffect((()=>{t||i||h(!1)}),[t,i]);const m=c.displayFormat===r.underlineStart?function(e,t=100){let i=0;const n=e.reduce(((e,t)=>e+t.width),0)-t;return e.map((e=>{if(i+e.width<n)return i+=e.width,{kind:"solid"};if(i<n){const a=(n-i)/e.width,r=(e.width-(n-i))/t;return i+=e.width,{kind:"gradient",colorStops:[{alpha:1,stop:0},{alpha:1,stop:a},{alpha:1-r,stop:1}]}}{const a=i-n,r=a/t,o=(a+e.width)/t;return i+=e.width,{kind:"gradient",colorStops:[{alpha:1-r,stop:0},{alpha:1-o,stop:1}]}}}))}(c.rects):null;return s.createElement(p.y,{heightOffset:e,hovered:t,needsAttention:i,underlineAnimationSpeed:n,liveliness:a,theme:l,disappear:g,underlineStartParts:m,...c})};function h(e,t){return void 0===e||"solid"===e.kind?{}:function(e,t){const{underline:i,underlineHovered:a}=function(e){switch(e){case n.blue:return{underline:"#99C2FF",underlineHovered:"#4A6EE0"};case n.red:return{underline:"#FF99AB",underlineHovered:"#EA1537"};case n.green:return{underline:"#AAF2E1",underlineHovered:"#15C39A"};case n.lightGreen:return{underline:"#41D9B5",underlineHovered:"#15C39A"};case n.purple:return{underline:"#D3A1F7",underlineHovered:"#8F4CBF"};case n.gold:return{underline:"#FFDF80",underlineHovered:c.Gold40};case n.gray:return{underline:"#E7E9F5",underlineHovered:"#6D758D"};case n.plagiarism:return{underline:"#09A4B280",underlineHovered:"#09A4B2"};case n.weHbar:return{underline:"#D7E8A9",underlineHovered:"#ADD04F"};default:(0,d.vE)(e)}}(t);return{"--underline-start-gradient":m(e,i),"--underline-start-gradient-hovered":m(e,a)}}(e,t)}function m(e,t){return`linear-gradient(to right, ${e.colorStops.map((({stop:e,alpha:i})=>`${l.ux.color(t).fade(i).toRGBA().toString()} ${100*e}%`)).join(", ")})`}},76468:(e,t,i)=>{i.d(t,{A:()=>r});var n=i(92379),a=i(7913);const r=({color:e=a.Z.neutral50})=>n.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M8.98288 15.5197L6.48108 15.5197L5.85461 13.1078L15.9148 7.0713L18.2119 15.5197L13.2741 15.5197M8.98288 15.5197L13.2741 15.5197M8.98288 15.5197L9.13596 16.1335C9.35814 17.0244 10.1584 17.6496 11.0765 17.6496L11.5272 17.6496C12.651 17.6496 13.494 16.6218 13.2741 15.5197V15.5197",stroke:e,strokeLinejoin:"round"}))},97258:(e,t,i)=>{i.d(t,{K:()=>l});var n=i(92379),a=i(61483),r=i(20785);function o(e,t,i){var n;return"go"===i||"superhuman"===i?e?a.I.Logo.Superhuman.Light:a.I.Logo.Superhuman.Default:e?a.I.Logo.Grammarly.Light:null!==(n=t)&&void 0!==n?n:a.I.Logo.Grammarly.Primary}function s(e,t,i){var n;return"go"===i||"superhuman"===i?e?a.I.Logo.Superhuman.Default:a.I.Logo.Superhuman.Light:e?null!==(n=t)&&void 0!==n?n:a.I.Logo.Grammarly.Default:a.I.Logo.Grammarly.Light}const l=({color:e,className:t="",size:i=18,invert:a=!1,type:l="mini",variant:c})=>n.createElement(r.T,{className:t,size:i,type:l,backgroundColor:o(a,e,c),arrowColor:s(a,e,c),variant:c})},42496:(e,t,i)=>{i.d(t,{i:()=>l,z:()=>s});var n=i(92379),a=i(4026),r=i(96951),o=i.n(r);const s=n.forwardRef((function({onClick:e,variant:t,size:i,width:r,children:s,className:l,...c},d){return n.createElement("button",{onClick:e,className:(0,a.cs)(o().button,o()[`variant-${t||"primary"}`],o()[`size-${i||"medium"}`],o()[`width-${r||"fixed"}`],l),ref:d,...c},s)})),l=n.forwardRef((function({onClick:e,variant:t,size:i,width:r,children:s,className:l,...c},d){return n.createElement("a",{onClick:e,className:(0,a.cs)(o().button,o().linkButton,o()[`variant-${t||"primary"}`],o()[`size-${i||"medium"}`],o()[`width-${r||"fixed"}`],l),ref:d,tabIndex:0,role:"button",onKeyPress:e=>{if("Enter"===e.key||" "===e.key){e.preventDefault();e.target.click()}},...c},s)}))},33839:(e,t,i)=>{i.d(t,{Y:()=>c});var n=i(92379),a=i(52348),r=i(81224),o=i(85837),s=i(51705),l=i.n(s);const c=({onClick:e,cta:t="Get Pro",dataGrammarlyPart:i="unlock-premium-button",className:s})=>n.createElement(a.z,{variant:"pro",onClick:e,"data-grammarly-part":i,iconStart:r.R,...(0,o.Sh)(l().premiumButton,s),text:t})},20061:(e,t,i)=>{i.d(t,{Q:()=>s});var n=i(92379),a=i(78767),r=i(69478);const o=e=>{if(e.reason===r.rS.NO_FREE_TRIALS_LEFT){const t="No email reviews left this month";let i;if(e.meta.quotaResetDate){const t=Intl.DateTimeFormat([],{month:"short",day:"numeric"}).format(new Date(Date.parse(e.meta.quotaResetDate)));i=`You will get ${r.SR} free reviews again next month (${t}). You can also use paid expert writing help in Grammarly's web editor anytime.`}else i=`You will get ${r.SR} free reviews again next month. You can also use paid expert writing help in Grammarly's web editor anytime.`;return{title:t,message:i}}return e.reason===r.rS.NOT_ENOUGH_WORDS?{message:`Your email must be at least ${r.fy} words (currently ${e.meta.wordsCount}).`}:e.reason===r.rS.TOO_MANY_WORDS?{message:`Your email must be under ${r.Vw} words (currently ${e.meta.wordsCount}).`}:(e=>{switch(e){case r.rS.NOT_AVAILABLE:return{message:"Our experts are currently working on other text. Please try again later."};case r.rS.NOT_AVAILABLE_QUOTA_ERROR:return{title:"Something went wrong",message:"We couldn't determine how many requests you have left. Please try again later."};case r.rS.CONFLICTING_REQUEST:return{title:"Separate request in progress",message:"You can submit this request once the experts are finished with the one you already submitted."};case r.rS.CHECKING_INITIAL_AVAILABILITY:return{message:"Checking for available experts..."};case r.rS.UNSUPPORTED_LANGUAGE:return{message:"Our writing experts can only help with emails written in English."};default:(0,a.vE)(e)}})(e.reason)},s=({info:e,includeTitle:t})=>{const i=o(e);return n.createElement(n.Fragment,null,t?n.createElement(n.Fragment,null,i.title?n.createElement("b",null,i.title):n.createElement("b",null,"Get expert writing help"),n.createElement("br",null)):null,i.message)};s.defaultProps={includeTitle:!1}},46154:(e,t,i)=>{i.d(t,{q:()=>D});var n=i(92379),a=i(85837),r=i(95295);const o=({children:e,style:t,dataGrammarlyPart:i="ui-kit-iframe",...a})=>{const[o,s]=n.useState(null),l=n.useCallback((e=>{var t,i;let n=null;"contentDocument"in e.target&&(n=null!==(i=null===(t=e.target.contentDocument)||void 0===t?void 0:t.body)&&void 0!==i?i:null),s(n),n&&(n.style.margin="0",n.style.height="100vh",n.style.overflowY="hidden")}),[]);return n.createElement("iframe",{...a,style:{border:"none",...t},onLoad:l,srcDoc:"<html><body></body></html>","data-grammarly-part":i},o&&(0,r.createPortal)(e,o))};var s=i(28510),l=i(90595),c=i(29483),d=i(58799),u=i.n(d);const p=({placeholder:e,ariaLabel:t,onChange:i})=>{const[a,r]=n.useState("");return n.useEffect((()=>{i(a)}),[a]),n.createElement(n.Fragment,null,n.createElement(s.b,null,u().__css),n.createElement("div",{role:"textbox",className:u().textBox,contentEditable:!0,onInput:e=>{r(e.target.innerText)},"data-placeholder":e,"aria-placeholder":e,"aria-label":t}))},g=({placeholder:e,onChange:t,ariaLabel:i,iframeTitle:a,className:r})=>(0,c.OB)().experimentClient.isGateEnabled(l.K.CentralizeStopEventPropagation)?n.createElement("div",{className:r,style:{width:"100%",height:"128px",maxHeight:"inherit"}},n.createElement(p,{onChange:t,ariaLabel:i,placeholder:e})):n.createElement(o,{dataGrammarlyPart:"ui-kit-textbox",className:r,style:{width:"100%",height:"100%"},title:a},n.createElement(p,{onChange:t,ariaLabel:i,placeholder:e}));var h=i(42496),m=i(2087),f=i(53345);const v=e=>e.domain?n.createElement(n.Fragment,null,e.withHelpText&&n.createElement("div",{className:f.feedbackFormShareDomainTitle},"Help improve Grammarly by sharing the domain you’re on:"),n.createElement(m.J,{checked:e.checked,labelId:"feedback-form-share-domain-checkbox",onChange:e.onChange,className:f.feedbackFormShareDomainCheckbox},"Include the domain ",n.createElement("b",null,e.domain)," with my feedback")):null;var b=i(59819),S=i(72032);const w=e=>{const t=(0,S.T)("go");return e.isEnabled?n.createElement(b.T,{composition:"mark",accessibilityLabel:"",brand:t,height:26,className:f.feedbackFormLogoLine}):null},y=e=>{var t;if(!e.isEnabled)return null;const i=null!==(t=e.title)&&void 0!==t?t:n.createElement("span",null,"How do you like ",n.createElement("br",null)," Grammarly?");return n.createElement("h3",{...(0,a.Sh)(f.feedbackFormTitle,e.isCompact&&f.compact)},i)},E=e=>n.createElement(n.Fragment,null,n.createElement(m.J,{checked:e.checked,labelId:"feedback-form-share-user-text-checkbox",onChange:e.onChange,className:f.feedbackFormShareUserTextCheckbox},n.createElement("p",null,"Share my text with Grammarly")),n.createElement("p",{className:f.fedbackFormShareUserTextCheckboxLabel},"The text you checked with Grammarly will also be shared to improve the quality of our suggestions. Your feedback and text will not be associated with your account and will be deleted within 100 days. We will not use your feedback to train any models."));var k=i(79584);const C=({options:e,onChange:t=(()=>null),ariaLabel:i,className:r})=>{const o=[],[s,l]=n.useState(null);n.useEffect((()=>{var i;null!==s&&(null===(i=o[s])||void 0===i||i.focus()),t(null!==s?e[s].value:null)}),[s]);const c=null!==s?e[s]:null;return n.createElement("div",{"data-grammarly-part":"ui-kit-radio-group",className:r},n.createElement("div",{className:k.radioGroup,role:"radiogroup","aria-label":i,onKeyDown:t=>{if(" "!==t.key||c){if("ArrowRight"===t.key||"ArrowDown"===t.key){t.preventDefault(),t.stopPropagation();l(((s||0)+1)%e.length)}else if("ArrowLeft"===t.key||"ArrowUp"===t.key){t.preventDefault(),t.stopPropagation();const i=(s||0)-1;l(i<0?e.length-1:i)}}else t.preventDefault(),t.stopPropagation(),l(0)}},e.map(((e,t)=>{const i=(null==c?void 0:c.value)===e.value,r=0===t;return n.createElement("div",{key:e.value,...(0,a.Sh)(k.radioGroupOption,i?k.radioGroupOptionSelected:null),role:"radio",tabIndex:i||r&&!c?0:-1,"aria-checked":i,onClick:e=>{e.preventDefault(),e.stopPropagation(),l(t)},ref:e=>o.push(e)},e.render())}))))};var _,A=i(78767),I=i(60493);!function(e){e.bad="bad",e.ok="ok",e.good="good"}(_||(_={}));const T=e=>{const t=[_.bad,_.ok,_.good];return e.isEnabled?n.createElement(n.Fragment,null,n.createElement(C,{ariaLabel:"Feedback Score",options:t.map((e=>({value:e,render:()=>n.createElement("div",{className:I.feedbackFormOption},n.createElement("div",{...(0,a.Sh)(I.feedbackFormOptionIcon,x(e))}),n.createElement("div",null,function(e){switch(e){case _.bad:return"I dislike it";case _.ok:return"It’s OK";case _.good:return"I like it";default:(0,A.vE)(e)}}(e)))}))),onChange:e.onChange,...(0,a.Sh)(f.feedbackFormScore,e.compactDisplay&&f.compact)}),!e.hideTextBoxTitle&&n.createElement("div",{className:f.feedbackFormTextBoxTitle},"Anything we can improve?")):null};function x(e){switch(e){case _.bad:return I.feedbackFormOptionIconDisheartening;case _.ok:return I.feedbackFormOptionIconNeutral;case _.good:return I.feedbackFormOptionIconSmiling;default:(0,A.vE)(e)}}const R=e=>{var t,i,r;const[o,s]=n.useState(null),[l,c]=n.useState(""),[d,u]=n.useState(null!==(t=e.domainSharedByDefault)&&void 0!==t&&t),[p,m]=n.useState(!1);return n.createElement("form",{"data-grammarly-part":"surveys-feedback-form-fields",...(0,a.Sh)(f.feedbackFormContainer,"center"===e.align&&f.feedbackFormContainerAlignCenter,e.fixSubmitButtonOverflowBottomPadding&&f.feedbackFormContainerBottomPadding)},n.createElement("div",{className:f.feedbackFormFields},n.createElement(w,{isEnabled:!e.hideLogo}),n.createElement(y,{isEnabled:!e.hideTitle,title:e.title,isCompact:null!==(i=e.compactDisplay)&&void 0!==i&&i}),n.createElement(T,{isEnabled:e.withScore,compactDisplay:e.compactDisplay,hideTextBoxTitle:e.hideTextBoxTitle,onChange:s}),n.createElement(g,{onChange:c,placeholder:null!==(r=e.placeholderText)&&void 0!==r?r:"Your thoughts here",ariaLabel:"Feedback Text",iframeTitle:"Feedback text field",...(0,a.Sh)(f.feedbackFormTextBox,e.compactDisplay&&f.compact)}),n.createElement(v,{domain:e.domain,checked:e.domainSharedByDefault,withHelpText:!e.hideDomainHelpText,onChange:u}),e.showShareTextCheckbox&&n.createElement(E,{checked:p,onChange:m})),n.createElement(h.z,{type:"submit",onClick:t=>{t.preventDefault();const i=d?e.domain:void 0;e.withScore&&o?e.onSubmit({score:o,text:l,domain:i,shareUserText:p}):!e.withScore&&l&&e.onSubmit({text:l,domain:i,shareUserText:p})},disabled:e.withScore?!o:!l,width:"full","data-grammarly-part":"surveys-feedback-form-submit-button"},"Submit"))},P=e=>n.createElement("div",{"data-grammarly-part":"surveys-feedback-form-thank-you",...(0,a.Sh)(f.feedbackFormContainer,f.feedbackFormContainerAlignCenter,e.fixSubmitButtonOverflowBottomPadding&&f.feedbackFormContainerBottomPadding)},n.createElement("div",{className:f.feedbackFormSuccessMessageTextContainer},n.createElement("div",{className:f.feedbackFormSuccessMessageIcon}),n.createElement("div",{className:f.feedbackFormSuccessMessageTitle},"Thank you!"),n.createElement("div",{className:f.feedbackFormSuccessMessageSubtitle},"Your feedback helps us improve.")),n.createElement(h.z,{onClick:e.onClose,width:"full"},"Done"));var M=i(35431);const D=({hideLogo:e=!1,align:t="center",fixSubmitButtonOverflowBottomPadding:i=!1,showPostSubmitScreen:a=!0,...r})=>{const[o,s]=n.useState(!1),l=o&&a;return n.createElement("div",{style:r.style,"data-grammarly-part":"surveys-feedback-form",role:"region","aria-label":"Provide feedback","aria-live":"polite"},l?n.createElement(P,{fixSubmitButtonOverflowBottomPadding:i,onClose:r.onClose}):n.createElement(R,{...r,hideLogo:e,align:t,fixSubmitButtonOverflowBottomPadding:i,onSubmit:e=>{r.withScore?((0,M.n8)(e),r.onSubmit(e)):((0,M.TY)(e),r.onSubmit(e)),s(!0)}}))}},35431:(e,t,i)=>{function n(e){return"score"in e}function a(e){if(!n(e))throw new Error("Received unexpected feedback form data without score")}function r(e){if(n(e))throw new Error("Received unexpected feedback form data with score")}i.d(t,{TY:()=>r,dK:()=>n,n8:()=>a})},4141:(e,t,i)=>{i.d(t,{x:()=>a});var n=i(92379);function a(e,t,i,a=(()=>!0)){n.useEffect((()=>{let i=null;return a()&&(null!==i&&self.clearTimeout(i),i=self.setTimeout(e,t)),()=>{null!==i&&self.clearTimeout(i),i=null}}),i)}},36650:(e,t,i)=>{i.d(t,{C7:()=>h,jJ:()=>g,kl:()=>s});var n=i(90595),a=i(78767),r=i(29483),o=i(32330);function s(e,t,i,n,a,r,o,s,d,u,p,g){const h={top:i.top+s.top,left:i.left+s.left,width:i.width-s.left-s.right,height:i.height-s.top-s.bottom},b=function(e,t,i,n,a,r,o,s,l){const c=v(e,t,i,n,l,r,o);return[{...c,flippedHorizontal:!1,flippedVertical:!1}].concat((Array.isArray(a)?a:[a]).map((a=>({...v(e,f(t,a),f(i,a),m(n,c.overlap,a,r,o,s),l,r,o),flippedHorizontal:"flip"===a.horizontal,flippedVertical:"flip"===a.vertical}))))}({top:n.top-o.top,left:n.left-o.left,width:n.width+o.left+o.right,height:n.height+o.top+o.bottom},a,r,d,p,e,t,g,h),S=b.reduce(((e,t)=>e.overlap.vertical<=t.overlap.vertical?e:t)),w=b.reduce(((e,t)=>e.overlap.horizontal<=t.overlap.horizontal?e:t)),y=c({top:S.position.top,left:w.position.left,flippedHorizontal:w.flippedHorizontal,flippedVertical:S.flippedVertical},u,i,e,t);return l(y,e,t,h)}const l=(e,t,i,n)=>{const{top:a,left:r}=(0,o.m)({top:e.top,left:e.left,width:t,height:i},n);return{...e,top:a,left:r}},c=(e,t,i,n,a)=>{if(void 0===t)return e;const r=m(t,d(u({top:e.top+t.vertical,left:e.left+t.horizontal,width:n,height:a},i)),{horizontal:"translate",vertical:"translate"},n,a,!1);return{...e,top:e.top+r.vertical,left:e.left+r.horizontal}};function d(e){const t=Math.abs(Math.min(e.left,0)),i=Math.abs(Math.min(e.right,0)),n=Math.abs(Math.min(e.top,0)),a=Math.abs(Math.min(e.bottom,0));return{horizontal:t+i,vertical:n+a,top:n,bottom:a,left:t,right:i}}function u(e,t){return{top:e.top-t.top,bottom:t.top+t.height-(e.top+e.height),left:e.left-t.left,right:t.left+t.width-(e.left+e.width)}}const p=(0,a.Vo)((()=>(0,r.OB)().experimentClient.isGateEnabled(n.K.UseBodyToGetViewportDimentions)));function g(e=document){return!e.doctype&&p.get()?{top:e.body.scrollTop,left:e.body.scrollLeft,height:e.body.clientHeight,width:e.body.clientWidth}:{top:e.documentElement.scrollTop,left:e.documentElement.scrollLeft,height:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function h(e=document){return{top:0,left:0,height:!e.doctype&&p.get()?e.body.clientHeight:e.documentElement.clientHeight,width:e.documentElement.clientWidth}}function m(e,t,i,n,a,r){const o=t.left&&t.right?0:0!==t.left?Math.min(t.left,r?n:1/0):-Math.min(t.right,r?n:1/0),s=t.top&&t.bottom?0:0!==t.top?Math.min(t.top,r?a:1/0):-Math.min(t.bottom,r?a:1/0);return{horizontal:"translate"===i.horizontal?e.horizontal+o:-e.horizontal,vertical:"translate"===i.vertical?e.vertical+s:-e.vertical}}function f(e,t){return{vertical:"translate"===t.vertical?e.vertical:"top"===e.vertical?"bottom":"top",horizontal:"translate"===t.horizontal?e.horizontal:"left"===e.horizontal?"right":"left"}}function v(e,t,i,n,a,r,o){const{top:s,left:l}=function(e,t,i,n,a){return{top:e.top+a.vertical+("bottom"===i.vertical?e.height:"center"===i.vertical?e.height/2:0)-("bottom"===n.vertical?t.height:"center"===n.vertical?t.height/2:0),left:e.left+a.horizontal+("right"===i.horizontal?e.width:"center"===i.horizontal?e.width/2:0)-("right"===n.horizontal?t.width:"center"===n.horizontal?t.width/2:0)}}(e,{width:r,height:o},t,i,n);return{position:{top:s,left:l},overlap:d(u({top:s,left:l,width:r,height:o},a))}}},45523:(e,t,i)=>{i.d(t,{x:()=>n});var n,a=i(49601),r=i(8867),o=i(32734),s=i(37108),l=i(8065),c=i(59179);!function(e){function t(e,t){return i(e,t).pipe((0,o.B)(),(0,s.Q)(a.E))}function i(e,t){return new r.y((i=>{const n=new MutationObserver((e=>i.next(e)));return n.observe(e,t),()=>n.disconnect()}))}e.create=t,e.createUnsafe=i,e.createFlattenHot=function(e,t){return i(e,t).pipe((0,l.b)((e=>e)),(0,o.B)())},e.observeAttribute=function(e,i){return t(e,{attributes:!0,attributeFilter:[i],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.getAttribute(i))))},e.observeStyle=function(e){return t(e,{attributes:!0,attributeFilter:["style"],subtree:!1,childList:!1}).pipe((0,c.U)((t=>e.style)))},e.observeChildList=function(e){return t(e,{attributes:!1,subtree:!1,childList:!0}).pipe((0,c.U)((t=>e.childNodes)))}}(n||(n={}))},85004:(e,t,i)=>{i.d(t,{N:()=>n});var n,a=i(49601),r=i(8867),o=i(32734),s=i(37108),l=i(17705),c=i(954),d=i(49629),u=i(45523);!function(e){function t(e){return function(e){return new r.y((t=>{const n=i((()=>t.next(void 0)));return e.forEach((e=>n.observe(e))),()=>n.disconnect()}))}(e).pipe((0,o.B)(),(0,s.Q)(a.E))}function i(e){return new n(e)}e.observeSizeChanges=function(e){return t(e)},e.getResizeObserver=i;class n{constructor(e){this._af=null,this._callbackWasInvoked=!1;const t=()=>{this._callbackWasInvoked?(null!==this._af&&cancelAnimationFrame(this._af),this._af=requestAnimationFrame((()=>{e()}))):(e(),this._callbackWasInvoked=!0)};try{this._resizeObserver=new ResizeObserver(t)}catch(e){this._resizeObserver=new p(t)}}observe(e){this._clearAnimationFrame(),this._resizeObserver.observe(e)}unobserve(e){this._resizeObserver.unobserve(e),this._clearAnimationFrame()}disconnect(){this._resizeObserver.disconnect(),this._clearAnimationFrame()}_clearAnimationFrame(){this._af&&(cancelAnimationFrame(this._af),this._af=null),this._callbackWasInvoked=!1}}class p{constructor(e){this._callback=e,this._sub=null}observe(e){this._sub=u.x.create(e,{attributes:!0,childList:!0,subtree:!0}).pipe((0,l.T)(d.S.hz4),(0,c.O)(null)).subscribe((()=>{this._callback()}))}unobserve(){this._sub&&(this._sub.unsubscribe(),this._sub=null)}disconnect(){this.unobserve()}}}(n||(n={}))},14128:(e,t,i)=>{i.d(t,{Wb:()=>s,mp:()=>l,rX:()=>c});var n=i(39953),a=i(97874),r=i(12518),o=i(26155);function s(e){return{x:e.left,y:e.top,top:e.top,left:e.left,width:e.width,height:e.height,bottom:e.top+e.height,right:e.left+e.width,toJSON:()=>e}}function l(e){return(0,n.zG)(e(),r.g_((e=>e),(e=>e)))}function c(e,t){const i=a.bv.is(e)?e.meta:{};return o.NC.expandIfNeeded({start:e.start,end:e.end,...i},t)}},89803:(e,t,i)=>{i.d(t,{Fd:()=>m,sO:()=>a});var n,a,r=i(51505),o=i(39953),s=i(84714),l=i(97874),c=i(3977),d=i(7666),u=i(12518),p=i(63310),g=i(68418),h=i(14128);class m{constructor(e,t,i,n,a){this._highlightId=e,this._markChange=t,this._highlights=i,this._getBaseRect=n,this._getBaseScroll=a}get id(){return this._markChange.id}get highlightId(){return this._highlightId}get range(){const e=this._markChange.meta.range();return l.SV.isEmpty(e)?r.t$(e):r.F2(e)}getRect(){const e=this._highlights.getGeometryByHighlightId(this._highlightId);if(!e||!e.rects||0===e.rects.length)return u.t$(new Error);const t=e.rects,i=this._getBaseRect(),n=t[0],a=1===t.length?n:t[t.length-1],r=this._getBaseScroll(),o=e=>(0,h.Wb)(p.UL.setPosition(g.Ir.fromOffsetPoint(e,i,r),e));return u.F2({rootClientRect:i,clientRects:[o(n),o(a)]})}fromMarkEvent(e){return(0,s.of)(u.t$(new Error("not implemented")))}static getMarkRect(e){return(0,o.zG)(e.getRect(),u.UI(c.n.relativeToViewport),u.g_((()=>u.t$(new Error("Mark is collapsed"))),(e=>u.F2({top:Math.round(e.top),bottom:Math.round(e.bottom),left:Math.round(e.left),right:Math.round(e.right)}))))}}!function(e){let t;!function(e){let t;!function(e){e.full="full",e.partial="partial"}(t=e.RemoveType||(e.RemoveType={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e,i=t.full){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:{range:e.range,removeType:i}})}}(t=e.Change||(e.Change={}))}(n||(n={})),function(e){let t;!function(e){let t;!function(e){let t,i;!function(e){e.visible="visible",e.highlighted="highlighted"}(t=e.Type||(e.Type={})),function(e){e.api="api",e.sidebar="sidebar",e.text="text"}(i=e.Source||(e.Source={}))}(t=e.VisualState||(e.VisualState={})),e.getCreateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.create,meta:e})},e.getUpdateAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.update,meta:e})},e.getRemoveAction=function(e){return t=>({id:t,action:d.v.Change.ActionType.remove,meta:e})}}(t=e.Change||(e.Change={}))}(a||(a={}))},86090:(e,t,i)=>{i.d(t,{N:()=>o});var n=i(92379),a=i(4026),r=i(78703);class o extends n.Component{render(){const{institutionName:e,ssoId:t}=this.props,i="GrammarlyEnrollmentToken: "+t;return n.createElement("div",{className:(0,a.cs)(r.edc_stripe)},"Managed by ",n.createElement("b",{title:i},e))}}},37087:(e,t,i)=>{i.d(t,{MA:()=>hi,OB:()=>gi});var n=i(21100),a=i(1963),r=i(97484),o=i(53639);let s;function l(){return void 0===s&&(s=!!document.querySelector(".popup"),self.IS_POPUP=s),s}var c=i(84308),d=i(14969),u=i(18519),p=i(64017),g=i(64434),h=i(3620),m=i(4026),f=i(16381),v=i(39963),b=i(38364),S=i(40594),w=i(63838),y=i(7909),E=i(52698),k=i(90023),C=i(92379),_=i(95295),A=i(67249),I=i(50635),T=i(55368),x=i(31702),R=i(33885),P=i(54647),M=i(954),D=i(59179),F=i(58303),L=i(90595),B=i(56863),U=i(6266),O=i(62067),H=i(20851),G=i(42744),N=i(18838),z=i(35614),V=i(78819),W=i(78519),j=i(46599),q=i(28240),K=i(83507),$=i(31818);const Y=/^http(s?)\:\/\/docs\.google\.com\/document/;var J=i(98692),X=i(5546),Q=i(27327),Z=i(4636),ee=i(46418),te=i(86090),ie=i(85156),ne=i(90572),ae=i(83542),re=i(13391),oe=i(12518),se=i(74609),le=i(66886);const ce=()=>C.createElement("div",{className:le.footer},C.createElement("div",{className:le.footer_btn_container_ghost},C.createElement("div",{onClick:de,className:le.footer_btn},C.createElement("div",{className:le.footer_icon_home},C.createElement(ue,null)),"My Grammarly"))),de=()=>{se.J.myGrammarlyButtonClick("settingsToolbar"),Nt((0,f.Um)().allSettings)},ue=()=>C.createElement("svg",{width:"28",height:"28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},C.createElement("path",{d:"M6.563 21.438v-9.625L14 5.686l7.438 6.125v9.626m-9.625 0v-4.813c0-1.208.979-2.188 2.187-2.188v0c1.208 0 2.188.98 2.188 2.188v4.813",strokeWidth:".875",strokeLinecap:"round",strokeLinejoin:"round"}));var pe=i(28077);const ge=({siteSwitcherProps:e})=>C.createElement(K.L,{chunkName:"designSystem"},C.createElement(I.k,{className:le.ghostContainer,direction:"column",justify:"center",align:"start"},C.createElement("br",null),C.createElement("div",{className:le.ghostImage}),C.createElement("br",null),C.createElement(x.x,{as:"p",weight:"bold",variant:"text-medium"},"Some features temporarily paused"),C.createElement("br",null),C.createElement(x.x,{as:"p",variant:"text-medium"},"Your organization is currently studying the effectiveness of Grammarly’s writing suggestions."),C.createElement("br",null),C.createElement(x.x,{as:"p",variant:"text-medium"},"Some features are temporarily turned off until the study concludes."),C.createElement("br",null),C.createElement("div",{className:le.ghostSwitcher},C.createElement(pe.w,{...e}))));var he,me=i(32073),fe=i(44071),ve=i(15380),be=i(44675),Se=i(20905),we=i(13736),ye=i(56623),Ee=i(67960);!function(e){const t=[new ye.r("bg",(()=>gi().bgRpc.api.getBGLogs()),ye.r.getLogsFromSessionStorageFallbackGetter(Ee.v.bgHistoryLogs)),new ye.r("popup",(()=>Promise.resolve(gi().historyLogsService.getLogs())),ye.r.getLogsFromSessionStorageFallbackGetter(Ee.v.popupHistoryLogs)),new ye.r("cs",(async()=>{const e=[],t=t=>{e.push(...t.option.logs.map((e=>({...e,loggerName:`${t.option.isIframeIntegration?`iframe.[${t.caller.frameId}].`:""}${e.loggerName}`}))))};return gi().bgRpc.api.sendToFocusTab({kind:ve.B.Kind.sendCsLogsToPopup}),gi().message.on(ve.I.Kind.sendCsLogs,t),await(0,be.gw)(Se.E0),e.length||await(0,be.gw)(Se.E0),gi().message.off(ve.I.Kind.sendCsLogs,t),e.length?e:void 0}),ye.r.getLogsFromSessionStorageFallbackGetter(Ee.v.csHistoryLogs))];e.download=function(){(0,f.G6)()&&(0,f.CO)()?gi().bgRpc.api.sendToFocusTab({kind:ve.B.Kind.downloadDebugReportsFromCS}):we.E.download(t)},e.initDownloadOnKeyboardShortcut=function(){const e=new me.w0;return e.add((0,fe.R)(self,"keydown").subscribe((e=>{["Semicolon","KeyD"].includes(e.code)&&e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)&&gi().bgRpc.api.toggleDebugMenu(!0)}))),e.add(we.E.initKeyboardShortcutHandler(t)),e}}(he||(he={}));var ke=i(36279),Ce=i(82065),_e=i(4531),Ae=i(67505),Ie=i(95404),Te=i(47730);const xe=e=>{const t={source:"authHook",slot:O.G0.Toolbar,name:O.Vi.SettingsFooter,lastKnownUserType:(0,U.qf)(e.authUserDetails),experience:O.VP.SignIn};return C.createElement(ae.x,{className:Te.signUpFooter},C.createElement(x.x,{as:"p",weight:"bold",color:"base-default"},"Sign in to get key Grammarly features"),C.createElement(x.x,{as:"p",weight:"bold",color:"base-default"},"Access Grammarly's full functionality, including an easy-to-use editing experience and personalized dictionary."),C.createElement(Ae.f,{handleClick:e=>{const i=e===O.VP.SignUp?(0,Ie.Xc)({...t,action:O.VP.SignUp},{utmCampaign:"toolbarMenu",utmSource:"signupHook"}):(0,Ie.s7)({...t,action:O.VP.SignIn},{utmCampaign:"toolbarMenu",utmSource:"signinHook"});self.open(i),se.J.gdocsRegisterPromptButtonClick(e)}}))},Re=({openWebEditor:e,isDocsDisabled:t,summary:i})=>C.createElement(ae.x,{className:Te.footer},i,C.createElement(I.k,{className:Te.footer_btn_container},!t&&C.createElement("div",{onClick:()=>{se.J.newDocumentButtonClick("settingsToolbar"),e(!0)},className:Te.footer_btn},C.createElement(ke.J,{className:Te.footer_icon_doc,size:"small",variant:"inherit",icon:Ce.x,accessibilityLabel:"New Document"}),C.createElement(x.x,{as:"span",variant:"text-small",color:"base-subdued"},"New Document")),C.createElement("div",{onClick:()=>{se.J.myGrammarlyButtonClick("settingsToolbar"),e()},className:Te.footer_btn},C.createElement(ke.J,{className:Te.footer_icon_home,icon:_e.p,size:"small",variant:"inherit",accessibilityLabel:"Grammarly home"}),C.createElement(x.x,{as:"span",variant:"text-small",color:"base-subdued"},"My Grammarly"))));var Pe=i(47695);const Me=()=>C.createElement("div",{className:Pe["footer-ios"]},"Grammarly for Safari helps with spelling, grammar, and punctuation. To get advanced suggestions, use the Grammarly Keyboard.");var De=i(20785),Fe=i(24825);const Le=e=>{var t;return C.createElement("div",{className:Fe["header-ios"]},C.createElement(De.T,{size:32,type:"full"}),C.createElement("a",{className:Fe.link,href:null!==(t=e.deeplink)&&void 0!==t?t:(0,f.Um)().iOSApp,onClick:()=>{se.J.openAppButtonClick("settingsPopup")}},"Open App"))};var Be=i(1695),Ue=i(86723);const Oe=({actions:e,domain:t})=>C.createElement("div",{className:Ue.wrapper},C.createElement("div",{className:Ue.heading},"Enable Grammarly on ",C.createElement("span",{className:Ue.domain},t),"?"),C.createElement("div",{className:Ue.description},"Grammarly needs access to the text you ",C.createElement("br",null),"write in order to provide suggestions."),C.createElement(Be.z,{kind:"success",onClick:()=>{e.enableOnceClickToRun(),se.J.clickToRunOptionButtonClick("allow_once")}},"Allow once"),C.createElement(Be.z,{kind:"success",onClick:()=>{e.toggleSite(!0,t,!0),se.J.clickToRunOptionButtonClick("allow_on_website")}},"Always allow on this website"),C.createElement(Be.z,{kind:"success",onClick:()=>{e.enableClickToRunOnAllSites(),se.J.clickToRunOptionButtonClick("allow_on_all_websites")}},"Always allow on every website"));var He=i(64835),Ge=i(59819),Ne=i(27106),ze=i(24664);function Ve({brandingSet:e,...t}){if(void 0===e)return null;if("BUSINESS"===e)return C.createElement(Ne.V,{label:"Business",variant:"business",...t});if("PREMIUM"===e)return C.createElement(Ne.V,{label:"Premium",variant:"premium",...t});let i;switch(e){case"ENTERPRISE":i="enterprise";break;case"EDU":i="edu";break;case"PRO":i="pro";break;case"FREE":i="free"}return C.createElement(ze.O,{variant:i,...t})}var We=i(72032);const je=e=>{var t;return C.createElement(I.k,{style:e.hideDelimiter?void 0:{borderBottom:"1px solid rgba(0, 0, 0, .06)"},justify:"space-between",align:"center",padding:4,paddingLeft:6,paddingRight:6},C.createElement("a",{target:"_blank",rel:"noreferrer",href:null!==(t=e.appUrl)&&void 0!==t?t:(0,f.Um)().app,"aria-label":"Grammarly homepage (opens in a new tab)",style:{outlineColor:"var(--color-border-brand-default)",outlineOffset:4,outlineWidth:2,height:21}},C.createElement(Ge.T,{composition:"lockup",accessibilityLabel:"",brand:(0,We.T)("go"),height:21})),C.createElement(Ve,{brandingSet:e.brandingSet,size:"xsmall"}))};var qe=i(63202);class Ke{static isEnabled(){return!1}}var $e=i(19724),Ye=i(91957),Je=i(4972),Xe=i(9003);const Qe=({heading:e,enabled:t,children:i})=>t?C.createElement(C.Fragment,null,C.createElement("div",{className:Xe.heading},e),C.createElement("div",null,i)):C.createElement(C.Fragment,null,i);var Ze=i(46577);const et=e=>{var t;const{actions:i,activeTab:n,config:a,settings:r,siteCategory:o,className:s}=e,l=e.siteSwitcherChecked||{checked:!!r.enabled,update:e=>{i.toggleSite(e,a.domain),se.J.checkingToggleClick("toolbar",o,e?"on":"off",a.domain),(0,v.Tb)().toggleExtension(e,"toolbar",(0,Ye.Cg)(a.domain))}};return C.createElement("div",{className:(0,m.cs)(Ze.settingsContent,Ze.fullWidth,s)},C.createElement(Qe,{heading:"SITE SETTINGS"},C.createElement(pe.w,{domain:a.domain,enabledInConfig:null!==(t=a.enabled)&&void 0!==t&&t,siteSwitcherChecked:l,favicon:null==n?void 0:n.favIconUrl,siteCategory:o,centeredToggle:!0})))};var tt=i(78703);class it extends C.Component{get _authUserDetails(){return(0,U.no)(this.props.state.settings)}constructor(e){super(e),this._logger=S.Y.create("SettingsComponent"),this.uphookConfiguration=re.h.create(F.YP),this.state={hasSpecialOffer:F.YP,isLoadingSpecialOffer:!1,uphookConfigIsReady:!1},this._toggleSiteWrap=(e,t,i)=>{const{actions:n,reloadTab:a,gdocsIsActiveTab:r}=this.props;n.toggleSite({enabled:e,domain:t,clickToRunEnabled:i}),r&&a()},this._setKeyboardShortcutWrap=(e,t)=>{this.props.actions.setKeyboardShortcut({[e]:t})}}componentDidMount(){$e.n.isFree(this.props.state.user)&&this.props.actions.getConfiguration("browserToolbar").then(oe.Pd((e=>this._logger.warn("Failed to fetch uphook configuration",e)),(e=>{var t,i;this.uphookConfiguration.set(F.G(e)),this.setState({uphookConfigIsReady:!0});"Get Pro"!==(null!==(i=null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.ctaCopy)&&void 0!==i?i:"")&&this._logger.warn("UphookHub configuration does not match the expected")}))),this.props.canRequestInProductDiscountSpecialOffer()&&(this.setState({isLoadingSpecialOffer:!0}),(0,k.zG)((0,z.SU)(this.props.actions),(0,ie.x)((()=>{this.setState({isLoadingSpecialOffer:!1})}))).subscribe((e=>{this.setState({hasSpecialOffer:e,isLoadingSpecialOffer:!1})})))}get siteCategory(){return this.props.gdocsIsActiveTab?Je.y.gdocs:Je.y.other}get siteSwitcherProps(){var e,t;const{state:i}=this.props,n={checked:!!this.props.state.settings.enabled,update:e=>{this._toggleSiteWrap(e,i.config.domain),se.J.checkingToggleClick("toolbar",this.siteCategory,e?"on":"off",i.config.domain),(0,v.Tb)().toggleExtension(e,"toolbar",(0,Ye.Cg)(i.config.domain))}};return{domain:i.config.domain,enabledInConfig:null!==(e=i.config.enabled)&&void 0!==e&&e,siteCategory:this.siteCategory,siteSwitcherChecked:n,favicon:null===(t=this.props.state.activeTab)||void 0===t?void 0:t.favIconUrl}}get summary(){const{state:e,openSubscriptionDialog:t}=this.props;return!this.state.isLoadingSpecialOffer&&this.state.uphookConfigIsReady&&C.createElement(qe.Z,{user:e.user,openSubscriptionDialog:t,isAssistant:!1,hasInProductDiscountSpecialOffer:this.state.hasSpecialOffer,uphookConfiguration:this.uphookConfiguration,trackUphookHubEvent:(e,t)=>{t.pipe((0,ne.h)(F.pC),(0,d.P)()).subscribe((t=>{this.props.actions.trackConfiguration(e,t.value)}))},experimentClient:this.props.experimentClient})}get footer(){const{state:e,openWebEditor:t}=this.props;return this.props.isGhostProtocolEnabled?C.createElement(ce,null):this.props.isSafariIOS?C.createElement(Me,null):e.user.anonymous?C.createElement(xe,{authUserDetails:this._authUserDetails}):C.createElement(Re,{openWebEditor:t,isDocsDisabled:$e.n.isDocsDisabled(e.user),summary:this.summary})}get settingsContent(){const{state:e,actions:t,openReportBugForm:i,openDebugPage:n,isSafariIOS:a,citationBuilderSessionId:r,isCitationBuilderManualInvocationEnabled:o,isKnowledgeHubSupported:s,isTouchTypistSupported:l,isIndianEnglishDialectSupported:c,isCheetahSupported:d,showSerengetiFeatureToggle:u,isReportBugFeatureAllowed:p,isGhostProtocolEnabled:g,isAutoApplySupported:h,isHumanWritingReportSupported:m}=this.props;return g?C.createElement(ge,{siteSwitcherProps:this.siteSwitcherProps}):a?[C.createElement(et,{key:"content",className:tt.settingsContent,actions:{...t,toggleSite:this._toggleSiteWrap},activeTab:e.activeTab,config:e.config,settings:e.settings,dynamicConfig:e.dynamicConfig,siteCategory:this.siteCategory})]:[C.createElement(He.a7,{key:"content",className:tt.settingsContent,actions:{...t,toggleSite:this._toggleSiteWrap,setKeyboardShortcut:this._setKeyboardShortcutWrap},activeTab:e.activeTab,config:e.config,settings:e.settings,sessionTimeoutValue:e.sessionTimeoutValue,user:e.user,dapi:e.dapi,dynamicConfig:e.dynamicConfig,siteCategory:this.siteCategory,isReportBugFeatureAllowed:p,openReportBugForm:i,openDebugPage:n,openUrl:this.props.openUrl,placement:"popup",enableRenderingHack:!0,citationBuilderSessionId:r,isCitationBuilderManualInvocationEnabled:o,isKnowledgeHubSupported:s,isTouchTypistSupported:l,isIndianEnglishDialectSupported:c,isCheetahSupported:d,showSerengetiFeatureToggle:u,isAutoApplySupported:h,downloadDebugReports:()=>he.download(),isHumanWritingReportSupported:m})]}get dataGrammarlyPartByUser(){var e;const{passport:t}=this.props.state,i=null===(e=t.entitlements)||void 0===e?void 0:e.brandingSet;return null!=i?i:"FREE"}render(){var e;const{state:t,actions:i,isSafariIOS:n}=this.props;if(Ke.isEnabled()&&!t.settings.enabledClickToRun)return C.createElement(Oe,{actions:{...i,toggleSite:this._toggleSiteWrap},domain:t.config.domain});{const i=(0,m.cs)(tt.gr_popup_settings,{[tt.iOS]:n,[tt.not_supported]:!t.config.enabled,[tt.has_favicon]:t.activeTab&&!!t.activeTab.favIconUrl});return C.createElement(I.k,{className:i,"data-grammarly-part":this.dataGrammarlyPartByUser},C.createElement(ae.x,{className:tt.content},n?C.createElement(Le,null):C.createElement(je,{brandingSet:null===(e=this.props.state.passport.entitlements)||void 0===e?void 0:e.brandingSet}),C.createElement(ae.x,{"data-grammarly-part":"settings-popup-content",className:(0,m.cs)(tt.settingsContentWrapper,n?tt.withBackground:void 0)},this.settingsContent),this.footer))}}}var nt=i(52348),at=i(1087),rt=i(15e3),ot=i(12314),st=i(72526),lt=i(47052),ct=i(98539);const dt=({onSignIn:e,onSignUp:t,hideSupplementaryLink:i})=>C.createElement(I.k,{direction:"column",gap:2},C.createElement(nt.z,{onClick:t,width:"full","data-fire":"login-attempt, settings_toolbar_sign_up","data-test-attr":"signUpLink"},"Sign up"),!i&&C.createElement(I.k,{align:"center",justify:"center",gap:1},C.createElement(x.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Already have an account?"),C.createElement(nt.z,{onClick:e,variant:"ghost",size:"small","data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink"},"Sign in"))),ut=({onSignIn:e,onSignUp:t,hideSupplementaryLink:i})=>C.createElement(I.k,{direction:"column",gap:2},C.createElement(nt.z,{onClick:e,width:"full","data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink"},"Sign in"),!i&&C.createElement(I.k,{align:"center",justify:"center",gap:1},C.createElement(x.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Don't have an account?"),C.createElement(nt.z,{onClick:t,variant:"ghost",size:"small","data-fire":"login-attempt, settings_toolbar_sign_up","data-test-attr":"signUpLink"},"Sign up"))),pt=({onRequestPermissions:e,requestingPermissions:t})=>C.createElement(C.Fragment,null,C.createElement(nt.z,{onClick:e,"data-fire":"login-attempt, settings_toolbar_sign_in","data-test-attr":"signInLink",width:"full"},C.createElement("b",null,"Allow")," and continue to sign in"),C.createElement(x.x,{as:"p",variant:"text-xsmall",color:"base-subdued",marginTop:-1},t?"We are requesting your browser to grant permission.":"Next, your browser will ask you to grant permission.")),gt=({dynamicConfig:e,userType:t,...i})=>{const n={source:"authHook",slot:O.G0.Toolbar,name:O.Vi.Default,experience:i.authUserDetails.wasAuthenticatedUser||i.isBusiness?O.VP.SignIn:O.VP.SignUp,lastKnownUserType:(0,U.qf)(i.authUserDetails)},{onSignIn:a,onSignUp:r,...o}=(0,st.yw)({dynamicConfig:e}),s=e=>{(0,ot.T)(i.gnar,{authHookDetails:{...n,action:e,authType:O.uN.Email},userType:t})};return C.useEffect((()=>{(0,ot.B)(i.gnar,{authHookDetails:n,userType:t})}),[]),C.createElement(mt,{...i,...o,onSignIn:()=>{const e=O.VP.SignIn;s(e),a({...n,action:e})},onSignUp:()=>{const e=O.VP.SignUp;s(e),r({...n,action:e})}})},ht=({children:e})=>C.createElement("li",null,C.createElement(ke.J,{icon:at.L,size:"small",variant:"brand",accessibilityLabel:""}),C.createElement(x.x,{as:"span",variant:"text-small"},e)),mt=e=>{const{authUserDetails:t,onSignIn:i,onSignUp:n,needPermissions:a,requestingPermissions:r,onRequestPermissions:o,isSafariIOS:s,isBusiness:l,gnar:c}=e,d=a?null:C.createElement(ae.x,{bgColor:"background-brand-subdued",borderRadius:1,padding:2,className:ct.banner},C.createElement(ke.J,{icon:rt.m,accessibilityLabel:"",size:"large",variant:"brand",style:{minWidth:24}}),C.createElement(x.x,{as:"p",variant:"text-small",color:"brand-default"},l?"You're signed out of Grammarly Business.":"Grammarly is active, but key features are missing."));let u=C.createElement("div",{className:ct.descr},C.createElement(x.x,{as:"p",weight:"semibold"},"Sign up now to unlock the following:"),C.createElement("ul",null,C.createElement(ht,null,"Personal dictionary"),C.createElement(ht,null,"Save and access your documents"),C.createElement(ht,null,"Get weekly writing statistics and tips")));a?u=C.createElement(C.Fragment,null,C.createElement(x.x,{as:"p",weight:"semibold"},(0,f.G2)()," requires your permission to let Grammarly sign you in"),C.createElement(x.x,{as:"p",variant:"text-small"},"Please follow your browser's prompts to allow Grammarly to read grammarly.com site data.")):l&&(u=C.createElement("div",{className:ct.gb_descr},C.createElement(x.x,{as:"p",weight:"semibold"},"Sign in to access:"),C.createElement("ul",null,C.createElement(ht,null,"Writing suggestions"),C.createElement(ht,null,"Style Guide"),C.createElement(ht,null,"Brand Tones"),C.createElement(ht,null,"Snippets"))));let p=C.createElement(dt,{onSignIn:i,onSignUp:n});a?p=C.createElement(pt,{requestingPermissions:r,onRequestPermissions:o}):l?p=C.createElement(ut,{onSignIn:()=>{c.businessToolBarSigninButtonClick("toolbar"),i()},onSignUp:n,hideSupplementaryLink:!0}):t.wasAuthenticatedUser&&(p=C.createElement(ut,{onSignIn:i,onSignUp:n}));const g=(0,m.cs)(a?ct.permission:ct.signin,{[ct.iOS]:s});return C.createElement("div",{className:g},C.createElement(lt.h,{hideDelimiter:!0,isBusiness:l}),C.createElement(I.k,{direction:"column",padding:8,paddingTop:1,paddingBottom:4,className:ct.content,gap:4},d,u,p))};var ft=i(62531),vt=i(25693);vt.G1,vt.bL;function bt(e){return{title:`Use Grammarly in ${e}`,get message(){return`To check your writing on this page in ${e}, you’ll need to get the <a class="openGrammarly" href="${(0,f.Um)().desktop}">Grammarly desktop app</a>.`}}}const St={"drive.google.com":{title:"Up and running in Google Docs",get message(){return"Start writing in a document and you’ll see suggestions appear."},get icon(){return"ok"}},"docs.google.com":{title:"Grammarly Isn't Available for this Google Product",get message(){return`We hope to support this Google product<br/> in the future, but for now please use your</br> <a class="openGrammarly" href="${(0,f.Um)().app}">Grammarly Editor</a>.`}},"chrome.google.com":{title:"Web Store Not Supported"}};function wt(e,t){return"docs.google.com"===e&&t.includes("/spreadsheets")?bt("Google Sheets"):e.includes("greenhouse.io")&&t.includes("/people")?bt("Greenhouse"):St[e]}const yt=(0,Se.LK)(10),Et=((0,Se.LK)(5),yt);(0,Se.LK)(10),(0,Se.LK)(60),(0,Se.i4)(3),(0,Se.an)(12),(0,Se.an)(1),(0,Se.an)(365);var kt=i(72314),Ct=i(98811);const _t=(e="")=>(0,m.cs)(Ct.line,Ct.unsupported_item,e),At=({domain:e,customTitle:t,customMessage:i,customIcon:n})=>{const a=t?C.createElement("span",{dangerouslySetInnerHTML:{__html:(0,kt.sanitize)(t)}}):C.createElement(x.x,{as:"p"},C.createElement(x.x,{as:"strong",className:Ct.domain},e)," ","is not supported"),r=i?(0,kt.sanitize)(i):`For technical reasons, we currently do not check your text on this website. Please use your <a class="openGrammarly" href="${(0,f.Um)().app}">Grammarly Editor</a> instead.`,o=n?Ct[n]:Ct.warning;return C.createElement(ae.x,{className:_t()},C.createElement(ae.x,{className:o}),C.createElement(x.x,{as:"strong",className:Ct.unsupported_title,color:"base-default"},a),C.createElement(x.x,{as:"p",color:"base-default"},C.createElement("div",{dangerouslySetInnerHTML:{__html:r}})))},It=({domain:e})=>{const t=C.createElement(x.x,{as:"span",variant:"heading-small",color:"base-default"},"Checking Down on"," ",C.createElement(x.x,{as:"strong",color:"base-default",className:Ct.domain},e));return C.createElement(ae.x,{className:_t()},C.createElement(ae.x,{className:Ct.warning}),C.createElement(x.x,{as:"strong",variant:"text-small",className:Ct.unsupported_title},t),C.createElement(x.x,{as:"p",variant:"text-small",color:"base-default"},"There appears to be a temporary glitch affecting Grammarly’s performance on ",e,". Functionality should return soon."))},Tt=()=>C.createElement(ae.x,{className:_t(Ct.unsupported_grammarly)},C.createElement(ae.x,{className:Ct.ok}),C.createElement(x.x,{as:"strong",variant:"text-small",className:Ct.unsupported_message,color:"base-default"}," ","You Can’t Improve on Perfection"," "),C.createElement("br",null),C.createElement(x.x,{as:"span",variant:"text-small",color:"base-default",className:Ct.unsupported_grammarly_text},"Naturally, Grammarly’s browser extension is deactivated while you use the Grammarly Editor."));function xt({domain:e,activeTabURL:t,temporary:i,grammarlyEditor:n,unsupportedMessage:a}){const r=wt(e,t);let o;return o=n?"grammarly_editor":r&&r.message||a&&a.message?"custom_message":i?"temporary":"default",o}class Rt extends C.PureComponent{componentDidMount(){const{config:{domain:e,temporary:t,grammarlyEditor:i},activeTab:{url:n}}=this.props,a=xt({domain:e,activeTabURL:n,grammarlyEditor:null!=i&&i,temporary:null!=t&&t});(0,v.Tb)().settingsUnsupportedShow(a)}render(){const{config:{domain:e,temporary:t,grammarlyEditor:i,unsupportedMessage:n},activeTab:{url:a},isSafariIOS:r}=this.props,o=(0,m.cs)(Ct.gr_popup_unsupported,{[Ct.iOS]:r}),s=function(e,t,i,n){const a=n||wt(e,t);switch(i){case"grammarly_editor":return C.createElement(Tt,null);case"temporary":return C.createElement(It,{domain:e});default:return C.createElement(At,{domain:e,customTitle:a&&a.title,customMessage:a&&a.message,customIcon:a&&a.icon})}}(e,a,xt({domain:e,activeTabURL:a,grammarlyEditor:null!=i&&i,temporary:null!=t&&t,unsupportedMessage:n}),n);return C.createElement(ae.x,{className:o,"data-grammarly-part":"unsupported-component"},C.createElement(ae.x,{className:(0,m.cs)(Ct.content,Ct.unsupported_site)},r?C.createElement(Le,null):C.createElement(lt.h,null),s,r?null:C.createElement(Re,{openWebEditor:this.props.openWebEditor,isDocsDisabled:$e.n.isDocsDisabled(this.props.user)})))}}var Pt=i(35248),Mt=i(19523);const Dt=()=>gi().browserApi,Ft=()=>gi().bgRpc.api,Lt=C.lazy((()=>i.e(7543).then(i.bind(i,20279)).then((({ChromeStoreToolbarPopup:e})=>({default:e}))))),Bt=e=>C.createElement(C.Suspense,{fallback:C.createElement(C.Fragment,null)},C.createElement(K.L,{chunkName:"chromeStoreToolbarPopup"},C.createElement(Lt,{...e})));class Ut extends C.Component{constructor(){super(...arguments),this._sub=[]}componentDidUpdate(){this.props.resize()}componentDidMount(){this.props.resize({force:!0}),this._sub.push(m.on.call(document,"visibilitychange",(e=>{document.hidden||this.props.resize()})));const{user:e,settings:t}=this.props.state;this._isGdocsPossible()&&(0,X.M)(e,t)&&Ft().sendToFocusTab({kind:ve.B.Kind.hideGdocsSigninPopupMessage,option:{_tag:J.f.hide}}),this._sub.push(m.on.call((0,_.findDOMNode)(this),"click",(e=>{const t=e.target.closest("[data-fire]");t&&(e.preventDefault(),this.processSignUpInClick(t))}))),this.props.actions.cheetahReloadStatus()}componentWillUnmount(){this._sub.forEach((e=>e.off()))}_gdocsIsActiveTab(){const{activeTab:e}=this.props.state,t=e&&"url"in e?e.url:void 0;return!!t&&Y.test(t)}_isGdocsPossible(){return this._gdocsIsActiveTab()&&!(0,f.Am)()&&((0,f.CB)()||(0,f.pZ)()||(0,f.G6)())}_isDataControlActive(){return"data_control"===this.props.state.extensionFSM.stage}handleLoginAttempt(e){var t;const{actions:i}=this.props;null===(t=i.beginAuth)||void 0===t||t.call(i),"settings_toolbar_sign_up"===e&&se.J.signUpButtonClick("toolbar"),"settings_toolbar_sign_in"===e&&se.J.signInButtonClick("toolbar");const n=Dt();n.beginOAuth&&(n.beginOAuth(),Ot())}processSignUpInClick({href:e,dataset:t}){const{fire:i}=t;if(i){const[e,t]=i.split(", ");if("login-attempt"===e)return void this.handleLoginAttempt(t)}e&&Nt(e)}get settingsPopup(){const e=this.props.getTreatmentRelatedProps();return C.createElement(it,{actions:this.props.actions,state:this.props.state,close:this.props.close,openUrl:this.props.openUrl,openWebEditor:this.props.openWebEditor,isReportBugFeatureAllowed:this.props.isReportBugFeatureAllowed,openReportBugForm:this.props.openReportBugForm,openDebugPage:this.props.openDebugPage,openSubscriptionDialog:this.props.openSubscriptionDialog,openGBLanding:this.props.openGBLanding,reloadTab:this.props.reloadTab,gdocsIsActiveTab:this._gdocsIsActiveTab(),isSafari:(0,f.G6)(),isChrome:(0,f.i7)(),isSafariIOS:(0,f.Am)(),isKnowledgeHubSupported:e.isKnowledgeHubSupported,isTouchTypistSupported:e.isTouchTypistSupported,citationBuilderSessionId:e.citationBuilderSessionId,isCitationBuilderManualInvocationEnabled:e.isCitationBuilderManualInvocationEnabled,isIndianEnglishDialectSupported:e.isIndianEnglishDialectSupported,isCheetahSupported:e.isCheetahSupported,showSerengetiFeatureToggle:e.showSerengetiFeatureToggle,isAutoApplySupported:e.isAutoApplyEnabled,isGhostProtocolEnabled:e.isGhostProtocolEnabled,isHumanWritingReportSupported:e.isHumanWritingReportSupported,canRequestInProductDiscountSpecialOffer:e.canRequestInProductDiscountSpecialOffer,experimentClient:this.props.experimentClient})}render(){try{const e=this.props,{actions:t,state:i}=e,{user:n,config:a,settings:r,dynamicConfig:o,activeTab:s,installSource:l,growth:c}=i,{chromeStoreSignup:d={}}=c||{},{timesToShowToolbarPopup:u}=d,{anonymous:p}=n,{enabled:g,servicePage:h}=a,m=(0,U.no)(r),v=this._isDataControlActive()?C.createElement(I.k,{align:"center",justify:"center",height:200},C.createElement(j.DataControlPopupDefault,{openAcceptPage:jt})):e.getTreatmentRelatedProps().isStandWithUkraine?C.createElement(ft.I,{trackPopupShow:()=>{se.J.standWithUkraineSuspendSettingsPopupShow()},onLearnMore:()=>{var e;(0,$.RU)(null===(e=o.standWithUkraineGrammarlySuspendedPopup)||void 0===e?void 0:e.popupLearnMoreButtonLink),se.J.standWithUkraineSuspendLearnMoreButtonClick()},popupDynamicConfig:o.standWithUkraineGrammarlySuspendedPopup}):n.edc&&$e.n.isEdcBlocked(n)?C.createElement(q.w,{institutionName:n.edc.institutionName,ssoUrl:n.edc.ssoUrl}):p&&"chromeStorePopup"===d.popupType?C.createElement(Bt,{gnar:se.J,chromeStoreSignup:d,installSource:l,storeActions:t,authUserDetails:m,dynamicConfig:o,onGoogleSignupClick:this.props.openGoogleSignupFlow,isDismissible:!!u&&u>1}):this._gdocsIsActiveTab()?this._isGdocsPossible()&&g?p?C.createElement(J.b,{userType:$e.n.getType(n),slot:O.G0.Toolbar,authUserDetails:m,bgRpcApi:Ft(),openSigninPage:e=>{const t=Dt();t.beginOAuth?t.beginOAuth():self.open(e)},onClick:t.gdocsOptedIn}):this.settingsPopup:C.createElement(Rt,{activeTab:s,user:n,config:a,isSafariIOS:(0,f.Am)(),openWebEditor:e.openWebEditor}):(0,f.Am)()||!p||Ke.isEnabled()&&!r.enabledClickToRun?g||h?this.settingsPopup:C.createElement(Rt,{activeTab:s,user:n,config:a,isSafariIOS:(0,f.Am)(),openWebEditor:e.openWebEditor}):C.createElement(gt,{dynamicConfig:o,storeActions:t,isSafariIOS:(0,f.Am)(),gnar:se.J,userType:$e.n.getType(n),authUserDetails:m,isBusiness:r.authenticatedUserWasBusinessAccount&&this.props.getTreatmentRelatedProps().isGBSigninEnabled}),b=n.edc;return C.createElement(T.A,{scheme:"auto"},C.createElement(Q.o,{ref:e=>this.element=e,"data-grammarly-part":"settingsPopup"},v,b&&C.createElement(te.N,{...b})))}catch(e){throw se.J.fail("popup","popupStateInitFail",e.message),(0,v.Tb)().popup.popupStateInitFail(e.message),e}}}function Ot(){const e=Dt();e.closePopup?e.closePopup():(0,m.ZT)("close-popup")}function Ht({force:e}={}){(0,m.ZT)("update-window-size",{force:e})}function Gt(){Ft().sendToFocusTab({kind:ve.B.Kind.reloadTab}),Ot()}function Nt(e){Dt().openUrl(e),Ot()}function zt(e){Nt(e?(0,f.Um)().newDoc:(0,f.Um)().app)}function Vt(e){Nt(Mt.WY(e))}function Wt(){Nt(chrome.runtime.getURL("src/debug.html"))}function jt(){Ft().openDataControl()}function qt(e){Ft().openSubscriptionPage(e),Ot()}function Kt(e){se.J.getGBButtonClick("gbExtUphookPopup","ExploreGrammarlyBusiness");Nt((0,Ie.Z4)(e,"gbExtensionSettingsToolbar"))}function $t(e,t,i){if((0,Pt.B)(gi().experimentClient)){const t={...(0,B.xW)(e),...(0,Ie.JQ)()};gi().bgRpc.api.launchAuthFlow(!1,t)}else{const n=(0,Ie.wQ)(e,t),a=(0,Ie.My)(n,i);self.open(a)}}var Yt=i(79477),Jt=i(32626),Xt=i(43912),Qt=i(55830),Zt=i(78300),ei=i(24007),ti=i(53981);i(1479);const ii=S.Y.create("universal.popup");let ni=!1;function ai(){let e=!1;(0,m.cn)(document.documentElement,"gr-"+(0,f.qs)()),(0,f.ED)()&&(0,m.cn)(document.documentElement,"windows"),(0,f.Am)()&&(0,m.cn)(document.body,"gr-safari-ios");const{enableHistoryLoggerInProd:t,bgRpc:i,browserApi:{preferences:a},experimentClient:r}=gi(),o=new Xt.h(a),s=(0,Yt.X)(o,i),l=(0,Qt.q)(o),S=(0,w.r)(o,i),T=(0,E.W)(i),B=(0,p.n)(i),U=(0,Jt.z)(i),O=(0,g.b)(i),j=(0,h.o)(i),q=(0,ti.h)(i),K=(0,y.T)(o);he.initDownloadOnKeyboardShortcut(),o.view("extensionSettings").view((e=>{var t;return null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.historyLoggerEnabled})).subscribe((e=>{t("boolean"!=typeof e||e,"popup state update")}));let $=0;const Y=(t=1)=>{if(e)return;ii.debug(`Popup initialization attempt ${t}/2`),$=t;const i=(0,be.Fb)(Se.m9(3),r.fetchTreatments()).catch((e=>{const t=(0,Zt.H)(e)?e.message:String(e);return ii.warn("Experiments fetch failed, continuing without:",t),(0,v.Tb)().popup.fetchTreatmentsFail(t),null}));c.a([s,i]).pipe(d.P(),u.V(Se.m9(5))).subscribe({next:([t])=>{if(!e)try{e=!0,ii.debug("Popup initialization successful"),function(e,t,i,a){ii.warn("RENDER FROM",{currentState:e,actions:i}),function(e,t,i){const a=new hi;(0,_.render)(C.createElement(n.a.Context.Provider,{value:a},C.createElement(Z.p,null,C.createElement(R.F.Fragment,null,e.pipe(M.O(void 0),D.U((e=>{var n;return e?C.createElement(A.S,{name:"PopupMainViewErrorBoundary",fallback:()=>C.createElement(I.k,{direction:"column",align:"center",justify:"center",margin:4},C.createElement(x.x,{as:"small",variant:"text-xsmall"},"Settings popup cannot be rendered. Please contact Grammarly Support for help."))},C.createElement(Ut,{key:null===(n=e.activeTab)||void 0===n?void 0:n.id,state:e,actions:t,experimentClient:i,close:Ot,resize:Ht,openUrl:Nt,openWebEditor:zt,isReportBugFeatureAllowed:!i.isGateEnabled(L.K.HideReportBugByGrammarlyEmployeeFeature),openReportBugForm:Vt,openDebugPage:Wt,openSubscriptionDialog:qt,openGBLanding:Kt,openGoogleSignupFlow:$t,reloadTab:Gt,getTreatmentRelatedProps:()=>{var t;const n=(0,k.zG)(F.ij(null===(t=e.settings.cheetah)||void 0===t?void 0:t.status),F.g_(k.jv,(e=>e.status===P.l.Status.Enabled||e.status===P.l.Status.OptedOutByUser)));return{isKnowledgeHubSupported:(0,V.a)(i),isTouchTypistSupported:W.A.isAvailableByInstitution(e.dynamicConfig)&&W.A.isAvailableViaGateOrExperiment(i),isGBSigninEnabled:(a=e.user.anonymous,r=!!e.settings.authenticatedUserWasBusinessAccount,a&&(0,f.i7)()&&r),isStandWithUkraine:i.isGateEnabled(L.K.StandWithUkraineGrammarlySuspended),citationBuilderSessionId:(0,H.Td)(e.config.domain,e.dynamicConfig,i.isGateEnabled(L.K.CitationBuilderManualInvocation),e.settings)?(0,H.Cr)():void 0,isCitationBuilderManualInvocationEnabled:i.isGateEnabled(L.K.CitationBuilderManualInvocation),isIndianEnglishDialectSupported:i.isGateEnabled(L.K.IndianEnglishDialect)||i.isGateEnabled(L.K.IndianEnglishDialectInternal),isCheetahSupported:n,showSerengetiFeatureToggle:i.isGateEnabled(L.K.KnowledgeEngineSearchV2Alpha),isAutoApplyEnabled:i.isGateEnabled(L.K.SuggestionDeliveryAutoApply),isGhostProtocolEnabled:(0,G.L)(i),isHumanWritingReportSupported:(0,N.C0)(e.settings.humanWritingReport),canRequestInProductDiscountSpecialOffer:()=>(0,z.ol)(e.user,i)};var a,r}})):null})))),C.createElement(ee.G,null))),document.querySelector(".popup"))}(t,i,a),document.hidden||function(e){const{config:t,user:i,settings:n}=e,{enabled:a}=t;!1===n.enabledClickToRun?se.J.toolbarButtonClick("browser","click_to_run"):a?se.J.toolbarButtonClick("browser","supported"):se.J.toolbarButtonClick("browser","unsupported");if(i.anonymous);}(e);if(ri)return;ri=!0,(0,v.Tb)().popup.initSuccess()}(t,s,{...l.quickSettings,...l.gdocs,...l.settings,...l.tabs,...S,...T,...B,...U,...O,...j,...q,...l.auth,...K},r)}catch(t){throw ii.error("Error in show() function:",t),(0,v.Tb)().popup.popupStateInitFail((0,Zt.H)(t)?t.message:String(t)),e=!1,t}},error:e=>{const i=(0,Zt.H)(e)?e.message:String(e);ii.error(`Popup initialization attempt ${t} failed:`,i),se.J.fail("popup","popupInitFail",`attempt_${t}_${i}`),(0,v.Tb)().popup.popupInitFail(`attempt_${t}_${i}`,(0,ei.nG)({})),t<2?(ii.debug(`Retrying initialization in ${1e3*t}ms...`),setTimeout((()=>Y(t+1)),1e3*t)):(ii.error("All initialization attempts failed, giving up"),(0,v.Tb)().popup.popupStateInitFail(`all_attempts_failed_${i}`))}})};gi().message.sendBackground("tab-connected",{tab:"popup"}),Y(),(0,b.Zk)((()=>{e||(ni?(ii.error("Final timeout reached, popup never initialized"),se.J.fail("popup","popupInitTimeout"),(0,v.Tb)().settingsPopupTimeout()):(ni=!0,Y($+1)))}),6e3)}let ri=!1;var oi,si=i(33908),li=i(10238),ci=i(66209),di=i(11950),ui=i(29483);class pi extends ui.OD{static getInstance(){if(void 0===this._instance)throw new Error("popup Env not inited yet");return this._instance}static get isInited(){return void 0!==this._instance}static init(e){if(void 0!==this._instance)throw new Error("popup Env already inited");const t=new pi(e);if(this._instance=t,ui.OD.initShared(t),!l)throw new Error("Not a popup");const i=(0,v.Tb)();(0,v.HS)(self,i.unhandledExceptions.unhandledPopupException,i.unhandledExceptions.unhandledPopupRejection),ai()}constructor(e){super({browser:e.browser,extensionType:e.extensionType,deploymentType:e.deploymentType,context:"popup",browserInfo:e.browserApi.getBrowserInfo(),historyLoggerExtraArgs:{maxEventsToStore:100,backupStorage:new ci.f(e.browserApi.sessionStorage,Ee.v.popupHistoryLogs,(async()=>{var e;return!await(null===(e=this.bgRpc)||void 0===e?void 0:e.api.isGateEnabled("SessionStorageLogsBackup"))})),getExperimentClient:()=>this.experimentClient}}),(0,si.wp)(),this.browserApi=e.browserApi,this.message=new li.w(e.browserApi.message),this.bgRpc=new o.c(this.message),this.experimentClient=(0,a.M)(this.bgRpc),this.telemetryCallProvider=(0,di._)(this.bgRpc),this.productMetricsCSClient=(0,r.l)(this.bgRpc)}}function gi(){return pi.getInstance()}!function(e){e.Flag=n.a.Flag}(oi||(oi={}));class hi{constructor(){this._flags=new Set,this.actions={openUrl:()=>{throw new Error("Not implemented")},openPopup:()=>{throw new Error("Not implemented")}}}has(e){return this._flags.has(e)}}},47052:(e,t,i)=>{i.d(t,{h:()=>p});var n=i(92379),a=i(50635),r=i(59819),o=i(36279),s=i(64803),l=i(4026),c=i(16381),d=i(72032),u=i(90867);const p=e=>{var t;return n.createElement(a.k,{className:(0,l.cs)(u.header,!e.hideDelimiter&&u.delimiter)},n.createElement("a",{target:"_blank",rel:"noreferrer",href:null!==(t=e.appUrl)&&void 0!==t?t:(0,c.Um)().app,className:u.logo,"aria-label":"Grammarly homepage (opens in a new tab)"},n.createElement(r.T,{composition:"lockup",accessibilityLabel:"",brand:(0,d.T)("go"),height:21})),e.onClose&&n.createElement("button",{onClick:e.onClose,className:u.closeButton},n.createElement(o.J,{icon:s.V,size:"small",accessibilityLabel:"Close"})))}},64835:(e,t,i)=>{i.d(t,{a7:()=>Ye});var n=i(92379),a=i(15484),r=i(76282),o=i(50635),s=i(69554),l=i(31702),c=i(83542),d=i(52348),u=i(27106),p=i(36279),g=i(19347),h=i(52563),m=i(4765),f=i(97231),v=i(90595),b=i(29483);var S=i(28898),w=i(27982);function y(e){const{handleToggle:t}=function(e){const{enabled:t,onEnabled:i}=e,a=n.useRef(t);return n.useEffect((()=>{a.current=t}),[t]),{handleToggle:n.useCallback((e=>{var t;!a.current&&e&&i&&(null===(t=(0,S.O)().experimentClient)||void 0===t?void 0:t.isGateEnabled(w.K.SuperhumanWelcomePageOnOptIn))&&setTimeout((()=>{i()}),1e3),a.current=e}),[i])}}({enabled:e.superhumanGoEnabled,onEnabled:e.onSuperhumanGoEnabled}),i=n.useCallback((i=>{e.superhumanGoToggle(i),t(i)}),[e.superhumanGoToggle,t]);return n.createElement(o.k,{direction:"column",gap:4},n.createElement(o.k,{direction:"row",gap:2},n.createElement(s.X,{variant:"heading-xsmall",as:"h4",color:"base-default"},n.createElement(l.x,{as:"span",weight:"bold"},"Our new experience")),n.createElement(u.V,{label:"Beta",variant:"success"})),n.createElement(r.r,{label:"Use Superhuman Go",helperMessage:"Switch to Go, an upgraded product powered by helpful AI agents, including Grammarly.",isSelected:e.superhumanGoEnabled,onChange:i}))}var E,k=i(56863),C=i(6266),_=i(62067),A=i(9237),I=i(20851),T=i(70708);!function(e){e.isGranted=function(e,t=(0,S.O)().browserApi.permissions){return t?t.contains({permissions:[e]}):Promise.resolve(!1)},e.request=function(e,t=(0,S.O)().browserApi.permissions){return t?t.request({permissions:[e]}):Promise.resolve(!1)}}(E||(E={}));var x=i(39565),R=i(1182),P=i(39963),M=i(53768),D=i(1527);const F=e=>n.createElement(o.k,{direction:"row",style:{gap:"12px",width:"100%",backgroundColor:M.Gold0,borderBottom:`1px solid ${M.Gold10}`},padding:"8px 16px 10px 16px"},n.createElement(o.k,{width:"36px"},n.createElement(D.u,null)),n.createElement(o.k,{direction:"column",style:{gap:"8px"}},n.createElement(o.k,{direction:"column",style:{gap:"2px"}},n.createElement(s.X,{as:"h1",variant:"heading-xxsmall",style:{marginTop:"4px"}},"Boost Grammarly’s Performance"),n.createElement(l.x,{as:"p",variant:"text-xsmall"},"Allow the Grammarly Chrome extension to connect with the desktop app to provide suggestions faster.")),n.createElement(d.z,{variant:"ghost",onClick:e.onClick,text:"Continue",size:"small",style:{position:"relative",left:"-8px"}}))),L=n.memo((function(e){const[t,i]=n.useState(!1),a=n.useCallback((()=>{const{connector:e}=(0,P.Tb)();e.permissionViewClicked("settingPopup"),(0,b.OB)().bgRpc.api.requestGrantPermissionAndReloadExtOnAccept(x.d.nativeMessaging)}),[]);return n.useEffect((()=>{e.url&&Promise.all([(0,b.OB)().bgRpc.api.getSystemInfo().then((({os:t})=>T.R.shouldEnableFieldIntegration(t,(0,b.OB)(),e.url,e.domain))),E.isGranted(x.d.nativeMessaging)]).then((([e,t])=>{i(e&&!t)}))}),[]),n.useEffect((()=>{t&&(0,P.Tb)().connector.permissionViewShow("settingPopup")}),[t]),t?n.createElement(R.w,null,n.createElement(F,{onClick:a})):null}));var B=i(15329),U=i(99548),O=i(63349),H=i(12712),G=i(1087),N=i(64803),z=i(33885),V=i(13391),W=i(11816),j=i(19540),q=i(44114);const K=({userId:e,settings:t,isMac:i,actions:a,gnar:s})=>{var c,p;const g=null!==(c=null==t?void 0:t.enabled)&&void 0!==c?c:W.Y.enabled,h=n.useRef(null),f=V.h.create(!1),v=null!==(p=null==t?void 0:t.hotkey)&&void 0!==p?p:"Tab",b=new j.c(v,f);n.useEffect((()=>{const e=b.listenToHotkeyChange(i);return()=>{e.unsubscribe()}})),n.useEffect((()=>{const e=b.isActiveHotkeyChange.subscribe((e=>{e&&setTimeout((()=>{h.current&&(h.current.focus(),f.set(!0))}),0)}));return()=>e.unsubscribe()}),[b.isActiveHotkeyChange]);const S=n.useCallback((t=>{(async()=>{await a.toggleTouchTypistByUser({enabled:t,userId:e}),await s.touchTypistSettingsToggleClick(t?"on":"off")})()}),[e]),w=()=>{const e=b.tmpHotkey.get();e===v?b.onDismissHotkeyChange():(b.onApplyHotkeyChange(a),s.touchTypistSettingsEditHotkeyButtonClick(e))};return n.createElement(o.k,{direction:"column",gap:2},n.createElement(o.k,{gap:2,justify:"start",className:q.heading,color:"base-default"},"Quick fix",n.createElement(u.V,{label:"Beta",variant:"addition"})),n.createElement(r.r,{label:"Accept all critical suggestions with a key",isSelected:g,onChange:S}),n.createElement(o.k,{direction:"row",justify:"space-between",align:"center"},n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall",className:q.labelsFont},"Quick fix key"),n.createElement(z.F.div,{className:q.labelsFont},V.h.combine(b.tmpHotkey,b.isActiveHotkeyChange,((e,t)=>t?n.createElement(m.n,{ref:h,value:e,style:{width:O.ux.px(130)},labelDisplay:"hidden",label:"Change quick fix key",onBlur:()=>f.set(!1)}):n.createElement(l.x,{color:"base-default",as:"span",variant:"text-xsmall"},e)))),n.createElement(z.F.div,null,b.isActiveHotkeyChange.view((e=>e?n.createElement(o.k,{gap:.5},n.createElement(H.h,{"data-testid":"accept-shortcut-change",accessibilityLabel:"Accept",style:{backgroundColor:"#11A683"},variant:"primary",icon:G.L,onClick:w}),n.createElement(H.h,{"data-testid":"dismiss-shortcut-change",accessibilityLabel:"Dismiss",variant:"secondary",icon:N.V,onClick:()=>b.onDismissHotkeyChange()})):n.createElement(d.z,{variant:"ghost",onClick:()=>b.onIsActiveHotkeyChange()},"Edit"))))))};var $=i(4026),Y=i(16415),J=i(13162),X=i(35248),Q=i(16381),Z=i(95404),ee=i(19724),te=i(91957),ie=i(18473),ne=i(74316),ae=i(19523),re=i(43795),oe=i(74609),se=i(7889),le=i(37087);const ce="https://gateway.grammarly.com/api/jira/tickets/create";class de{constructor(e,t){this.getAuthToken=e,this.getCSRFToken=t,this.apiEndpoint=ce}async submitBugReport(e){try{const[t,i]=await Promise.all([this.getAuthToken(),this.getCSRFToken()]),n={Authorization:`Bearer ${t}`,"X-Requested-With":"XMLHttpRequest","X-Client-Type":"browser-extension","Content-Type":e.contentType};i&&(n["X-CSRF-Token"]=i);const a=await fetch(this.apiEndpoint,{method:"POST",headers:n,body:e.body,mode:"cors",credentials:"omit",referrerPolicy:"no-referrer"});if(!a.ok){const e=await a.text();throw new Error(`HTTP error! status: ${a.status}, body: ${e}`)}const r=await a.json();if(!r.success)throw new Error(r.message||"Failed to submit bug report");return r}catch(e){throw new Error(`Failed to submit bug report: ${e instanceof Error?e.message:"Unknown error"}`)}}}class ue{constructor(e,t){this.user=e,this.config=t}createDetailedDescription(e){var t;const i=f.Rd().systemInfo;return`\nDescription:\n${e}\n\n\n*Environment Details:\n- Domain: ${this.config.domain}\n- User Agent: ${(null===(t=null==i?void 0:i.browser)||void 0===t?void 0:t.userAgent)||navigator.userAgent}\n\nSubmitted via: Extension Bug Report Form\n    `.trim()}createReporterName(){return`${this.user.firstName} ${this.user.lastName||""}`.trim()}createFormData(e){var t,i;const n=f.Rd().systemInfo;return{project:"PBUG",summary:e.title.trim(),description:this.createDetailedDescription(e.description),reporterEmail:this.user.email,reporterName:this.createReporterName(),source:"Internal",userType:ae.Ng(this.user),browser:(null===(t=null==n?void 0:n.browser)||void 0===t?void 0:t.name)||"Unknown",operatingSystem:(null===(i=null==n?void 0:n.os)||void 0===i?void 0:i.name)||"Unknown",clientVersion:(0,Q.bo)(),team:"Browser extensions",issueType:"Bug",priority:"Major",assignee:"extension-team@grammarly.com",labels:`extension,bug-report,${this.config.domain},auto-submitted`}}buildFormDataForSubmission(e,t){const i=new FormData;return Object.entries(t).forEach((([e,t])=>{i.append(e,t)})),e.attachments.forEach((e=>{i.append("attachments",e,e.name)})),i.append("attachments",e.debugLogs,e.debugLogs.name),i}async buildCustomFormDataForSubmission(e,t){const i=`----formdata-${Date.now()}-${Math.random().toString(16).substring(2)}`,n="\r\n",a=new TextEncoder,r=[],o=(e,t)=>{r.push(a.encode(`--${i}\r\n`)),r.push(a.encode(`Content-Disposition: form-data; name="${e}"\r\n\r\n`)),r.push(a.encode(`${t}\r\n`))},s=async(e,t)=>{const o=await t.arrayBuffer();r.push(a.encode(`--${i}\r\n`)),r.push(a.encode(`Content-Disposition: form-data; name="${e}"; filename="${t.name}"\r\n`)),r.push(a.encode(`Content-Type: ${t.type}\r\n\r\n`)),r.push(new Uint8Array(o)),r.push(a.encode(n))};for(const[e,i]of Object.entries(t))o(e,i);for(const t of e.attachments)await s("attachments",t);await s("attachments",e.debugLogs),r.push(a.encode(`--${i}--\r\n`));const l=r.reduce(((e,t)=>e+t.length),0),c=new Uint8Array(l);let d=0;for(const e of r)c.set(e,d),d+=e.length;return{body:c,contentType:`multipart/form-data; boundary=${i}`}}}const pe=e=>n.createElement(u.V,{label:e.label||"Beta",variant:"addition",inline:!0}),ge=({label:e,betaLabel:t,...i})=>n.createElement(se.Z,{label:`${e} (${t||"Beta"})`,...i},e," ",n.createElement(pe,{label:t}));function he(e){var t,i,a,c,u,p,g,h;const m=!1!==(null===(i=null===(t=e.cheetahSettings)||void 0===t?void 0:t.status)||void 0===i?void 0:i.cheetahEnabled);return n.createElement(o.k,{direction:"column",gap:2},n.createElement(o.k,{direction:"column"},n.createElement(o.k,{justify:"space-between",align:"center"},n.createElement(s.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Generative AI"),n.createElement(d.z,{variant:"ghost",text:"Manage","data-grammarly-part":"cheetahManageBtn",onClick:()=>{e.openCheetahSettings()}})),n.createElement(l.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},"Brainstorm, write, and rewrite with Grammarly's generative AI assistance.")),e.showDockedAssistantToggle&&n.createElement(ge,{label:"Use docked chat launcher",isSelected:m&&e.dockedAssistantEnabled,onChange:e.dockedAssistantToggle,disabled:!m,betaLabel:"Beta",helperMessage:"Replace the widget in text fields with our new AI chat sidebar."}),n.createElement(r.r,{label:"Show on text selection",isSelected:m&&!1!==(null===(u=null===(c=null===(a=e.cheetahSettings)||void 0===a?void 0:a.status)||void 0===c?void 0:c.entryPointsConfig)||void 0===u?void 0:u.inlineRewriteEnabled),disabled:!m,onChange:t=>e.cheetahToggleInlineRewrite(t)}),n.createElement(r.r,{label:"Show for quick replies",isSelected:m&&!1!==(null===(h=null===(g=null===(p=e.cheetahSettings)||void 0===p?void 0:p.status)||void 0===g?void 0:g.entryPointsConfig)||void 0===h?void 0:h.inlineQuickReplyEnabled),disabled:!m,onChange:t=>e.cheetahToggleInlineQuickReply(t)}),e.showSerengetiFeatureToggle&&n.createElement(ge,{label:"Use organizational context",isSelected:e.serengetiEnabled,onChange:e.serengetiToggle,betaLabel:"Internal"}))}function me(e){return n.createElement(r.r,{label:"Show definitions and synonyms via double clicks (all sites)",isSelected:e.enabledDefs,onChange:t=>{const{toggleDefs:i}=e;i(t),oe.J.definitionToggleClick(t?"on":"off"),(0,P.Tb)().toggleExtensionDefs(t)},isDisabled:e.disabled,"data-grammarly-part":"definitionAndSynonymsSwitcher"})}var fe=i(71798),ve=i(26806),be=i(17833),Se=i(69652),we=i(83816),ye=i(89298);const Ee=()=>n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"}));var ke=i(23393);const Ce={american:n.createElement((()=>n.createElement("div",{className:ye.american,role:"presentation"})),null),australian:n.createElement((()=>n.createElement("div",{className:ye.australian,role:"presentation"})),null),british:n.createElement((()=>n.createElement("div",{className:ye.british,role:"presentation"})),null),canadian:n.createElement((()=>n.createElement("div",{className:ye.canadian,role:"presentation"})),null),indian:n.createElement((()=>n.createElement("div",{className:ye.indian,role:"presentation"})),null)},_e=({dialect:e,className:t})=>n.createElement(n.Fragment,null,Ce[e],n.createElement("span",{"data-test-attr":`dialect_${e}`,className:`${ke.option} ${null!=t?t:""}`},(0,we.kC)(e)+" English"));var Ae=i(40072);const Ie=({lock:e={message:"",isLocked:!1},dialect:t})=>n.createElement("div",{className:Ae.label},e.isLocked&&n.createElement(Se.u,{message:e.message},n.createElement("div",{className:Ae.lockIconWrapper},n.createElement(be.N,null))),n.createElement(fe.zx.White,{name:"dialect.box",style:{padding:"0"},disabled:e.isLocked},n.createElement("div",{className:`${Ae.selected} ${e.isLocked?Ae.disabled:""}`},n.createElement(_e,{dialect:t,className:Ae.option}),n.createElement(Ee,null))));var Te=i(60052);class xe extends n.Component{render(){var e;const t=this.props.dropdownOnTop?{customPosition:{top:`-${32*(this.props.dialects.length-1)+4}px`,left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return(null===(e=this.props.lock)||void 0===e?void 0:e.isLocked)?n.createElement(Ie,{lock:this.props.lock,dialect:this.props.dialect}):n.createElement(ve.L,{...t,showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:n.createElement(Ie,{dialect:this.props.dialect})},this.props.dialects.filter((e=>e!==this.props.dialect)).map((e=>n.createElement(fe.zx.Flat,{name:e,key:e,onClick:t=>(null==t?void 0:t.isTrusted)&&this.props.onSetDialect(e)},n.createElement("div",{className:Te.option},n.createElement(_e,{className:Te.label,dialect:e}))))))}}var Re=i(78767),Pe=i(72329);const Me=({children:e,blocked:t,wrapperClassName:i,disabledText:a="Sign in to use this feature"})=>t?n.createElement(Se.u,{message:a,position:"top"},n.createElement(c.x,{className:i},n.createElement("div",{className:Pe.hover_blocker,onClick:Re.EI,onDoubleClick:Re.EI},e))):n.createElement(n.Fragment,null,e);class De extends n.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const n=e+"English";oe.J.languageSettingUpdate(n,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return n.createElement(o.k,{align:"center",justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default"},"I write in"),n.createElement(Me,{blocked:this.props.disabled},n.createElement(xe,{dialect:e,dialects:this.props.dialects,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop,lock:this.props.lock})))}}var Fe=i(78021);const Le=({currentOpenShortcut:e,currentCloseShortcut:t,currentVBarsShortcut:i,onSetShortcut:a,showVBarsShortcut:r,isMac:c,isSuperhumanGoBrandingEnabled:d})=>{const u="keyboard-shortcut-setting-description",p=d?"Open new chat":"Open Grammarly";return n.createElement(o.k,{direction:"column"},n.createElement(s.X,{variant:"heading-xsmall",as:"h2",color:"base-default"},"Shortcuts"),n.createElement(l.x,{as:"p",variant:"text-xsmall",color:"base-subdued",id:u},"Use any keys in shortcuts, except for tab, enter, caps lock, home, end, page up, page down, delete, backspace, insert, and arrow keys."),n.createElement(o.k,{gap:1,direction:"column",color:"base-default"},n.createElement(Fe.Z,{label:p,isMac:c,currentShortcut:e,onSetShortcut:e=>{a("openAssistant",e),oe.J.keyboardShortcutShortcutKeysChanged("openAssistant")},ariaDescribedBy:u}),n.createElement(Fe.Z,{label:"Close Grammarly",isMac:c,currentShortcut:t,onSetShortcut:e=>{a("closeAssistant",e),oe.J.keyboardShortcutShortcutKeysChanged("closeAssistant")},ariaDescribedBy:u}),r&&n.createElement(Fe.Z,{label:"Open sidecard",isMac:c,currentShortcut:i,onSetShortcut:e=>{a("openVBar",e),oe.J.keyboardShortcutShortcutKeysChanged("openVBar")},ariaDescribedBy:u})))};var Be=i(28077),Ue=i(46577),Oe=i(78703);const He=()=>n.createElement("div",{className:Ue.separator}),Ge=e=>{const t={source:"authHook",slot:_.G0.Toolbar,name:_.Vi.SessionTimeout,lastKnownUserType:(0,C.qf)(e.authUserDetails),experience:_.VP.SignIn};return n.createElement("div",{className:Oe.sessionTimeoutWrapper},n.createElement("div",{className:Oe.sessionTimeoutDiv},n.createElement("div",{className:Oe.sessionTimeoutTextAndIcon},n.createElement("div",null,n.createElement(ne.K,{className:Oe.sessionTimeoutPopupIcon,width:"32",height:"32"})),n.createElement("div",{className:Oe.sessionTimeoutText},n.createElement("span",null,"Company policy expires your session in 1 hour."," ",n.createElement(a.r,{href:"#",onClick:()=>{const i={utmCampaign:"toolbarMenu",utmSource:"signinHook"};(0,X.B)((0,b.OB)().experimentClient)?(0,b.OB)().bgRpc.api.launchAuthFlow(!1,{...(0,k.xW)(t),...(0,Z.OC)((0,Z.g7)(i))}):e.openUrl((0,Z.s7)(t,i,!0))},variant:"secondary",weight:"bold"},n.createElement("span",{className:Oe.signinLink},"Sign in"))," ","to avoid interruption.")))),n.createElement(He,null))},Ne=e=>n.createElement(r.r,{label:e.isAutoApplySupported?"Correct text automatically":"Correct spelling automatically",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-autocorrect"}),ze=e=>n.createElement(r.r,{isSelected:!e.enabled,label:"Check text with browser extension",helperMessage:e.enabled?"Grammarly's browser extension was deactivated since you're using Grammarly's desktop application":void 0,onChange:t=>{e.toggle(!t)},"data-grammarly-part":"disableDesktopIntegrationToggle"}),Ve=e=>n.createElement(r.r,{label:"Show emoji for detected tones",isSelected:e.enabled,onChange:e.toggle,"data-grammarly-part":"settings-toggle-show-emoji-for-detected-tones"}),We=e=>n.createElement(r.r,{label:"Show Knowledge Share",isSelected:e.enabled,onChange:e.toggle}),je=e=>n.createElement(o.k,{direction:"column",gap:2,className:Ue.section},n.createElement(s.X,{as:"h3",className:Ue.heading,color:"base-default"},n.createElement(o.k,{gap:2,justify:"start",align:"center"},"Accessibility")),n.createElement(r.r,{label:"Turn on enhanced screen reader support",isSelected:e.enabled,onChange:e.toggle})),qe=e=>n.createElement(se.Z,{label:`Show “Get citation” button on ${e.domain}`,isSelected:e.enabled,onChange:e.toggle},"Show “Get citation” button on"," ",n.createElement(l.x,{as:"span",variant:"text-small",weight:"semibold",color:"base-default",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},e.domain)),Ke=e=>n.createElement(r.r,{label:e.label,isSelected:e.enabled,isDisabled:e.disabled,onChange:e.toggle,helperMessage:e.helperMessage}),$e=({showReportBugButton:e,...t})=>{var i,f,v;const S=t.advancedHistoryLoggerEnabledUntil?Math.ceil((t.advancedHistoryLoggerEnabledUntil-Date.now())/6e4):0;return n.createElement(c.x,{"data-grammarly-part":"debugMenu"},n.createElement(He,null),n.createElement(c.x,{className:Ue.debugMenu},n.createElement(o.k,{direction:"column",gap:3},n.createElement(s.X,{as:"h3",className:Ue.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Debug Menu"),t.showHideButton&&n.createElement(d.z,{variant:"ghost",text:"Hide","data-grammarly-part":"debugMenuHideBtn",onClick:()=>{(0,b.OB)().bgRpc.api.toggleDebugMenu(!1)}})),n.createElement(r.r,{label:"Logging",onChange:e=>{e?(0,b.OB)().bgRpc.api.enableHistoryLoggerUntil(-1):(0,b.OB)().bgRpc.api.disableHistoryLogger()},"data-grammarly-part":"debugMenuLoggingToggle",isSelected:t.isEnabled}),n.createElement(He,null),n.createElement(se.Z,{label:`Advanced Logging (${S} minutes left)`,isSelected:t.isAdvancedEnabled,isDisabled:!t.isEnabled,onChange:()=>{t.isAdvancedEnabled?(0,b.OB)().bgRpc.api.disableAdvancedHistoryLogger():(0,b.OB)().bgRpc.api.enableAdvancedHistoryLoggerUntil(Date.now()+36e5)}},"Advanced Logging"," ",t.isAdvancedEnabled&&null!==t.advancedHistoryLoggerEnabledUntil&&t.advancedHistoryLoggerEnabledUntil>0&&n.createElement(u.V,{label:`${S} mins left`,inline:!0})),n.createElement(He,null)),n.createElement(s.X,{as:"h4",className:Ue.heading},n.createElement(d.z,{variant:"ghost",text:"Download Logs",className:Ue.downloadBtn,isDisabled:!t.isEnabled,onClick:t.downloadDebugReports,"data-grammarly-part":"debugMenuDownloadLogBtn"}),!0===e.enabled&&n.createElement(a.r,{href:"#",underline:"hover",weight:"bold",className:Ue.downloadBtn,"data-grammarly-part":"debugMenuReportBugBtn",onClick:()=>{e.onClick()}},n.createElement(o.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"Report a bug"),n.createElement(p.J,{icon:g.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),t.showDebugPage&&n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(s.X,{as:"h4",className:Ue.heading},n.createElement(a.r,{href:"#",underline:"hover",weight:"bold",className:Ue.downloadBtn,"data-grammarly-part":"debugMenuDebugPageBtn",onClick:t.openDebugPage},n.createElement(o.k,null,n.createElement(l.x,{as:"span",variant:"text-small"},"View debug page"),n.createElement(p.J,{icon:g.n,accessibilityLabel:"",size:"small",variant:"inherit"}))))),null!=t.gOSDebugSettings?n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(c.x,{className:Ue.gOSMenu},n.createElement(o.k,{direction:"column",gap:3},n.createElement(s.X,{as:"h3",className:Ue.heading,color:"base-default"},"gOS Developer Settings"),n.createElement(r.r,{label:"Debugger",isSelected:t.gOSDebugSettings.debuggerEnabled,onChange:null===(i=t.gOSDebugSettings)||void 0===i?void 0:i.toggleDebugger,"data-grammarly-part":"gOSDebuggerToggle"}),n.createElement(He,null)),n.createElement(o.k,{className:Ue.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Applet Channel"),n.createElement("div",{style:{width:"106px"}},n.createElement(h.P,{id:"gos-applet-channel",value:null!==(f=t.gOSDebugSettings.appletChannel)&&void 0!==f?f:"stable",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAppletChannel(e)},label:"Applet Channel",labelDisplay:"hidden"},n.createElement(h.P.Option,{value:"dev",label:"dev"}),n.createElement(h.P.Option,{value:"preview",label:"preview"}),n.createElement(h.P.Option,{value:"stable",label:"stable"}),n.createElement(h.P.Option,{value:"qa",label:"qa"})))),n.createElement(He,null),n.createElement(o.k,{className:Ue.menuItem,justify:"space-between"},n.createElement(l.x,{as:"p",variant:"text-small",weight:"medium",color:"base-default",marginTop:2},"Assistant URL"),n.createElement("div",{style:{width:"190px"}},n.createElement(m.n,{labelDisplay:"hidden",label:"Assistant URL",id:"gos-assistant-applet-url",type:"url",placeholder:"e.g. http://localhost:3000/",value:null!==(v=t.gOSDebugSettings.assistantAppletUrl)&&void 0!==v?v:"",onChange:e=>{var i;null===(i=t.gOSDebugSettings)||void 0===i||i.setAssistantAppletUrl(e)}}))))):null))},Ye=e=>{var t,r,d,u,h,m,S,w,E,k,_,T,x,R,M,D,F;const{actions:O,activeTab:H,config:G,settings:N,dapi:z,user:V,sessionTimeoutValue:W,siteCategory:j,placement:q,dynamicConfig:X,enableRenderingHack:Z=!1,showCitationBuilderToggle:ne=!0,citationBuilderSessionId:se,isCitationBuilderManualInvocationEnabled:ce=!1,isKnowledgeHubSupported:pe=!1,isTouchTypistSupported:ge=!1,isIndianEnglishDialectSupported:fe=!1,isCheetahSupported:ve=!1,showSerengetiFeatureToggle:be=!1,isReportBugFeatureAllowed:Se,isAutoApplySupported:we=!1,className:ye,downloadDebugReports:Ee,isHumanWritingReportSupported:ke=!1}=e,Ce=(0,b.OB)().experimentClient,_e=(0,ie.f)(),Ae=function(){const[e,t]=n.useState(!1);return n.useEffect((()=>{(0,b.OB)().experimentClient.isGateEnabled(v.K.AssistantInSidePanel)&&(0,b.OB)().bgRpc.api.isSidePanelSupported().then(t)}),[]),e}(),Ie=Ae&&!_e,Te=Ae&&_e,xe=(0,C.no)(N),{isBugReportFormOpen:Re,BugReportForm:Pe,showReportBugButton:Me,openBugReportForm:Fe,closeBugReportForm:Ye,handleBugReportSubmit:Je}=function(e,t,a){const[r,o]=n.useState(!1),[s,l]=n.useState(null),c=n.useMemo((()=>new ue(e,t)),[e,t]),d=n.useMemo((()=>new de((async()=>await(0,le.OB)().bgRpc.api.getAccessToken()),(async()=>await(0,le.OB)().bgRpc.api.getCSRFToken()))),[]),u=n.useMemo((()=>(ee.n.isGrammarlyEmployee(e)||ee.n.isTestUser(e))&&a),[e,a]);n.useEffect((()=>{u&&!s&&i.e(6111).then(i.bind(i,16111)).then((e=>{l((()=>e.BugReportForm))}))}),[u,s]);const p=n.useCallback((async e=>{const t=c.createFormData(e),i=await c.buildCustomFormDataForSubmission(e,t);return await d.submitBugReport(i)}),[c,d]),g=n.useCallback((()=>{o(!0)}),[]),h=n.useCallback((()=>{o(!1)}),[]);return{isBugReportFormOpen:r,BugReportForm:s,showReportBugButton:u,openBugReportForm:g,closeBugReportForm:h,handleBugReportSubmit:p}}(V,G,Se);Z&&n.useEffect((()=>{(0,Q.CB)()&&(self.screenLeft<0||self.screenTop<0||self.screenLeft>self.screen.width||self.screenTop>self.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{anonymous:Xe}=V,Qe=Ce.isGateEnabled(v.K.ExtensionBugSubmissionForm),Ze=(0,Q.i7)()&&ee.n.isGrammarlyEmployee(V),et=ee.n.isGrammarlyEmployee(V)&&(0,B.V)(Ce),tt=Ce.isGateEnabled(v.K.KeyboardShortcut),{dialectSettings:it}=N,nt=(null==it?void 0:it.dialect)||z.dialectStrong,at=["british","american","australian","canadian",...fe?["indian"]:[]],rt=e.siteSwitcherChecked||{checked:!!N.enabled,update:t=>{const{siteCategory:i}=e;O.toggleSite(t,G.domain),oe.J.checkingToggleClick("toolbar",i,t?"on":"off",G.domain),(0,P.Tb)().toggleExtension(t,"toolbar",(0,te.Cg)(G.domain))}},ot=n.useCallback((e=>{const t=H&&new URL(H.url).pathname;O.toggleCitationBuilderForDomain({domain:G.domain,enabled:e,pathName:t,inAllowList:H&&(0,I.eC)(new URL(H.url),X)}),e||oe.J.citePopupButtonDisable(G.domain,"permanent",se||"","toolbar",ce&&!0===(0,I.gO)(G.domain,N))}),[null==H?void 0:H.url,G.domain,se]);return n.createElement(c.x,{className:(0,$.cs)(Ue.settingsContent,ye),"data-grammarly-part":"settings"},(()=>{const{customSessionTimeoutInfo:e}=V;return!!(0,re.Xv)(e,Ce)&&(0,re.dU)(W)})()&&n.createElement(Ge,{openUrl:e.openUrl,authUserDetails:xe}),n.createElement(L,{url:null==H?void 0:H.url,domain:G.domain}),n.createElement(c.x,{className:Oe.popupSettings},n.createElement(o.k,{direction:"column",gap:3,marginBottom:N.isDebugMenuVisible||Me?3:void 0},Te&&n.createElement(y,{superhumanGoToggle:O.toggleAlwaysAvailableAssistant,superhumanGoEnabled:!!(null===(t=N.alwaysAvailableAssistantSettings)||void 0===t?void 0:t.enabled),onSuperhumanGoEnabled:()=>{(0,b.OB)().bgRpc.api.openSuperhumanGoWelcomePage().catch((()=>{}))}}),n.createElement(s.X,{as:"h4",variant:"heading-large",className:Ue.heading},n.createElement(l.x,{as:"span",color:"base-default"},"Quick Settings"),n.createElement(a.r,{href:"#",underline:"hover",weight:"bold",onClick:()=>{e.openUrl((0,Q.Um)().allSettings),oe.J.allSettingsButtonClick(q)}},n.createElement(o.k,{className:Ue.allSettings},n.createElement(l.x,{as:"span",variant:"text-small"},"All Settings"),n.createElement(p.J,{icon:g.n,accessibilityLabel:"",size:"small",variant:"inherit"})))),Y.q.showSettingPopupToggle(z,N,X,null==H?void 0:H.url)&&n.createElement(n.Fragment,null,n.createElement(ze,{toggle:e=>{O.setDesktopIntegration(e),oe.J.desktopIntegrationToggleClick(e?"on":"off")},enabled:N.isDesktopIntegrationEnabled}),n.createElement(He,null)),n.createElement(Be.w,{domain:G.domain,enabledInConfig:null!==(r=G.enabled)&&void 0!==r&&r,siteSwitcherChecked:rt,favicon:null==H?void 0:H.favIconUrl,siteCategory:j}),ge&&n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(K,{userId:V.id,settings:N.touchTypistSettings,isMac:(0,b.nD)(),actions:O,gnar:oe.J})),n.createElement(He,null),tt&&n.createElement(n.Fragment,null,n.createElement(Le,{isMac:(0,b.nD)(),isSuperhumanGoBrandingEnabled:_e,showVBarsShortcut:(0,Q.i7)(),currentOpenShortcut:null!==(u=null===(d=N.keyboardShortcuts)||void 0===d?void 0:d.openAssistant)&&void 0!==u?u:(0,J.e)("openAssistant"),currentCloseShortcut:null!==(m=null===(h=N.keyboardShortcuts)||void 0===h?void 0:h.closeAssistant)&&void 0!==m?m:(0,J.e)("closeAssistant"),currentVBarsShortcut:null!==(w=null===(S=N.keyboardShortcuts)||void 0===S?void 0:S.openVBar)&&void 0!==w?w:(0,J.e)("openVBar"),onSetShortcut:(e,t)=>{O.setKeyboardShortcut(e,t)}}),n.createElement(He,null)),ve&&n.createElement(n.Fragment,null,n.createElement(he,{openCheetahSettings:()=>e.openUrl((0,Q.Um)().featuresSettings),cheetahSettings:N.cheetah,cheetahToggleInlineQuickReply:O.cheetahToggleInlineQuickReply,cheetahToggleInlineRewrite:O.cheetahToggleInlineRewrite,showSerengetiFeatureToggle:be,showDockedAssistantToggle:Ie,dockedAssistantToggle:O.toggleAlwaysAvailableAssistant,dockedAssistantEnabled:!!(null===(E=N.alwaysAvailableAssistantSettings)||void 0===E?void 0:E.enabled),serengetiEnabled:"disabled"!==z.serengetiState,serengetiToggle:e=>{O.setSerengetiState(!0===e?"enabled":"disabled")}}),n.createElement(He,null)),ne&&(0,I.r4)(G.domain,X,ce)&&n.createElement(n.Fragment,null,n.createElement(qe,{enabled:(0,I.Td)(G.domain,X,ce,N),domain:G.domain,toggle:ot}),n.createElement(He,null)),pe&&n.createElement(n.Fragment,null,n.createElement(We,{enabled:null===(_=null===(k=N.knowledgeHubSettings)||void 0===k?void 0:k.enabled)||void 0===_||_,toggle:e=>{O.toggleKnowledgeHub(e),oe.J.knowledgeHubFeatureToggleClick("popup",U.JJ.fromDomain(G.domain),e?U.L5.on:U.L5.off),(0,P.Tb)().knowledgeHub.featureToggleClick(U.JJ.fromDomain(G.domain),e?U.L5.on:U.L5.off)}}),n.createElement(He,null)),n.createElement(me,{disabled:Xe,enabledDefs:N.enabledDefs,toggleDefs:O.toggleDefs}),(0,A.c)()&&n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(Ne,{enabled:N.autocorrectEnabled||!1,isAutoApplySupported:we,toggle:e=>{O.toggleAutocorrect(e);const t=e?"on":"off";oe.J.autocorrectToggleClick("popup",t),(0,P.Tb)().autoFix.featureToggleClick(t,"popup")}})),(!ve||!1===(null===(x=null===(T=N.cheetah)||void 0===T?void 0:T.status)||void 0===x?void 0:x.cheetahEnabled))&&n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(Ve,{enabled:"hide"!==z.emogenieEmojiState,toggle:e=>{O.setEmogenieEmojiState(!0===e?"show":"hide"),oe.J.settingsShowEmojiForDetectedTonesToggleClick(G.domain,!0===e?"on":"off")}})),ke&&n.createElement(n.Fragment,null,n.createElement(He,null),n.createElement(Ke,{label:"Grammarly Authorship",enabled:"enabled"===(null===(R=N.humanWritingReport)||void 0===R?void 0:R.kind),disabled:!1,toggle:e=>O.hwrSetEnabled(e),helperMessage:"Prove where your words come from by recording what you type and which sources you use. You choose how to share your information."})),n.createElement(He,null),n.createElement(De,{dialects:at,changeStrongDialect:O.changeStrongDialect,dialectStrong:nt,dialectWeak:z.dialectWeak,dropdownOnTop:!0,disabled:Xe,lock:{isLocked:Boolean(null==it?void 0:it.dialectLockedByInstitution),message:"Locked by your organization"}}),n.createElement(He,null)),n.createElement(je,{enabled:N.isEnhancedScreenReaderUXSupported,toggle:O.toggleEnhancedScreenReaderUXSupport}),(N.isDebugMenuVisible||Me)&&n.createElement($e,{isAdvancedEnabled:N.advancedHistoryLoggerEnabled,isEnabled:N.historyLoggerEnabled,advancedHistoryLoggerEnabledUntil:N.advancedHistoryLoggerEnabledUntil,showDebugPage:Ze,openDebugPage:e.openDebugPage,showReportBugButton:Me?{enabled:!0,onClick:()=>{Qe?Fe():e.openReportBugForm(ae.ZD({domain:G.domain,userType:ae.Ng(V),version:(0,Q.bo)(),systemInfo:f.Rd().systemInfo}))}}:{enabled:!1},showHideButton:!Me,downloadDebugReports:Ee,gOSDebugSettings:et?{debuggerEnabled:null!==(M=N.gOSDebuggerEnabled)&&void 0!==M&&M,toggleDebugger:O.toggleGOSDebugger,appletChannel:null!==(D=N.gOSAppletChannel)&&void 0!==D?D:null,setAppletChannel:O.setGOSAppletChannel,assistantAppletUrl:null!==(F=N.gOSAssistantAppletUrl)&&void 0!==F?F:null,setAssistantAppletUrl:O.setGOSAssistantAppletUrl}:void 0})),Pe&&n.createElement(Pe,{isOpen:Re,onClose:Ye,onSubmit:Je}))}},78021:(e,t,i)=>{i.d(t,{Z:()=>y});var n=i(92379),a=i(61189),r=i(83542),o=i(50635),s=i(31702),l=i(52348),c=i(11163),d=i(4765),u=i(12712),p=i(1087),g=i(64803),h=i(13118);const m=["Control","Alt","Shift","Meta","CapsLock","NumLock","ScrollLock","AltGraph"],f=/^Digit\d$/,v=/^Key[A-Z]$/;function b(e,t,i=" "){const n=m.filter((t=>e.modifiers.includes(t))).map((e=>function(e,t){if(t){if("Meta"===e)return"Command";if("Alt"===e)return"Option"}return e}(e,t)));return e.key&&n.push(function(e){if(f.test(e)||v.test(e))return e.slice(-1);return e}(e.key)),n.join(i)}const S=({label:e,isMac:t,currentShortcut:i,onEdit:a,shouldAutofocusEditButton:r,shortcutSeparator:c=" ",editButton:d})=>{const u={onClick:a,autoFocus:r,"aria-label":`Edit ${e} shortcut`};return n.createElement(o.k,{justify:"space-between",align:"center",flex:"2",height:32,gap:1},n.createElement(s.x,{as:"p",variant:"text-small"},b(i,t,c)),n.createElement(o.k,null,d?n.cloneElement(d,u):n.createElement(l.z,{text:"Edit",variant:"ghost",...u})))},w=({label:e,isMac:t,currentShortcut:i,onSetShortcut:a,ariaDescribedBy:r,onExit:s,shortcutSeparator:l=" "})=>{const[m,f]=n.useState(i),[v,S]=n.useState(!0),[w,y]=n.useState(void 0),E=`${e.replace(/ /g,"-").toLowerCase()}-shortcut-description-id`;return n.createElement(n.Fragment,null,n.createElement(c.u,{id:E},"Type a shortcut to configure the ",e," shortcut. Press tab for actions."),n.createElement(d.n,{label:`${e} shortcut`,value:b(m,t,l),labelDisplay:"hidden",errorMessage:w,onKeyDown:e=>{if(["Tab","Enter","CapsLock","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Insert","Delete","Backspace"].includes(e.code))S(!0);else{if(e.preventDefault(),h.uU.includes(e.key))if(v)f({key:void 0,modifiers:[e.key]});else{const t=m.modifiers;t.includes(e.key)||f({key:m.key,modifiers:[...t,e.key]})}else f(v?{key:e.code,modifiers:[]}:{key:e.code,modifiers:m.modifiers});S(!1)}},onKeyUp:()=>{S(!0)},autoFocus:!0,"aria-describedby":r?`${E} ${r}`:E}),n.createElement(o.k,{gap:1},n.createElement(u.h,{icon:p.L,accessibilityLabel:`Save ${b(m,t)} as ${e} shortcut`,tooltipContentProps:{children:"Save shortcut"},onClick:()=>{!function(e){return void 0!==e.key}(m)?y("Invalid shortcut. Must use at least one non-modifier key."):(a(m),s())}}),n.createElement(u.h,{icon:g.V,accessibilityLabel:"Cancel edits",onClick:s,variant:"tertiary"})))};const y=({label:e,isMac:t,currentShortcut:i,onSetShortcut:l,ariaDescribedBy:c,disableLegacyLayout:d=!1,shortcutSeparator:u=" ",showLabel:p=!0,editButton:g})=>{const[h,m]=n.useState(!1),[f,v]=n.useState(!1);n.useEffect((()=>{h&&v(!0)}),[h]);const y=h?n.createElement(w,{label:e,isMac:t,currentShortcut:i,onSetShortcut:i=>{l(i),a.E.announce(`Shortcut to ${e} is ${b(i,t)}`)},onExit:()=>m(!1),ariaDescribedBy:c,shortcutSeparator:u}):n.createElement(S,{label:e,isMac:t,currentShortcut:i,onEdit:()=>m(!0),shouldAutofocusEditButton:f,shortcutSeparator:u,editButton:g}),E=d?{}:{marginLeft:-2,marginRight:-2,borderRadius:3};return n.createElement(r.x,{bgColor:h&&!d?"background-base-subdued":"background-base-default",padding:2,...E},n.createElement(o.k,{gap:1,direction:"column"},p&&n.createElement(s.x,{as:"p",weight:"semibold",variant:"text-small"},e),n.createElement(o.k,{gap:3,flex:"2"},y)))}},7889:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(92379),a=i(50635),r=i(31702),o=i(76282);const s=({label:e,children:t,onChange:i,alignCenter:s,labelDisplay:l,...c})=>n.createElement(a.k,{justify:"space-between",align:s?"center":void 0},n.createElement(a.k,{direction:"column",gap:1},n.createElement(r.x,{as:"span",onClick:()=>{c.isDisabled||i(!c.isSelected)},variant:"text-small",weight:"medium",color:"base-default",style:{cursor:c.isDisabled?"not-allowed":"pointer"},"aria-hidden":!0},t),c.helperMessage&&n.createElement(r.x,{as:"p",variant:"text-xsmall",color:"base-subdued"},c.helperMessage)),n.createElement(o.r,{label:e,labelDisplay:"hidden",onChange:i,...c}))},67505:(e,t,i)=>{i.d(t,{R:()=>l,f:()=>c});var n=i(92379),a=i(50635),r=i(31702),o=i(62067),s=i(42496);const l=e=>n.createElement(a.k,{direction:"column",gap:2},n.createElement(s.z,{onClick:e.onSignUp,width:"full"},"Sign up"),n.createElement(a.k,{align:"center",justify:"center",gap:1},n.createElement(r.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Already have an account?"),n.createElement(s.z,{onClick:e.onSignIn,variant:"ghost",size:"small","data-grammarly-part":"sign-in-button"},"Log in"))),c=e=>n.createElement(a.k,{direction:"column",gap:2},n.createElement(s.z,{onClick:()=>e.handleClick(o.VP.SignIn),width:"full"},"Sign in"),n.createElement(a.k,{align:"center",justify:"center",gap:1},n.createElement(r.x,{as:"span",variant:"text-xsmall",color:"base-subdued"},"Don't have an account?"),n.createElement(s.z,{onClick:()=>e.handleClick(o.VP.SignUp),variant:"ghost",size:"small"},"Sign up for free")))},28077:(e,t,i)=>{i.d(t,{w:()=>l});var n=i(92379),a=i(31702),r=i(83542),o=i(7889),s=i(78703);const l=e=>{const t="docs.google.com"===e.domain?"Google Docs":e.domain,{enabledInConfig:i,siteSwitcherChecked:l,favicon:c}=e,d=l.checked&&i,u=i?"Check for writing suggestions":"Checking is not supported";return n.createElement(o.Z,{label:`${u} on ${t}`,isSelected:d,isDisabled:!i,onChange:()=>{l.update(!d)},alignCenter:e.centeredToggle,"data-grammarly-part":"siteSwitcher"},n.createElement(a.x,{as:"span",variant:"text-small","data-test-attr":"siteControlsLabelText"},u," ",n.createElement("br",null),n.createElement(a.x,{as:"span",variant:"text-small",style:{display:"block",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",maxWidth:250}},"on"," ",n.createElement(a.x,{as:"span",variant:"text-small",weight:"semibold"},c&&n.createElement(r.x,{className:s.favicon},n.createElement("img",{width:"16px",height:"16px",src:c,alt:""})),t))))}},63202:(e,t,i)=>{i.d(t,{Z:()=>b});var n=i(58303),a=i(90023),r=i(92379),o=i(44071),s=i(90572),l=i(14969),c=i(31702),d=i(85837),u=i(39963),p=i(38364),g=i(62805),h=i(33839),m=i(16381),f=i(74609),v=i(80871);const b=({user:e,isAssistant:t,openSubscriptionDialog:i,hasInProductDiscountSpecialOffer:b,uphookConfiguration:S,trackUphookHubEvent:w,experimentClient:y})=>{const{registrationDate:E,anonymous:k,premium:C}=e,_=(0,p.p6)(E);if(k||C)return null;const A=(0,r.useMemo)((()=>(0,a.zG)(b,n.tS((e=>e?n.G("discountPro"):n.G("pro"))),n.wp((()=>n.G("pro"))))),[b]),I=()=>{w("show",S),(0,a.zG)(A,n.UI((e=>{(0,g.nE)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e,experimentClient:y}),(0,u.Tb)().upgradeHooks.showUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)})))};r.useEffect((()=>{(0,a.zG)(A,n.UI((()=>{if((0,m.G6)()){const e=(0,o.R)(document,"visibilitychange").pipe((0,s.h)((()=>"visible"===document.visibilityState))).subscribe((()=>{I()}));return()=>e.unsubscribe()}return I(),()=>{}})))}),[A]);const T=r.useCallback((()=>{S.pipe((0,s.h)(n.pC),(0,l.P)()).subscribe((e=>{i({overrideUrl:e.value.content.ctaUrl,utmCampaign:"extensionSettingsToolbar"})})),w("click",S),(0,a.zG)(A,n.UI((e=>{(0,g.Qi)(f.J,{placement:t?"assistantSettings":"settingsToolbar",bannerType:"GoPremiumToEnableAdvancedFixes",upgradeHookName:"extensionSettings",upgradeHookSlot:t?"assistantSettingsPopup":"browserToolbar",upgradeHookVariant:e,experimentClient:y}),(0,u.Tb)().upgradeHooks.clickUpgradeHook("extensionSettings",t?"assistantSettingsPopup":"browserToolbar",e)}))),(0,u.Tb)().userUpgradeClick("settingsToolbar")}),[A]),x=_?r.createElement(c.x,{as:"span",variant:"text-small","data-test-attr":"checked_since",color:"base-default"},"Grammarly has been correcting your text since ",_,"."):null;return r.createElement("div",{className:t?v.borderTop:void 0},r.createElement("div",{...(0,d.Sh)(v.content,t?void 0:v.borderBottom)},x,r.createElement(h.Y,{onClick:T,className:v.premiumButton,dataGrammarlyPart:"settings-upgrade-button",cta:(0,a.zG)(S.get(),n.UI((e=>e.content.ctaCopy)),n.wp((()=>(0,a.zG)(b,n.tS((e=>e?n.G("Get 50% off Pro"):n.YP))))),n.fS((()=>"Get Pro")))})))}},62531:(e,t,i)=>{i.d(t,{I:()=>c});var n=i(92379),a=i(6882),r=i(6188),o=i(32295),s=i(47052),l=i(44402);const c=e=>{var t,i,c;return n.useEffect((()=>{e.trackPopupShow()}),[]),n.createElement("div",{className:l.wrapper},n.createElement(s.h,null),n.createElement("div",{className:l.content},n.createElement(a.h4,{sanitizedTitle:r.c.sanitizeSuspendTitle(null===(t=e.popupDynamicConfig)||void 0===t?void 0:t.popupTitleHTML)}),n.createElement(a.uT,{sanitizedBody:r.c.sanitizeSuspendBody(null===(i=e.popupDynamicConfig)||void 0===i?void 0:i.popupBodyHTML)}),n.createElement(o.StandWithUkraineSuspendFooter,{onLearnMore:e.onLearnMore,sanitizedLearnMoreButtonLabelHTML:r.c.sanitizeSuspendLearnMoreLabel(null===(c=e.popupDynamicConfig)||void 0===c?void 0:c.popupLearnMoreButtonLabelHTML)})))}},79477:(e,t,i)=>{i.d(t,{X:()=>p,n:()=>g});var n=i(20161),a=i(50750),r=i(59179),o=i(87846),s=i(25693),l=i(15362),c=i(19724),d=i(86130),u=i(43795);const p=(e,t)=>e.view().pipe(n.w((e=>{var i;const n=null!==(i=e.activeTab)&&void 0!==i?i:l.pN,p=(0,s.KK)(n.url);return a.D((async()=>({pageConfig:await t.api.getPageConfig(p,n.url)}))()).pipe(r.U((({pageConfig:t})=>{var i,a,r,s,h,m,f,v,b;const S=null!==(i=e.extensionSettings)&&void 0!==i?i:l.he;return{user:null!==(a=e.user)&&void 0!==a?a:c.n.defaultUser,tabs:{active:n},dynamicConfig:null!==(r=e.dynamicConfig)&&void 0!==r?r:d.cS,config:{...t,domain:p},settings:g(S,p),dapi:null!==(s=e.dapi)&&void 0!==s?s:{},connection:null!==(h=e.connection)&&void 0!==h?h:{},activeTab:n,installSource:null!==(m=e.extensionInstallSource)&&void 0!==m?m:"unknown",growth:null!==(f=e.growthSettings)&&void 0!==f?f:{},extensionFSM:null!==(v=e.extensionFSM)&&void 0!==v?v:l.uS,sessionTimeoutValue:(0,u.GH)(e[o.N]),passport:null!==(b=e.passport)&&void 0!==b?b:{}}})))})));function g(e,t){var i;const n=e[t],a=null===(i=null==n?void 0:n.enabled)||void 0===i||i;return{...e.common,...n,enabled:a}}},74609:(e,t,i)=>{i.d(t,{J:()=>a});var n=i(29483);const a=new Proxy({},{get:(e,t)=>(...e)=>(0,n.OB)().bgRpc.api.trackGnar(t,e)})},72526:(e,t,i)=>{i.d(t,{yw:()=>g});var n=i(56863),a=i(62067),r=i(37087),o=i(74609),s=i(35248),l=i(16381);let c;function d(){return null!=c?c:c={permissions:["cookies"],origins:[(0,l.Vi)()]}}var u=i(95404),p=i(72965);function g({dynamicConfig:e,checkPermissions:t=(()=>async function(e){var t;if(!0!==(null==e?void 0:e.requireAuthCookieAccess))return!0;const i=null===(t=(0,r.OB)().browserApi.permissions)||void 0===t?void 0:t.contains;if(!i)return!0;return await i(d())}(e)),requestPermissions:i=(()=>async function(e){var t;if(!0!==(null==e?void 0:e.requireAuthCookieAccess))return!0;const i=null===(t=(0,r.OB)().browserApi.permissions)||void 0===t?void 0:t.request;if(!i)return!0;return await i(d())}(e)),actions:l}={}){const{bindSignIn:c,...g}=(0,p.z)({checkPermissions:t,requestPermissions:i});return{...g,bindSignIn:c,onSignIn:c((e=>{const t={utmCampaign:"toolbarMenu",utmSource:"signinHook"};if((0,s.B)((0,r.OB)().experimentClient)){(0,r.OB)().bgRpc.api.launchAuthFlow(!1,{...(0,n.xW)(e),...(0,u.OC)((0,u.g7)(t))})}else{const i=(0,r.OB)().browserApi;i.beginOAuth?i.beginOAuth():i.openUrl((0,u.s7)({...e,action:a.VP.SignIn},t))}null==l||l.beginAuth(),o.J.signInButtonClick("toolbar")})),onSignUp:c(((e,t)=>{const i={utmCampaign:"toolbarMenu",utmSource:"signupHook"};if((0,s.B)((0,r.OB)().experimentClient)){(0,r.OB)().bgRpc.api.launchAuthFlow(!0,{...(0,n.xW)(e),...(0,u.OC)((0,u.g7)(i))})}else{const n=(0,r.OB)().browserApi;if(n.beginOAuth)n.beginOAuth();else{const r=(0,u.Xc)({...e,action:a.VP.SignUp},i),o="webstore"===t?(0,u.My)(r,t):r;n.openUrl(o)}null==l||l.beginAuth(),o.J.signUpButtonClick("toolbar")}}))}}},32626:(e,t,i)=>{i.d(t,{z:()=>n});const n=e=>{const{setDAPIProp:t,fetchAllDAPIPropsRateLimited:i}=e.api;return{reloadPropsRateLimited:async()=>{await i()},modifyCheetahOnboardingState:async e=>{const n=(await i())["cheetah:onboardingState"]||"";await t("cheetah:onboardingState",e(n))},changeStrongDialect:async e=>{await t("dialectStrong",e)},setEmogenieEmojiState:async e=>{await t("emogenieEmojiState",e)},setSerengetiState:async e=>{await t("serengetiState",e)},setGetStartedChecklistState:async e=>{await t("DN:getStartedChecklistSettings",e)},setPersonalizedInsightsConsentState:async e=>{await t("personalizedInsightsConsent:onboardingState:extension",e)}}}},35248:(e,t,i)=>{i.d(t,{B:()=>a});var n=i(70843);const a=e=>"test"===(null==e?void 0:e.getTreatment(n.p.OAuth2Phase2Interactive))},44279:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(92379),a=i(63349);if(6168!=i.j)var r=i(83542);if(6168!=i.j)var o=i(36279);if(6168!=i.j)var s=i(64803);var l=i(8842),c=i(61483);if(6168!=i.j)var d=i(42496);const u=6168!=i.j?({onClose:e,maxWidth:t=400,arrowPosition:i="none",animateIn:l,children:c})=>n.createElement(r.x,{elevation:"high",borderColor:"base-subdued",borderRadius:2,padding:8,paddingBottom:6,className:a.ux.joinClasses([m.container,l&&m.containerAnimateIn]),style:{maxWidth:t},bgColor:"background-base-default","data-arrow-position":i},"none"!==i&&n.createElement("svg",{className:m.arrow,"aria-hidden":"true",width:"14",height:"14",viewBox:"0 0 14 14","data-arrow-position":i},n.createElement("polyline",{points:"0,0 7,7 14,0"})),n.createElement(d.z,{onClick:e,variant:"tertiary",size:"small",className:m.closeButton},n.createElement(o.J,{icon:s.V,size:"small",accessibilityLabel:"Close"})),c):null,p={animationName:a.ux.keyframes({"0%":{scale:0},"100%":{scale:1}}),animationDuration:"0.3s",animationTimingFunction:"ease-out",transformOrigin:"bottom right",$nest:{"@media (prefers-reduced-motion)":{animation:"none"},'&[data-arrow-position="top-right"], &[data-arrow-position="right-top"]':{transformOrigin:"top right"}}},g={padding:a.ux.important(a.ux.rem(l.F2)),position:a.ux.important("absolute"),top:a.ux.rem(l.x),right:a.ux.rem(l.x)},h={position:"absolute",fill:c.I.Background.Base.Default,stroke:c.I.Border.Base.Subdued,strokeWidth:1,$nest:{'&[data-arrow-position="top-right"]':{transform:"rotate(180deg)",bottom:"100%",right:a.ux.rem(l.qp)},'&[data-arrow-position="right-top"]':{transform:"rotate(-90deg)",left:"100%",top:a.ux.rem(l.mh)},'&[data-arrow-position="right-bottom"]':{transform:"rotate(-90deg)",left:"100%",bottom:a.ux.rem(l.mh)},'&[data-arrow-position="bottom-right"]':{top:"100%",right:a.ux.rem(l.qp)}}},m=a.ux.stylesheet({container:[{position:"relative",display:"inline-block",minWidth:200}],containerAnimateIn:[p],arrow:[h],closeButton:[g]})},60508:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(92379),a=i(63349),r=i(50635),o=i(36279),s=i(69554),l=i(52348);const c=({title:e,titleIcon:t,headerImage:i,centerContent:l,contentGap:c=3,children:u})=>{if(d(u))throw new Error("GDS Button components are not allowed as children because they currently do not work with keyboard navigation in Shadow DOM. Please use universal/cs/ui/components/popups/button/Button instead.");return n.createElement(r.k,{align:l?"center":void 0,direction:"column",gap:c,className:p.maxWidthContainer},i,n.createElement(r.k,{gap:2,className:p.maxWidthContainer},t&&n.createElement(o.J,{icon:t,size:"large",accessibilityLabel:"",className:p.titleIcon}),n.createElement(s.X,{as:"h2",variant:"heading-xsmall",className:a.ux.joinClasses([p.titleHeading,l?p.titleCentered:void 0])},e)),u)};function d(e){return!!e&&(Array.isArray(e)?e.some(d):!!n.isValidElement(e)&&(e.type===l.z||d(e.props.children)))}const u={textAlign:a.ux.important("center")},p=a.ux.stylesheet({maxWidthContainer:[{maxWidth:"100%"}],titleIcon:[{minWidth:24}],titleHeading:[{overflow:"hidden",textOverflow:"ellipsis"}],titleCentered:[u]})},46599:(e,t,i)=>{i.r(t),i.d(t,{DataControlPopup:()=>g,DataControlPopupDefault:()=>p});var n=i(92379),a=i(36279),r=i(16475),o=i(50635),s=i(19347);if(6168!=i.j)var l=i(90189);var c=i(42496);if(6168!=i.j)var d=i(44279);var u=i(60508);const p=e=>n.createElement(u.Z,{title:"Grammarly isn't active yet!",headerImage:n.createElement(a.J,{icon:r.F,size:"large",accessibilityLabel:""}),centerContent:!0},n.createElement(c.z,{onClick:e.openAcceptPage,width:"full"},n.createElement(o.k,{gap:2,align:"center"},n.createElement("span",null,"Activate Grammarly"),n.createElement(a.J,{icon:s.n,size:"small",variant:"inverse",accessibilityLabel:""}))));class g extends n.Component{constructor(){super(...arguments),this.openAcceptPage=()=>{(0,l.OB)().bgRpc.api.openDataControl()}}render(){return n.createElement(d.Z,{onClose:this.props.remove,arrowPosition:this.props.isFlipped?"top-right":"bottom-right",animateIn:!0},n.createElement(p,{openAcceptPage:this.openAcceptPage}))}}},28240:(e,t,i)=>{i.d(t,{w:()=>o});var n=i(92379),a=i(4026),r=i(94e3);class o extends n.Component{constructor(e){super(e)}render(){const{institutionName:e,ssoUrl:t}=this.props;return n.createElement("div",{className:(0,a.cs)(r.managedSSOControl,r.settings)},n.createElement("div",{className:r.illustration}),n.createElement("p",{className:r.title},"Grammarly isn’t active yet!"),n.createElement("p",{className:r.text},"To begin using Grammarly, you need to sign in with SSO under the ",n.createElement("b",null,e)," ","organization."),n.createElement("div",{className:r.signInWithSSO},n.createElement("a",{tabIndex:-1,target:"__blank",href:t},"SIGN IN WITH SSO")))}}},4026:(e,t,i)=>{i.d(t,{Jt:()=>o,Ku:()=>c,Ne:()=>l,ZT:()=>h,cn:()=>a,cs:()=>p,k3:()=>s,og:()=>r,on:()=>d,rR:()=>g});var n=i(31272);function a(e,t){if(e){if(-1===t.indexOf(" "))return e.classList.add(t);{const i=t.split(" ");for(let t=0;t<i.length;t++)e.classList.add(i[t])}}}function r(e,t,i){t?a(e,i):function(e,t){if(e&&e.classList)e.classList.remove(t)}(e,i)}function o(e,t){let i=e.parentNode;for(;null!==i;){if(c(i,t))return i;i=i.parentNode}return!1}function s(e){let t=e.parentNode;for(;null!==t;){if(l(t))return t;t=t.parentNode}return!1}function l(e){return"true"===e.contentEditable||"plaintext-only"===e.contentEditable}function c(e,t){if(!e)return!1;const i=e.matches||e.msMatchesSelector||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector;return!!i&&i.apply(e,[t])}function d(e,t=null,i){return this.addEventListener(e,t,i),{off:()=>u.apply(this,[e,t,i])}}function u(e,t,i){this.removeEventListener(e,t||null,i)}function p(...e){return e.reduce(((e,t)=>e.concat((0,n.Kn)(t)?Object.keys(t).filter((e=>t[e])):t)),[]).filter((e=>Boolean(e))).join(" ")}function g(e=document){if(void 0===e.body.style.transform){if(void 0!==e.body.style.WebkitTransform)return"WebkitTransform";if(void 0!==e.body.style.MozTransform)return"MozTransform"}return"transform"}function h(e,t={}){const i=document.createEvent("CustomEvent");i.initCustomEvent(e+"-gr",!0,!0,t),document.dispatchEvent(i)}},3351:(e,t,i)=>{i.d(t,{T:()=>s,q:()=>o});var n=i(90023),a=i(58303),r=i(14325);const o=e=>(0,n.zG)(e,a.tS((e=>r.ab.findFirst(e.content,"nativeInlineCardContent",r.ab.TreeTraversal.PreOrder)))),s=(0,n.ls)(o,a.pC)},98496:(e,t,i)=>{i.d(t,{M:()=>a});var n=i(92379);class a extends n.Component{constructor(){super(...arguments),this.handleClick=e=>{e&&(e.isTrusted||this.props.skipTrustedCheck)&&(e.stopPropagation(),e.stopImmediatePropagation(),this.props.clickHandler(e))}}componentDidMount(){this.wrapperRef&&this.wrapperRef.addEventListener("click",this.handleClick)}componentWillUnmount(){this.wrapperRef&&this.wrapperRef.removeEventListener("click",this.handleClick)}render(){return n.createElement("div",{ref:e=>this.wrapperRef=e,style:this.props.style||{display:"initial"},className:this.props.className,"data-grammarly-part":this.props.dataGrammarlyPart},this.props.children)}}},86837:(e,t,i)=>{i.d(t,{a:()=>a});var n=i(40594);const a=e=>{const t=n.Y.create("AuthActions");return{beginAuth:()=>{t.debug("beginAuth"),e.patch({authenticationStarted:(new Date).toISOString()})}}}},89512:(e,t,i)=>{i.d(t,{j:()=>n});const n=e=>{let t;const i=()=>(t||(t={networkOffline:!self.navigator.onLine,online:!0}),t),n=async()=>{const{connection:t}=await e.get(["connection"]);return null!=t?t:i()};return{initConnection:async()=>{const{connection:t}=await e.get(["connection"]);t||await e.patch({connection:i()})},modifyConnection:async t=>{const i=await n();return e.patch({connection:{...i,...t}})},setOffline:async t=>{const i=await n();if(i.networkOffline!==t)return e.patch({connection:{...i,networkOffline:t}})}}}},24534:(e,t,i)=>{i.d(t,{k:()=>n});const n=e=>({modifyEnvironment:async t=>{const{environmentState:i}=await e.get(["environmentState"]);return e.patch({environmentState:{...i,...t}})}})},15933:(e,t,i)=>{i.d(t,{q:()=>r});var n=i(84674),a=i(15362);const r=e=>({gdocsOptedIn:()=>{return e.patch({extensionSettings:(0,n.J_)(null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:a.he,"docs.google.com",{enabled:!0,disabledDate:void 0})});var t}})},31715:(e,t,i)=>{i.d(t,{R:()=>r});var n=i(13162),a=i(84674);function r(e){const t=()=>e.view("extensionSettings").view((e=>{var t,i;return null!==(i=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.keyboardShortcuts)&&void 0!==i?i:{openAssistant:(0,n.e)("openAssistant"),closeAssistant:(0,n.e)("closeAssistant"),openVBar:(0,n.e)("openVBar")}}));return{getKeyboardShortcuts:t,setKeyboardShortcut:i=>{const n=(0,a.gC)(e),r=t().get();return e.patch({extensionSettings:(0,a.k1)(n(),{keyboardShortcuts:{...r,...i}})})}}}},42900:(e,t,i)=>{i.d(t,{QP:()=>u});var n=i(27982),a=i(11816),r=i(28898),o=i(84674),s=i(33976),l=i(20905),c=i(31715);function d(e,t,i,a){var l;void 0===i&&(i=(0,o.gC)(e)),void 0===a&&(a=null===(l=(0,r.O)().experimentClient)||void 0===l?void 0:l.isGateEnabled(n.K.CheckTextWhenTurnOnAAA));const c=i(),d=function(e){var t;return null!==(t=e.common.alwaysAvailableAssistantSettings)&&void 0!==t?t:s.Nr}(c);return e.patch({extensionSettings:(0,o.k1)(c,{alwaysAvailableAssistantSettings:{...d,enabled:t},...a&&{isDesktopIntegrationEnabled:!t&&c.common.isDesktopIntegrationEnabled}})})}const u=e=>{const t=(0,o.gC)(e);return{toggleDefs:i=>e.patch({extensionSettings:(0,o.k1)(t(),{enabledDefs:i})}),toggleAutocorrect:i=>e.patch({extensionSettings:(0,o.k1)(t(),{autocorrectEnabled:i})}),toggleAlwaysAvailableAssistant:i=>d(e,i,t),toggleTouchTypist:i=>{var n;const r=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:a.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...r,enabled:i,snoozedUntil:null}})})},setTouchTypistToggledByUser:({userId:i,value:n})=>{var r,s,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:a.c,d=null!==(s=c.autoOptOutExperiment)&&void 0!==s?s:{},u={...null!==(l=d[i])&&void 0!==l?l:{},enabledToggledByUser:n};return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...d,[i]:u}}})})},toggleTouchTypistByUser:({enabled:i,userId:n})=>{var r,s,l,c;const d=t(),u=null!==(r=d.common.touchTypistSettings)&&void 0!==r?r:a.Y,p=null!==(s=d.common.touchTypistState)&&void 0!==s?s:a.c,g=null!==(l=p.autoOptOutExperiment)&&void 0!==l?l:{},h={...null!==(c=g[n])&&void 0!==c?c:{},enabledToggledByUser:!0};return e.patch({extensionSettings:(0,o.k1)(d,{touchTypistSettings:{...u,enabled:i,snoozedUntil:null},touchTypistState:{...p,autoOptOutExperiment:{...g,[n]:h}}})})},snoozeTouchTypist:()=>{var i;const n=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:a.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...n,enabled:!1,snoozedUntil:new Date((new Date).getTime()+l.xO).toISOString()}})})},setTouchTypistHotkey:({hotkey:i})=>{var n;const r=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:a.Y;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistSettings:{...r,hotkey:i}})})},incrementAccessibilityOnboardingAlertsCount:()=>{var i;const n=null!==(i=t().common.touchTypistState)&&void 0!==i?i:a.c,{accessibilityOnboardingAlertsCount:r=a.c.accessibilityOnboardingAlertsCount}=n;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...n,accessibilityOnboardingAlertsCount:r+1}})})},incrementTouchTypistUserAcceptedCount:()=>{var i;const n=null!==(i=t().common.touchTypistState)&&void 0!==i?i:a.c;return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...n,userAcceptedCount:Math.min(n.userAcceptedCount+1,3),lastUserAcceptedAt:(new Date).toISOString()}})})},setHasBeenAutoOptedOut:({userId:i,hasBeenAutoOptedOut:n})=>{var r,s,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:a.c,d=null!==(s=c.autoOptOutExperiment)&&void 0!==s?s:{},u={...null!==(l=d[i])&&void 0!==l?l:{},hasBeenAutoOptedOut:n};return e.patch({extensionSettings:(0,o.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...d,[i]:u}}})})},toggleCitationBuilderForDomain:({domain:i,enabled:n,pathName:a,inAllowList:r})=>{var l;const c=null!==(l=t().common.citationBuilder)&&void 0!==l?l:s.KC.empty;return e.patch({extensionSettings:(0,o.k1)(t(),{citationBuilder:{...c,domains:{...c.domains,[i]:{disabled:!n,toggleDate:(new Date).getTime(),togglePathName:a,inAllowList:r}}}})})},toggleTranslateOnboardingForDomain:({domain:i,enabled:n})=>{var a;const r=null!==(a=t().common.translateOnboarding)&&void 0!==a?a:s.aK.empty;return e.patch({extensionSettings:(0,o.k1)(t(),{translateOnboarding:{...r,domains:{...r.domains,[i]:{disabled:!n}}}})})},toggleSite:({enabled:i,domain:n,clickToRunEnabled:a})=>e.patch({extensionSettings:(0,o.J_)(t(),n,{enabled:i,disabledDate:!0===i?void 0:Date.now(),...void 0!==a?{clickToRunEnabled:a}:void 0})}),setKeyboardShortcut:t=>(0,c.R)(e).setKeyboardShortcut(t),toggleEnhancedScreenReaderUXSupport:i=>e.patch({extensionSettings:(0,o.k1)(t(),{isEnhancedScreenReaderUXSupported:i})})}}},55830:(e,t,i)=>{i.d(t,{q:()=>d});var n=i(86837),a=i(89512),r=i(24534),o=i(15933),s=i(44814),l=i(42900),c=i(18428);const d=e=>({quickSettings:(0,l.QP)(e),gdocs:(0,o.q)(e),settings:(0,c.C)(e),connection:(0,a.j)(e),tabs:(0,s.a)(e),environment:(0,r.k)(e),auth:(0,n.a)(e)})},18428:(e,t,i)=>{i.d(t,{C:()=>a});var n=i(84674);const a=e=>{const t=(0,n.gC)(e);let i=Promise.resolve();const a=async a=>{const r=i.then((async()=>{const i=t();Object.keys(a).every((e=>a[e]===i.common[e]))||await e.patch({extensionSettings:(0,n.k1)(i,a)})}));return i=r.catch((()=>{})),r};return{patchCommonSettings:a,setDesktopIntegration:e=>a({isDesktopIntegrationEnabled:e}),enableClickToRunOnAllSites:()=>a({clickToRunOnAllSites:!0}),enableHistoryLoggerUntil:e=>a({historyLoggerEnabledUntil:e}),disableHistoryLogger:()=>a({historyLoggerEnabledUntil:0}),enableAdvancedHistoryLoggerUntil:e=>a({advancedHistoryLoggerEnabledUntil:e}),disableAdvancedHistoryLogger:()=>a({advancedHistoryLoggerEnabledUntil:0}),disableOnTab:i=>e.patch({extensionSettings:(0,n.J_)(t(),i,{enabled:!1,disabledDate:Date.now()})}),toggleDebugMenu:(e=!0)=>a({isDebugMenuVisible:e}),toggleGOSDebugger:e=>a({gOSDebuggerEnabled:e}),setGOSAppletChannel:e=>a({gOSAppletChannel:e}),setGOSAssistantAppletUrl:e=>a({gOSAssistantAppletUrl:e})}}},44814:(e,t,i)=>{i.d(t,{a:()=>a});var n=i(25693);const a=e=>({enableOnceClickToRun:async()=>{const{clickToRunEnabledOnce:t,activeTab:i}=await e.get(["clickToRunEnabledOnce","activeTab"]);return e.patch({clickToRunEnabledOnce:{...null!=t?t:{},...i?{[i.id]:{[(0,n.KK)(i.url)]:!0}}:{}}})},setActiveTab:t=>e.patch({activeTab:t})})},33976:(e,t,i)=>{i.d(t,{G6:()=>d,KC:()=>a,Nr:()=>l,aK:()=>r,v3:()=>c});var n,a,r,o=i(12518),s=i(19724);!function(e){e.fromUserType=e=>{switch(e){case s.F.premium:return o.F2("premium");case s.F.registered:return o.F2("free");default:return o.t$("unknownUserType")}}}(n||(n={})),function(e){let t;!function(e){e.apa="apa",e.mla="mla",e.chicago="chicago"}(t=e.Style||(e.Style={})),e.empty={domains:{},onboardingVersionSeen:-1,style:t.apa}}(a||(a={})),function(e){e.empty={domains:{}}}(r||(r={}));const l={};var c;!function(e){let t;!function(e){e.SUGGESTED_TERM="suggestedTermOnboardingSeen",e.TERM_DETAILS="onboardingSeen"}(t=e.OnboardingSeenFor||(e.OnboardingSeenFor={})),e.empty={enabled:!0,[t.SUGGESTED_TERM]:!1,[t.TERM_DETAILS]:!1},e.get=t=>({...e.empty,...t})}(c||(c={}));const d=()=>({seen:{},accepted:{},detectedTones:{}})},47557:(e,t,i)=>{if(i.d(t,{BM:()=>m,IG:()=>v,Re:()=>f,Tv:()=>h,VD:()=>b,YN:()=>y,_N:()=>S,a2:()=>w,qw:()=>g}),6168!=i.j)var n=i(64271);if(6168!=i.j)var a=i(44071);if(6168!=i.j)var r=i(29479);if(3075==i.j)var o=i(954);if(3075==i.j)var s=i(59179);if(3075==i.j)var l=i(90572);if(6168!=i.j)var c=i(18647);if(3075==i.j)var d=i(45523);if(3075==i.j)var u=i(78767);if(6168!=i.j)var p=i(79707);function g(e){return(0,n.T)((0,a.R)(e,"focus").pipe((0,r.h)(!0)),(0,a.R)(e,"blur").pipe((0,r.h)(!1)))}function h(e){return e.nodeType===Node.ELEMENT_NODE}function m(e){return e.nodeType===Node.TEXT_NODE}function f(e){return e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement}function v(e,t){return d.x.create(e,{childList:!0,subtree:!0,attributes:!1}).pipe((0,o.O)(null),(0,s.U)((e=>{const i=Object.entries(t).reduce(((e,[t,i])=>({...e,[t]:i()})),{});return Object.values(i).filter(u.fQ).length===Object.keys(i).length?i:null})),(0,l.h)((e=>!!e)))}var b;function S(e,t,i){return n((0,c.Me)(t));function n(t){const i=t.elementFromPoint(e.left,e.top);if(!i)return!1;const n=a(i);if(null!==n)return n;const r=t.elementsFromPoint(e.left,e.top);for(const e of r){if(e===i)continue;const t=a(e);if(null!==t)return t}return!1}function a(e){var a;return!(t!==e&&!t.contains(e))||((null==i?void 0:i(e))?null:!!(null===(a=e.shadowRoot)||void 0===a?void 0:a.elementsFromPoint)&&n(e.shadowRoot))}}function w(e){if(e.endsWith("px")){const t=e.slice(0,-2),i=Number(t);return(0,p.hj)(i)?i:null}return null}function y(e){var t;const i=(null!==(t=e.ownerDocument.defaultView)&&void 0!==t?t:self).getComputedStyle(e).zIndex,n="auto"!==i&&parseInt(i||"0",10)||null;return null!==n?n:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?y(e.parentNode):null}!function(e){e[e.Escape=27]="Escape",e[e.Return=13]="Return",e[e.Tab=9]="Tab",e[e.RightArrow=39]="RightArrow",e[e.UpArrow=38]="UpArrow",e[e.DownArrow=40]="DownArrow"}(b||(b={}))},4972:(e,t,i)=>{var n;i.d(t,{y:()=>n}),function(e){e.gdocs="gdocs",e.other="other"}(n||(n={}))},72965:(e,t,i)=>{i.d(t,{z:()=>r});var n=i(92379);const a=i(40594).Y.create("Hooks.Auth.useSignIn");function r({checkPermissions:e,requestPermissions:t}){const[i,r]=(0,n.useState)(),o=Boolean(i),[s,l]=(0,n.useState)(!1);return{needPermissions:o,requestingPermissions:s,bindSignIn:t=>(i,n)=>{o||s||e().then((e=>{e?(r(void 0),t(i,n)):r((()=>{t(i,n)}))})).catch((e=>{a.warn(`There was an error during checkPermissions: ${e}`)}))},onRequestPermissions:()=>{s||(l(!0),t().then((e=>{l(!1),e&&(r(void 0),null==i||i())})))}}}},72032:(e,t,i)=>{i.d(t,{T:()=>a,n:()=>r});var n=i(18473);function a(e){return(0,n.Y)()?e:"grammarly"}function r(){return(0,n.Y)()?"Superhuman Go":"Grammarly"}},1527:(e,t,i)=>{i.d(t,{m:()=>a,u:()=>r});var n=i(92379);const a=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"29.714",height:"26.286",x:"2.286",y:"8",fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",rx:"3.333"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M2.286 11.333A3.333 3.333 0 0 1 5.619 8h23.048A3.333 3.333 0 0 1 32 11.333v2.953H2.286v-2.953Z"}),n.createElement("ellipse",{cx:"5.86",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"7.794",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("ellipse",{cx:"9.728",cy:"11.108",fill:"#1C1C1C",rx:".585",ry:".571"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M8.264 21.143h17.583M8.264 27.067h17.583"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M38.518 13.857c0 5.572-4.517 10.09-10.09 10.09-5.572 0-10.089-4.518-10.089-10.09s4.517-10.09 10.09-10.09c5.572 0 10.089 4.518 10.089 10.09Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.182 7.076a.336.336 0 0 1 .582 0l6.014 10.415a.336.336 0 0 1-.291.505H22.46a.336.336 0 0 1-.291-.505l6.013-10.415Z"}),n.createElement("path",{stroke:"#1C1C1C",strokeWidth:"1.25",d:"M28.61 10.389v4.034M28.61 15.428v.968"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"})))),r=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none"},n.createElement("g",{clipPath:"url(#a)"},n.createElement("rect",{width:"23.771",height:"21.029",x:"1.829",y:"6.4",fill:"#fff",stroke:"#1C1C1C",rx:"2.667"}),n.createElement("path",{fill:"#fff",stroke:"#1C1C1C",d:"M1.829 9.067A2.667 2.667 0 0 1 4.495 6.4h18.438A2.667 2.667 0 0 1 25.6 9.067v2.361H1.829V9.067Z"}),n.createElement("ellipse",{cx:"4.688",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"6.235",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("ellipse",{cx:"7.783",cy:"8.886",fill:"#1C1C1C",rx:".468",ry:".457"}),n.createElement("path",{stroke:"#1C1C1C",d:"M6.61 16.914h14.067M6.61 21.654h14.067"}),n.createElement("path",{fill:"#FFDC85",stroke:"#1C1C1C",d:"M30.814 11.086a8.071 8.071 0 1 1-16.143 0 8.071 8.071 0 0 1 16.143 0Z"}),n.createElement("path",{fill:"#FCFCFC",stroke:"#1C1C1C",d:"M22.546 5.66a.269.269 0 0 1 .465 0l4.811 8.333a.269.269 0 0 1-.233.403h-9.621a.269.269 0 0 1-.233-.403l4.81-8.332Z"}),n.createElement("path",{stroke:"#1C1C1C",d:"M22.888 8.311v3.228M22.888 12.343v.774"})),n.createElement("defs",null,n.createElement("clipPath",{id:"a"},n.createElement("path",{fill:"#fff",d:"M0 0h32v32H0z"}))))},74316:(e,t,i)=>{i.d(t,{K:()=>a});var n=i(92379);const a=n.memo((function(e){return n.createElement("svg",{className:e.className,width:e.width,height:e.height,viewBox:"0 0 34 33",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M20.6126 4.92236H4.92251C2.75616 4.92236 1 6.67852 1 8.84486V27.9672C1 30.1335 2.75616 31.8897 4.92251 31.8897H20.6126C22.779 31.8897 24.5351 30.1335 24.5351 27.9672V8.84486C24.5351 6.67852 22.779 4.92236 20.6126 4.92236Z",fill:"white",stroke:"#1C1C1C",strokeLinecap:"round"}),n.createElement("path",{d:"M5.90625 18.1616H12.7706",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M5.90625 24.0454H19.6351",stroke:"#1C1C1C",strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M32.8704 10.8248C32.8704 16.2173 28.4585 20.6126 23.0456 20.6126C21.0065 20.6126 19.1898 20.0216 17.6327 18.9505C15.0004 17.2146 13.2578 14.1859 13.2578 10.7878C13.2578 5.39529 17.6698 1 23.0827 1C28.4956 1 32.8704 5.3953 32.8704 10.8248Z",fill:"#FFDC85",stroke:"#1C1C1C",strokeMiterlimit:"10"}),n.createElement("path",{d:"M23.0625 5.16846V10.8071H27.2302",stroke:"#1C1C1C",strokeLinecap:"round"}))}))},63189:(e,t,i)=>{i.d(t,{X:()=>n});i(77115);const n=(...e)=>{}},13736:(e,t,i)=>{i.d(t,{E:()=>n});var n,a=i(44071),r=i(90572),o=i(44675),s=i(20905),l=i(40594),c=i(24183),d=i(29483);!function(e){const t=l.Y.create("Reports");function i(e){var t;const i=null===(t=self.document)||void 0===t?void 0:t.createElement("a");i.href="data:application/octet-stream,"+encodeURIComponent(function(e){const t=e=>{try{return JSON.stringify(e)}catch(t){return String(e)}};return[["Level","Logger","Timestamp","Message"].join("\t"),...e.map((e=>{const i=[e.level,e.loggerName,new Date(e.timestamp).toISOString(),e.message];return e.data&&i.push(t(e.data)),e.exception&&i.push(t(e.exception)),i.join("\t")}))].join("\n")}(e)),i.target="_blank",i.download="grammarly-logs.tsv",i.click()}async function n(e){if(t.debug("start download debug reports"),!(0,d.OB)().historyLogsService.isHistoryEnabled())return t.debug("debug reports feature is not enabled"),alert("Logging is not enabled");if(!self.confirm(c.o1))return;t.debug("confirm download debug reports");const n=[];e.sort((e=>e.envName===(0,d.OB)().context?1:-1));try{await(0,o.Fb)(s.E0,u())}catch(e){t.warn("cannot get latest app state",e)}for(const t of e){const e=await t.getLogs();n.push(...null!=e?e:[])}n.sort(((e,t)=>e.timestamp-t.timestamp)),i(n)}async function u(){t.info("latest experiments state",await(0,d.OB)().bgRpc.api.getExperimentTreatment()),t.info("latest storage state",await(0,d.OB)().browserApi.preferences.getAll()),t.info("browser info",(0,d.OB)().browserApi.getBrowserInfo())}e.download=n,e.initKeyboardShortcutHandler=function(e){return(0,a.R)(self,"keydown").pipe((0,r.h)((e=>"KeyS"===e.code&&e.altKey&&e.shiftKey&&(e.ctrlKey||e.metaKey)))).subscribe((()=>{n(e)}))},e.logLatestState=u}(n||(n={}))},19523:(e,t,i)=>{i.d(t,{Ng:()=>r,WY:()=>s,ZD:()=>o});var n=i(16381),a=i(19724);const r=e=>{const t=a.n.getType(e);return"registered"===t?"free":t},o=e=>{return{clientVersion:e.version,platformVersion:"",application:e.domain,browser:e.systemInfo.browser.name,os:(t=e.systemInfo.os,t.isWindows?"windows":t.isMac?"mac":t.isChromeOS?"chromeos":"other"),userType:e.userType,team:"browserextensions"};var t},s=e=>{const t=new URL((0,n.Um)().grammarlyEmployeesBugReportsUrl);return Object.entries(e).forEach((([e,i])=>{i&&t.searchParams.set(e,i)})),t.toString()}},43795:(e,t,i)=>{i.d(t,{GH:()=>l,Xv:()=>s,dU:()=>c,hG:()=>d,n1:()=>o});var n=i(66798),a=i(90189),r=i(90595);const o=2147483647;function s(e={enabled:!1},t){const i=t||(0,a.OB)().experimentClient;return e.enabled&&(null==i?void 0:i.isGateEnabled(r.K.SessionTimeout))}function l(e){try{return JSON.parse(e).refresh_token_expires_at}catch(e){return}}function c(e){if(!e)return!1;return e-Date.now()<=n.p7}function d(e){return e-Date.now()-n.p7}},57401:(e,t,i)=>{var n=i(29929),a=i(7278)(n);a.push([e.id,"._z3YOv-textBox{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;background:#f9faff;border:1px solid #e7e9f5;box-sizing:border-box;border-radius:4px;padding:10px 8px;overflow-y:auto;cursor:text;width:100%;height:100%;}._z3YOv-textBox:empty:before{font-feature-settings:'ss03' on;font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:14px;line-height:21px;content:attr(data-placeholder)}",""]),a.locals={textBox:"_z3YOv-textBox"},e.exports=a},25640:e=>{e.exports={ideateButton:"_ErYR",ideateButtonIcon:"i8HXG",spin:"CSZH1"}},66886:e=>{e.exports={settingsContentWrapper:"Pjkoe",ghostContainer:"T3SqS",ghostImage:"W2noN",ghostSwitcher:"TDKhQ",footer:"_2SJl",footer_btn_container:"Xfuqm",footer_btn_container_ghost:"UK8mD Xfuqm",footer_btn:"zzsGE",footer_icon_home:"fjYLw"}},44114:e=>{e.exports={heading:"RDHDg",labelsFont:"ChkL9"}},39991:e=>{e.exports={viewAnnouncer:"I0c5l"}},75607:e=>{e.exports={link:"QgFSd",externalLink:"oGmOe",icon:"i3roU",gmail:"h0anR",outlook:"NM8XU",gdocs:"Y9XfU",spin:"YUQEk"}},9838:e=>{e.exports={progressBarBg:"Hz_iW",progressBar:"JxiOG"}},97579:e=>{e.exports={singleCardAssistant:"XPx7S",singleCardAssistantNativeContentWithPadding:"He99k"}},24044:e=>{e.exports={getStartedChecklist:"QE3tb",logo:"DOz7G",title:"CzlXc",progressCaption:"TKilD"}},70411:e=>{e.exports={getStartedUseCases:"V1X0D",copyContainer:"AN8Cu",title:"jjHIP",subtitle:"gjGEx",ctaContainer:"s7nMi",ctaCaption:"BJWKo",ctaButtons:"SWGns",externalLink:"JLzQ9",icon:"DhhQ7",gmail:"hRR0U",outlook:"lnWHG",gdocs:"b0ty6",word:"eHkAg",slack:"OppdY",teams:"Hfv16",linkedIn:"hc5LW"}},24938:e=>{e.exports={cardList:"O6x_6",cardListFooterDynamic:"NzU4C",cardListFooterStatic:"kdk1x",cardListFooterAnimate:"CUEf1",upgradeHookWrapper:"fpqSf",assistant:"ziFUs",dragging:"dl2Z_",mainView:"OfKqp"}},16726:e=>{e.exports={emogenieViewOverlayHeader:"saNAB",emogenieViewOverlayHeaderBetaBadge:"J16CK"}},84241:e=>{e.exports={footerButton:"j5lp5",feedbackButton:"_i7kC"}},55260:e=>{e.exports={actions_hovered:"FONqd",header:"uDOFr",draggableWrapper:"rjQy5",draggable:"P3jaK",headerActions:"Xtr7I",headerActionBtnProofitIcon:"b5yo3",headerActionBtnGoalsIcon:"pl7ek",logoscore_fadein:"tUJui",fadein:"AQJV1",logoscore_fadeout:"chyj0",fadeout:"ooxFJ",logo_score:"RLHcp",spin:"g0xkj"}},38406:e=>{e.exports={insight:"vaGfd",insight__inline_icon:"M5fov",insight__inline_text:"NodQp"}},98583:e=>{e.exports={predictions:"zAvBV",predictions__header:"p82xz",predictions__card:"ZuLGb",counterContainer:"KwKbD",predictions__zero_text:"IVxiZ",predictions__off_brand:"HrjP2"}},8100:e=>{e.exports={relatedSuggestionsTitle:"AP_Yd"}},26050:e=>{e.exports={viewOverlay:"CpaDC",content:"BWu_L",footer:"Nfocm",viewOverlayGoBack:"EBOfD",defaultViewOverlayPanel:"TFghg",gradientViewOverlayPanel:"a2q6L",proofitViewOverlayPanel:"vCO8v",defaultViewOverlayHeader:"U8zS8",defaultViewOverlayContent:"Z9WSl",gradientViewOverlayContent:"sxmDB",proofitViewOverlayContent:"_nDhb",logo:"OtV3S",proofitViewOverlayHeader:"HuIOP",proofitViewOverlayHeaderBetaBadge:"PUb7a"}},25768:e=>{e.exports={viewOverlay:"snX4b",content:"fSzZu",footer:"Y8cpA",viewOverlayGoBack:"yEi_t",defaultViewOverlayPanel:"aPyGs",gradientViewOverlayPanel:"gbwcW",settingsViewOverlayPanel:"Rudrm",defaultViewOverlayHeader:"_tUap",defaultViewOverlayContent:"Cs_VJ",gradientViewOverlayContent:"c4WjP",settingsViewOverlayContent:"ZtK1f",logo:"_kPSX",settingsViewDoneButton:"xVshA"}},99438:e=>{e.exports={viewOverlay:"Gsb9P",content:"_HIip",footer:"EZP9j",viewOverlayGoBack:"oEefg",defaultViewOverlayPanel:"jAeU3",gradientViewOverlayPanel:"rIqVr",defaultViewOverlayHeader:"h1FQ0",defaultViewOverlayContent:"YsrUq",gradientViewOverlayContent:"Nc28X",logo:"cMPwC"}},97774:e=>{e.exports={compactSuccessLens:"lP637",compactSuccessLensContainer:"FK4Ma"}},42087:e=>{e.exports={priority:"Eg8pv",emoji:"Ls_xS",cardEmoji:"ZVWqH",emojiButtonWrapper:"cenoh",emojiContainer:"Bg2tI",emojiButtonShow:"C3ro0",emojiButtonHide:"nul4w"}},31e3:e=>{e.exports={content:"L0IlD",paragraph:"Orx96",header:"XpiGS",flag:"hYeJR",flagTop:"Te_me",flagBottom:"pHlXZ",title:"ruQOD"}},59776:e=>{e.exports={learnMoreButton:"nUL6q"}},91409:e=>{e.exports={wrapper:"fP89T",popup:"p4cHm",content:"BZyxI",animation:"DWhKF",title:"nHp6t"}},13087:e=>{e.exports={headerOrFooterWrapper:"Y2H0f"}},48879:e=>{e.exports={cardList:"gV0cS"}},93751:e=>{e.exports={wrapper:"QzCRj"}},73717:e=>{e.exports={learnMore:"Z_tYK",learnMoreTitle:"wCofj",learnMoreExample:"YSZy0",learnMoreExampleIconAndTitle:"W3Msk",learnMoreExampleIcon:"q0k69",learnMoreExampleCorrectIcon:"TsvDV",learnMoreExampleIncorrectIcon:"DBJgs",learnMoreExampleTitle:"_5iVIT",learnMoreExampleTextItalic:"o84Ep",learnMoreExampleTextMarginLeft:"cTK8V",spin:"DHpIM"}},15238:e=>{e.exports={container:"qAay9"}},36706:e=>{e.exports={singleCardAssistant:"bJPRn",singleCardAssistantHeader:"Zoc_S",singleCardAssistantHeaderDraggable:"ZX00_",singleCardAssistantContent:"p9dQN",singleCardAssistantContentWithPadding:"UAH4K",singleCardAssistantFooter:"VnTOq",singleCardAssistantFooterText:"BgeT4",singleCardAssistantFooterButtonIcon:"kBU3t",spin:"HCSMj"}},39515:e=>{e.exports={card:"SD4B_",cardInline:"lDTYf",cardInlineRegular:"I8fWz",cardInlineFixedWidth:"zFjOi",cardInlineFitContent:"SzLk5",cardAssistant:"SsdZ1",cardAssistantAllLens:"OYPRO",cardClickable:"FxoHS"}},11510:e=>{e.exports={emogenieReport:"IPEgR",emogenieReportHeader:"ugGrL",emogenieReportHeaderTitle:"x3FcP",emogenieReportItems:"SwRPf",emogenieReportToneSuggestionInfo:"vLVNY",emogenieReportToneSuggestionInfoEmojiAndTitle:"VinN1",emogenieReportToneSuggestionInfoEmoji:"gmfaf"}},14487:e=>{e.exports={emogenieBrandToneInfoIcon:"pcprF",emogenieReportItem:"LXjD_",emogenieBrandToneInfoIconOn:"KIvz3",emogenieBrandToneInfoIconOff:"NDatF",emogenieReportItemEmotion:"AjVJZ",emogenieReportItemEmotionEmojiAndName:"cIE8j",emogenieReportItemEmotionEmoji:"oZZpB",emogenieReportItemEmotionName:"QWYxt",emogenieReportItemEmotionBadgeOrIntensity:"jw4RJ",emogenieReportItemEmotionIntensity:"Ixu7L",emogenieReportItemEmotionIntensityDot:"aFcXw",emogenieReportItemEmotionIntensityDotActive:"xUxza",emogenieReportItemEmotionActionsMenuButton:"q4wIy",emogenieReportItemEmotionActionsMenuIcon:"V5KFq",emogenieReportItemEmootionActionsMenuThumsUpIcon:"UAfpn",emogenieReportItemEmootionActionsMenuThumsDownIcon:"CoUgw",spin:"tmqUv"}},29998:e=>{e.exports={badgeWrapper:"fDZiE",smallIcon:"NUwwK",statusShape:"BHWNr",status:"R7Ehf",logoClassic:"fspWv",gbutton:"VNMHv",buttonAndBadgeWrapper:"L704q",disabled:"NlgDT",errors_100:"RZgek",checking:"DR3p_",errors:"k6Tcg",disabledErrors:"QftBQ",enableTransition:"BWwwG",gr__spin:"LGWmk",has_errors:"QLHBQ",offline:"BiKGJ",minimized:"knLsy",has_badge:"DEhDO",animateOut:"bzMoj",statusWrapper:"k1mI2",hideStatus:"njdpU",expandBadge:"hYrGt",animateIn:"Sr9ej",gbtn_to_checking:"dIh67",gbtn_to_checking_animation:"w6bRT",checking_to_gbtn:"Z1fL3",checking_to_gbtn_animation:"For4O",checking_to_err:"jFgYC",checking_to_err_animation:"RyPM1",err_to_checking:"WIx0v",err_to_checking_animation:"TCVhS",checking_1:"IOAEi",checking_1_animation:"rBS4r",checking_2:"dO5QJ",checking_2_animation:"fKLfO",checking_3:"meEMG",checking_3_animation:"itt13"}},58963:e=>{e.exports={badge:"stkrr",badgePrimary:"XTtJC",badgeSuccess:"VlXa2",badgeGold:"TvgjE",badgeError:"elqes",badgeRounded:"rI61B",badgeRoundedSmall:"j0sDJ",badgeRoundedMedium:"mJWU1",badgeRoundedLarge:"VhQJY",badgeTitle:"yHBKc",badgeTitleBold:"CZLBe"}},75361:e=>{e.exports={settingsButtonMediumIcon:"jerdC",settingsButtonSmallIcon:"PlOGe",spin:"MH8w4"}},55987:e=>{e.exports={checkboxContainer:"Te37e",checkbox:"mFHkX",checkboxDS:"DdH2q",checkboxChecked:"JhHnz",checkboxCheckmark:"zShXt",spin:"tww6q"}},69588:e=>{e.exports={emoji:"goatt",emojiAlt:"cUc93"}},15376:e=>{e.exports={fontWrapper:"amkYk"}},75021:e=>{e.exports={popoverNotificationMessage:"p0k9e"}},79584:e=>{e.exports={radioGroup:"KAzfW",radioGroupOption:"WkjDU",radioGroupOptionSelected:"onilo"}},18403:e=>{e.exports={tooltip:"GaXCJ",fadeIn:"BYM2T",tooltipIcon:"edAVi"}},15765:e=>{e.exports={highlight:"gUhBO",light:"fX3Dk",dark:"w3PtR",highlightBackground:"wPV13",highlightUnderline:"W6AVK",highlightHbar:"e8Ruv",highlightInert:"NI5pb",highlightUnderlineAnimatedRegular:"fFbRx",highlightUnderlineShow:"JZtEl",highlightUnderlineAnimatedSlow:"M8fh8",highlightEnclosing:"oR786",highlightUnderlineOnly:"to5ul",highlightUnderlineStartOnly:"EWWPj",highlightHovered:"M3SCz",highlightNeedsAttention:"bPYnD",highlightBackgroundOnly:"RSI82",highlightStatic:"DCLaM",highlightFadeIn:"rz9vy",highlightUnderlineAndPersistentBackground:"MnC8p",highlightDarken:"cI0qZ",highlightNeedsAttentionDark:"B1_r3",highlightDisappear:"y0Pwo",highlightDarkenFadeOut:"YtD3q",highlightUnderlineFadeOut:"fQx8l",highlightFadeOut:"cprzT",highlightNeedsAttentionRegular:"Lj7mJ",highlightColorRed:"eephs",highlightDottedUnderlineAndBackground:"AfZZS",highlightColorBlue:"jlbiw",highlightColorGreen:"bZGGu",highlightColorLightGreen:"U9Jcr",highlightColorPurple:"dFzOQ",highlightColorGold:"g2PMM",highlightColorGray:"ythSG",highlightColorPlagiarism:"rt4yp",highligthColorWeHbar:"TiKPW",highlightDarkFadeOut:"vTpD2",highlightDarkFadeIn:"V27ON",highlightDarkenMore:"gC5dP",highlightDarkenMoreUndo:"tRCR8"}},96951:e=>{e.exports={button:"EYiE8","variant-primary":"z9uJO","variant-secondary":"q5Jrx","variant-tertiary":"lzg5M","variant-ghost":"a8sQl","variant-premium":"WLxWd","size-small":"N98GR","size-medium":"W801A","size-large":"pRgOD","size-xlarge":"UkrPO","width-full":"mw7mz",linkButton:"HQbMT",spin:"PaktZ"}},51705:e=>{e.exports={premiumButton:"QpA64"}},48658:e=>{e.exports={proofitRequestFormBtnLoadingSpinner:"IrY6A",spin:"m9t2y"}},91775:e=>{e.exports={proofitHowItWorksSteps:"Unehy",proofitHowItWorksStep:"zMEEz",proofitHowItWorksStepNumberContainer:"EfoqG",proofitHowItWorksStepNumber:"XIDZQ",proofitHowItWorksStepOne:"K5qs8",proofitHowItWorksStepOneNumberContainer:"e4ae6",proofitHowItWorksStepTwo:"P3h_J",proofitHowItWorksStepTwoNumberContainer:"YejA_",proofitHowItWorksStepThree:"FYGwC",proofitHowItWorksStepThreeNumberContainer:"YFsfV"}},68057:e=>{e.exports={proofitRequestForm:"QVI6h",proofitRequestFormImg:"wKuXo",proofitRequestFormTitle:"yNxb3",proofitRequestFormDescription:"vLSn1",proofitRequestFormCostAndTime:"b2RwJ",proofitRequestFormTime:"Bo3xu",proofitRequestFormCostAndTimeTitle:"Cu_3T",proofitRequestFormCostAndTimeSubtitle:"NFy21",proofitRequestFormRequestBtn:"beQX2",proofitRequestFormUnavailableMsg:"JDvub",proofitRequestFormFootnote:"S33xD",proofitRequestFormFootnoteFreeTrial:"SflIX",proofitRequestFormFootnoteHowItWorksDontShowAgainCheckbox:"HUrVJ",proofitRequestFormPrivacyInfoTitle:"ymDqL",proofitRequestFormPrivacyInfoDescription:"ZqcFq",proofitRequestFormPrivacyInfoDescriptionItem:"iv8f1",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"Duc32"}},44258:e=>{e.exports={proofitReviewForm:"SNt2d",proofitReviewFormTitle:"iMzY2",proofitReviewFormDescription:"jvfyf",proofitFeedbackForm:"eY729",proofitDoneButton:"CTbuu"}},70711:e=>{e.exports={scoreRing:"xlRHm",loading:"A_cJy",rotation:"srLo5",scoreText:"KIWW8"}},53345:e=>{e.exports={feedbackFormContainer:"kjElf",feedbackFormContainerBottomPadding:"bXqDs",feedbackFormContainerAlignCenter:"hkEx2",feedbackFormFields:"Ua5wJ",feedbackFormTitle:"GnQ_a",feedbackFormTextBoxTitle:"kWEW0",feedbackFormLogoLine:"osGQI",compact:"b7yYp",feedbackFormScore:"ZOSRK",feedbackFormTextBox:"l8New",feedbackFormShareDomainTitle:"Qbnj_",feedbackFormShareDomainCheckbox:"VBCx1",feedbackFormShareUserTextCheckbox:"abP8L",fedbackFormShareUserTextCheckboxLabel:"hxgnL",feedbackFormSuccessMessageTextContainer:"ARBzt",feedbackFormSuccessMessageIcon:"kJIzg",feedbackFormSuccessMessageTitle:"iXQnf",feedbackFormSuccessMessageSubtitle:"Ydufo",spin:"Vv6WG"}},60493:e=>{e.exports={feedbackFormOption:"sp8vS",feedbackFormOptionIcon:"eH6DL",feedbackFormOptionIconDisheartening:"DhaWh",feedbackFormOptionIconNeutral:"BS_8d",feedbackFormOptionIconSmiling:"dUZNd",spin:"uouSO"}},40072:e=>{e.exports={label:"cLK4q",selected:"hbRki",option:"UytwF",disabled:"mTk5j",lockIconWrapper:"o4NOU"}},23393:e=>{e.exports={option:"XNQPo"}},60052:e=>{e.exports={option:"dRYWx"}},89298:e=>{e.exports={american:"JRPow",australian:"FZNcB",british:"MzB3a",canadian:"_fn3J",indian:"eqgex"}},72329:e=>{e.exports={hover_blocker:"np9cY"}},86723:e=>{e.exports={wrapper:"Aolfm",heading:"NFFQg",domain:"c3Fd7",description:"LTKQH"}},46577:e=>{e.exports={settingsContent:"C3SN4",fullWidth:"dRfoN",heading:"_HqAa",allSettings:"pUfgB",separator:"vlSkx",section:"v01UR",settingsLink:"d_ohh",debugMenu:"iovEn",downloadBtn:"u6BF0",timer:"DQHsO",gOSMenu:"dhG16",menuItem:"COwmJ","gds-select-container":"Cmf7Q"}},9003:e=>{e.exports={heading:"wcViL"}},44402:e=>{e.exports={wrapper:"thWhq",content:"FIMJQ"}},94e3:e=>{e.exports={gButtonPopup:"diNpB",loginSSOPopup:"dGc8e",showWrapper:"UUYhD",flipped:"iGBQj",closeButton:"vcac9",text:"jfR06",title:"pQCa0",bold:"K4CWO",link:"UAmjO",secondary:"EXtIt",firstTime:"JpYft",close:"OUiPJ",loginReminder:"H1d0B",permission:"RPuBs",popupFooter:"rA9f6",isFlipped:"hSt1p",onboarding:"QrVo6",onboardingWithReminder:"njXr2",onboardingClose:"G0tug",dropdownContainer:"WJP1a",arrowhead:"HI72s",dropdownList:"Rog_Q",onboardingWithReminderIconPosition:"v1L7z",sessionTimeoutPopup:"djMQL",sessionTimeoutClose:"cE7Bk",sessionTimeoutPopupIconPosition:"_re7y",signinLink:"TT5tz",warningPopup:"HFaC5",warningWithoutIcon:"FyT69",managedSSOControl:"L1Rzm",settings:"H5xEt",illustration:"qESn3",signInWithSSO:"rq8co",signInWithSSO2:"wE0K3"}},47695:e=>{e.exports={"footer-ios":"IfRTb"}},47730:e=>{e.exports={footer:"lc1t2",footer_btn_container:"GgI7h",footer_btn:"yBxv8",footer_icon_doc:"OstiH",footer_icon_home:"_0UW4",signUpFooter:"GadQB"}},24825:e=>{e.exports={"header-ios":"icRoX",logo:"KpttL",mark:"Ao1Jt",type:"cyoK9",link:"yYlif"}},90867:e=>{e.exports={header:"Coe_1",delimiter:"PA63z",logo:"oGOoy",closeButton:"v_YAN"}},78703:e=>{e.exports={windows:"ScRGR",setting_item:"byTue",fixing:"tGQgu",thin_text:"Zw2iF",footer:"VarAw",gr_popup_settings:"sCOqq",iOS:"xw90P",footer_btn:"dFcxY",short_border:"GPdi3",top:"a8_HB",content:"eJi6K",my_grammarly:"TPdm3",new_document:"b5rRu",unsupported_site:"FV6cP",unsupported_item:"kI6Es",unsupported_title:"TvJkj",domain:"mbOuw",domain_in_details:"HyZRA",unsupported_temporary:"aeiHl",unsupported_permanently:"e63AG",unsupported_grammarly:"SK755",diamond:"z0724",userPanel:"bG2GY",email:"U4qfE",link:"Vrj67",blue:"Dstaa",edc_stripe:"GEFvM",line:"_o71L",not_supported:"Z9hzt",site_switcher:"LXeMc",upgrade:"BAl_v",favicon:"L5Hrq",centered:"T0qTK",summary:"tuG8u",upgrade_title:"KRcNq",settingsContentWrapper:"OeKpx",settingsContent:"AwQr3",sessionTimeoutWrapper:"BErLl",sessionTimeoutDiv:"rekSD",sessionTimeoutTextAndIcon:"ihkdF",sessionTimeoutPopupIcon:"xYrMw",sessionTimeoutText:"JpIic",signinLink:"n7A2H",popupSettings:"wBa4V",withBackground:"JRZMC",llamaTitle:"WnzAW",llamaDescription:"dDIsV",cheetahLabelAndButton:"WwKRI",cheetahLabel:"aMCQq",cheetahManageButton:"hfCbo",hwrDescription:"KqA2M",nobr:"wae8U"}},98539:e=>{e.exports={socialSigninContent:"k2AdT",withClose:"_1NuQS",socialSignin:"YBXsj",closeIcon:"lL3zx",signin:"DY97f",permission:"YmV8G",iOS:"C_ZC9",content:"pnCIV",banner:"BsNFR"}},80871:e=>{e.exports={content:"IJam9",borderTop:"oKEr5",borderBottom:"lZ1ZL",premiumButton:"bvxiF"}},98811:e=>{e.exports={gr_popup_unsupported:"mNplt",iOS:"dknvA",line:"bbXMt",unsupported_site:"isHIc",unsupported_item:"bsr7c",warning:"QaV6u",ok:"VIvGU",unsupported_title:"xAVeT",domain:"QAQlK",unsupported_grammarly:"ndOUg",unsupported_grammarly_text:"t78jM"}},1479:e=>{e.exports={}},67513:e=>{e.exports={fontsPreloader:"NRIwa",interThin:"yEioX",interThinItalic:"qcX4v",interExtraLight:"zVlKD",interExtraLightItalic:"G5uFu",interLight:"ss65s",interLightItalic:"BAp6C",interRegular:"TsKuT",interItalic:"zaGJf",interMedium:"m1asa",interMediumItalic:"OrxoJ",interSemiBold:"DZkXF",interSemiBoldItalic:"nIB5t",interBold:"fcnMV",interBoldItalic:"sxDQt",interExtraBold:"PWSxT",interExtraBoldItalic:"NWlff",interBlack:"CDNOZ",interBlackItalic:"ZeE9p"}}}]);