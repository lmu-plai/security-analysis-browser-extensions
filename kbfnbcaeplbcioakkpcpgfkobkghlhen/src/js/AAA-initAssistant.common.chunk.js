(self.webpackChunk=self.webpackChunk||[]).push([[9513],{17993:(e,t,n)=>{n.d(t,{I:()=>i,a:()=>o});const i="aiDetector",o="plagiarismChecker"},24196:(e,t,n)=>{n.d(t,{Nl:()=>r,Ot:()=>u,R7:()=>d,fg:()=>a,rv:()=>l,sI:()=>g,vl:()=>h,w4:()=>s,z0:()=>c});var i=n(84197),o=n(93390);const r={AIEditorAgentParaphraserInternal:i.b4,AIEditorAgentParaphraserExternal:i.dG,AIEditorParaphraserAllUnderlines:i.RK,AIEditorParaphraserMyVoice:i.zg,AIEditorParaphraserFocusCard:i.Wd,AIEditorReaderReactionsRebase:i.l0,AIEditorReaderReactionsCustomAudience:i.bI,ExpertReviewAutoScrollToFirstVBar:i.aR,ExpertReviewFollowUpActions:i.ob,ExpertReviewFollowUpActionsFreeform:i.sq,ExpertReviewRebase:i.yK,AgentsFeatureInExtension:new o.Gate("agents_feature_in_extension"),AgentsCAPIFiltering:new o.Gate("extension_agents_capi_filtering"),AgentParaphraserInExtension:new o.Gate("extension_paraphraser"),AgentHumanizerInExtension:new o.Gate("extension_humanizer"),AgentReaderReactionsInExtension:new o.Gate("extension_reader_reactions"),AgentExpertPanelInExtension:new o.Gate("extension_expert_review"),AgentAiDetectorInExtension:new o.Gate("extension_ai_detector"),AgentPlagiarismCheckerInExtension:new o.Gate("extension_plagiarism_checker"),AgentsAutofocusToFirstVBar:new o.Gate("extension_agents_autofocus_vbars"),AgentsUphookHubClientDependency:new o.Gate("extension_agents_uphook_hub_client")};function s(e){return e.isGateEnabled(r.AgentsFeatureInExtension)}function a(e){return s(e)&&e.isGateEnabled(r.AgentPlagiarismCheckerInExtension)}function l(e){return s(e)&&e.isGateEnabled(r.AgentAiDetectorInExtension)}function c(e){return s(e)&&e.isGateEnabled(r.AgentParaphraserInExtension)}function u(e){return s(e)&&e.isGateEnabled(r.AgentHumanizerInExtension)}function d(e){return s(e)&&e.isGateEnabled(r.AgentReaderReactionsInExtension)}function h(e){return s(e)&&e.isGateEnabled(r.AgentExpertPanelInExtension)}function g(e){return e.isGateEnabled(r.AgentsUphookHubClientDependency)}},95957:(e,t,n)=>{n.d(t,{m:()=>o});var i=n(74822);const o=new class{constructor(){this._messageSubject=new i.x,this.messages=this._messageSubject}forwardMessage(e){this._messageSubject.next(e)}}},53653:(e,t,n)=>{n.d(t,{Q:()=>l,f:()=>c});var i=n(35743),o=n(7621);if(5526!=n.j)var r=n(46649);var s=n(30498);function a(){document.body.dataset.grAaaNotchConnectionId||(document.body.dataset.grAaaNotchConnectionId=`${Date.now()}-${Math.random()}`);const e=document.body.dataset.grAaaNotchConnectionId;return{toServer:`gr-fieldIntegration-to-aaaNotch-to-server-${e}`,toClient:`gr-fieldIntegration-to-aaaNotch-to-client-${e}`}}const l=e=>{const t=a();return new s.S((0,o.NH)(new i.E(self.document,t.toServer,t.toClient)),{setTextFieldContent:(t,n)=>{e.setTextFieldContent(n)},setSelectedTextFromIntegration:(t,n)=>{e.setSelectedTextFromIntegration(n)}})},c=()=>{const e=a();return new r.X(new i.E(self.document,e.toClient,e.toServer))}},61638:(e,t,n)=>{n.r(t),n.d(t,{initAssistant:()=>gt});var i,o=n(13391),r=n(90189);!function(e){e.toClient="cs-to-side-panel-to-client",e.toServer="cs-to-side-panel-to-server"}(i||(i={}));var s=n(46649),a=n(58777);class l extends s.X{constructor(e){super(new a.d(e,i.toClient,i.toServer))}}var c=n(95957),u=n(40594);function d(e){return e.nodeType===Node.ELEMENT_NODE}const h=["SCRIPT","STYLE","NOSCRIPT"],g=["style","role","title"];function p(e){return!h.includes(e.nodeName)}function m(e){return function(e){return e instanceof HTMLElement}(e)&&(e.checkVisibility()||function(e){return"contents"===self.getComputedStyle(e).display}(e))}function f(e={}){const{tag:t="div",role:n=null,text:i,title:o=null,attributes:r,children:s=[]}=e,a={tag:t,role:n,text:i,title:o,attributes:r,children:s},l=Object.entries(a).filter((([,e])=>Boolean(e)));return Object.fromEntries(l)}const _=new Set(["a","article","aside","button","details","dialog","figcaption","figure","footer","form","header","label","main","mark","nav","section","summary","time"]);function v(e,t={includeAttributes:!1}){const{includeAttributes:n}=t;if(!p(e)||"BODY"!==e.nodeName&&!m(e))return null;let i=f({tag:e.nodeName.toLocaleLowerCase(),role:d(e)?e.getAttribute("role"):null,title:d(e)?e.getAttribute("title"):null});if(n&&d(e)){const t=function(e){return Array.from(e.attributes).filter((e=>!g.includes(e.name)))}(e),n={};t.forEach((e=>{n[e.name]=e.value})),i={...i,attributes:n}}"TEXTAREA"===e.nodeName&&(i={...i,text:e.value});const{children:o,textCount:r,elementCount:s}=function(e,t){var n,i;let o=0,r=0;const s=[];for(const a of e.childNodes)if(a.nodeType===Node.TEXT_NODE)(null===(n=a.textContent)||void 0===n?void 0:n.trim())&&(s.push(f({tag:a.nodeName.toLocaleLowerCase(),text:null===(i=a.textContent)||void 0===i?void 0:i.trim()})),o+=1);else if(p(a)){const e=v(a,t);e&&(s.push(e),r+=1)}return{children:s,textCount:o,elementCount:r}}(e,t),a=_.has(i.tag),l="role"in i&&null!==i.role;return a||l||0!==r||1!==s?i.text||0!==o.length?{...i,children:o}:null:o[0]}class b{extractContext(e){const{logger:t=u.Y.create("assistant.context.extractor")}=e,n=function(e,t={}){const{includeAttributes:n=!1,logger:i}=t,o=performance.now(),r=v(e,{includeAttributes:n}),s=performance.now()-o;null==i||i.debug("converted JSON representation",r);const a=JSON.stringify(r);return null==i||i.debug("converted DOM to JSON",{content:a,size:(new TextEncoder).encode(a).length,duration:s}),{content:r,isCompressed:!1}}(e.document.body,{logger:t});return{kind:"default",origin:e.document.location.origin,url:e.document.location.href,title:e.document.title,root:n.content}}}class w{constructor(e){this._logger=u.Y.create("contextExtractorService"),this._textFieldContent=e.textFieldContent,this._document=e.document}getContext(e){let t="";this._textFieldContent&&(t=this._textFieldContent.get(),this._logger.debug(`Current text field text has ${t}`));const n=new b;this._logger.debug(`Extractor is instance of ${n.constructor.name}`);const i=n.extractContext({document:this._document});return this._logger.debug("Context extracted",i),{...i,textFieldContent:t}}}var y;!function(e){e.toClient="side-panel-to-cs-to-client",e.toServer="side-panel-to-cs-to-server"}(y||(y={}));Symbol("tabId");var S=n(30498),C=n(11818),x=n(7621);class E{constructor(e,t){this._extractorService=e,this._textFieldContent=t,this.publicApi={...(0,C.Z)({getContext:()=>this._extractorService.getContext("default"),ping:()=>!0,forwardCAPIMessage:e=>{c.m.forwardMessage(e)},getTextFieldContent:()=>this._textFieldContent.get()})}}}var T=n(84195),k=n(15380),A=n(43912),R=n(55830),D=n(31715),I=n(18473),F=(n(89895),n(954)),O=n(20161),N=n(20680),P=n(84714),M=n(93440),G=n(50750),U=n(2187),H=n(28898),L=n(90595),j=n(92054),B=n(82914),K=n(91957),V=n(39963);class ${constructor(){this._felog=(0,V.Tb)()}assistantNotchInitialized(e){this._felog.sendFemetricsRate("assistantNotchInitialized",{domain:e})}assistantNotchShown(e){this._felog.sendFemetricsRate("assistantNotchShown",{domain:e})}assistantNotchCollapsed(e){this._felog.sendFemetricsRate("assistantNotchCollapsed",{domain:e})}assistantNotchClicked(){this._felog.alwaysAvailableAssistant.openSidePanel("always_on_notch","clicked")}}class W{assistantNotchShown(e,t){B.J.alwaysOnAssistantNotchPeek(t,e)}assistantNotchCollapsed(e){B.J.alwaysOnAssistantNotchPreviewCollapsed(e)}assistantNotchDeactivatedTextChecking(e,t,n){B.J.alwaysOnAssistantNotchDeactivatedTextChecking(t,e,n)}assistantNotchOnboardingPeek(){B.J.alwaysOnAssistantOnboardingNotchPeek()}}class z{constructor(){this._feMetricsTrackingService=new $,this._gnarTrackingService=new W,this._commonLabels={assistantSessionId:"",domain:""}}assistantNotchInitialized(){const e=(0,K.Cg)();this._feMetricsTrackingService.assistantNotchInitialized(e)}assistantNotchShown(){const e=(0,j.Z)(),t=(0,K.Cg)();this._commonLabels={assistantSessionId:e,domain:t},this._feMetricsTrackingService.assistantNotchShown(t),this._gnarTrackingService.assistantNotchShown(e,t)}assistantNotchPeekingCollapsed(){this._feMetricsTrackingService.assistantNotchCollapsed(this._commonLabels.domain),this._gnarTrackingService.assistantNotchCollapsed(this._commonLabels.assistantSessionId)}assistantNotchClicked(){return this._feMetricsTrackingService.assistantNotchClicked(),this._commonLabels.assistantSessionId}assistantNotchDeactivatedTextChecking(e){this._gnarTrackingService.assistantNotchDeactivatedTextChecking(this._commonLabels.assistantSessionId,this._commonLabels.domain,e)}assistantNotchKeyboardShortcutSet(){B.J.keyboardShortcutShortcutKeysChanged("openAssistant")}assistantNotchOnboardingPeek(){this._gnarTrackingService.assistantNotchOnboardingPeek()}dispose(){}}var q=n(90572),Y=n(59179),Q=n(8867),J=n(17869),X=n(63532);const Z="assistantOnboarding_";class ee{constructor(){this.logger=u.Y.create("AssistantOnboardingStorage"),this.changes$=new Q.y((e=>{const t=(0,H.O)().browserApi.preferences.changes.subscribe({next:t=>e.next(t),error:t=>e.error(t),complete:()=>e.complete()});return()=>t.unsubscribe()})).pipe((0,q.h)((e=>Object.keys(e).some((e=>e.startsWith(Z))))),(0,J.z)((e=>{const t=Object.entries(e).filter((([e])=>e.startsWith(Z))).map((([e,t])=>({key:e.replace(Z,""),newValue:t.newValue,oldValue:t.oldValue})));return(0,G.D)(t)})),(0,X.b)((e=>this.logger.debug("Onboarding storage change emitted",{key:e.key,newValue:e.newValue,oldValue:e.oldValue}))))}_prefixKey(e){return`assistantOnboarding_${e}`}async get(e){const t=this._prefixKey(e),n=(await(0,H.O)().browserApi.preferences.get(t))[t],i=null==n?void 0:n;return this.logger.debug("Storage get operation",{key:e,value:i}),i}async set(e){this.logger.debug("Storage set operation",{data:e});const t={};for(const[n,i]of Object.entries(e))t[this._prefixKey(n)]=i;return(0,H.O)().browserApi.preferences.set(t)}async remove(e){const t=this._prefixKey(e);return(0,H.O)().browserApi.preferences.remove(t)}async getAll(){const e=await(0,H.O)().browserApi.preferences.getAll(),t={};for(const[n,i]of Object.entries(e))if(n.startsWith(Z)){t[n.slice(Z.length)]=i}return t}async clear(){const e=await(0,H.O)().browserApi.preferences.getAll(),t=Object.keys(e).filter((e=>e.startsWith(Z)));if(t.length>0)return(0,H.O)().browserApi.preferences.remove(t)}async markDismissed(e){return this.logger.debug("Marking as dismissed",{key:e}),this.set({[`${e}_dismissed`]:!0,[`${e}_dismissedAt`]:Date.now()})}async isDismissed(e){var t;return null!==(t=await this.get(`${e}_dismissed`))&&void 0!==t&&t}async getDismissedAt(e){return await this.get(`${e}_dismissedAt`)}async markCompleted(e){return this.logger.debug("Marking as completed",{key:e}),this.set({[`${e}_completed`]:!0,[`${e}_completedAt`]:Date.now()})}async isCompleted(e){var t;return null!==(t=await this.get(`${e}_completed`))&&void 0!==t&&t}async getCompletedAt(e){return await this.get(`${e}_completedAt`)}async incrementShowCount(e){var t;const n=await this.getShowCount(e),i=n+1;this.logger.debug("Incrementing show count",{key:e,currentCount:n,newCount:i});const o=null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[];return o.push(Date.now()),await this.set({[`${e}_showCount`]:i,[`${e}_showTimestamps`]:o,[`${e}_lastShownAt`]:Date.now()}),i}async getShowCount(e){var t;return null!==(t=await this.get(`${e}_showCount`))&&void 0!==t?t:0}async getShowTimestamps(e){var t;return null!==(t=await this.get(`${e}_showTimestamps`))&&void 0!==t?t:[]}async getLastShownAt(e){return await this.get(`${e}_lastShownAt`)}async isUnderShowLimit(e,t){return await this.getShowCount(e)<t}async clearByKeyPrefix(e){const t=await(0,H.O)().browserApi.preferences.getAll(),n=this._prefixKey(e),i=Object.keys(t).filter((e=>e.startsWith(n)));if(i.length>0)return(0,H.O)().browserApi.preferences.remove(i)}}class te{constructor(e){this.logger=u.Y.create("AssistantUsageTracker"),this.assistantOnboardingStorage=new ee,this.scope=e,this.dataChanged$=this.assistantOnboardingStorage.changes$.pipe((0,q.h)((e=>e.key.startsWith(this.getScopedKey(te.ASSISTANT_SHOWN_KEY)))),(0,Y.U)((()=>{})))}getScopedKey(e){return this.scope?`${this.scope}:${e}`:e}async recordAssistantShown(){try{await this.assistantOnboardingStorage.incrementShowCount(this.getScopedKey(te.ASSISTANT_SHOWN_KEY))}catch(e){throw this.logger.error("Failed to record assistant shown",{error:e.message}),e}}async getFirstShownTimestamp(){try{const e=await this.assistantOnboardingStorage.getShowTimestamps(this.getScopedKey(te.ASSISTANT_SHOWN_KEY));return e.length>0?e[0]:null}catch(e){return this.logger.error("Failed to get assistant first shown timestamp",{error:e.message}),null}}async getDaysSinceFirstShown(){const e=await this.getFirstShownTimestamp();return null===e?null:(Date.now()-e)/864e5}async haveDaysSinceFirstShownElapsed(e){try{const t=await this.getDaysSinceFirstShown();if(null===t)return{haveDaysElapsed:!1,daysElapsed:null,daysRemaining:null};return{haveDaysElapsed:t>=e,daysElapsed:t,daysRemaining:e-t}}catch(e){return this.logger.error("Failed to check days since first shown elapsed",{error:e.message}),{haveDaysElapsed:!1,daysElapsed:null,daysRemaining:null}}}async getShowCount(){try{return await this.assistantOnboardingStorage.getShowCount(this.getScopedKey(te.ASSISTANT_SHOWN_KEY))}catch(e){return this.logger.error("Failed to get assistant show count",{error:e.message}),0}}async getLastShownAt(){try{return await this.assistantOnboardingStorage.getLastShownAt(this.getScopedKey(te.ASSISTANT_SHOWN_KEY))}catch(e){return void this.logger.error("Failed to get assistant last shown timestamp",{error:e.message})}}async hasBeenShown(){return await this.getShowCount()>0}async reset(){this.logger.warn("reset() is only available in dev builds")}async setFakeFirstShown(e){this.logger.warn("setFakeFirstShown() is only available in dev builds")}}te.ASSISTANT_SHOWN_KEY="assistantShown";class ne{constructor(){this._subs=[],this._logger=u.Y.create("HeroWaveAnimationEligibility"),this._trackingService=new z,this._shouldShowHeroWaveAnimation=o.h.create(!1),this.shouldShowHeroWaveAnimation$=this._shouldShowHeroWaveAnimation,this._isGateEnabled()&&(this._assistantUsageTracker=new te(ne.ASSISTANT_USAGE_TRACKER_SCOPE),this._subs.push(this._assistantUsageTracker.dataChanged$.pipe((0,F.O)(void 0),(0,O.w)((()=>this.delayedShouldShowHeroWaveAnimation()))).subscribe(U.wW(this._shouldShowHeroWaveAnimation))))}_isGateEnabled(){var e,t;return null!==(t=null===(e=(0,H.O)().experimentClient)||void 0===e?void 0:e.isGateEnabled(L.K.HeroWaveAnimation))&&void 0!==t&&t}delayedShouldShowHeroWaveAnimation(){return(0,N.z)((0,P.of)(!1),(0,M.H)(1500).pipe((0,O.w)((()=>(0,G.D)(this.shouldShowHeroWaveAnimation())))))}async shouldShowHeroWaveAnimation(){if(!this._isGateEnabled())return!1;if(!this._assistantUsageTracker)return!1;try{return!await this._assistantUsageTracker.hasBeenShown()}catch(e){throw this._logger.error("Failed to check if the hero wave animation should be shown",{error:e.message}),e}}async recordAssistantShown(){if(this._isGateEnabled()&&this._assistantUsageTracker)try{await this._assistantUsageTracker.recordAssistantShown()}catch(e){throw this._logger.error("Failed to record the assistant as shown",{error:e.message}),e}}async reset(){this._logger.warn("reset() is only available in dev builds")}recordHeroWaveAnimationShown(){try{this._trackingService.assistantNotchOnboardingPeek()}catch(e){throw this._logger.error("Failed to record hero wave animation shown",{error:e.message}),e}}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}}ne.ASSISTANT_USAGE_TRACKER_SCOPE="heroWaveAnimation";var ie=n(53653);function oe(e){const t=o.h.create(void 0),n=o.h.create(void 0),i=function(e,t){(0,r.OB)().browserApi.sessionStorage.get(["isSidePanelOpen","alwaysOnAssistant"]).then((({isSidePanelOpen:n,alwaysOnAssistant:i})=>{void 0===e.get()&&e.set(!n),void 0===t.get()&&t.set(null==i?void 0:i.notchPosition)}));const n=(0,r.OB)().browserApi.sessionStorage.onChange((n=>{var i;e.set(!n.isSidePanelOpen),t.set(null===(i=n.alwaysOnAssistant)||void 0===i?void 0:i.notchPosition)}));return{dispose:()=>{n()}}}(t,n),s=o.h.combine(t,n,((e,t)=>{if(e)return{notchPosition:t}})).subscribe(U.wW(e));return{dispose:()=>{s.unsubscribe(),i.dispose()}}}var re,se=n(12518),ae=n(90023),le=n(11633),ce=n(25693),ue=n(27982);!function(e){e.schema=le.r$({source:le.G0([le.i0("dom_trigger"),le.i0("superhuman_go_welcome_page")]),targetAgentId:le.Z_,openAgentProfile:le.O7})}(re||(re={}));const de=u.Y.create("initDomTriggers");function he(e){return function(){if(!(0,r.OB)().experimentClient.isGateEnabled(ue.K.SuperhumanGoDomTriggers))return de.debug("Superhuman Go DOM triggers are not enabled"),!1;const e=(0,ce.ge)(),t=!1,n=/^(\w+.)*grammarly\.com$/.test(e),i=/^(\w+.)*qagr\.io$/.test(e),o=/^(\w+.)*superhuman\.com$/.test(e),s=/^(\w+.)*qa-sh\.io$/.test(e),a=/^(\w+.)*pp-sh\.io$/.test(e);return t||n||i||o||s||a}()?function(e){const t=[ge(e)],n=e=>{t.forEach((t=>{t(e)}))};return document.addEventListener("click",n),de.debug("Subscribed to document click events"),{dispose:()=>{document.removeEventListener("click",n),de.debug("Unsubscribed from document click events")}}}(e):{dispose:()=>{}}}function ge(e){return t=>{var n,i;const o=t.target.closest("[data-superhuman-go-open]");if(null!==o){de.debug("Superhuman Go DOM trigger clicked");const r=function(e){const t=e.getAttribute("data-superhuman-go-open-meta");if(!t)return de.debug("no meta string found, returning empty meta"),{};try{const e=JSON.parse(t),n=re.schema.decode(e);return(0,ae.zG)(n,se.g_((t=>(de.warn("meta validation failed",{errors:t,parsedMeta:e}),{})),(e=>(de.debug("parsed and validated meta",e),e))))}catch(e){return de.warn("error parsing open superhuman trigger meta",e),{}}}(o),s=null!==(n=r.source)&&void 0!==n?n:"dom_trigger",a=r.targetAgentId,l=null!==(i=r.openAgentProfile)&&void 0!==i&&i;t.preventDefault(),e.openSidePanel(s,a,l)}}}var pe=n(34819),me=n(44071),fe=n(64271),_e=n(36344),ve=n(4271),be=n(56052);class we extends be.U{constructor({kind:e,settings:t,handler:n}){super(e,t,n),this._initKeydownListener()}_initKeydownListener(){const e=(0,ce.Lu)()?(0,ve.CI)(document):null;this._subs.push(fe.T((0,me.R)(document,"keydown",{capture:!0}),e?(0,me.R)(e,"keydown",{capture:!0}):_e.E).subscribe((e=>{e.target instanceof HTMLElement&&e.target.closest('[data-grammarly-ignore-keyboard-events="true"]')||this._isShortcutMatch(e)&&this._handleShortcut(e)})))}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}}class ye{constructor(){this.logger=u.Y.create("KeyboardShortcutBannerEligibility"),this.assistantOnboardingStorage=new ee,this.isGateEnabled()?this.eligibilityChanged$=this.assistantOnboardingStorage.changes$.pipe((0,q.h)((e=>e.key.startsWith(ye.BANNER_KEY)||e.key.startsWith(ye.SHORTCUT_USED_KEY)||e.key.startsWith(ye.SHORTCUT_CHANGED_KEY))),(0,Y.U)((()=>{}))):this.eligibilityChanged$=_e.E}isGateEnabled(){var e,t;return null!==(t=null===(e=(0,H.O)().experimentClient)||void 0===e?void 0:e.isGateEnabled(ue.K.KeyboardShortcutOnboardingBanner))&&void 0!==t&&t}async shouldShowBanner(){if(!this.isGateEnabled())return!1;const[e,t,n,i,o]=await Promise.all([this.assistantOnboardingStorage.isCompleted(ye.SHORTCUT_USED_KEY),this.assistantOnboardingStorage.isCompleted(ye.SHORTCUT_CHANGED_KEY),this.assistantOnboardingStorage.isDismissed(ye.BANNER_KEY),this.assistantOnboardingStorage.isCompleted(ye.BANNER_KEY),this.assistantOnboardingStorage.isUnderShowLimit(ye.BANNER_KEY,ye.MAX_SHOW_COUNT)]);return!e&&!t&&!n&&!i&&o}async recordBannerShown(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.incrementShowCount(ye.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner shown",{error:e.message}),e}}async recordBannerDismissed(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markDismissed(ye.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner dismissal",{error:e.message}),e}}async recordBannerInteracted(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(ye.BANNER_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut banner interaction",{error:e.message}),e}}async recordKeyboardShortcutUsed(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(ye.SHORTCUT_USED_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut usage",{error:e.message}),e}}async recordKeyboardShortcutChanged(){if(this.isGateEnabled())try{await this.assistantOnboardingStorage.markCompleted(ye.SHORTCUT_CHANGED_KEY)}catch(e){throw this.logger.error("Failed to record keyboard shortcut change",{error:e.message}),e}}async shouldHideIfCurrentlyShowing(){const[e,t,n,i]=await Promise.all([this.assistantOnboardingStorage.isCompleted(ye.SHORTCUT_USED_KEY),this.assistantOnboardingStorage.isCompleted(ye.SHORTCUT_CHANGED_KEY),this.assistantOnboardingStorage.isDismissed(ye.BANNER_KEY),this.assistantOnboardingStorage.isCompleted(ye.BANNER_KEY)]);return e||t||n||i}async reset(){this.logger.warn("reset() is only available in dev builds")}}function Se(e){let t;const n=e.subscribe((e=>{const n=null==e?void 0:e.openAssistant;if(void 0!==t){if(!function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(e.key!==t.key)return!1;if(e.modifiers.length!==t.modifiers.length)return!1;const n=new Set(t.modifiers);return e.modifiers.every((e=>n.has(e)))}(n,t)&&void 0!==n){(new ye).recordKeyboardShortcutChanged()}t=n}else t=n}));return{dispose:()=>{n.unsubscribe()}}}ye.BANNER_KEY="keyboardShortcutBanner",ye.SHORTCUT_USED_KEY="keyboardShortcutUsed",ye.SHORTCUT_CHANGED_KEY="keyboardShortcutChanged",ye.MAX_SHOW_COUNT=3;var Ce=n(33675);async function xe(e,t,n){const i=[];try{const s=await(0,pe.v)(e,(0,r.OB)().bgRpc),a=o.h.create(null),l=s.subscribe((e=>{a.set(e)}));i.push({dispose:()=>l.unsubscribe()});const c=a.view((e=>{var t;return null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.keyboardShortcuts})),u=Se(c);i.push(u);const d=(0,Ce.Y)();i.push({dispose:d.dispose});const h=function({sidePanelStatus:e,messageService:t,openSidePanelCallback:n}){return()=>{const i=!!e.isSidePanelOpen.get();if((new ye).recordKeyboardShortcutUsed(),i)t.sendMessage({type:"closeSidePanel",message:{source:"keyboardShortcut"}});else{const e=(0,j.Z)();n(e)}}}({sidePanelStatus:d,messageService:t,openSidePanelCallback:n}),g=new we({kind:"openAssistant",settings:c,handler:h});i.push(g)}catch(e){console.warn("Failed to initialize global keyboard shortcuts",e)}return i}var Ee,Te=n(14979),ke=n(92379),Ae=n(9542),Re=n(29999),De=n(15083),Ie=n(55368),Fe=n(33885),Oe=n(83507),Ne=n(85837),Pe=n(55916),Me=n(74091),Ge=n(27389),Ue=n(12712),He=n(66613),Le=n(78021),je=n(78767),Be=n(38484);function Ke(e){const{currentKeyboardShortcut:t,branding:n,rootElement:i=null,onDisableTextCheckingForThisSiteSession:o=je.EI,onDisableTextCheckingForThisSiteIndefinitely:r=je.EI,onSetKeyboardShortcut:s=je.EI}=e,[a,l]=ke.useState(!1),c=ke.useRef(null),u="superhuman-go"===n.brand?"Turn off Go for this site":"Turn off Grammarly for this site";return ke.useEffect((()=>(c.current=setTimeout((()=>{l(!0)}),0),()=>{c.current&&clearTimeout(c.current)})),[]),ke.createElement(Ge.v,{...(0,Ne.Sh)(Be.settingsMenu,a&&Be.settingsMenuVisible),activator:ke.createElement(Ue.h,{accessibilityLabel:"Manage",icon:Me.ew,variant:"tertiary",size:"small",className:Be.settingsButton,"data-testid":"assistant-notch-settings-button",tooltipContentProps:{root:i}})},ke.createElement(Ge.v.Section,{label:u},ke.createElement(Ge.v.Item,{key:"textChecking-session",onClick:o},"Until my next visit"),ke.createElement(Ge.v.Item,{key:"textChecking-indefinitely",onClick:r},"From now on")),ke.createElement(Ge.v.Separator,{role:"separator"}),ke.createElement(Ge.v.Section,{label:"Shortcut: Open new chat"},ke.createElement(Ge.v.Item,{key:"keyboard-shortcut",onMouseDown:e=>e.stopPropagation(),className:Be.keyboardShortcutMenuItem},ke.createElement(Le.Z,{showLabel:!1,disableLegacyLayout:!0,editButton:ke.createElement(Ue.h,{icon:He.g,accessibilityLabel:"Edit Keyboard Shortcut",variant:"tertiary",size:"medium"}),shortcutSeparator:"+",label:"Open new chat",isMac:!0,currentShortcut:t,onSetShortcut:e=>s(e)}))))}!function(e){e.hidden="hidden",e.peeking="peeking",e.shown="shown"}(Ee||(Ee={}));var Ve=n(20905);const $e=({notchRef:e,isDragging:t,notchPosition:n})=>{const i=ke.useRef(),o=ke.useRef(),r=ke.useRef(),[s,a]=ke.useState(100);function l(){e.current&&(i.current=e.current.getBoundingClientRect())}return ke.useEffect((()=>(self.addEventListener("resize",l),()=>self.removeEventListener("resize",l))),[]),ke.useLayoutEffect((()=>{l()}),[e.current,n]),ke.useEffect((()=>{const e=e=>{r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{a(100)}),Ve.m9(5)),o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame((()=>{if(i.current){const t=function(e,t){const n=Math.min(Math.abs(t.x-e.left),Math.abs(t.x-e.right)),i=Math.min(Math.abs(t.y-e.top),Math.abs(t.y-e.bottom));return Math.hypot(n,i)}(i.current,{x:e.clientX,y:e.clientY});if(t>400)return void a(100);a(50*(t/400)+50)}}))};return t?document.addEventListener("mouseup",l,{once:!0,capture:!0}):document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e),o.current&&cancelAnimationFrame(o.current),r.current&&clearTimeout(r.current)}}),[t]),{hiddenPercent:s}};var We=n(36279),ze=n(37632),qe=n(69550);const Ye=()=>ke.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",className:qe.heroIcon,"data-testid":"hero-icon"},ke.createElement("path",{d:"M18.4895 22.669L12.8177 19.563C12.5094 19.3927 12.1337 19.3927 11.8254 19.563L6.15358 22.669C5.24057 23.168 4.24536 22.1552 4.77085 21.2628L11.435 9.97192C11.8313 9.29964 12.8089 9.29964 13.2052 9.97192L19.8693 21.2628C20.3948 22.1552 19.4025 23.168 18.4866 22.669H18.4895ZM12.3216 7.71728C14.127 7.71728 15.589 6.25822 15.589 4.45862C15.589 2.65901 14.127 1.19995 12.3216 1.19995C10.5161 1.19995 9.05409 2.65901 9.05409 4.45862C9.05409 6.25822 10.5161 7.71728 12.3216 7.71728Z",className:qe.heroIconPath}));Ye.__brand="color";var Qe=n(49258);const Je=e=>{const t=ke.useRef(!1);return ke.useEffect((()=>{t.current||(e.onShow(),t.current=!0)}),[e.onShow]),ke.createElement("div",{className:Qe.heroWaveAnimation,role:"img","aria-label":"Discover Superhuman Go","aria-live":"polite","data-testid":"hero-wave-animation"})};var Xe=n(18952),Ze=n.n(Xe);const et=e=>"superhuman-go"===e.branding.brand&&e.branding.heroWaveAnimationEnabled?ke.createElement(Je,{onShow:e.branding.onHeroWaveAnimationShow}):"superhuman-go"===e.branding.brand?ke.createElement(We.J,{accessibilityLabel:"",icon:Ye,size:"small"}):ke.createElement(We.J,{accessibilityLabel:"",icon:ze.H,size:"small",className:Ze().notchGrammarlyIcon,"data-testid":"grammarly-icon"});var tt=n(64954);const nt=({currentKeyboardShortcut:e,onClick:t,trackingService:n,onDragEnd:i,onDisableTextCheckingForThisSiteSession:o,onDisableTextCheckingForThisSiteIndefinitely:r,onSetKeyboardShortcut:s,branding:a,notchPosition:l})=>{const[c,u]=ke.useState(!1),d=ke.useRef(null),[h,g]=ke.useState(Ee.peeking),p=ke.useRef(null),m=ke.useRef(null);ke.useLayoutEffect((()=>{d.current&&l&&(d.current.style.setProperty("top",l.top),d.current.style.setProperty("bottom",l.bottom))}),[l]);const f=()=>{u(!0);const e=n.assistantNotchClicked();t(e)},{isDragging:_}=(({elementRef:e,positionElementRef:t,onDragEnd:n,onClick:i})=>{const[o,r]=ke.useState(!1);return ke.useEffect((()=>{var o;let s=0,a=0,l=0,c=!0;const u=o=>{if(0===o.button){if(a=o.clientY,c=!0,e.current){const{top:t}=e.current.getBoundingClientRect();s=o.clientY-t}self.addEventListener("mousemove",d),self.addEventListener("mouseup",(()=>{var o;if(r(!1),self.removeEventListener("mousemove",d),c)i();else{const i=null!==(o=null==t?void 0:t.current)&&void 0!==o?o:e.current;if(!i)return;const r=i.style.getPropertyValue("top"),s=i.style.getPropertyValue("bottom");null==n||n({top:r,bottom:s})}}),{once:!0,capture:!0})}},d=n=>{Math.abs(n.clientY-a)>5&&(r(!0),c=!1),c||(l=requestAnimationFrame((()=>{var i;const o=null!==(i=null==t?void 0:t.current)&&void 0!==i?i:e.current;if(!o)return;const r=n.clientY-s,a=self.innerHeight-o.clientHeight,l=Math.min(Math.max(0,r),a),c=l/self.innerHeight*100;if(c<=50)o.style.setProperty("top",`calc(${c}%)`),o.style.setProperty("bottom","unset");else{const e=(self.innerHeight-l-o.clientHeight)/self.innerHeight*100;o.style.setProperty("bottom",`calc(${e}%)`),o.style.setProperty("top","unset")}})))};return null===(o=e.current)||void 0===o||o.addEventListener("mousedown",u),()=>{var t;null===(t=e.current)||void 0===t||t.removeEventListener("mousedown",u),l&&cancelAnimationFrame(l)}}),[i,n,e,t]),{isDragging:o}})({elementRef:m,positionElementRef:d,onClick:f,onDragEnd:i}),{hiddenPercent:v}=$e({notchRef:d,isDragging:_,notchPosition:l}),b={"--hidden-percent":`${v}%`},w=function(e,t,n,i){if(n||"superhuman-go"===i.brand&&i.heroWaveAnimationEnabled)return Ee.shown;if(e===Ee.peeking&&100===t)return Ee.hidden;return e}(h,v,_,a);return ke.createElement("div",{"data-testid":"assistant-notch-container",ref:d,...(0,Ne.Sh)(tt.notchContainer),style:w===Ee.shown?{}:b,onMouseEnter:()=>{p.current&&clearTimeout(p.current),g(Ee.shown),n.assistantNotchShown(),u(!1)},onMouseLeave:()=>{p.current=self.setTimeout((()=>{g(Ee.peeking),c||n.assistantNotchPeekingCollapsed()}),200)}},ke.createElement("div",{...(0,Ne.Sh)(tt.notch,tt[w]),"data-testid":"assistant-notch",ref:m},ke.createElement("button",{onKeyDown:e=>{"Enter"===e.key&&f()},className:tt.notchButton,"data-testid":"assistant-notch-button","aria-label":"Start a chat with Grammarly AI"},ke.createElement(et,{branding:a}),ke.createElement(Pe.L,null))),w===Ee.shown&&ke.createElement(Ke,{currentKeyboardShortcut:e,branding:a,rootElement:d.current,onDisableTextCheckingForThisSiteSession:()=>{g(Ee.peeking),o()},onDisableTextCheckingForThisSiteIndefinitely:()=>{g(Ee.peeking),r()},onSetKeyboardShortcut:s}))};const it=({onClick:e,theme:t,notchViewState:n,currentKeyboardShortcut:i,branding:r,...s})=>ke.createElement(Oe.L,{chunkNameList:["designSystem","AAA-initAssistant"]},ke.createElement(Fe.F.Fragment,null,ke.createElement("div",{"aria-label":"grammarly-global-assistant-notch",role:"group",tabIndex:-1}),o.h.combine(n,i,t,r,((t,n,i,o)=>t?ke.createElement(Ie.A,{scheme:i},ke.createElement(nt,{...s,branding:o,onClick:e,notchPosition:t.notchPosition,currentKeyboardShortcut:n})):null)))),ot="grammarly-assistant-notch-view";var rt=n(18827),st=n(24666);class at{constructor(e,t){this._selectedTextFromIntegration=t,this.selectedText=o.h.create(""),this.subs=[],this.subs.push(fe.T(this._selectedTextFromIntegration.view(),me.R(self,"mouseup",{capture:!0}).pipe(q.h((e=>{const t=e.target;return!t||!("tagName"in t)||t.tagName!==ot.toUpperCase()}))),me.R(self,"keyup",{capture:!0})).pipe(rt.g(0),Y.U((()=>{var e;return(null===(e=self.getSelection())||void 0===e?void 0:e.toString().trim())||this._selectedTextFromIntegration.get().trim()||""})),Y.U((e=>e.length>=2?e:"")),st.x()).subscribe((t=>{this.selectedText.set(t),e.onSelectionChanged(t)})))}dispose(){this.subs.forEach((e=>e.unsubscribe()))}}var lt=n(84674);class ct{constructor(e){this._store=e,this._logger=u.Y.create("ColorSchemeService"),this.colorScheme=this._store.view((e=>{var t,n;return null!==(n=null===(t=e.extensionSettings)||void 0===t?void 0:t.common.colorScheme)&&void 0!==n?n:"auto"}))}setColorScheme(e){if("string"!=typeof e||!["light","dark","auto"].includes(e))return void this._logger.warn(`Invalid color scheme: ${e}`);this._logger.info(`Setting color scheme from ${this.colorScheme.get()} to ${e}`);const t=(0,lt.gC)(this._store);this._store.patch({extensionSettings:(0,lt.k1)(t(),{colorScheme:e})})}}var ut=n(27395),dt=n(29483);class ht{constructor(e){this.hasTriggered=!1,this._disposables=[],this._rpcClient=null,this._logger=u.Y.create("AgentInstallationMonitor"),this._rpcClient=e||null,this.initialize()}static maybeInitializeAgentInstallationMonitor(e){if((0,dt.OB)().experimentClient.isGateEnabled(ut.D.WatchForAgentSetup)&&self&&["coda.grammarly.com","superhuman.com","coda.io","coda.ppgr.io","coda.qagr.io","dev.coda.io:8080"].includes(self.location.host)&&["/brain/agent/setup","/go/agent/setup"].some((e=>self.location.pathname.startsWith(e))))return new ht(e)}initialize(){this._logger.info("Initializing"),this.checkCurrentPage();const e=()=>{this.checkCurrentPage()};self.addEventListener("popstate",e),this._disposables.push((()=>self.removeEventListener("popstate",e))),this.setupMutationObserver(),this.setupUrlWatcher()}checkCurrentPage(){this.isSuccessPage()&&(this.hasTriggered||(this.hasTriggered=!0,this.handleSetupComplete()))}setupMutationObserver(){let e=location.href;const t=new MutationObserver((()=>{location.href!==e&&(e=location.href,this.checkCurrentPage())}));t.observe(document.body,{subtree:!0,childList:!0}),this._disposables.push((()=>t.disconnect()))}isSuccessPage(){const e=self.location.pathname;return/\/(brain|go)\/agent\/setup\/[^/]+\/success$/.test(e)}setupUrlWatcher(){let e=self.location.href;const t=setInterval((()=>{self.location.href!==e&&(e=self.location.href,this.checkCurrentPage())}),2e3);this._disposables.push((()=>clearInterval(t)))}async handleSetupComplete(){const e=this.extractPackId();e?(this._logger.info("Setup completed successfully",{timestamp:(new Date).toISOString(),url:self.location.href,packId:e,host:self.location.host}),this._rpcClient&&await this._rpcClient.api.onAgentInstallationCompleted(e),this.dispose(),setTimeout((()=>{try{self.close()}catch(e){this._logger.error("Failed to close window",{error:e})}}),100)):this._logger.warn("Could not extract pack ID from success page")}extractPackId(){const e=self.location.pathname.match(/\/(brain|go)\/agent\/setup\/([a-zA-Z0-9]+)\/success$/);return e?e[2]:null}dispose(){this._disposables.forEach((e=>e()))}}function gt(){const e=[],t=new T.n((0,r.OB)().browserApi.message),n=new z;e.push(n),n.assistantNotchInitialized();const i=o.h.create(""),s=o.h.create(""),c=new l(t),u=ht.maybeInitializeAgentInstallationMonitor(c);u&&e.push(u),e.push(((e,t)=>{const n=new w({document,textFieldContent:t}),i=new E(n,t);return new S.S((0,x.NH)(new a.d(e,y.toServer,y.toClient)),i.publicApi)})(t,s));const d=new at(c.api,i.view());e.push(d),e.push((0,ie.Q)({setTextFieldContent:e=>{s.set(e)},setSelectedTextFromIntegration:e=>{i.set(e)}}));const h=o.h.create(void 0);e.push(oe(h));const g=(e,t,n,i)=>{(0,Te.d)(e,d.selectedText.get(),t,n,i)},p=new A.h((0,r.OB)().browserApi.preferences),m=(0,R.q)(p);e.push(p),xe(p,t,g).then((t=>{e.push(...t)}));const f=(0,D.R)(p).getKeyboardShortcuts().view((e=>e.openAssistant)),_=new ct(p),v=(0,I.f)(),b=new ne;e.push(b);const C=((e,t,n,i,o,r=new z,s,a,l)=>Ae.V.get({monitorAs:"assistant-notch"}).inject(Re.EM.fromDocument(self.document,ot,{role:"presentation","data-grammarly-ignore-keyboard-events":"true"}),Re.zs.appendChild(document.documentElement),De.G7.showWhenLoaded(ke.createElement(it,{theme:a.colorScheme,currentKeyboardShortcut:s,onClick:t,trackingService:r,notchViewState:e,onDragEnd:Te.s,onDisableTextCheckingForThisSiteSession:n,onDisableTextCheckingForThisSiteIndefinitely:i,onSetKeyboardShortcut:o,branding:l}))))(h,g,(()=>{(0,r.OB)().bgRpc.api.sendToFocusTab({kind:k.B.Kind.disableOnTab}),O(),n.assistantNotchDeactivatedTextChecking("session")}),(()=>{(0,r.OB)().bgRpc.api.disableOnFocusTab(document.location.origin),n.assistantNotchDeactivatedTextChecking("indefinitely")}),(e=>{m.quickSettings.setKeyboardShortcut({openAssistant:e}),n.assistantNotchKeyboardShortcutSet()}),n,f,_,v?b.shouldShowHeroWaveAnimation$.view((e=>({brand:"superhuman-go",heroWaveAnimationEnabled:e,onHeroWaveAnimationShow:()=>{b.recordHeroWaveAnimationShown()}}))):o.h.create({brand:"grammarly"})),F={openSidePanel:(e,t,i)=>{const o=n.assistantNotchClicked();g(o,t,e,i)}};e.push(he(F));const O=()=>{null==C||C.dispose(),e.forEach((e=>e.dispose()))};return{dispose:O}}},14979:(e,t,n)=>{n.d(t,{d:()=>a,s:()=>l});var i=n(42082),o=n(90189),r=n(39963),s=n(16249);async function a(e,t,n=i._N,a="always_on_notch",l=!1){let c="clicked";try{const i={assistantSessionId:e,selectedText:t,agentId:n,openAgentProfile:l};await(0,o.OB)().browserApi.sessionStorage.set({alwaysOnAssistantOnOpenData:i}),await(0,o.OB)().bgRpc.api.openSidePanel(),c="success"}catch(e){c="failure"}return(0,r.Tb)().alwaysAvailableAssistant.openSidePanel(a,c),s.J.alwaysOnAssistantSidePanelOpen(e,a),"success"===c}function l(e){(0,o.OB)().browserApi.sessionStorage.set({alwaysOnAssistant:{notchPosition:e}})}},33675:(e,t,n)=>{n.d(t,{Y:()=>r});var i=n(13391),o=n(29483);function r(){const e=i.h.create(void 0),t=t=>{e.set(null==t?void 0:t.isSidePanelOpen)};(0,o.OB)().browserApi.sessionStorage.get("isSidePanelOpen").then(t);const n=(0,o.OB)().browserApi.sessionStorage.onChange(t);return{isSidePanelOpen:e.view(),getSelectedAgentId:()=>{const t=e.get();if(t)return t.selectedAgentId},dispose:n}}},55916:(e,t,n)=>{n.d(t,{L:()=>o});var i=n(92379);const o=()=>i.createElement("input",{"aria-hidden":"true",tabIndex:-1,style:{position:"absolute",inset:0,opacity:0,cursor:"inherit"}})},42082:(e,t,n)=>{if(n.d(t,{_N:()=>o,a8:()=>s,qb:()=>r,t6:()=>a}),5526!=n.j)var i=n(17993);const o="chat",r="legacyProofreader",s=5526!=n.j?i.a:null,a="legacyPlagiarism"},82096:(e,t,n)=>{var i;n.d(t,{K:()=>i}),function(e){e[e.initial=0]="initial",e[e.applied=1]="applied"}(i||(i={}))},30105:(e,t,n)=>{n.d(t,{Hq:()=>o,Vt:()=>i,wE:()=>r});const i="vBarCard",o="grammarly-extension-vBar-card",r="vBarCardPositionReference"},24435:(e,t,n)=>{if(n.d(t,{Lt:()=>d,kt:()=>h,nM:()=>l}),5526!=n.j)var i=n(28338);if(5526!=n.j)var o=n(70843);if(5526!=n.j)var r=n(90595);if(5526!=n.j)var s=n(99548);if(5526!=n.j)var a=n(85098);const l=(e,t)=>c(e,t)||u(e,t),c=(e,t)=>d(e)&&t===a.N,u=(e,t)=>"test"===e.getTreatment(o.p.KnowledgeHubAtlassian)&&t.endsWith("atlassian.net"),d=e=>e.isGateEnabled(r.K.KnowledgeHubGdocs),h=e=>t=>{switch(t.knowledgeHubCardType.value){case s.fp.SuggestedTerm:return!0;case s.fp.TermDetails:return e;default:return(0,i.L0)(t.knowledgeHubCardType.value)}}},99548:(e,t,n)=>{n.d(t,{fp:()=>r,L5:()=>a,nk:()=>u,JJ:()=>c,TM:()=>l,li:()=>s,VI:()=>d});var i=n(21147),o=n(58303);var r,s,a,l,c,u;function d(e){var t,n,i,r;return{termId:s.create((null===(t=e.extraProperties)||void 0===t?void 0:t.knowledgeHubTermId)||""),headerText:e.extraProperties.knowledgeHubInstitutionName?`${e.extraProperties.knowledgeHubInstitutionName} Knowledge Share`:"Knowledge Share",headerIconSrc:e.extraProperties.knowledgeHubLogoUrl,articleTitle:e.title,articleContent:e.details,suggestCorrectionUrl:o.ij(e.extraProperties.knowledgeHubSuggestCorrectionUrl),relatedMaterials:(null===(n=e.extraProperties.knowledgeHubRelatedMaterials)||void 0===n?void 0:n.map((e=>e)))||[],aliases:(null===(i=e.extraProperties.knowledgeHubAliases)||void 0===i?void 0:i.map((e=>e)))||[],pointPeople:(null===(r=e.extraProperties.knowledgeHubPointPeople)||void 0===r?void 0:r.map((({communicationMethods:e,...t})=>({...t,communicationMethods:e.map((e=>e)),jobTitle:o.ij(t.jobTitle),avatarUrl:o.ij(t.avatarUrl)}))))||[]}}!function(e){e[e.TermDetails=0]="TermDetails",e[e.SuggestedTerm=1]="SuggestedTerm"}(r||(r={})),function(e){e.create=function(e){return e},e.eq=i.yv}(s||(s={})),function(e){e.on="on",e.off="off"}(a||(a={})),function(e){e.redirect="redirect",e.copyName="copyName"}(l||(l={})),function(e){e.gdocs="gdocs",e.gmail="gmail",e.other="other"}(c||(c={})),function(e){e.fromDomain=function(t){switch(!0){case(e=>"docs.google.com"===e)(t):return e.gdocs;case(e=>/^mail\.google\.com$/.test(e))(t):return e.gmail;default:return e.other}}}(c||(c={})),function(e){e.OnlyOnboarding="OnlyOnboarding",e.All="All"}(u||(u={}))},33442:(e,t,n)=>{if(n.d(t,{EI:()=>g,Ed:()=>d,JD:()=>a,Yz:()=>u,kK:()=>h,r4:()=>l,ux:()=>c}),5526!=n.j)var i=n(58303);if(5526!=n.j)var o=n(48758);if(3075==n.j)var r=n(67385);if(5526!=n.j)var s=n(99548);const a=e=>e.startsWith("KnowledgeHub/SuggestedTerm/"),l=e=>e._tag===r.J8.Type.add&&d(e.alert),c=e=>"KnowledgeHub/TermDetails/TermDetails"===e.pname?i.G(s.fp.TermDetails):a(e.pname)?i.G(s.fp.SuggestedTerm):i.YP,u=e=>o.S.isCapiAlert(e)&&i.pC(e.knowledgeHubCardType),d=e=>u(e)&&e.knowledgeHubCardType.value===s.fp.TermDetails,h=e=>u(e)&&e.knowledgeHubCardType.value===s.fp.SuggestedTerm,g=(e,t)=>n=>i=>{const o=`${n} promise rejection: ${String(i)}`;e.knowledgeHub.error("promiseRejection",o,t,i)}},41587:(e,t,n)=>{if(n.d(t,{Cb:()=>l,DU:()=>g,Gu:()=>u,O3:()=>h,W1:()=>d,ZD:()=>s,_9:()=>c,aC:()=>r,bH:()=>m,w6:()=>a,wc:()=>p}),5526!=n.j)var i=n(14527);if(5526!=n.j)var o=n(95869);function r(e){return!(!o.s.isInsert(e)||!e.insert)&&(Object.prototype.hasOwnProperty.call(e.insert,"snippetOption")&&Object.prototype.hasOwnProperty.call(e.insert.snippetOption,"multiSelect"))}function s(e){return!(!o.s.isInsert(e)||!e.insert)&&Object.prototype.hasOwnProperty.call(e.insert,"textbox")}function a(e){return!!o.s.isInsert(e)&&(!!e.insert&&Object.prototype.hasOwnProperty.call(e.insert,"currentUser"))}function l(e){return!(!o.s.isInsert(e)||!e.insert)&&(a(e)&&Object.prototype.hasOwnProperty.call(e.insert.currentUser,"userEmail"))}function c(e){return!(!o.s.isInsert(e)||!e.insert)&&Object.prototype.hasOwnProperty.call(e.insert,"datepicker")}function u(e){return"string"!=typeof e&&e.ops.reduce(((e,t)=>e||(r(t)||s(t)||a(t)||c(t))),!1)}function d(e){return u(new i.i([e]))||l(e)}const h=e=>{var t,n,i;return null!==(i=null!==(t=e.insert.snippetOption.placeHolderName)&&void 0!==t?t:null===(n=e.insert.snippetOption.options[0])||void 0===n?void 0:n.label)&&void 0!==i?i:""},g=e=>{var t,n;return new Intl.DateTimeFormat("en-US",{dateStyle:null!==(t=e.insert.datepicker.dateFormat)&&void 0!==t?t:"short",timeStyle:null!==(n=e.insert.datepicker.timeFormat)&&void 0!==n?n:void 0}).format(Date.now())},p=e=>{if(r(e))return h(e);if(s(e))return e.insert.textbox.placeHolderName;if(l(e)){if("UserEmail"===e.insert.currentUser.type)return e.insert.currentUser.userEmail;if("UserFirstName"===e.insert.currentUser.type)return e.insert.currentUser.userFirst;if("UserLastName"===e.insert.currentUser.type)return e.insert.currentUser.userLast}return c(e)?g(e):""},m=e=>e.ops.reduce(((e,t)=>r(t)||s(t)?e+1:e),0)},11816:(e,t,n)=>{n.d(t,{Y:()=>o,c:()=>i});const i={accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},o={enabled:!0,hotkey:"Tab",snoozedUntil:null}},87846:(e,t,n)=>{n.d(t,{N:()=>i});const i="gr-oauth-key"},1763:(e,t,n)=>{n.d(t,{D2:()=>r,Ss:()=>o,YJ:()=>a,iW:()=>l,kx:()=>s,oc:()=>u,zW:()=>c});var i=n(67734);const o=(0,i.SH)([10,30,60,120,600]),r=(0,i.SH)([0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1,2,3,4,5,6,7,8,9,10,15,20,25,30,40,50,60,70,80,90,100]),s=(0,i.SH)([0,5,10,20,30,40,50,60,70,80,85,90,91,92,93,94,95,96,97,98,99,99.5,99.8,99.9,100]),a=(0,i.SH)([0,1,5,10,15,20,25,30,40,50,60,70,80,90,100,150,200,250,500,750,1e3,2e3,5e3,1e4]),l=(0,i.SH)([0,1,2,4,5,10,50,100,250,500,750,1e3,1500,2e3,3e3,4e3,5e3,1e4,15e3]),c=(0,i.SH)([0,10,50,100,200,250,300,400,500,750,1e3,2e3,2500,3e3,4e3,5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3,14e3,15e3,2e4,25e3,3e4,35e3,4e4,45e3,5e4,75e3,1e5]),u=(0,i.SH)([0,100,200,500,1e3,2e3,3e3,5e3,1e4,1e5,5e5,1e6])},37275:(e,t,n)=>{var i,o,r;n.d(t,{HH:()=>i,HJ:()=>o,WV:()=>r}),function(e){e.unknown="unknown",e.rewriteUnder30Chars="rewriteUnder30Chars",e.rewrite31_100Chars="rewrite31_100Chars",e.rewrite101_200Chars="rewrite101_200Chars",e.rewriteRewriteBeyond200Chars="rewriteRewriteBeyond200Chars"}(i||(i={})),function(e){e.unknown="unknown",e.longRewrite="longRewrite",e.shortRewrite="shortRewrite"}(o||(o={})),function(e){e.hotkey="hotkey",e.individualPreview="individualPreview",e.individualRevert="individualRevert"}(r||(r={}))},67734:(e,t,n)=>{if(n.d(t,{EC:()=>a,No:()=>l,SH:()=>o,mI:()=>r}),5526!=n.j)var i=n(37275);function o(e,t){const n=new Array(e.length+1);let i=-1/0;for(let o=0;o<e.length;o++){const r=e[o],s=void 0===t?i.toString():i.toExponential(t),a=void 0===t?r.toString():r.toExponential(t);n[o]=[i,r,`${o>0?s:""}...${a}`],i=r}const o=void 0===t?i.toString():i.toExponential(t);return n[e.length]=[i,1/0,`${o}...`],n}const r=e=>e<0?i.HH.unknown:e<=30?i.HH.rewriteUnder30Chars:e<=100?i.HH.rewrite31_100Chars:e<=200?i.HH.rewrite101_200Chars:i.HH.rewriteRewriteBeyond200Chars,s=5526!=n.j?["Correctness/FullSentence/Fusion/Rewrite","Calliope/Rewrite/QualityPush/ImproveItPush","WritingExpert/Rewrite/SuggestionsGeneration/Suggestions"]:null,a=e=>null===e?i.HJ.unknown:s.includes(e)?i.HJ.longRewrite:i.HJ.shortRewrite,l=(e,t,n)=>{var i;const o=null!==(i=e.get(t))&&void 0!==i?i:{failCount:0,count:0};return e.set(t,{failCount:o.failCount+(n?1:0),count:o.count+1}),e}},48758:(e,t,n)=>{n.d(t,{S:()=>o,b:()=>i});var i,o,r=n(7415),s=n(82096),a=n(33442),l=n(78767),c=n(43389),u=n(67385);!function(e){e.capi="capiAlert",e.autocorrect="autocorrectAlert",e.touchTypist="touchTypistAlert",e.revertAutoApply="revertAutoAppliedAlert",e.snippetsTemplate="snippetsTemplateAlert"}(i||(i={})),function(e){function t(e){return Object.values(i).includes(e._tag)}function n(e){return e._tag===i.capi}function o(e){return e._tag===i.autocorrect}function d(e){return e._tag===i.touchTypist}function h(e){return e._tag===i.revertAutoApply}function g(e){return e._tag===i.snippetsTemplate}function p(e){return n(e)&&!u.DD.isMuted(e)}function m(e){return p(e)&&!u.DD.isHidden(e)}function f(e){return n(e)&&u.DD.isRegular(e)}function _(e){return n(e)&&u.DD.isWithSubAlerts(e)}function v(e){return n(e)&&u.DD.isWithTransformJson(e)}e.isCommonAlert=t,e.isCapiAlert=n,e.isNotCapiAlert=function(e){return!n(e)},e.isAutocorrectAlert=o,e.isTouchTypistAlert=d,e.isCapiAlertToAutoApply=function(e){return n(e)&&!0===e.autoapply},e.isRevertAutoApplyAlert=h,e.isSnippetsTemplatingAlert=g,e.isUnmutedCapiAlert=p,e.isHiddenCapiAlert=function(e){return p(e)&&u.DD.isHidden(e)},e.isFreePremiumLockedCapiAlert=function(e){return p(e)&&u.DD.isFreePremiumLockedDeprecated(e)},e.isInlineLockedUICapiAlert=function(e){return p(e)&&u.DD.isInline(e)&&(u.DD.isFreePremiumLocked(e)||u.DD.isFreePremiumUphook(e))},e.isFreePremiumUnlockedCapiAlert=function(e){return p(e)&&u.DD.isFreePremiumUnlocked(e)},e.isVisibleCapiAlert=m,e.isVisibleInlineCapiAlert=function(e){return m(e)&&u.DD.isInline(e)},e.isVisibleNotInlineCapiAlert=function(e){return m(e)&&!u.DD.isInline(e)},e.isRegularCapiAlert=f,e.isSuperCapiAlert=_,e.isTransformJsonCapiAlert=v,e.isSuggestedSnippetAlert=function(e){return v(e)&&e.isSuggestedSnippet},e.isToneAIAlert=function(e){return v(e)&&e.isToneAI},e.isEthicalAIAlert=function(e){return(v(e)||_(e))&&e.isEthicalAI},e.isSuggestionAlert=function(e){return!(0,a.Yz)(e)},e.isVbarAlert=function(e){return"true"===e.extraProperties.vbar},e.isWeTeaserAlert=function(e){return"true"===e.extraProperties.underline_with_teaser},e.canResizeAlert=function(t){return Boolean(e.isCapiAlert(t)&&t.updatable)},e.isCorrectnessAlert=function(e){return t(e)&&n(e)&&e.cardLayout.outcome===u.TC.correctness},e.isFullSentenceRewriteAlert=function(e){return t(e)&&n(e)&&"true"===e.extraProperties.full_sentence_rewrite},e.ordering={greaterThanOrEqual:(e,t)=>{if(g(e)||g(t))return g(e);if(d(e)||d(t))return d(e);if(n(e)){if(n(t))return u.DD.ordering.greaterThanOrEqual(e,t);if(o(t))return t.state===s.K.applied;if(h(t))return!1;(0,l.vE)(t)}else{if(!n(t))return o(e)?!!h(t)||e.state===s.K.applied:!!o(t)&&t.state!==s.K.applied;if(o(e))return e.state===s.K.initial;if(h(e))return!1;(0,l.vE)(e)}},areConflicting:(e,t)=>n(e)&&n(t)?u.DD.ordering.areConflicting(e,t):e._tag===t._tag&&(f(e)&&f(t)&&c.SV.equals(e.transformRange,t.transformRange)||(0,r.Hx)(e.highlightRanges,t.highlightRanges,c.SV.equals)),areSame:(e,t)=>{if(n(e)&&n(t))return u.DD.ordering.areSame(e,t);if(e._tag===t._tag){const n=e=>{const{id:t,revision:n,...i}=e;return i};return(0,l.fS)(n(e),n(t))}return!1}},e.alertMapToCapiAlerts=t=>Object.values(t).filter((t=>!!t&&e.isCapiAlert(t)))}(o||(o={}))},43389:(e,t,n)=>{n.d(t,{$:()=>s,EA:()=>r,QK:()=>a,SV:()=>o,Td:()=>l,x:()=>g});var i,o,r,s,a,l,c,u=n(28338),d=n(21147),h=n(948);!function(e){e.isNoop=function(e){return 0===e.startOffset&&0===e.endOffset}}(i||(i={})),function(e){function t(e){return{start:Math.min(e.start,e.end),end:Math.max(e.start,e.end)}}e.eq=d.MW({start:d.lr,end:d.lr}),e.normalize=t,e.mergeAdjacent=function(e){return t=>{if(0===t.length)return[];const n=[t[0]];for(let i=1;i<t.length;++i){const o=n[n.length-1];e(o,t[i])?n[n.length-1]={start:o.start,end:t[i].end}:n.push(t[i])}return n}},e.create=function(e,n){return t({start:e,end:null!=n?n:e})},e.translate=function(e,t){return 0===t?e:{start:e.start+t,end:e.end+t}},e.transform=function(e,t){return i.isNoop(t)?e:{start:e.start+t.startOffset,end:e.end+t.endOffset}},e.rebase=function(e,t){return t.reduce(((e,t)=>{const n=h.q.getTransformOffset(t);return{start:t.pos<=e.start?Math.max(t.pos,e.start+n):e.start,end:t.pos<e.end?Math.max(t.pos,e.end+n):e.end}}),e)},e.contains=function(e,t,n){const i=n?t.start<=e.end:t.start<e.end;return t.start>=e.start&&i&&t.end>=e.start&&t.end<=e.end},e.isAdjacent=function(e,t){return e.end===t.start||t.end===e.start},e.intersects=function(e,t){return e.start>=t.start&&e.start<t.end||t.start>=e.start&&t.start<e.end},e.equals=function(t,n){return e.eq.equals(t,n)},e.toString=function(e){return`[${e.start}, ${e.end}]`},e.isCollapsed=function(e){return e.start===e.end},e.convertFromRawTransform=function(e){return{start:e.s,end:e.e}},e.length=function(e){return e.end-e.start}}(o||(o={})),function(e){e.hasTransformJSON=function(e){return"transformJSON"in e}}(r||(r={})),function(e){function t(e,t,n){return e.slice(t.start,t.end)===n}function n(e){return"transformJSON"in e&&Boolean(e.transformJSON)}function i(e){return"subalerts"in e&&e.subalerts&&"labels"in e&&Boolean(e.labels)}function r(e){return!n(e)&&!i(e)}function s({withPosition:e,withTransformJSON:t,withSubAlerts:o}){return s=>r(s)?e(s):n(s)?t(s):i(s)?o(s):void(0,u.vE)(s)}e.convertHighlightRangeFromRawTransform=e=>({...o.convertFromRawTransform(e),type:e.type}),e.isConsistentWithText=function(n,i){let o;if(e.isWithSubAlerts(n))o=n.highlightRanges.every(((e,o)=>t(i,e,n.highlightTexts[o])));else{const e=n.highlightRanges.find((e=>"enclosing"===e.type))||n.highlightRanges[0];o=t(i,e,n.highlightTexts[0])}return o&&(!e.isRegular(n)||t(i,n.transformRange,n.transformText))},e.isWithTransformJson=n,e.isWithSubAlerts=i,e.isWithPosition=r,e.isRegular=function(e){return r(e)||n(e)},e.match=s,e.map=function({withPosition:e,withTransformJSON:t,withSubAlerts:n}){return s({withPosition:e,withTransformJSON:t,withSubAlerts:n})}}(s||(s={})),function(e){e.waitingForConnection="waitingForConnection",e.waitingForReconnection="waitingForReconnection",e.startingConnection="startingConnection",e.newSessionStarted="newSessionStarted",e.existingSessionStarted="existingSessionStarted"}(a||(a={})),function(e){e.ready="ready",e.inProgress="inProgress",e.reconnectRequired="reconnectRequired"}(l||(l={})),function(e){e.unknown="unknown",e.clientQueueNonEmpty="clientQueueNonEmpty",e.noSuchSession="noSuchSession",e.cannotReconnectToSelf="cannotReconnectToSelf",e.differentUsers="differentUsers",e.sessionClosed="sessionClosed",e.messageCountIncorrect="messageCountIncorrect"}(c||(c={}));const g=(e,t)=>{if(!e)return c.clientQueueNonEmpty;if(!t)return c.unknown;const{reconnectFailedReason:n}=t;if("no such session"===n)return c.noSuchSession;if("cannot reconnect to self"===n)return c.cannotReconnectToSelf;if("different users"===n)return c.differentUsers;if("session is closed"===n)return c.sessionClosed;return n&&/(client send|server send|no such message in buffer)/.test(n)?c.messageCountIncorrect:c.unknown}},67385:(e,t,n)=>{n.d(t,{DD:()=>v,J8:()=>b,TC:()=>r,kQ:()=>y,uM:()=>o,wF:()=>_});var i,o,r,s=n(39953),a=n(7415),l=n(28338),c=n(31008),u=n(94173),d=n(58303),h=n(72350),g=n(93953),p=n(78767),m=n(43389);!function(e){e.synonym="Synonym",e.plagiarism="Plagiarism",e.grammar="Grammar",e.contextualSpelling="ContextualSpelling",e.sentenceStructure="SentenceStructure",e.punctuation="Punctuation",e.style="Style",e.enhancement="Enhancement",e.spelling="Spelling",e.voxStyle="VoxStyle",e.snippets="Snippets",e.correctness="Correctness",e.other="Other"}(i||(i={})),function(e){e.sales_crm="sales_crm",e.sales_engagement="sales_engagement",e.sales_enablement="sales_enablement",e.marketing_email_automation="marketing_email_automation",e.marketing_content="marketing_content",e.customer_service="customer_service",e.customer_surveys_surveys="customer_surveys_surveys",e.recruiting="recruiting",e.training_learning="training_learning",e.project_management="project_management",e.legal="legal",e.contractors="contractors",e.human_resources="human_resources",e.email="email",e.business_chat="business_chat"}(o||(o={})),function(e){e.correctness="correctness",e.clarity="clarity",e.engagement="engagement",e.tone="tone",e.vox="vox",e.knowledgeHub="knowledgeHub",e.other="other"}(r||(r={}));const f=[r.clarity,r.correctness,r.engagement,r.tone],_=e=>f.includes(e);var v,b,w,y;!function(e){function t({withPosition:t,withTransformJSON:n,withSubAlerts:i}){return o=>e.isWithPosition(o)?t(o):e.isWithTransformJson(o)?n(o):e.isWithSubAlerts(o)?i(o):void(0,l.vE)(o)}e.isWithTransformJson=e=>m.$.isWithTransformJson(e),e.isWithSubAlerts=e=>m.$.isWithSubAlerts(e),e.isWithPosition=e=>m.$.isWithPosition(e),e.isRegular=e=>m.$.isRegular(e),e.match=t;const n={Correctness:r.correctness,Clarity:r.clarity,Engagement:r.engagement,Tone:r.tone,"Style guide":r.vox,"Knowledge Hub":r.knowledgeHub};e.createOutcomeType=function(e){return e&&n[e]||r.other},e.ordering={greaterThanOrEqual:(e,t)=>e.isEthicalAIStandWithUkraine||t.isEthicalAIStandWithUkraine?e.isEthicalAIStandWithUkraine:e.isSuggestedSnippet||t.isSuggestedSnippet?e.priority>=t.priority:!e.isFree&&t.isFree||e.isFree&&!t.isFree?e.isVox||t.isVox?e.isVox:e.isFree:e.group===i.spelling&&t.group===i.spelling||e.group===i.contextualSpelling&&t.group===i.contextualSpelling||e.isVox&&t.isVox?e.priority>=t.priority:e.group===i.spelling||t.group!==i.spelling&&e.priority<=t.priority,areConflicting:(t,n)=>(!t.isFree&&!n.isFree||t.isFree&&n.isFree||t.isVox||n.isVox)&&!e.isMuted(t)&&!e.isMuted(n)&&(e.isRegular(t)&&e.isRegular(n)&&m.SV.equals(t.transformRange,n.transformRange)||(0,a.Hx)(t.highlightRanges,n.highlightRanges,m.SV.equals)),areSame:(e,n)=>{const i=e=>{const n=e=>({highlights:e.highlights,alternatives:(0,s.zG)(e.alternatives,d.UI((e=>({alternatives:e.alternatives}))))}),i=(0,s.zG)(e,t({withPosition:e=>({highlightTexts:e.highlightTexts,highlightRanges:e.highlightRanges,transformText:e.transformText,transformRange:e.transformRange,replacements:e.replacements}),withTransformJSON:e=>n(e.transformJSON),withSubAlerts:e=>n(e.subalerts)}));return Object.assign(i,{priority:e.priority,isFree:e.isFree,group:e.group,outcome:e.outcome,category:e.category}),i};return(0,p.fS)(i(e),i(n))}},e.isInline=e=>e.inline===h.wQ.Inline.inline,e.isMuted=e=>void 0!==e.muted&&e.muted!==h.JW.MutedByType.NOT_MUTED,e.isFreePremiumLockedDeprecated=e=>"locked_transform"===e.freePremium,e.isFreePremiumLocked=e=>"locked"===e.freePremium,e.isFreePremiumUnlocked=e=>"unlocked"===e.freePremium,e.isFreePremiumUphook=e=>"uphook"===e.freePremium,e.isHidden=e=>{var t;return null!==(t=e.isHidden)&&void 0!==t&&t}}(v||(v={})),function(e){let t;!function(e){e.start="start",e.add="add",e.changed="changed",e.remove="remove",e.finished="finished",e.emogenie="emogenie",e.textInfo="text_info",e.submitOtAck="submit_ot_ack",e.proofitAvailability="realtime_proofit_availability",e.proofitCancelResponse="realtime_proofit_cancel_resp",e.proofitCompleted="realtime_proofit_completed",e.proofitProgress="realtime_proofit_in_progress",e.proofitProgressError="realtime_proofit_progress_error",e.proofitProgressRejected="realtime_proofit_progress_rejected",e.proofitSubmitResponse="realtime_proofit_submit_resp",e.feedback="feedback",e.error="error",e.publishedAck="published_ack",e.submitSurveyResultAck="submit_survey_result_ack",e.showSurvey="show_survey",e.sduiAdd="sdui_add",e.sduiUpdate="sdui_update",e.sduiRemove="sdui_remove",e.asyncCheckFinished="async_check_finished",e.toggleChecksAck="toggle_checks_ack",e.setContextAck="set_context_ack",e.touchTypistTriggerResponse="trigger_touch_typist"}(t=e.Type||(e.Type={})),e.start=function(e){return{_tag:t.start,domainName:e.domainName,domainCategory:e.domainCategory,userMutedCategories:e.userMutedCategories,defaultDocumentContext:(0,s.zG)(c.R$.serializeDefault((0,s.zG)(e.defaultDocumentContext,d.g_((()=>c.R$.defaultContextFallback),u.y))),(e=>e)),sessionUuid:e.sessionUuid,isNewSession:e.isNewSession,allowedFeatures:e.allowedFeatures,cheetahState:e.cheetahState,maxWsMessageSize:e.maxWsMessageSize}},e.add=function(e){return{_tag:t.add,alert:e}},e.change=function(e){return{_tag:t.changed,changed:e}},e.remove=function(e){return{_tag:t.remove,removedId:e}},e.finished=function(e){return{_tag:t.finished,finished:e}},e.emogenie=function(e){return{_tag:t.emogenie,emogenieReport:{emotions:e.emotions,hidden:e.hidden,institutionLogo:e.institutionLogo,brandTonesEnabled:e.brandTonesEnabled,brandTonesConfigured:e.brandTonesConfigured}}},e.textInfo=function(e){return{_tag:t.textInfo,...e}},e.submitOtAck=function(e){return{_tag:t.submitOtAck,data:e}},e.feedbackAck=function({scores:e,scoreStatus:n}){return{_tag:t.feedback,scores:e?g.v0.OutcomeScores.normalize(e):void 0,scoreStatus:n}},e.proofitAvailability=function(e){return{_tag:t.proofitAvailability,info:e}},e.proofitSubmitResponse=function(e){return{_tag:t.proofitSubmitResponse,info:e}},e.proofitProgress=function(e){return{_tag:t.proofitProgress,info:e}},e.proofitCompleted=function(e){return{_tag:t.proofitCompleted,info:e}},e.proofitProgressError=function(e){return{_tag:t.proofitProgressError,info:e}},e.proofitProgressRejected=function(e){return{_tag:t.proofitProgressRejected,info:e}},e.proofitCancelResponse=function(e){return{_tag:t.proofitCancelResponse,info:e}},e.error=function(e){return{_tag:t.error,error:"not_authorized"===e.error?"not_authorized":"unknown",raw_error:e.error,event:e}},e.publishedAck=function(e){return{_tag:t.publishedAck,survey:e.survey}},e.submitSurveyResultAck=function(){return{_tag:t.submitSurveyResultAck}},e.showSurvey=function(e){return{_tag:t.showSurvey,survey:e.survey}},e.sduiAdd=function(e){return{_tag:t.sduiAdd,event:e}},e.sduiUpdate=function(e){return{_tag:t.sduiUpdate,event:e}},e.sduiRemove=function(e){return{_tag:t.sduiRemove,event:e}},e.asyncCheckFinished=function(e){return{_tag:t.asyncCheckFinished,event:e}},e.toggleChecksAck=function(e){return{_tag:t.toggleChecksAck,event:e}},e.setContextAck=function(e){return{_tag:t.setContextAck,event:e}},e.setTouchTypistTriggerResponse=function(e){return{_tag:t.touchTypistTriggerResponse,event:e}},e.isSDUIMessage=function(e){switch(e._tag){case t.sduiAdd:case t.sduiRemove:case t.sduiUpdate:return!0;default:return!1}},e.isPlagiarismRelatedMessage=function(e){switch(e._tag){case t.asyncCheckFinished:case t.setContextAck:case t.toggleChecksAck:return!0;default:return!1}}}(b||(b={})),function(e){e.british="british",e.american="american",e.australian="australian",e.canadian="canadian"}(w||(w={})),function(e){e.notReady="notReady",e.ready="ready",e.firstTextCheckCompleted="firstTextCheckCompleted",e.disconnected="disconnected"}(y||(y={}))},808:(e,t,n)=>{n.d(t,{T:()=>i});var i,o=n(78767);!function(e){e.isSupported=function(){return(0,o.DV)((()=>!!new DataTransfer),(e=>!1))}}(i||(i={}))},49629:(e,t,n)=>{n.d(t,{S:()=>i});var i,o=n(84766),r=n(32734),s=n(20905);!function(e){const t=e=>(0,o.F)(e).pipe((0,r.B)());e.sec5=t(s.m9(5)),e.sec2=t(s.m9(2)),e.sec1=t(s.m9(1)),e.hz4=t(s.Xd(4)),e.hz10=t(s.Xd(10)),e.hz30=t(s.Xd(30));const n=new Map;e.create=function(e){const i=n.get(e);if(i)return i;{const i=t(e);return n.set(e,i),i}}}(i||(i={}))},83507:(e,t,n)=>{n.d(t,{L:()=>a,n:()=>s});var i=n(92379),o=n(40594),r=n(29483);const s=(e,t=(0,r.OB)().browserApi.getUrl)=>t(`src/css/${e}.styles.css`),a=e=>{const t=i.useMemo((()=>o.Y.create("RenderWithStyles")),[]),n="chunkName"in e?[e.chunkName]:e.chunkNameList,r=i.useMemo((()=>n.map((t=>s(t,e.getUrl)))),[...n]),[a,l]=i.useState(0),[c,u]=i.useState(!1);return i.useEffect((()=>{a===r.length&&u(!0)}),[a]),i.createElement(i.Fragment,null,r.map((e=>i.createElement("link",{rel:"stylesheet",type:"text/css",href:e,key:e,onLoad:()=>(e=>{null==t||t.debug(`Style link was loaded [href: ${e}]`),l((e=>e+1))})(e),onError:n=>((e,n)=>{null==t||t.error(`Couldn't load style link [href: ${n}]`,e),l((e=>e+1))})(n,e)}))),c&&e.children)}},7865:(e,t,n)=>{if(n.d(t,{C:()=>v}),5526!=n.j)var i=n(74822);if(5526!=n.j)var o=n(97092);if(5526!=n.j)var r=n(90572);if(5526!=n.j)var s=n(79859);if(5526!=n.j)var a=n(13391);if(5526!=n.j)var l=n(40594);if(5526!=n.j)var c=n(43389);if(5526!=n.j)var u=n(20489);if(5526!=n.j)var d=n(57059);if(5526!=n.j)var h=n(49629);if(5526!=n.j)var g=n(63310);if(5526!=n.j)var p=n(26155);if(5526!=n.j)var m=n(94670);if(5526!=n.j)var f=n(34657);if(5526!=n.j)var _=n(79242);class v{constructor(e,t,n,c,d,g=!1,p=(e=>e),m=h.S.hz10,f=h.S.hz30,_=h.S.hz30,v=l.Y.create("AquaHighlightCollectionGeometry"),b=u.Rv.dummy()){this._geometryProvider=e,this._geometryLayout=t,this._getTextMap=n,this._highlightFilter=c,this._geometryInvalidated=d,this._updateHighlightsOnInvalidGeometry=g,this._mapHighlightInvalidatedMeta=p,this._updateLayoutClock=m,this._updateGeometryClock=f,this._updateStateClock=_,this._log=v,this._geometryUpdatePerfLogger=b,this._allHighlightsData=new Map,this._visibleHighlights=new Map,this._highlightsState=a.h.create(new Map),this._updateStateForAllQueue=new i.x,this._updateGeometryAndStateQueue=new i.x,this._highlightsGeometryUpdateProcessorValue=null,this._subs=[this._updateGeometryAndStateQueue.pipe((0,o.f)(this._updateGeometryClock),(0,r.h)((e=>e.length>0))).subscribe((e=>{const t=new Set;for(const n of e)for(const e of n)t.add(e);this._updateGeometry(t,t.size),this._queueUpdateStateFor(t)})),this._updateStateForAllQueue.pipe((0,s.U)(this._updateStateClock)).subscribe((()=>{this._updateStateForAll()})),this._geometryInvalidated.pipe((0,s.U)(this._updateLayoutClock)).subscribe((e=>{this._updateHighlightsOnInvalidGeometry?this._visibleHighlights.forEach(((e,t)=>this.updateHighlight(t,e.textRange,this._mapHighlightInvalidatedMeta(e.state.meta)))):this.recalculateAllHighlights((e=>this._mapHighlightInvalidatedMeta(e)))})),this._highlightFilter.pipe((0,s.U)(this._updateLayoutClock)).subscribe((e=>{this._onFilterUpdate()}))],this.geometry=this._highlightsState}get _highlightsGeometryUpdateProcessor(){return null!==this._highlightsGeometryUpdateProcessorValue||(this._highlightsGeometryUpdateProcessorValue=new m._(this._updateHighlightGeometry.bind(this),f.w.create({onComputingFrameComplete:e=>{e.length>0&&this._queueUpdateStateFor(e)}}))),this._highlightsGeometryUpdateProcessorValue}_onFilterUpdate(){var e,t;const{filter:n,type:i}=this._highlightFilter.get();if(i===p.qH.ChangeType.invalidate)this._allHighlightsData.forEach(((e,t)=>{this.updateHighlight(t,e.textRange,e.meta)})),null===(e=this._log)||void 0===e||e.trace("Filter change: all highlights are updated");else{const e=[];this._visibleHighlights.forEach(((t,i)=>{n(t.textRange)||e.push(i)}));const i=[];this._allHighlightsData.forEach(((e,t)=>{!this._visibleHighlights.has(t)&&n(e.textRange)&&i.push(t)})),null===(t=this._log)||void 0===t||t.trace("Filter change:",{moveToInvisibleIds:e,moveToVisibleIds:i}),this._removeVisibleHighlights(e,!0),i.forEach((e=>{this._addOrUpdateVisibleHighlight(e,this._allHighlightsData.get(e))}))}}_updateStateForAll(){const e=performance.now();this._highlightsState.set(new Map(Array.from(this._visibleHighlights.entries()).filter((([e,t])=>t.state.rects&&t.state.rects.length>0)).map((([e,t])=>[e,t.state])))),d.I.trackTaskLatency("highlightProcessing",e)}_queueUpdateStateFor(e){this._updateStateForAllQueue.next(void 0)}_getInvalidHighlights(e,t,n){const i=new Set(e),o=this._getTextMap();return Array.from(this._visibleHighlights.entries()).filter((([e,r])=>!i.has(e)&&!n(e,r.state.meta)&&!(t&&this._geometryProvider.getIsConsistent(r.geometrySource,r.textRange,o)&&!this._geometryProvider.getIsInvalid(r.geometrySource))))}_createAlertGeometry(e){try{return this._geometryProvider.create(e,this._getTextMap())}catch(e){return null}}_updateGeometry(e,t=e.length,n=(e=>e)){if(0===t)return;const i=this._geometryUpdatePerfLogger.startMeasure();this._highlightsGeometryUpdateProcessor.execute(e,(()=>({mapMeta:n,conversionContext:this._geometryLayout.getCurrentConversionContext()}))),i.endMeasure()}_updateHighlightGeometry(e,t){var n,i,o;const r=this._visibleHighlights.get(e);if(r){const o=this._geometryProvider.getClientRects(r.geometrySource);if(null!==o){const i=Array.from(o).filter((e=>e.height>0&&e.width>0));if(0===i.length)null===(n=this._log)||void 0===n||n.warn(`Degenerate geometry for #${e}`,o),this._visibleHighlights.set(e,{...r,state:{rects:[],meta:t.mapMeta(r.state.meta)}});else{const n=i.map((e=>g.UL.setPosition(t.conversionContext.clientToRelative(e),e))),o=p.NC.is(r.textRange)&&n.length>1&&n.some(((e,t,n)=>Math.abs(e.top-n[0].top)>1));p.NC.is(r.textRange)&&o?this.updateHighlight(e,{start:r.textRange.start+r.textRange.increasedRight,end:r.textRange.end-r.textRange.increasedLeft},r.state.meta):this._visibleHighlights.set(e,{...r,state:{rects:n,meta:t.mapMeta(r.state.meta)}})}}else null===(i=this._log)||void 0===i||i.warn(`#${e} has null geometry`),this._visibleHighlights.set(e,{...r,state:{rects:[],meta:t.mapMeta(r.state.meta)}})}else null===(o=this._log)||void 0===o||o.warn(`couldn't recalculate #${e}, doesn't exist`)}_removeVisibleHighlights(e,t){for(const t of e){const e=this._visibleHighlights.get(t);e&&(this._visibleHighlights.delete(t),this._safeDisposeGeometry(e.geometrySource))}t&&this._queueUpdateStateFor(e)}_safeDisposeGeometry(e){var t;try{this._geometryProvider.dispose(e)}catch(e){null===(t=this._log)||void 0===t||t.warn("error disposing geometry source",e)}}recalculateHighlight(e,t=(e=>e)){return this._updateGeometry([e],1,t)}recalculateAllHighlights(e=(e=>e)){const t=this._visibleHighlights.keys();this._updateGeometry(t,this._visibleHighlights.size,e)}_addOrUpdateVisibleHighlight(e,t,n=!1){var i;if(this._highlightFilter.get().filter(t.textRange)){const o=this._createAlertGeometry(t.textRange);if(o)return this._visibleHighlights.set(e,{textRange:t.textRange,geometrySource:o,state:{rects:[],meta:t.meta}}),this._updateGeometryAndStateQueue.next([e]),null===(i=this._log)||void 0===i||i.trace(`${n?"updated":"added"} highlight #${e}`),!0}return!1}addHighlight(e,t,n){this._visibleHighlights.has(e)&&this._removeVisibleHighlights([e],!1);const i={textRange:t,meta:n};return this._allHighlightsData.set(e,i),this._addOrUpdateVisibleHighlight(e,i)}updateHighlight(e,t,n){const i=this._visibleHighlights.get(e);if(void 0!==i){this._safeDisposeGeometry(i.geometrySource);const o={textRange:t,meta:n};this._allHighlightsData.set(e,o);return!!this._addOrUpdateVisibleHighlight(e,o,!0)||(this._removeVisibleHighlights([e],!0),!1)}return this.addHighlight(e,t,n)}removeHighlights(e){if(0===e.length)return;e.forEach((e=>this._allHighlightsData.delete(e)));const t=e.filter((e=>this._visibleHighlights.has(e)));t.length>0&&this._removeVisibleHighlights(t,!0)}removeAllHighlights(){this.removeHighlights(Array.from(this._allHighlightsData.keys()))}maintainConsistency(e,t=(e=>e),n=!1,i=(()=>!1)){for(const[o,{textRange:r,state:s}]of this._getInvalidHighlights(e,!n,i))this.updateHighlight(o,r,t(s.meta))}hasHighlight(e){return this._allHighlightsData.has(e)}intersectingHighlightIDs(e){const t=[];return this._visibleHighlights.forEach(((n,i)=>{(c.SV.intersects(e,n.textRange)||c.SV.isCollapsed(e)&&c.SV.isAdjacent(e,n.textRange))&&t.push(i)})),t}updateHighlightsForTextRange(e,t){const n={start:Math.max(e.start-30,0),end:e.end},i=this.intersectingHighlightIDs(n).reduce(((e,t)=>{const n=this._visibleHighlights.get(t);return n&&e.push({id:t,textRange:n.textRange}),e}),[]),{highlightsToRemove:o,highlightsToUpdate:r}=(0,_.h)(i,e,t);r.forEach((e=>{var t;const n=null===(t=this._allHighlightsData.get(e.id))||void 0===t?void 0:t.meta;n&&this.updateHighlight(e.id,e.textRange,n)})),this.removeHighlights(o)}dispose(){this._subs.forEach((e=>e.unsubscribe())),this._subs=[];for(const e of this._visibleHighlights.values())this._safeDisposeGeometry(e.geometrySource);this._visibleHighlights.clear(),this._log=void 0,this._highlightsState.set(new Map),this._updateStateForAllQueue.complete(),this._updateStateForAllQueue=new i.x,this._updateGeometryAndStateQueue.complete(),this._updateGeometryAndStateQueue=new i.x,this._allHighlightsData.clear()}}},26155:(e,t,n)=>{n.d(t,{NC:()=>s,WF:()=>h,pc:()=>c,qH:()=>r,y$:()=>a});var i=n(90023);if(5526!=n.j)var o=n(24666);var r,s,a,l,c,u=n(13391),d=n(78767);function h(e){return e.rect.map((e=>e.size)).behavior.pipe((0,o.x)(((e,t)=>e.height===t.height&&e.width===t.width)))}!function(e){let t;!function(e){e.invalidate="invalidate",e.preserve="preserve"}(t=e.ChangeType||(e.ChangeType={}))}(r||(r={})),function(e){e.everything=u.h.create({filter:e=>!0,type:e.ChangeType.preserve})}(r||(r={})),function(e){function t(e,t){const n=e.end-e.start==1,i="a"===t.slice(e.start,e.end);return n&&!i}e.is=function(e){const t=e;return(0,d.Nf)(t.increasedLeft)&&"number"==typeof t.increasedLeft&&(0,d.Nf)(t.increasedRight)&&"number"==typeof t.increasedRight},e.expandIfNeeded=function(e,n){if(t(e,n)){const t=e.start>0?1:0,i=e.end!==n.length?1:0;return{start:e.start-t,end:e.end+i,increasedLeft:t,increasedRight:i}}return{...e}},e.shouldExpand=t}(s||(s={})),function(e){let t;!function(e){let t=0;e.create=function(e,n){return t++,`${e}-${t}${void 0!==n?`|${n}`:""}`},e.createFromMark=function(e){return`${e}`}}(t=e.Id||(e.Id={}))}(a||(a={})),function(e){e.Mock=class{constructor(){this.addHighlight=i.W8,this.updateHighlight=i.W8,this.removeHighlights=i.Q1,this.removeAllHighlights=i.Q1,this.recalculateHighlight=i.Q1,this.recalculateAllHighlights=i.Q1,this.maintainConsistency=i.Q1,this.hasHighlight=i.W8,this.updateHighlightsForTextRange=i.Q1,this.dispose=i.Q1,this.geometry=u.h.create(new Map)}intersectingHighlightIDs(e){return[]}}}(l||(l={})),function(e){e.none="none",e.hovered="hovered",e.hoveredNeedsAttention="hovered_needs_attention"}(c||(c={}))},79625:(e,t,n)=>{function i(e,t=1.5,n=1.5){if(e.length<=0)return[];if(1===e.length)return e;{const i=[];let o=e[0];for(let r=1;r<e.length;r++){const s=e[r],a=s.top+s.height,l=a<o.top,c=a===o.top&&s.height>0&&o.height>0;if(l||c)continue;const u=Math.min(o.left,s.left),d=Math.min(o.top,s.top),h=Math.max(o.left+o.width,s.left+s.width)-u,g=Math.max(o.top+o.height,a)-d,p=h<=o.width+s.width+t,m=g<=o.height+s.height-n,f=g===o.height+s.height&&(0===s.height||0===o.height);s.width===o.width&&s.height===o.height&&s.left===o.left&&s.top===o.top||(p&&(m||f)?o={top:d,left:u,height:g,width:h}:(i.push(o),o=s))}return i.push(o),i}}function o(e,t=0,n=.5){if(e.length<=0)return[];{const i=[e[0]];for(let o=1;o<e.length;++o){const r=i[o-1],s=e[o],a=Math.min(r.top,s.top),l=Math.max(r.top+r.height,s.top+s.height)-a<r.height+s.height,c=s.top-(r.top+r.height),u=.5*(s.height+r.height);if(l||Math.abs(c)>n*u)i.push(s);else{const e=r.top+r.height+t*c;i[o-1]={top:r.top,left:r.left,width:r.width,height:e-r.top},i.push({top:e,left:s.left,width:s.width,height:s.top+s.height-e})}}return i}}function r(e){return e.reduce(((e,t)=>{if(null==e)return t;return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),width:Math.max(e.width,t.left+t.width-e.left),height:Math.max(e.height,t.top+t.height-e.top)}}),null)}n.d(t,{es:()=>i,jr:()=>r,yX:()=>o})},85580:(e,t,n)=>{n.d(t,{M:()=>i,R:()=>o});var i,o,r=n(39953),s=n(53186),a=n(58303),l=n(59833),c=n(36769),u=n(47557),d=n(90189),h=n(91297),g=n(90595),p=n(16381),m=n(63310),f=n(79625);!function(e){function t(e,t,n,i,o){if(e&&t&&e.node.ownerDocument===t.node.ownerDocument){const r=(0,p.pZ)()&&"BR"===e.node.nodeName,s=(e=>{let t=!1,n=e.previousSibling;for(;n&&!t;)(0,h.BM)(n)&&n.textContent?t=!0:n=n.previousSibling;return n})(e.node),a=r&&s?o.getFragmentsByNode(s):null;let l;return a&&(l=a[a.length-1]),{start:{node:l?l.node:e.node,offset:l?l.endOffset-l.startOffset+l.startOffsetInNode:"BR"===e.node.nodeName?0:n-e.startOffset+e.startOffsetInNode},end:{node:t.node,offset:"BR"===t.node.nodeName?0:i-t.startOffset+t.startOffsetInNode}}}return(0,r.zG)(o.getTextFieldRoot(),(o=>null===e&&null===t&&0===n&&0===i&&o?{start:{offset:0,node:o},end:{offset:0,node:o}}:null))}function n(e,n,i,o=!1,r=!1){const s=(t,n=t-1)=>{const i=e.getFragmentAtOrBeforeOffset(t);return r&&(null==i?void 0:i.notSelectable)?e.getFragmentAtOrBeforeOffset(n):i},a=s(n);let l;return(0,d.OB)().experimentClient.isGateEnabled(g.K.PrioritizeLeftNodeAsEndNode)&&i>0?l=s(i-1,i):(l=s(i),o&&!(null==l?void 0:l.text.trim().length)&&(l=s(i-1))),t(a,l,n,i,e)}function i(e,t=!1){try{const n=(0,c.Cq)(e.start.node.ownerDocument).createRange();return n.setStart(e.start.node,e.start.offset),n.setEnd(e.end.node,e.end.offset),t||!n.collapsed?n:null}catch(e){return null}}e.getRangeParams=t,e.getRangeParamsFromTextMap=n,e.createRangeFromParams=i,e.createRange=function(e,t,o,r=!1,s=!1,a=!1){const l=n(e,t,o,s,a);return l?i(l,r):null},e.createRangeForNode=function(e){try{const t=(0,c.Cq)(e.ownerDocument).createRange();return t.selectNode(e),t.collapsed?null:t}catch(e){return null}},e.equalSelection=function(e,t){if((0,p.G6)()){const n=e.toString()===t.toString(),i=e.startContainer.contains(t.startContainer)||e.endContainer.contains(t.endContainer),o=""===e.toString(),r=e.startOffset===t.startOffset;return n&&i&&(!o||r)}return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}(i||(i={})),function(e){e.provider={create:(e,t,n)=>i.createRange(t,e.start,e.end,n),dispose(e){e.detach()},getClientRects:(e,t)=>e.collapsed&&!t?null:(0,r.zG)(s.nI(Array.from(e.getClientRects())),a.wp((()=>s.nI((0,r.zG)(e.endContainer,a.DT((t=>e.collapsed&&(0,u.Tv)(t)&&"BR"===t.tagName)),a.UI((e=>e.getBoundingClientRect())),a.g_((()=>[]),(e=>[e])))))),a.wp((()=>s.nI((0,r.zG)(a.ij(e.startContainer.childNodes[0]),a.hX((()=>1===e.startContainer.childNodes.length)),a.hX(u.Tv),a.hX((e=>"BR"===e.tagName)),a.UI((e=>e.getBoundingClientRect())),a.g_((()=>[]),(e=>[e])))))),a.fS((()=>[])),f.es,f.yX,l.UI(m.Pf.create)),getIsConsistent(e,t,n){const o=i.getRangeParamsFromTextMap(n,t.start,t.end);return null!==o&&e.startContainer===o.start.node&&e.startOffset===o.start.offset&&e.endContainer===o.end.node&&e.endOffset===o.end.offset},getIsInvalid:e=>e.collapsed}}(o||(o={}))},94670:(e,t,n)=>{if(n.d(t,{_:()=>o}),5526!=n.j)var i=n(34657);class o{constructor(e,t=i.w.create()){this._handleItem=e,this._options=t,this._nextComputingFrameId=null,this._firstComputingFrameId=null,this._scheduledItems=new Set}execute(e,t){for(const t of e)this._scheduledItems.add(t);null===this._nextComputingFrameId&&(this._firstComputingFrameId=this._options.scheduleFirstComputingFrame((()=>this._executeFrame(t))))}dispose(){null!==this._nextComputingFrameId&&this._options.cancelNextComputingFrame(this._nextComputingFrameId),null!==this._firstComputingFrameId&&this._options.cancelFirstComputingFrame(this._firstComputingFrameId)}_executeFrame(e){this._nextComputingFrameId=null;const t=this._scheduledItems.values()[Symbol.iterator](),n=e(),i=this._options.getTimestamp(),o=[];let r=!1;do{const e=t.next(void 0);if(e.done){r=!0;break}this._handleItem(e.value,n),this._scheduledItems.delete(e.value),o.push(e.value)}while(this._isWithinComputingFrame(i));this._options.onComputingFrameComplete(o),r||(this._nextComputingFrameId=this._options.scheduleNextComputingFrame((()=>this._executeFrame(e))))}_isWithinComputingFrame(e){return this._options.getTimestamp()-e<=this._options.computingFrameDuration}}},34657:(e,t,n)=>{n.d(t,{w:()=>o});class i{constructor(e){this._overrides=e}get computingFrameDuration(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.computingFrameDuration)&&void 0!==t?t:i.DEFAULT_COMPUTING_FRAME_DURATION}get getTimestamp(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.getTimestamp)&&void 0!==t?t:i.DEFAULT_GET_TIMESTAMP}get scheduleFirstComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.scheduleFirstComputingFrame)&&void 0!==t?t:i.DEFAULT_SCHEDULE_FIRST_COMPUTING_FRAME}get cancelFirstComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.cancelFirstComputingFrame)&&void 0!==t?t:i.DEFAULT_CANCEL_FIRST_COMPUTING_FRAME}get scheduleNextComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.scheduleNextComputingFrame)&&void 0!==t?t:i.DEFAULT_SCHEDULE_NEXT_COMPUTING_FRAME}get cancelNextComputingFrame(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.cancelNextComputingFrame)&&void 0!==t?t:i.DEFAULT_CANCEL_NEXT_COMPUTING_FRAME}get onComputingFrameComplete(){var e,t;return null!==(t=null===(e=this._overrides)||void 0===e?void 0:e.onComputingFrameComplete)&&void 0!==t?t:i.DEFAULT_ON_COMPUTING_FRAME_COMPLETE}}var o;i.DEFAULT_COMPUTING_FRAME_DURATION=5,i.DEFAULT_GET_TIMESTAMP=()=>performance.now(),i.DEFAULT_SCHEDULE_FIRST_COMPUTING_FRAME=e=>(e(),0),i.DEFAULT_CANCEL_FIRST_COMPUTING_FRAME=()=>{},i.DEFAULT_SCHEDULE_NEXT_COMPUTING_FRAME=e=>requestAnimationFrame(e),i.DEFAULT_CANCEL_NEXT_COMPUTING_FRAME=e=>cancelAnimationFrame(e),i.DEFAULT_ON_COMPUTING_FRAME_COMPLETE=()=>{},function(e){e.create=function(e){return new i(e)}}(o||(o={}))},79242:(e,t,n)=>{function i(e,t,n){return e.reduce(((e,{id:i,textRange:o})=>{const r=t.start>=o.start&&t.start<=o.end,s=t.start<=o.start&&t.end>=o.start;return r?e.highlightsToRemove.push(i):s?e.highlightsToUpdate.push({id:i,textRange:{start:o.start+n,end:o.end+n}}):e.highlightsToUpdate.push({id:i,textRange:{start:o.start,end:o.end}}),e}),{highlightsToUpdate:[],highlightsToRemove:[]})}n.d(t,{h:()=>i})},68418:(e,t,n)=>{n.d(t,{Cv:()=>s,E9:()=>i,Ir:()=>r,p8:()=>o});var i,o,r,s,a=n(83473);!function(e){e.equals=function(e,t){return(0,a.M$)(e.left,t.left)&&(0,a.M$)(e.top,t.top)},e.fromCartesian=function({x:e,y:t}){return{top:t,left:e}},e.toCartesian=function({top:e,left:t}){return{x:t,y:e}},e.zero={top:0,left:0},e.minus=function(e,t){return{top:e.top-t.top,left:e.left-t.left}},e.plus=function(e,t){return{top:e.top+t.top,left:e.left+t.left}},e.ceil=function(e){return{left:Math.ceil(e.left),top:Math.ceil(e.top)}},e.floor=function(e){return{left:Math.floor(e.left),top:Math.floor(e.top)}},e.create=function(e){return{top:e.top,left:e.left}},e.l1Distance=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.left)}}(i||(i={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromClientPoint=function(e,n,i){return t({top:e.top-n.top+i.top,left:e.left-n.left+i.left})},e.zero={top:0,left:0}}(o||(o={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.fromOffsetPoint=function(e,n,i){return t({top:e.top+n.top-i.top,left:e.left+n.left-i.left})},e.fromPage=function(e,n){return t({top:e.top-n.top,left:e.left-n.left})}}(r||(r={})),function(e){function t(e){return{top:e.top,left:e.left}}e.create=t,e.getHighlightsPosition=function(e,n,i,o={top:0,left:0}){return t({top:e.top+n.top+i.top+o.top,left:e.left+n.left+i.left+o.left})},e.fromClient=function(e,n){return t({top:e.top+n.top,left:e.left+n.left})},e.fromOffset=function(e,t,n){return{top:e.top+t.top-n.top,left:e.left+t.left-n.left}}}(s||(s={}))},63310:(e,t,n)=>{n.d(t,{$u:()=>i,D1:()=>a,Pf:()=>s,UL:()=>o,Wm:()=>r});var i,o,r,s,a,l=n(83473),c=n(68418);!function(e){e.create=function(e){return{width:e.width,height:e.height}}}(i||(i={})),function(e){function t(e,t){const n=e.left<=t.left?e:t,i=n===e?t:e,o=e.top<=t.top?e:t,r=o===e?t:e;return n.left+n.width>=i.left&&o.top+o.height>=r.top}e.union=function(e){return t=>t.slice(1).reduce(((t,n)=>{const i=Math.min(n.top,t.top),o=Math.min(n.left,t.left),r=Math.max(t.left+t.width,n.left+n.width)-o,s=Math.max(t.top+t.height,n.top+n.height)-i;return e({top:i,left:o,width:r,height:s})}),t[0])},e.getIntersection=function(e,n){if(!t(e,n))return null;const i=e.left+e.width,o=e.top+e.height,r=n.left+n.width,s=n.top+n.height,a=Math.max(e.left,n.left),l=Math.max(e.top,n.top);return{left:a,top:l,width:Math.min(i,r)-a,height:Math.min(o,s)-l}},e.contains=function(e,t){return e.left>=t.left&&e.left<=t.left+t.width&&e.top>=t.top&&e.top<=t.top+t.height},e.doesRectContain=function(e,t){return t.left>=e.left&&t.left+t.width<=e.left+e.width&&t.top>=e.top&&t.top+t.height<=e.top+e.height},e.intersects=t,e.intersectsStrict=function(e,t){const n=e.left<=t.left?e:t,i=n===e?t:e,o=e.top<=t.top?e:t,r=o===e?t:e;return n.left+n.width>i.left&&o.top+o.height>r.top},e.setPosition=function(e,t){const n=i.create(t);return Object.assign({},e,i.create(t),{right:e.left+n.width,bottom:e.top+n.height})},e.area=function(e){return e.width*e.height},e.isEmpty=function(e){return 0===e.width&&0===e.height},e.shift=function(e,t){const n=c.E9.plus(e,t);return{...e,...n}},e.widen=function(e,t){return{...e,left:e.left-t,width:e.width+2*t}},e.equals=function(e,t,n){return(0,l.M$)(e.left,t.left,n)&&(0,l.M$)(e.top,t.top,n)&&(0,l.M$)(e.width,t.width,n)&&(0,l.M$)(e.height,t.height,n)},e.verticalOverlap=function(e,t){const n=e.top<=t.top?e:t,i=n===e?t:e,o=n.top+n.height-i.top;return o<0?0:o>i.height?1:o/Math.min(i.height,n.height)},e.midlineHorizontal=function(e){return{...e,top:e.top+e.height/2,height:0}},e.midlineVertical=function(e){return{...e,left:e.left+e.width/2,width:0}}}(o||(o={})),function(e){e.create=function(e){return{...e,kind:"offsetPoint"}},e.topLeftPoint=function({top:e,left:t}){return{kind:"offsetPoint",top:e,left:t}}}(r||(r={})),function(e){e.create=function(e){return{kind:"clientPoint",top:e.top,left:e.left,bottom:(null==e?void 0:e.bottom)||e.top+e.height,right:(null==e?void 0:e.right)||e.left+e.width,width:e.width,height:e.height}},e.empty={top:0,left:0,bottom:0,right:0,width:0,height:0,kind:"clientPoint"}}(s||(s={})),function(e){e.create=function(e){return e}}(a||(a={}))},18647:(e,t,n)=>{if(n.d(t,{Bi:()=>y,E6:()=>g,Jj:()=>l,Me:()=>a,Qf:()=>w,XQ:()=>u,Yd:()=>d,a9:()=>m,bp:()=>h,f0:()=>b,is:()=>p,kW:()=>_,o:()=>c,wr:()=>f}),5526!=n.j)var i=n(36769);const o=new Set(["absolute","relative","fixed","sticky"]),r=new Set(["strict","content","layout","paint"]),s=new Set(["flex","inline-flex"]);function a(e){const t=e.ownerDocument;if(t)return t;throw new Error("target does not have ownerDocument")}function l(e){const t=a(e).defaultView;if(t)return t;throw new Error("active document is detached from a window")}function c(e){return l(e).getComputedStyle(e)}function u(e){return o.has(c(e).position)}function d(e,t){const n=o.has(t.position);return!n&&null!==t.zIndex&&"auto"!==t.zIndex&&e.parentElement?s.has(c(e.parentElement).display):n}function h(e){const t=a(e).body;if(e===t)throw new Error("target is body");let n=e;do{if(n=n.parentElement,n&&u(n))return n}while(null!==n&&n!==t);return n||t}function g(e,t){var n,o,r,s;const l=a(e).body;if(e===l)throw new Error("target is body");const c=(0,i.Cq)(l.parentElement);let u=e;do{if(u=null!==(s=null!==(o=null!==(n=u.assignedSlot)&&void 0!==n?n:u.parentElement)&&void 0!==o?o:null===(r=u.getRootNode())||void 0===r?void 0:r.host)&&void 0!==s?s:null,u&&t(u))return u}while(null!==u&&u!==c);return u||c}function p(e){return g(e,(e=>{return u(e)||(t=e,r.has(c(t).contain));var t}))}function m(e){return function(e){const t=c(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowY||"scroll"===t.overflowY}(e)||function(e){const t=c(e);return"auto"===t.overflow||"scroll"===t.overflow||"auto"===t.overflowX||"scroll"===t.overflowX}(e)}function f(e,t){for(let n=e;null!=n;n=n.parentElement)if(t(n))return n;return null}function _(e,t){const n=e.ownerDocument,i=n&&n.defaultView;if(!n||!i)return;const o=n.body.scrollLeft,r=n.body.scrollTop,s=i.scrollY,a=i.scrollX;t&&!n.hasFocus()?e.dispatchEvent(new FocusEvent("focus")):e.focus(),s===i.scrollY&&a===i.scrollX||i.scroll(a,s),r!==n.body.scrollTop&&(n.body.scrollTop=r),o!==n.body.scrollLeft&&(n.body.scrollLeft=o)}const v=e=>e?1/e:1,b=(e,t)=>{if(!e)return;const n=w(self.getComputedStyle(e));if(!n)return;const i=v(Number(n.x)),o=v(Number(n.y));return{transform:`translate(${t.left*(i-1)}px, ${t.top*(o-1)}px) scale(${i}, ${o})`,transformOrigin:e.style.transformOrigin}};function w(e){if(e.transform&&"none"!==e.transform){const t=/scale\(([\d.]+)(?:, ([\d.]))*\)|matrix\(([\d.]+), [\d.]+, [\d.]+, ([\d.]+), [\d.]+, [\d.]+\)/.exec(e.transform);if(t){const[e,n,i,o,r]=t;return{x:n||o,y:i||r||n}}}}function y(e){try{const t=new DOMMatrixReadOnly(e.transform);return{x:t.e,y:t.f}}catch(e){return}}},948:(e,t,n)=>{n.d(t,{k:()=>o,q:()=>i});var i,o,r=n(93667),s=n(78767);!function(e){let t;function n(e){return e._tag===t.ins}function i(e){return e._tag===t.del}!function(e){e.ins="ins",e.del="del"}(t=e.Type||(e.Type={})),e.isIns=n,e.ins=function(e,n){return{_tag:t.ins,pos:e,text:n}},e.isDel=i,e.del=function(e,n){return{_tag:t.del,pos:e,text:n}},e.applyChanges=function(e,t){return t.reduce(((e,t)=>n(t)?e.slice(0,t.pos)+t.text+e.slice(t.pos):i(t)?e.slice(0,t.pos)+e.slice(t.pos+t.text.length):(0,s.vE)(t)),e)},e.applyChangesInverse=function(t,o){return e.applyChanges(t,o.reverse().map((t=>n(t)?e.del(t.pos,t.text):i(t)?e.ins(t.pos,t.text):(0,s.vE)(t))))},e.getTransformOffset=function(e){return n(e)?e.text.length:i(e)?-e.text.length:void(0,s.vE)(e)},e.getRange=function(e){return{start:e.pos,end:e.pos+e.text.length}}}(i||(i={})),function(e){e.fromDiff=function(e,t,n){const o=r(e,t,n);let s=0;const a=[];for(const e of o)e[0]===r.EQUAL?s+=e[1].length:e[0]===r.INSERT?(a.push(i.ins(s,e[1])),s+=e[1].length):(e[0],a.push(i.del(s,e[1])));return a}}(o||(o={}))},13425:(e,t,n)=>{if(n.d(t,{BT:()=>v,ed:()=>_}),5526!=n.j)var i=n(90023);var o=n(36769);if(5526!=n.j)var r=n(87459);if(5526!=n.j)var s=n(18647);if(5526!=n.j)var a=n(90595);if(5526!=n.j)var l=n(16381);if(5526!=n.j)var c=n(38364);if(5526!=n.j)var u=n(40594);if(5526!=n.j)var d=n(85580);if(5526!=n.j)var h=n(64405);if(5526!=n.j)var g=n(53680);if(5526!=n.j)var p=n(65487);async function m(e,t,n,i=0,r,a=null,l=null,u=!1,h=!1){const m=(0,o.Cq)(e.startContainer.ownerDocument,"range owner document");return a&&(0,s.kW)(a,h),null!==l&&await(0,c.gw)(l),((e,t,n=0,i=!1)=>{let o=-1,r=!1;if(i){const n=1===e.rangeCount&&e.getRangeAt(0);if(n&&d.M.equalSelection(t,n))return!0}for(;!r&&o<n;){if(e.removeAllRanges(),0===e.rangeCount){e.addRange(t);const n=1===e.rangeCount&&e.getRangeAt(0);r=n&&d.M.equalSelection(t,n)}else r=!1;o++}return r})((0,o.Cq)(m.getSelection(),"doc selection"),e,i,u)?(void 0!==r&&await(0,c.gw)(r),n(t,m)):g.j.fail(p.wB.setSelectionFail)}var f;!function(e){e.storeFrom=function(e){const t=[],n=(0,o.Cq)(e.getSelection(),"document selection"),i=n.rangeCount;for(let e=0;e<i;e++)t.push(n.getRangeAt(e).cloneRange());return{ranges:t}},e.restoreTo=function(e,t){const n=(0,o.Cq)(t.getSelection(),"document selection");n.removeAllRanges(),e.ranges.forEach((e=>n.addRange(e)))}}(f||(f={}));class _{constructor(e,t,n,i=((e,t,n=!1)=>d.M.createRange(e,t.start,t.end,!0,n)),o=2,r,s=null,l=null,c,h,g=u.Y.create("GenericReplacementService")){this._textObserver=e,this._experimentClient=t,this._doReplaceAtCurrentSelection=n,this._createRange=i,this._setSelectionRetryCount=o,this._asyncReplaceDelay=r,this._focusElement=s,this._delayBeforeSelection=l,this._onBeforeNextReplacementInBatch=h,this._log=g,this.capabilities="richtext",this.onBeforeNextReplacementInBatch=async()=>{var e;await(null===(e=this._onBeforeNextReplacementInBatch)||void 0===e?void 0:e.call(this))},this._transformReplacementBeforeApply=this._experimentClient.isGateEnabled(a.K.TransformReplacementBeforeApplyFeature)&&c?c:e=>e,this._isSelectionOptimizationEnabled=this._experimentClient.isGateEnabled(a.K.ExistingSelectionOptimization),this._dispatchFocusEventWhenDocNotFocused=this._experimentClient.isGateEnabled(a.K.DispatchFocusEventIfDocNotFocused)}_getCurrentTextMap(){return this._textObserver.getCurrentTextMap()}canPerformReplacement(e){const t=this._createRange(this._getCurrentTextMap(),e),n=null!==t;return t&&t.detach(),n}_getCurrentFormatMap(e){var t;return this._experimentClient.isGateEnabled(a.K.NonGDocsGetFormatMap)&&(null===(t=this._textObserver.getCurrentTextMap().getFormatHelper())||void 0===t?void 0:t.getInfo(e.start,e.end))||null}async _performReplacement(e,t,n){const i=this._createRange(this._getCurrentTextMap(),e,(0,l.G6)());let r=g.j.applied();if(i){const s=(0,o.Cq)(i.startContainer.ownerDocument,"range owner document"),a=n&&f.storeFrom(s);try{const n=this._getCurrentFormatMap(e);r=await m(i,t,this._doReplaceAtCurrentSelection,this._setSelectionRetryCount,this._asyncReplaceDelay,this._focusElement,this._delayBeforeSelection,this._isSelectionOptimizationEnabled,this._dispatchFocusEventWhenDocNotFocused),n&&r.context&&p.P9.isContentEditable(r.context)&&(r={...r,context:{...r.context,initialFormatMap:n}})}catch(e){this._log.error("genericReplaceAtRange fail",e),r=g.j.fail(p.wB.genericReplaceAtRangeRuntimeFail)}finally{i.detach()}return a&&f.restoreTo(a,s),r}return g.j.fail(p.wB.invalidRange)}async performReplacement(e,t){const n=this._transformReplacementBeforeApply(e,this._textObserver);if(Array.isArray(n)){let e;for(const i of n){const n=await this._performReplacement(i.pos,i.value,t);if(g.j.isFail(n))return n;e||(e=n.context)}return g.j.applied(e)}return this._performReplacement(n.pos,n.value,t)}insertAtCurrentSelection(e,t,n){return this._doReplaceAtCurrentSelection(e,t,n)}}class v extends(5526!=n.j?_:null){static create(e,t,n={}){return new v(e,t,n.createRange,n.setSelectionRetryCount,n.asyncReplaceDelay,n.focusElement||null,n.transformReplacementBeforeApply)}constructor(e,t,n,o,s,a,l){super(e,t,((e,t,n)=>r.O.create((o=>{const{command:r,arg:s,reason:a}=function(e,t){if("string"!=typeof e)return{command:"insertHTML",arg:h.VI.renderToHtml(e),reason:p.wB.execCommandInsertHTMLFail};if(null==t?void 0:t.html)return{command:"insertHTML",arg:t.html,reason:p.wB.execCommandInsertHTMLFail};return{command:"insertText",arg:e,reason:p.wB.execCommandInsertTextFail}}(e,n);o((0,i.zG)(t.execCommand(r,!1,s),g.j.fromResult(a,p.P9.contentEditable({replacementMethod:p.GB.execCommand}))))}))),n,o,s,a,null,l)}}},64405:(e,t,n)=>{n.d(t,{VI:()=>i});var i,o=n(95869),r=n(41587),s=n(90189),a=n(90595),l=n(31272),c=n(78968);function u(e){return e.replace(/ +/g,(function(t,n){const i=1===t.length,o=void 0!==e[n-1]&&void 0!==e[n+1];return i&&o?" ":t.split("").map(((e,t)=>t%2==0?"&nbsp;":" ")).join("")}))}function d(e){var t,n;return null!==(n=null===(t=function(e){return e.match(/^https?:\/\//i)?e:null}(e))||void 0===t?void 0:t.replace(/"/g,"%22").replace(/'/g,"%27"))&&void 0!==n?n:""}!function(e){function t(e){const t=Object.keys(e);return 0===t.length?"":` style="${t.map((t=>`${t}:${e[t]}`)).join(";")}"`}e.renderToHtml=function(e,i={}){const o=function(e){var n,i,o,r;const s=null!==(n=e.inlineBlockStyle)&&void 0!==n?n:{"box-sizing":"border-box",margin:"0",padding:"0","text-align":"left"},a=null!==(i=e.headingBlockStyle)&&void 0!==i?i:{"box-sizing":"border-box",margin:"0",padding:"0","text-align":"left"},l=null!==(o=e.listBlockStyle)&&void 0!==o?o:{"box-sizing":"border-box",margin:"0","text-align":"left"};return{singleLineDocumentWrapTag:null!==(r=e.singleLineDocumentWrapTag)&&void 0!==r?r:"span",inlineBlockStyleAttribute:t(s),headingBlockStyleAttribute:t(a),orderedListBlockStyleAttribute:[t({...l,"list-style-type":"decimal"}),t({...l,"list-style-type":"lower-alpha"}),t({...l,"list-style-type":"lower-roman"})],unorderedListBlockStyleAttribute:t({...l,"list-style-type":"disc"})}}(i),r=c.v.buildRenderInfo(e),s=1===r.length;return r.map((e=>{if(e instanceof c.v.HeadingRenderBlock)return`<h${e.level}${o.headingBlockStyleAttribute}>${n(e.delta)}</h${e.level}>`;if(e instanceof c.v.ListRenderBlock)return h(e,o);const t=s?o.singleLineDocumentWrapTag:"p";return`<${t}${o.inlineBlockStyleAttribute}>${n(e.delta)}</${t}>`})).join("")};const n=e=>c.v.isEmptyLine(e)?"&nbsp;":e.filter(o.s.isInsert).map(i).join("");function i(e){var n,i;let c="";if(o.s.isInsertString(e)&&(c=e.insert.replace("\n",""),c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/:/g,"&colon;").replace(/\(/g,"&lpar;").replace(/\)/g,"&rpar;"),(0,s.OB)().experimentClient.isGateEnabled(a.K.FormattingReplaceEmptyStringToNonBreakingSpaceEntity)&&(c=u(c))),(0,r.W1)(e))return u((0,r.wc)(e));o.s.isInsertEmbed(e)&&(null===(n=e.insert)||void 0===n?void 0:n.image)&&(c=`<img src="${d(e.insert.image)}"/>`);const h=null!==(i=e.attributes)&&void 0!==i?i:{};if(h.fontFamily||h.color||h.fontSize||h.backgroundColor){const e={"font-family":h.fontFamily,color:h.color,"font-size":h.fontSize,"background-color":h.backgroundColor};c=`<span${t((0,l.hX)(((e,t)=>void 0!==t),e))}>${c}</span>`}return!0===h.strike&&(c=`<s>${c}</s>`),!0===h.bold&&(c=`<strong>${c}</strong>`),!0===h.italic&&(c=`<em>${c}</em>`),!0===h.underline&&(c=`<u>${c}</u>`),h.link&&(c=`<a href="${d(h.link)}" target="_blank">${c}</a>`),c}function h(e,t){const i=e.items.map((e=>e instanceof c.v.ListRenderBlock?h(e,t):`<li>${n(e.delta)}</li>`)).join("");return"ordered"===e.listType?`<ol${t.orderedListBlockStyleAttribute[e.indent%3]}>${i}</ol>`:`<ul${t.unorderedListBlockStyleAttribute}>${i}</ul>`}}(i||(i={}))},25754:(e,t,n)=>{n.d(t,{$:()=>i});var i,o=n(95869),r=n(41587),s=n(78968);!function(e){e.renderToPlainText=function(e,n={}){var i,o,r;const a={objectReplacement:null!==(i=n.objectReplacement)&&void 0!==i?i:"",bulletSymbol:null!==(o=n.bulletSymbol)&&void 0!==o?o:"",dashSymbol:null!==(r=n.dashSymbol)&&void 0!==r?r:"-"};return s.v.buildRenderInfo(e).map((e=>t(e,a))).join("\n")};const t=(e,t)=>e instanceof s.v.ListRenderBlock?a(e,t):n(e.delta,t),n=(e,t)=>e.ops.map((e=>i(e,t))).join(""),i=(e,t)=>(0,r.W1)(e)?(0,r.wc)(e):o.s.isInsertString(e)?e.insert.replace("\n",""):t.objectReplacement;function a(e,t){let i=0;return e.items.map((o=>{if(o instanceof s.v.ListRenderBlock)return a(o,t);const r=function(e,t,n){switch(e.listType){case"bullet":return n.bulletSymbol;case"dashed":return n.dashSymbol;default:switch(e.indent%3){case 1:return`${String.fromCharCode("a".charCodeAt(0)+t)}.`;case 2:return`${function(e){let t=e,n="";for(let e=0;e<l.length;e++)for(;t>=l[e].value;)n+=l[e].digit,t-=l[e].value;return n}(t+1)}.`;default:return`${t+1}.`}}}(e,i++,t),c=Math.max(4*e.indent-r.length+2,0);return`${" ".repeat(c)}${r} ${n(o.delta,t)}`})).join("\n")}const l=[{digit:"l",value:50},{digit:"xl",value:40},{digit:"x",value:10},{digit:"ix",value:9},{digit:"v",value:5},{digit:"iv",value:4},{digit:"i",value:1}]}(i||(i={}))},78968:(e,t,n)=>{n.d(t,{v:()=>i});var i,o=n(95869);!function(e){class t{constructor(e){this.delta=e}}e.InlineRenderBlock=t;class n{constructor(e,t){this.level=e,this.delta=t}}e.HeadingRenderBlock=n;class i{constructor(e,t){this.indent=e,this.listType=t,this.items=[]}tryAppend(e,t){var n;if(!t.list||this.listType!==t.list)return!1;const o=null!==(n=t.indent)&&void 0!==n?n:0;if(this.indent===o)return this.items.push({delta:e}),!0;if(this.indent<o){let n=this.items.length>0?this.items[this.items.length-1]:null;return!!(n instanceof i&&n.tryAppend(e,t))||(n=new i(this.indent+1,t.list),this.items.push(n),n.tryAppend(e,t))}return!1}}e.ListRenderBlock=i,e.buildRenderInfo=function(e){const o=[];return e.eachLine(((e,r)=>{if(r.list){let t=o.length>0?o[o.length-1]:null;return!!(t instanceof i&&t.tryAppend(e,r))||(t=new i(0,r.list),o.push(t),t.tryAppend(e,r))}return r.header?(o.push(new n(r.header,e)),!0):(o.push(new t(e)),!0)})),o},e.isEmptyLine=e=>0===e.ops.length||1===e.ops.length&&r(e.ops[0]);const r=e=>o.s.isInsertString(e)&&("\n"===e.insert||""===e.insert);e.isRichText=e=>e.ops.some(s);const s=e=>o.s.isInsertEmbed(e)||o.s.isInsertString(e)&&void 0!==e.attributes&&l(e.attributes),a=["bold","italic","underline","link","header","list","indent"],l=e=>a.some((t=>void 0!==e[t]))}(i||(i={}))},27970:(e,t,n)=>{if(n.d(t,{Eb:()=>h,TG:()=>_,V0:()=>b,Xw:()=>v,_s:()=>d,eg:()=>p,m3:()=>g,xF:()=>m}),5526!=n.j)var i=n(78767);if(5526!=n.j)var o=n(90595);if(5526!=n.j)var r=n(88778);if(5526!=n.j)var s=n(13425);if(5526!=n.j)var a=n(25754);if(5526!=n.j)var l=n(64405);if(5526!=n.j)var c=n(53680);if(5526!=n.j)var u=n(65487);function d(e,t){return"string"==typeof e?{plain:e,html:null==t?void 0:t.html}:{plain:a.$.renderToPlainText(e),html:l.VI.renderToHtml(e)}}function h(e,t){const n=(0,i.DV)((()=>new DataTransfer),(()=>{})),o=new ClipboardEvent("paste",{clipboardData:n,bubbles:!0,cancelable:!0});return o.clipboardData?(void 0!==t.plain&&(0,r.N)(o.clipboardData).setData("text/plain",t.plain),void 0!==t.html&&(0,r.N)(o.clipboardData).setData("text/html",t.html),e.dispatchEvent(o)):null}function g(e){e.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:46,key:"Delete"}))}function p(e){e.dispatchEvent(new KeyboardEvent("keydown",{bubbles:!0,cancelable:!0,keyCode:39,key:"ArrowRight",code:"ArrowRight",shiftKey:!0}))}function m(e,t){const n=void 0===t.html?void 0:(0,i.DV)((()=>new DataTransfer),(()=>{})),o=new InputEvent("beforeinput",{inputType:"insertReplacementText",data:t.plain,dataTransfer:n,cancelable:!0,bubbles:!0});o.dataTransfer&&(void 0!==t.plain&&(0,r.N)(o.dataTransfer).setData("text/plain",t.plain),void 0!==t.html&&(0,r.N)(o.dataTransfer).setData("text/html",t.html)),e.dispatchEvent(o)}function f(e){return(0,i.DV)((()=>{const t="text",n=new InputEvent("beforeinput",{inputType:e,data:t,cancelable:!0,bubbles:!0});return(!e||n.inputType===e)&&n.data===t&&Boolean(n.getTargetRanges())}),(()=>!1))}function _(){return f("insertReplacementText")}function v(){return f("deleteContentBackward")}class b extends(5526!=n.j?s.ed:null){constructor({eventTarget:e,textObserver:t,createRange:n,setSelectionRetryCount:i,asyncReplaceDelay:r=0,focusElement:s=e,replaceEvent:a="paste",deletionEvent:l="keydown",delayBeforeSelection:p,transformReplacementBeforeApply:f,experimentClient:_,onBeforeNextReplacementInBatch:v}){const b=_.isGateEnabled(o.K.DispatchDeltaDeleteEvent);super(t,_,(async(t,n,i)=>{const o=d(t,i);return(b?!o.plain&&!o.html:!t)?"keydown"===l?(g(e),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchDeleteEvent}))):"paste"===l?(h(e,o),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchPasteDeleteEvent}))):"beforeinput"===l?(e.dispatchEvent(new InputEvent("beforeinput",{inputType:"deleteContentBackward",cancelable:!0,bubbles:!0})),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchBeforeInputDeleteContentEvent}))):(this._log.error("unknown replacement evenet",a),c.j.fail(u.wB.unknownDispatchHTMLReplacementEvent)):"paste"===a?(h(e,o),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchPasteEvent}))):"beforeinput"===a?(m(e,o),c.j.applied(u.P9.contentEditable({replacementMethod:u.GB.dispatchBeforeInputInsertReplacementTextEvent}))):(this._log.error("unknown replacement evenet",a),c.j.fail(u.wB.unknownDispatchTextReplacementEvent))}),n,i,r,s,p,f,v)}}},65487:(e,t,n)=>{var i,o,r,s,a,l,c,u,d,h;n.d(t,{$_:()=>s,Cf:()=>o,GB:()=>d,KK:()=>c,P9:()=>h,RL:()=>a,Vf:()=>r,aZ:()=>l,wB:()=>i}),function(e){e.setSelectionFail="setSelectionFail",e.genericReplaceAtRangeRuntimeFail="genericReplaceAtRangeRuntimeFail",e.invalidRange="invalidRange",e.unknownDispatchTextReplacementEvent="unknownDispatchTextReplacementEvent",e.unknownDispatchHTMLReplacementEvent="unknownDispatchHTMLReplacementEvent",e.execCommandInsertTextFail="execCommandInsertTextFail",e.execCommandInsertHTMLFail="execCommandInsertHTMLFail"}(i||(i={})),function(e){e.textareaReplaceRuntimeFail="textareaReplaceRuntimeFail",e.insertAtCurrentSelectionFail="insertAtCurrentSelectionFail"}(o||(o={})),function(e){e.gdocsCursorServiceError="gdocsCursorServiceError",e.gdocsSingleReplacementError="gdocsSingleReplacementError"}(r||(r={})),function(e){e.cursorServiceError="cursorServiceError",e.batchRuntimeError="batchRuntimeError",e.injectedReplacementRuntimeError="injectedReplacementRuntimeError",e.injectedFailTextChanged="injectedFailTextChanged",e.injectedFailTextNotChanged="injectedFailTextNotChanged"}(s||(s={})),function(e){e.executionTimeout="executionTimeout"}(a||(a={})),function(e){e.validationInvalidRange="validationInvalidRange",e.validationTextMismatch="validationTextMismatch"}(l||(l={})),function(e){e.timeout="timeout",e.conflict="conflict",e.error="error"}(c||(c={})),function(e){e.gDocsCanvas="gDocsCanvas",e.contentEditable="contentEditable"}(u||(u={})),function(e){e.execCommand="execCommand",e.dispatchPasteEvent="dispatchPasteEvent",e.dispatchBeforeInputInsertReplacementTextEvent="dispatchBeforeInputInsertReplacementTextEvent",e.dispatchDeleteEvent="dispatchDeleteEvent",e.dispatchPasteDeleteEvent="dispatchPasteDeleteEvent",e.dispatchBeforeInputDeleteContentEvent="dispatchBeforeInputDeleteContentEvent"}(d||(d={})),function(e){e.gDocsCanvas=function(e){return{key:u.gDocsCanvas,...e}},e.contentEditable=function(e){return{key:u.contentEditable,...e}},e.isGDocsCanvas=function(e){return e.key===u.gDocsCanvas},e.isContentEditable=function(e){return e.key===u.contentEditable}}(h||(h={}))},53680:(e,t,n)=>{var i,o;n.d(t,{V:()=>i,j:()=>o}),function(e){e.success="success",e.fail="fail",e.applied="applied"}(i||(i={})),function(e){e.success=function(e){return{result:i.success,context:e}},e.fail=function(e,t){return{result:i.fail,reason:e,context:t}},e.applied=function(e){return{result:i.applied,context:e}},e.isFail=function(e){return e.result===i.fail},e.isSuccess=function(e){return e.result===i.success},e.isApplied=function(e){return e.result===i.applied},e.fromResult=function(t,n){return i=>i?e.applied(n):e.fail(t,n)}}(o||(o={}))},95050:(e,t,n)=>{if(n.d(t,{H:()=>o}),5526!=n.j)var i=n(95869);function o(e){const{pos:t,value:n}=e,o=t.end>t.start;if("string"==typeof n)return n.length?o?"replace":"insert":"delete";if(0===n.ops.length)return"delete";if(1===n.ops.length){const e=n.ops[0];if(i.s.isInsert(e)&&void 0===e.attributes)return o?"replace":"insert"}return"mixed"}},91297:(e,t,n)=>{if(n.d(t,{A0:()=>u,BM:()=>c,HY:()=>a}),5526!=n.j)var i=n(47557);if(5526!=n.j)var o=n(40594);if(5526!=n.j)var r=n(90189);if(5526!=n.j)var s=n(90595);var a,l=n(95613);function c(e){return e.nodeType===Node.TEXT_NODE}!function(e){let t;function n(e){return e._tag===t.imageNode}!function(e){e.text="text",e.br="br",e.imageNode="imageNode"}(t=e.Type||(e.Type={})),e.text=function(e,n,i,o){return{_tag:t.text,node:e,text:null!==e.nodeValue?e.nodeValue:"",preserveWhiteSpace:n,inlineFormatting:i,blockFormatting:o}},e.imageNode=function(e,n,i=l.$){return{_tag:t.imageNode,node:e,src:null!=n?n:"",text:i}},e.br=function(e,n){return{_tag:t.br,node:e,blockFormatting:n}},e.isText=function(e){return e._tag===t.text},e.isBr=function(e){return e._tag===t.br},e.isSkippedNode=function(e){return n(e)},e.isImageNode=n}(a||(a={}));class u{constructor(e,t,n,i,r,s,a,l=null,c,u=o.Y.create("BlockMap")){this._root=e,this._filterNode=t,this._filterNodeOutput=n,this._isBlockNode=i,this._filterOutput=r,this._finishBlockAfterNode=s,this._finishBlockMap=a,this._nodeFormatting=l,this._initialTraversalState=c,this._log=u,this.blocks=this._buildBlockMap(this._root,this._initialTraversalState)}_buildBlockMap(e,t){const n=[];let o=[],l=!0;const u=(e=!1)=>{o.length>0&&(e||o.length>1||o[0]._tag!==a.Type.br)&&(n.push(o),o=[])},d=(e,t)=>{t&&(l||u(),o.push(e)),l=t},h=(e,t,n,o)=>{var l,g,p;if(this._finishBlockMap(e,t))return!0;if(this._filterNode(e,t)){const r=e.getAttribute("contenteditable"),s={preserveWhiteSpace:t.preserveWhiteSpace||"PRE"===e.tagName||"pre-wrap"===(null===(p=null===(g=null===(l=null==e?void 0:e.ownerDocument)||void 0===l?void 0:l.defaultView)||void 0===g?void 0:g.getComputedStyle(e))||void 0===p?void 0:p.whiteSpace),isEditable:null===r?t.isEditable:"true"===r||"false"!==r&&t.isEditable,outputConsidered:this._filterNodeOutput(e,t)};for(let t=0;t<e.childNodes.length;t++){const r=e.childNodes[t];if(this._finishBlockMap(r,s))return!0;if(c(r))d(a.text(r,s.preserveWhiteSpace,n,o),s.outputConsidered&&this._filterOutput(r,s));else if((0,i.Tv)(r)){if("BR"===r.tagName)d(a.br(r,o),s.outputConsidered&&this._filterOutput(r,s));else if(this._isBlockNode(r,s)){if(u(),h(r,s,n,null!==this._nodeFormatting?this._nodeFormatting(r,o):void 0))return!0;this._finishBlockAfterNode(r,s)&&u()}else if(h(r,s,null!==this._nodeFormatting?this._nodeFormatting(r,n):void 0,o))return!0}else r.nodeType===Node.COMMENT_NODE||this._log.warn(`don't know how to handle nodeType=${r.nodeType}`,r)}}else(0,r.OB)().experimentClient.isGateEnabled(s.K.MapImageNodeForRichText)&&"IMG"===e.tagName&&d(a.imageNode(e,e.getAttribute("src")),t.outputConsidered&&this._filterOutput(e,t));return!1};return h(e,t),u(!0),n}}},95613:(e,t,n)=>{n.d(t,{$:()=>i});const i=""},68271:(e,t,n)=>{n.d(t,{H:()=>i});var i,o=n(63349),r=n(13391);!function(e){const t=r.h.create(""),n=new Proxy({textContent:""},{get:(e,n)=>"textContent"===n?t.get():Reflect.get(e,n),set:(e,n,i)=>"textContent"===n&&"string"==typeof i?(t.set(i),!0):Reflect.set(e,n,i)});e.init=function(){o.ux.setStylesTarget(n)},e.styles=t.view()}(i||(i={}))},9976:(e,t,n)=>{n.d(t,{YS:()=>b,mE:()=>_,nS:()=>i,o6:()=>h});var i,o=n(92379),r=n(32073),s=n(13391),a=n(85837),l=n(28510),c=n(40594),u=n(68271),d=n(15083);!function(e){e.Context=o.createContext(null)}(i||(i={}));const h=16;function g(e,t){e&&e instanceof HTMLElement?e.style.setProperty("--rem",`${t}`):c.Y.create("ShadowRootInjector").warn("setRootCssVar: host is not an HTMLElement. This should not happen. Please report this issue.")}class p{constructor(){this._denaliStyleSheet=new CSSStyleSheet,this._globalStyleSheet=new CSSStyleSheet,this._globalStyleSheetLoaded=s.h.create(null),this._subscription=new r.w0}inject(e,t){const n=this._globalStyleSheetInitialized();n||this._initGlobalStyleSheet();const r=e.attachShadow({mode:"open"});r.adoptedStyleSheets=[this._denaliStyleSheet,this._globalStyleSheet],g(r.host,h);const s=(0,d.X3)(r,o.createElement(i.Context.Provider,{value:r},o.createElement(t,{viewLoaded:this._globalStyleSheetLoaded.view((e=>({...e,constructableStyleSheetInitialized:n})))})));return()=>{s(),this._subscription.unsubscribe()}}_globalStyleSheetInitialized(){return this._globalStyleSheet.cssRules.length>0}async _initGlobalStyleSheet(){try{if(!self.GR_INLINE_STYLES)throw new Error("No inline styles");await Promise.all([this._denaliStyleSheet.replace(u.H.styles.get()),this._globalStyleSheet.replace(self.GR_INLINE_STYLES)]),this._globalStyleSheetLoaded.set({stylesInjectionStrategy:"constructableStyleSheet"}),this._subscription.add(u.H.styles.subscribe((e=>this._denaliStyleSheet.replaceSync(e))))}catch(e){this._globalStyleSheetLoaded.set({error:`${e}`,stylesInjectionStrategy:"constructableStyleSheet"})}}}const m=(0,a.xb)(l.b);class f{inject(e,t){const n=s.h.create(null),r=e.attachShadow({mode:"open"});return g(r.host,h),(0,d.X3)(r,o.createElement(o.Fragment,null,o.createElement(m,null,u.H.styles),o.createElement(l.b,null,self.GR_INLINE_STYLES),o.createElement(i.Context.Provider,{value:r},o.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"styleElement"})))}}class _{inject(e,t){const n=s.h.create(null),r=e.attachShadow({mode:"open"});return(0,d.X3)(r,o.createElement(o.Fragment,null,o.createElement(i.Context.Provider,{value:r},o.createElement(t,{viewLoaded:n}))),(()=>n.set({stylesInjectionStrategy:"noStyles"})))}}let v=null;function b(e=!1){return e&&function(){if(null===v)try{const e=new CSSStyleSheet;v=!!e&&!!e.replace&&!!e.replaceSync&&"adoptedStyleSheets"in Document.prototype}catch(e){v=!1}return!0===v}()?new p:new f}},15083:(e,t,n)=>{n.d(t,{G7:()=>f,X3:()=>p});var i=n(92379),o=n(95295),r=n(84714),s=n(2613),a=n(14969),l=n(29479),c=n(954),u=n(24666),d=n(59179),h=n(33885);function g(e){return!!e&&!e.error}function p(e,t,n){return(0,o.render)(t,e,n),()=>(0,o.unmountComponentAtNode)(e)}const m=({view:e,placeholder:t,viewLoaded:n,minDuration:o,forcePlaceholder:u})=>{const d=g(n.get())&&!u?(0,r.of)(e):n.pipe((0,s.e)(o),(0,a.P)(g),(0,l.h)(e),(0,c.O)(t));return i.createElement(h.F.Fragment,null,d)};var f;!function(e){e.showWhenLoaded=function(e){return function({viewLoaded:t}){return i.createElement(h.F.Fragment,null,t.pipe((0,u.x)(),(0,d.U)((t=>g(t)?e:null))))}},e.withPlaceholder=function(e,t,n,o){return function({viewLoaded:r}){return i.createElement(m,{view:e,placeholder:t,minDuration:n||0,viewLoaded:r,forcePlaceholder:o||!1})}}}(f||(f={}))},29999:(e,t,n)=>{n.d(t,{EM:()=>i,_R:()=>m,aP:()=>f,zs:()=>o});var i,o,r=n(92379),s=n(32073),a=n(13391),l=n(30105),c=n(90595),u=n(29483),d=n(68271),h=n(15083),g=n(92706);class p{constructor(e,t,n,i){var o,r,s;this._options=i,this._root=null,this._unmount=null,this._root=e(),t(this._root),this._unmount=n(this._root),(null===(o=this._options)||void 0===o?void 0:o.allowPrint)||this._root.classList.add(g.gr_no_print),(null===(r=this._options)||void 0===r?void 0:r.eventPropagationHandler)&&(this._disposeEventPropagationHandler=null===(s=this._options)||void 0===s?void 0:s.eventPropagationHandler(this._root)),this._preventEventPropagation()}_preventEventPropagation(){const e=["keydown","keyup","keypress","mouseup","mousedown","pointerdown","click"];(0,u.OB)().experimentClient.isGateEnabled(c.K.CentralizeStopEventPropagation)&&e.forEach((e=>{var t;null===(t=this._root)||void 0===t||t.addEventListener(e,(e=>{e.stopPropagation()}))}))}dispose(){this._disposeEventPropagationHandler&&(this._disposeEventPropagationHandler(),this._disposeEventPropagationHandler=void 0),this._unmount&&(this._unmount(),this._unmount=null),this._root&&(this._root.parentNode?this._root.parentNode.removeChild(this._root):this._root.remove(),this._root=null)}}class m extends p{constructor(e,t,n,i){super(e,t,(e=>{var t,i;const o=new s.w0,l=e.ownerDocument,c=l.head,u="grammarly-extension-styles",g="grammarly-extension-denali-styles";let p=Array.from(null!==(t=c.getElementsByTagName("style"))&&void 0!==t?t:[]).find((e=>e.id===u)),m=Array.from(null!==(i=c.getElementsByTagName("style"))&&void 0!==i?i:[]).find((e=>e.id===g));p||(p=l.createElement("style"),p.id=u,p.innerHTML=self.GR_INLINE_STYLES||"",c.prepend(p)),m||(m=l.createElement("style"),m.id=g,p.insertAdjacentElement("beforebegin",m)),m.innerHTML=d.H.styles.get(),o.add(d.H.styles.subscribe((e=>{m&&(m.innerHTML=e)})));const f=a.h.create(null),_=(0,h.X3)(e,r.createElement(n,{viewLoaded:f}),(()=>f.set({shadowDOM:!1})));return()=>{o.unsubscribe(),_()}}),i)}}class f extends p{constructor(e,t,n,i,o){super((()=>{const t=e();return t.setAttribute(f.SHADOW_DOM_ROOT_ATTRIBUTE,"true"),t.tagName.toLocaleLowerCase()===l.Hq.toLocaleLowerCase()&&(null==o?void 0:o.vBarsCustomAttributes)&&Object.entries(o.vBarsCustomAttributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}),t,(e=>i.get().inject(e,(e=>r.createElement(n,{viewLoaded:e.viewLoaded.view((e=>e?{...e,shadowDOM:!0}:null))})))),o)}}f.SHADOW_DOM_ROOT_ATTRIBUTE="data-grammarly-shadow-root",function(e){e.defaultName="grammarly-extension",e.fromDocument=function(t,n=e.defaultName,i={}){return{doc:t,name:n,attributes:i}}}(i||(i={})),function(e){e.appendChild=function(e){return{parent:e}},e.isCustom=function(e){return e instanceof Function}}(o||(o={}))},9542:(e,t,n)=>{n.d(t,{V:()=>c});var i=n(78767),o=n(92379),r=n(14969),s=n(39963);class a{constructor(e,t){this._injector=e,this._injectionName=t}inject(e,t,n,i){const r=performance.now(),c=a._firstRender,u=a._somePreviousRenderCompleted;return a._firstRender=!1,this._injector(e,t,(({viewLoaded:e})=>o.createElement(l,{view:n,viewLoaded:e,onComplete:e=>{const t=performance.now();(0,s.Tb)().performance.viewInjection({timeToRender:Math.trunc(t-r),startTime:Math.trunc(r),endTime:Math.trunc(t),injectionName:this._injectionName,firstRender:c,somePreviousRenderCompleted:u,error:e.error||null,shadowDOM:!!e.shadowDOM,stylesInjectionStrategy:e.stylesInjectionStrategy||null,constructableStyleSheetInitialized:!!e.constructableStyleSheetInitialized}),a._somePreviousRenderCompleted=!0}})),i)}}a._firstRender=!0,a._somePreviousRenderCompleted=!1;const l=({viewLoaded:e,view:t,onComplete:n})=>(o.useEffect((()=>{const t=e.pipe((0,r.P)(i.fQ)).subscribe(n);return()=>null==t?void 0:t.unsubscribe()}),[]),o.createElement(t,{viewLoaded:e}));var c,u=n(9976),d=n(29999);function h(e){const t=e.doc.createElement(e.name);return e.attributes&&Object.entries(e.attributes).forEach((([e,n])=>{t.setAttribute(e,n)})),t}!function(e){const t=(0,i.Vo)(u.YS);e.get=function(e){return{inject:(n,o,r,s)=>{const l=(null==e?void 0:e.monitorAs)||n.name||"unknown";return new a((null==e?void 0:e.noShadowDOM)?(e,t,n,i)=>new d._R((()=>h(e)),d.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,i):(c=(null==e?void 0:e.noStyles)?(0,i.Vo)((()=>new u.mE)):t,(e,t,n,i)=>new d.aP((()=>h(e)),d.zs.isCustom(t)?t:e=>t.parent.appendChild(e),n,c,i)),l).inject(n,o,r,s);var c}}}}(c||(c={}))},25009:(e,t,n)=>{if(n.d(t,{Fb:()=>p,PF:()=>g,TY:()=>c,_V:()=>h,eg:()=>d,um:()=>l,yj:()=>u}),3075==n.j)var i=n(59179);if(3075==n.j)var o=n(24666);if(3075==n.j)var r=n(28338);if(3075==n.j)var s=n(49629);if(3075==n.j)var a=n(3944);var l,c,u;function d(e){if((0,a.uz)(e))return{mode:l.view};const t=(0,a.lW)(e);return t||((0,a.e$)(e)?{mode:l.noEditAccess}:{mode:l.edit})}!function(e){e.view="view",e.noEditAccess="noEditAccess",e.history="history",e.edit="edit"}(l||(l={})),function(e){e[e.ownDoc=0]="ownDoc",e[e.sharedDoc=1]="sharedDoc",e[e.noEditAccessDoc=2]="noEditAccessDoc"}(c||(c={})),function(e){e.read="read",e.write="write"}(u||(u={}));function h(e){return s.S.hz4.pipe((0,i.U)((()=>d(e))),(0,o.x)(((e,t)=>{return i=t,(n=e).mode===l.history&&i.mode===n.mode?n.subtype===i.subtype:n.mode===i.mode;var n,i})))}function g(e,t){return e?c.ownDoc:t?c.noEditAccessDoc:c.sharedDoc}function p(e,t,n,i){if(e.mode!==l.edit)return u.read;switch(t){case c.ownDoc:return u.write;case c.noEditAccessDoc:return u.read;case c.sharedDoc:return function(e,t,n){const i=!t&&!n;if(e.mode!==l.edit||i)return u.read;return u.write}(e,n,i);default:return(0,r.L0)(t)}}},3944:(e,t,n)=>{if(n.d(t,{LJ:()=>b,Nd:()=>u,Ov:()=>v,TW:()=>E,Ur:()=>d,Xs:()=>T,e$:()=>C,eg:()=>x,fN:()=>p,k6:()=>f,kh:()=>g,lW:()=>S,lz:()=>m,qg:()=>c,uj:()=>l,uz:()=>_}),3075==n.j)var i=n(90189);if(3075==n.j)var o=n(90595);if(3075==n.j)var r=n(36769);if(3075==n.j)var s=n(25009);if(5526!=n.j)var a=n(7833);function l(e){const t=(0,r.Cq)(e.querySelector(a.XG),"text buffer iframe");return(0,r.Cq)(t.nodeType===Node.ELEMENT_NODE&&"IFRAME"===t.tagName?t.contentDocument:void 0,"text buffer iframe document")}function c(e){const t=u(e);return{width:t?t.offsetWidth-t.clientWidth:0,height:t?t.offsetHeight-t.clientHeight:0}}function u(e){return e.querySelector(a.Wp)}function d(e,t,n){return t?function(e,t){if(t&&h(t))return t;const n=e.querySelectorAll(a.Qy);for(const e of n)if(h(e))return e;return null}(e,n):e.querySelector(a.Qy)}const h=e=>e.checkVisibility?e.checkVisibility():e.parentElement&&"none"!==e.parentElement.style.display;function g(e){return e.querySelectorAll(a.gH)}function p(e){return e.querySelector(a.gH)}function m(e){return Boolean(e.querySelector(a.gH))}function f(e){let t=e.querySelector(a.os);return t||(t=document.querySelector(a.gH)),t?t.getBoundingClientRect():null}const _=e=>!!e.querySelector(a.Lq);function v(e){return e.querySelector(a.$x)}function b(e){return null==e?void 0:e.querySelector(a.y1)}var w;!function(e){e.legacy="legacy",e.modern="modern"}(w||(w={}));const y=e=>"versionHistorySidebarWizSelector"===e.id||e.getBoundingClientRect().top>0?w.modern:w.legacy;function S(e){let t=e.querySelector(a.f);const n=(0,i.OB)().experimentClient.isGateEnabled(o.K.GDocsVersionHistorySidebarSelector);!t&&n&&(t=e.querySelector(a.q6));return!!t&&t.offsetHeight>0&&t.offsetWidth>0&&t?{mode:s.um.history,subtype:y(t)}:null}function C(e){return!!e.querySelector(`${a.jW}, ${a.F8}`)}function x(){const e=document.querySelector(a.d0),t=(null==e?void 0:e.classList.contains(a.uj))?"edit":void 0,n=(null==e?void 0:e.classList.contains(a._m))?"suggesting":void 0;return t||n||"other"}function E(e){return e.querySelector(a.QR)}function T(e){return e.querySelector(a.ij)}},7833:(e,t,n)=>{n.d(t,{$x:()=>s,F8:()=>v,Go:()=>o,Kt:()=>x,Lq:()=>h,Q:()=>N,Q6:()=>l,QO:()=>I,QR:()=>D,Qy:()=>w,Vk:()=>E,Wp:()=>i,XG:()=>r,_m:()=>m,d0:()=>g,f:()=>u,gH:()=>b,gL:()=>T,gv:()=>c,ij:()=>R,j5:()=>C,jW:()=>_,l$:()=>f,lO:()=>A,os:()=>S,q6:()=>d,qz:()=>F,rx:()=>k,tN:()=>P,uj:()=>p,y1:()=>a,yv:()=>O,yw:()=>y});const i=".kix-appview-editor",o=".docos-input",r=".docs-texteventtarget-iframe",s=".kix-cursor",a=".kix-cursor-caret",l="#docs-butterbar-container",c="docs-butterbar-container-compact",u="#docs-revisions-sidebar",d="#docs-wiz-sidebar-placeholder",h='#docs-toolbar-mode-switcher[aria-label="Viewing mode"]',g="#docs-toolbar-mode-switcher",p="edit-mode",m="suggest-mode",f="titlebar-mode-indicator-container",_="#titlebar-mode-indicator-container .titlebar-request-access-button",v="#titlebar-mode-indicator-container .kix-titlebar-request-access-button",b="canvas.kix-canvas-tile-content:not(.docs-ui-unprintable *)",w=".kix-rotatingtilemanager:not(.docs-ui-unprintable *)",y=".kix-page-paginated",S=".kix-page-paginated.canvas-first-page",C=".docs-horizontal-ruler",x=".docs-vertical-ruler",E="#fontSizeSelect input",T=".docs-ruler-background",k=".docs-ruler-background-inner",A=".docs-ruler-indent-first-line",R=".modal-dialog.docs-dialog .fatal-error-message",D='#docs-titlebar-share-client-button div[role="button"]',I=".kix-ai-text-generator-preview-view-insert-button",F=".kix-ai-text-generator-preview-view",O=".kix-ai-text-generator-prompt-view",N=".kix-ai-text-generator-prompt-view-input",P=".kix-ai-text-generator-preview-view-generated-text"},85098:(e,t,n)=>{n.d(t,{N:()=>i});const i="docs.google.com"},35743:(e,t,n)=>{n.d(t,{E:()=>i});class i{constructor(e,t,n,i){this._customInboundEventName=t,this._customOutboundEventName=n,this._wrapOutboundMessage=i,this.inbound={subscribe:e=>{const t=({detail:t})=>{const n=t;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._target.addEventListener(this._customInboundEventName,t,!1),{unsubscribe:()=>this._target.removeEventListener(this._customInboundEventName,t,!1)}}},this.outbound=e=>{const t=this._wrapOutboundMessage?this._wrapOutboundMessage(e):e,n=new CustomEvent(this._customOutboundEventName,{bubbles:!0,cancelable:!0,detail:t});this._target.dispatchEvent(n)},this._target=e.defaultView||e}}},17440:(e,t,n)=>{function i(e,t={top:0,left:0},n=!1){const i={clientX:t.left,clientY:t.top,bubbles:!0,shiftKey:n};e.dispatchEvent(new MouseEvent("mousedown",i)),e.dispatchEvent(new MouseEvent("mouseup",i))}function o(e,t){const n=t.toUpperCase();return e.dispatchEvent(new KeyboardEvent("keypress",{altKey:!1,bubbles:!0,charCode:0,code:`Key${n}`,composed:!0,key:`${t.toLowerCase()}`,ctrlKey:!1,keyCode:t.charCodeAt(0),shiftKey:n===t,which:t.charCodeAt(0),isComposing:!1,repeat:!1,metaKey:!1}))}function r(e,t){let n=!0;for(let i=0;i<t.length;i++)n=o(e,t[i])&&n;return n}n.d(t,{Nk:()=>i,db:()=>s,t7:()=>r});const s=async e=>{var t;const n=null===(t=new URL(e).pathname.match(/\/d\/([^/]+)\/edit/))||void 0===t?void 0:t[1];if(!n)return!1;{const e=`https://docs.google.com/document/d/${n}/peruserchrome`;try{const t=await fetch(e),n=(await t.text()).slice(4),i=JSON.parse(n);return!!i&&!0===i.IS_OWNER}catch(e){return!1}}}},91135:(e,t,n)=>{var i,o;n.d(t,{U:()=>i,z:()=>o}),function(e){e.editorElementSelector="div.kix-appview-editor",e.textEventsTargetIframeSelector="iframe.docs-texteventtarget-iframe",e.textEventsTargetElementSelector='[contenteditable="true"]'}(i||(i={})),function(e){e.spellingBubbleSelector="div.kix-spell-bubble",e.pageLessModeTableMaskInner="kix-domviewscroller-inner",e.pageLessModeTableMaskOuter="kix-domviewscroller-outer"}(o||(o={}))},68667:(e,t,n)=>{if(n.d(t,{Z:()=>o}),3075==n.j)var i=n(7865);class o extends(3075==n.j?i.C:null){maintainConsistency(e,t,n,i){super.maintainConsistency(e,t,!0,i)}}},90870:(e,t,n)=>{if(n.d(t,{Bq:()=>m,Cf:()=>g,KB:()=>c,LW:()=>d,Nm:()=>s,OZ:()=>a,R8:()=>p,UC:()=>r,bs:()=>f,qu:()=>l,uE:()=>u}),3075==n.j)var i=n(78767);if(3075==n.j)var o=n(43811);function*r(e,t){var n,i,o,s;for(const l of e.fragments)yield l,a(l)&&(null===(i=null===(n=null==t?void 0:t.containerPredicate)||void 0===n?void 0:n.call(t,l))||void 0===i||i)&&(null===(o=null==t?void 0:t.onEnter)||void 0===o||o.call(t,l),yield*r(l,t),null===(s=null==t?void 0:t.onLeave)||void 0===s||s.call(t,l))}function s(e){return"clip"===e.type||"page"===e.type}const a=3075==n.j?o.NK:null;function l(e){return"footnote_line"===e.type}function c(e){return"code_block"===e.type}function u(e){return"strikethrough"===e.type}function d(e,t){return h(e,t,-1)}function h(e,t,n){var r,a,d,h,g;let m;if((0,o.Gs)(e))m=null===(r=t.visitText)||void 0===r?void 0:r.call(t,e,n);else if(function(e){return"image"===e.type}(e))m=null===(a=t.visitImage)||void 0===a?void 0:a.call(t,e,n);else if(l(e))m=null===(d=t.visitFootnoteLine)||void 0===d?void 0:d.call(t,e,n);else if(u(e))m=null===(h=t.visitStrikethrough)||void 0===h?void 0:h.call(t,e,n);else if(c(e))m=null===(g=t.visitCodeBlock)||void 0===g?void 0:g.call(t,e,n);else if(s(e)){const r=function(e,t){return(0,o.NK)(t)?e.visitClip:function(e){return"page"===e.type}(t)?e.visitPage:void(0,i.vE)(t)}(t,e)||t.visitContainer;m=r?r(e,((n=e)=>p(n,t)),n):p(e,t)}else(0,i.vE)(e);return void 0===m?e:m}function g(e,t){let n,i=0;for(const o of e){const r=h(o,t,i);void 0===r||r===o?void 0!==n&&n.push(o):(void 0===n&&(n=e.slice(0,i)),null!==r&&n.push(r)),i++}return void 0!==n?n:e}function p(e,t){const n=g(e.fragments,t);return n!==e.fragments?{...e,fragments:n}:e}var m;function f(e,t,n){if(e&&t&&s(e)&&s(t))for(let i=0;i<e.fragments.length||i<t.fragments.length;i++){const o=f(e.fragments[i],t.fragments[i],n);if(o!==m.EQUAL)return o}return n(e,t)}!function(e){e[e.NOT_COMPARABLE=-2]="NOT_COMPARABLE",e[e.USE_FIRST=-1]="USE_FIRST",e[e.USE_SECOND=1]="USE_SECOND",e[e.EQUAL=0]="EQUAL"}(m||(m={}))},43811:(e,t,n)=>{if(n.d(t,{Fv:()=>g,Gs:()=>r,HK:()=>a,NK:()=>s,S2:()=>l,SM:()=>d,WR:()=>c,jO:()=>h,qt:()=>u,tR:()=>o}),3075==n.j)var i=n(80239);const o=1;function r(e){return"text"===e.type}function s(e){return"clip"===e.type}const a=2,l=3;function c(e,t){return{type:o,fragment:e,textRange:t}}function u(e){return{type:a,textRange:e}}function d(e,t,n,o){return{type:l,fragments:(0,i.o4)(e),incompleteStart:t,incompleteEnd:n,inputRange:o}}function h(e){return e.type===l}function g(e,t,n){if(r(e))return{type:e.type,text:e.text,special:e.special,originalFragment:e,page:t,pageOrColumnBreak:n};if(s(e))return{type:e.type,fragments:e.fragments.map((e=>g(e,t,!1))),originalFragment:e,page:t,pageOrColumnBreak:n};throw new Error("Unexpected fragment type: "+e.type)}},89210:(e,t,n)=>{function i(e){return!0===e.canvasFullTextMap}function o(e){return"CanvasAdvancedTextMap"===e.subType}n.d(t,{_:()=>o,k:()=>i})},4271:(e,t,n)=>{if(n.d(t,{BL:()=>ue,CG:()=>ne,CI:()=>Q,G5:()=>ee,Ju:()=>ge,Kk:()=>pe,Nk:()=>Y,Us:()=>me,W8:()=>te,Y_:()=>le,a9:()=>oe,bm:()=>Z,dM:()=>se,f5:()=>re,gh:()=>X,gt:()=>de,oY:()=>ce,oz:()=>he,pN:()=>ie,sV:()=>ae,ut:()=>fe}),3075==n.j)var i=n(44071);if(3075==n.j)var o=n(84714);if(3075==n.j)var r=n(84766);if(3075==n.j)var s=n(36344);if(3075==n.j)var a=n(93440);if(3075==n.j)var l=n(26156);if(3075==n.j)var c=n(20161);if(3075==n.j)var u=n(59179);if(3075==n.j)var d=n(90572);if(3075==n.j)var h=n(10883);if(3075==n.j)var g=n(24666);if(3075==n.j)var p=n(84178);if(3075==n.j)var m=n(954);if(3075==n.j)var f=n(44045);if(3075==n.j)var _=n(17610);if(3075==n.j)var v=n(21200);if(3075==n.j)var b=n(3199);if(3075==n.j)var w=n(14969);if(3075==n.j)var y=n(14527);if(3075==n.j)var S=n(33442);if(3075==n.j)var C=n(24435);if(3075==n.j)var x=n(68418);if(3075==n.j)var E=n(25754);if(3075==n.j)var T=n(67434);if(3075==n.j)var k=n(45523);if(3075==n.j)var A=n(5962);if(3075==n.j)var R=n(2799);if(3075==n.j)var D=n(90595);if(3075==n.j)var I=n(47557);if(3075==n.j)var F=n(78767);if(3075==n.j)var O=n(82485);if(3075==n.j)var N=n(20905);if(3075==n.j)var P=n(79707);if(3075==n.j)var M=n(24007);if(3075==n.j)var G=n(1763);if(3075==n.j)var U=n(26155);if(3075==n.j)var H=n(27970);if(3075==n.j)var L=n(95050);if(3075==n.j)var j=n(25009);if(3075==n.j)var B=n(3944);if(3075==n.j)var K=n(7833);if(5526!=n.j)var V=n(15885);var $=n(91135);if(3075==n.j)var W=n(68667);if(3075==n.j)var z=n(90870);if(3075==n.j)var q=n(89210);function Y(e,t=x.Ir.create({left:0,top:0}),n=!1){const i={clientX:t.left,clientY:t.top,bubbles:!0,shiftKey:n};e.dispatchEvent(new MouseEvent("mousedown",i)),e.dispatchEvent(new MouseEvent("mouseup",i))}function Q(e){var t,n,i;try{return null!==(i=null===(n=null===(t=e.querySelector($.U.textEventsTargetIframeSelector))||void 0===t?void 0:t.contentDocument)||void 0===n?void 0:n.querySelector($.U.textEventsTargetElementSelector))&&void 0!==i?i:null}catch(e){return null}}function J(e){return!!e&&Array.from(e.classList).some((e=>0===e.indexOf("scb-private")))}function X(){const e=(0,B.TW)(document);return e?(0,i.R)(e,"click").pipe((0,c.w)((t=>k.x.observeChildList(e).pipe((0,u.U)((e=>Array.from(e).filter(I.Re).filter((e=>e.matches("span.scb-icon")))[0])),(0,d.h)(F.fQ),(0,u.U)(J),(0,h.M)((0,o.of)(J((null==e?void 0:e.querySelector("span.scb-icon"))||void 0))),(0,u.U)((([e,t])=>!e&&t)),(0,g.x)(),(0,c.w)((e=>e?(0,r.F)(1e3).pipe((0,u.U)((e=>Array.from(document.querySelectorAll(".modal-dialog")).every((e=>"true"===e.getAttribute("aria-hidden")||!e.hasAttribute("aria-hidden"))))),(0,d.h)(F.fQ),(0,p.q)(1)):s.E)))))):s.E}function Z(e){return k.x.observeChildList(e).pipe((0,u.U)((()=>{const t=(0,B.Xs)(e);if(t){let e=!1;for(const n of t.querySelectorAll("a[href]")){const t=n.getAttribute("href");if("https://support.google.com/chrome/answer/187443"===t||"https://support.mozilla.org/en-US/kb/disable-or-remove-add-ons"===t){e=!0;break}}return{isBrowserExtFault:e,textContent:t.textContent}}})),(0,d.h)(F.fQ),(0,p.q)(1))}function ee(e){const t=e.querySelector(".onegoogle-material-minibar a[role=button]");if(t){const e=T.l(t.getAttribute("aria-label")||"");return e?(0,o.of)({...e,currentSessionUser:!0}):s.E}return s.E}function te(e){return function(e,t){const{visibility$:n,hidden$:i,isVisible:r}=e;let s=0;return n.pipe((0,m.O)(r()),(0,c.w)((e=>{if(e){const e=Date.now();return(0,a.H)(t-s).pipe((0,f.R)(i),(0,_.l)(0),(0,v.Z)(),(0,u.U)((()=>Date.now()-e)))}return(0,o.of)(0)})),(0,b.R)(((e,t)=>(s=e+t,s)),0))}((0,A.u)(),e).pipe((0,d.h)((t=>t>=e)),(0,p.q)(1))}const ne=6e4;function ie(e,t){return e>3e4&&e<ne&&!t.get()?(0,l.S)((0,a.H)((0,N.m9)(3)),t.pipe((0,d.h)(F.fQ),(0,p.q)(1))):(0,o.of)(!0)}function oe(e){return e===V.u.gDocsCanvas}function re(e){return e===V.u.gDocsComments}function se(e,t){if("WithoutTextV2"===t){const t=(0,P.HD)(e.value)?e.value.replace(/\n/g," "):E.$.renderToPlainText(e.value).replace(/\n/g," ");return{...e,value:t}}return e}function ae(e,t,n){if(void 0===t)return!1;const i=null!=n?n:1/0,o=t>=i;return e({textCoverage:(0,M.OV)(G.kx,t),textCoverageThreshold:i,meetsThreshold:o}),o}function le(e,t){if(!t||!(0,q._)(t))return;const n=function(e){let t=0;for(const n of e)(0,z.LW)(n.pageFragmentSource.pageFragment,{visitText:e=>{e.special?t+=1:t+=e.text.length}});return t}(e);if(0===n)return;const i=t.mappedTextLength;return{coverage:i/n*100,mappedTextLength:i,totalTextLength:n}}function ce(e,t){const n=t.getCurrentTextMap().getPlainText(),i=n.slice(e.pos.start,e.pos.end);if(!(i.trimStart().length!=i.length))return e;const o=n.slice(0,e.pos.start),r=(0,O.Qw)(o),s={start:r.index,end:e.pos.end};return{pos:s,value:(0,P.HD)(e.value)?r.text+e.value:(new y.i).insert(r.text).concat(e.value),oldValue:n.slice(s.start,s.end)}}function ue(e,t){const n=t.getCurrentTextMap().getPlainText(),i=n.slice(e.pos.start,e.pos.end);if(!(i.trimEnd().length!=i.length))return e;const o=n.slice(e.pos.end),r=(0,O.Sf)(o),s={start:e.pos.start,end:e.pos.end+r.index+1};return{pos:s,value:(0,P.HD)(e.value)?e.value+r.text:e.value.insert(r.text),oldValue:n.slice(s.start,s.end)}}function de({mapResult:e,sortedPages:t,experimentClient:n,textCoverageInfo:i,mappingName:o}){if(!e.success)return!1;if("PartialByFragment"===o)return!!i;const r=e.mappedPageCount>=t.length-e.ignoredPageCount&&e.ignoredPageCount<e.mappedPageCount,s=!n.isGateEnabled(D.K.GDocsShouldCheckIfMappedSomething)||!i||i.coverage>0;return r&&s}function he(e,t){const n=(0,R.qx)(e,t);return"deleteKeypress"===n?{name:n,pasteData:{}}:{name:n,pasteData:(0,H._s)(e,t)}}function ge(e,t){return{...t,replacementType:(0,L.H)(e),replacementMethod:void 0}}function pe(e,t){const n=(0,C.kt)(t);return t=>(0,S.Yz)(t)?n(t):e===j.yj.write}function me(e,t,n,i){return o=>{const r=new W.Z(t,i.createGeometryLayout(),(()=>n.getCurrentTextMap()),o,(0,U.WF)(i.textField));return e(r),r}}function fe(e){const t=document.getElementById(K.l$);return t?t.hasChildNodes()?(0,o.of)(t.childNodes):k.x.observeChildList(t).pipe((0,w.P)()):(e(),(0,o.of)(null))}},15885:(e,t,n)=>{var i;n.d(t,{u:()=>i}),function(e){e.gmailReply="Gmail reply compose",e.gmailCompose="compose",e.gmailComposeStandalone="compose standalone",e.gmailComposeFullScreen="compose fullscreen",e.slackMessage="Slack Message",e.slackGenericQuill="Slack Generic Quill",e.slackThread="Slack Thread",e.gDocsCanvas="gDocsCanvas",e.gDocsComments="contentEditable.GDocs.comments",e.instagramComments="textarea.Instagram.commentField",e.googleTranslate="textarea.Translate",e.googleSearch="textarea.GoogleSearch",e.googleGroups="textarea.GoogleGroups",e.linkedIn="contentEditable.Linkedin",e.outlook="contentEditable.Outlook",e.youTube="contentEditable.Youtube",e.yahooMail="contentEditable.YMail",e.ckeditor5="contentEditable.ckeditor5",e.quillJS="contentEditable.QuillJS"}(i||(i={}))},67434:(e,t,n)=>{if(n.d(t,{l:()=>r}),5526!=n.j)var i=n(90023);if(5526!=n.j)var o=n(58303);function r(e){const t=e.split("Google");return(0,i.zG)(o.ij(t[1]),o.UI((e=>{const t=e.split(":");return t.length>1?t[1]:t[0]})),o.g_(i.gn,(e=>{const t=/^(.*?)\s*\n\((.+)\).*$/.exec(e);return t?{name:t[1].trim(),email:t[2].trim()}:null})))}},34819:(e,t,n)=>{n.d(t,{v:()=>b});var i=n(26156),o=n(84714),r=n(90572),s=n(18827),a=n(24666),l=n(59179),c=n(66861),u=n(87846),d=n(25693),h=n(15362),g=n(19724),p=n(86130),m=n(20905),f=n(78767),_=n(43795);const v={bgNotConnected:!0,online:!1},b=((0,d.ge)(),h.he.common,p.cS,self.navigator.onLine,g.n.defaultUser,h.uS,h.aT,async(e,t)=>{const n=(0,d.ge)(),[_,b]=await Promise.all([t.api.getPageConfig(n,self.location.href),t.api.getTabId()]);return(0,i.S)(e.view().pipe((0,r.h)((e=>!(0,c.Qr)(e)))),(0,o.of)({}).pipe((0,s.g)(m.m9(10)))).pipe((0,a.x)(f.fS),(0,l.U)((e=>{var t,i,o,r,s,a,l,c,d,m,f;return{user:null!==(t=e.user)&&void 0!==t?t:g.n.defaultUser,page:w(_,n,b,e.extensionSettings,(null===(o=null===(i=e.activeTab)||void 0===i?void 0:i.id)||void 0===o?void 0:o.toString())===b,e[u.N]),dapi:null!==(r=e.dapi)&&void 0!==r?r:{},dynamicConfig:null!==(s=e.dynamicConfig)&&void 0!==s?s:p.cS,environment:e.environmentState,connection:null!==(a=e.connection)&&void 0!==a?a:v,extensionFSM:null!==(l=e.extensionFSM)&&void 0!==l?l:h.uS,copiedTextMessage:null!==(c=e.copiedTextMessage)&&void 0!==c?c:h.aT,connectorSettings:null!==(d=e.connectorSettings)&&void 0!==d?d:{},iterable:null!==(m=e.iterable)&&void 0!==m?m:{},growth:null!==(f=e.growthSettings)&&void 0!==f?f:{}}})))}),w=(e,t,n,i,o,r)=>{var s,a,l,c;const u=null!=i?i:h.he,d=u[t],g=(null===(s=null==d?void 0:d.enabled)||void 0===s||s)&&(null===(a=e.enabled)||void 0===a||a),p=null===(l=u.common.cheetah)||void 0===l?void 0:l.initialOnboardingShownTabId,m=null===(c=u.common.cheetah)||void 0===c?void 0:c.initialBTSOnboardingShownTabId;return{...u.common,...d,...e,isActiveTab:o,tabId:String(n),cheetah:{...u.common.cheetah,canShowInitialBTSOnboarding:void 0!==m&&m===n||void 0===m&&o,canShowInitialOnboarding:void 0!==p&&p===n||void 0===p&&o},sessionTimeoutValue:(0,_.GH)(r),domain:t,enabled:g}}},82914:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(29483);const o=new Proxy({},{get:(e,t)=>(...e)=>(0,i.OB)().bgRpc.api.trackGnar(t,e)})},56052:(e,t,n)=>{n.d(t,{U:()=>s});var i=n(82914),o=n(13118),r=n(13162);class s{constructor(e,t,n){this._subs=[],this._kind=e,this._handler=n,this._initSettingSubscription(t)}_initSettingSubscription(e){this._subs.push(e.subscribe((e=>{this._shortcut=(null==e?void 0:e[this._kind])||(0,r.e)(this._kind)})))}_isShortcutMatch(e){const t=this._shortcut;return e.code===t.key&&o.uU.every((n=>t.modifiers.includes(n)===e.getModifierState(n)))&&o.QO.every((t=>!e.getModifierState(t)))}_handleShortcut(e){e.preventDefault(),this._handler(),i.J.keyboardShortcutShortcutTriggered(this._kind)}}},13118:(e,t,n)=>{n.d(t,{Hz:()=>r,O0:()=>s,OR:()=>a,QO:()=>o,qR:()=>c,uU:()=>i,wl:()=>l});const i=["Alt","AltGraph","CapsLock","Control","Meta","NumLock","ScrollLock","Shift"],o=["Fn","FnLock","Hyper","Super","Symbol","SymbolLock"],r={openAssistant:{mac:{key:"KeyG",modifiers:["Shift","Control","Meta"]},other:{key:"KeyG",modifiers:["Shift","Control","Alt"]}},closeAssistant:{mac:{key:"Escape",modifiers:[]},other:{key:"Escape",modifiers:[]}},openVBar:{mac:{key:"BracketRight",modifiers:["Shift","Meta","Control"]},other:{key:"BracketRight",modifiers:["Shift","Alt","Control"]}}},s='[data-grammarly-part="assistant-draggable-wrapper"],[data-grammarly-part="assistant-static-wrapper"]',a='[data-focus-id="empty-state"], button[data-name^="button:"]',l="button, [href], input, select, textarea",c=`${l}, [tabindex]:not([tabindex^="-"])`},13162:(e,t,n)=>{n.d(t,{e:()=>r});var i=n(29483),o=n(13118);function r(e){return o.Hz[e][(0,i.nD)()?"mac":"other"]}},28510:(e,t,n)=>{n.d(t,{b:()=>o});var i=n(92379);const o=({children:e})=>{const t="string"==typeof e?e:"";return t?i.createElement("style",{dangerouslySetInnerHTML:{__html:t}}):null}},88778:(e,t,n)=>{function i(e){return function(e){return e&&"wrappedJSObject"in e}(e)?e.wrappedJSObject:e}n.d(t,{N:()=>i})},5962:(e,t,n)=>{if(n.d(t,{u:()=>a}),5526!=n.j)var i=n(44071);if(5526!=n.j)var o=n(90572);if(5526!=n.j)var r=n(29479);if(5526!=n.j)var s=n(59179);function a(){const e=(0,i.R)(document,"visibilitychange"),t=()=>"visible"===document.visibilityState,n=e.pipe((0,o.h)((()=>!t())),(0,r.h)(!1));return{visibility$:e.pipe((0,s.U)(t)),hidden$:n,isVisible:t}}},2799:(e,t,n)=>{if(n.d(t,{Jj:()=>c,UL:()=>d,qx:()=>u}),3075==n.j)var i=n(808);if(3075==n.j)var o=n(27970);if(3075==n.j)var r=n(17440);if(3075==n.j)var s=n(78767);if(3075==n.j)var a=n(79707);function l(e){const t=function(){if(!self.trustedTypes)return null;for(const e of Object.values(self))if(e instanceof self.TrustedTypePolicy&&"pastehandler"===e.name)return e;return null}();return t?t.createHTML(e):e}function c(e,t){switch(t.name){case"pasteEvent":(0,o.Eb)(e,t.pasteData),void 0!==t.pasteData.html&&(e.innerHTML=l(t.pasteData.html));break;case"typeText":void 0!==t.pasteData.plain&&(0,r.t7)(e.ownerDocument,t.pasteData.plain);break;case"insertReplacementTextBeforeInputEvent":(0,o.xF)(e,t.pasteData);break;case"deleteKeypress":(0,o.m3)(e);break;default:(0,s.vE)(t.name)}}function u(e,t){const n=(0,a.HD)(e)&&!(null==t?void 0:t.html);return n&&0===e.length?"deleteKeypress":!n&&i.T.isSupported()?"pasteEvent":"insertReplacementTextBeforeInputEvent"}function d(e,t,n){return!((null==n?void 0:n.html)||!(0,a.HD)(t))&&(e.start!==e.end&&0!==t.length)}},78021:(e,t,n)=>{n.d(t,{Z:()=>y});var i=n(92379),o=n(61189),r=n(83542),s=n(50635),a=n(31702),l=n(52348),c=n(11163),u=n(4765),d=n(12712),h=n(1087),g=n(64803),p=n(13118);const m=["Control","Alt","Shift","Meta","CapsLock","NumLock","ScrollLock","AltGraph"],f=/^Digit\d$/,_=/^Key[A-Z]$/;function v(e,t,n=" "){const i=m.filter((t=>e.modifiers.includes(t))).map((e=>function(e,t){if(t){if("Meta"===e)return"Command";if("Alt"===e)return"Option"}return e}(e,t)));return e.key&&i.push(function(e){if(f.test(e)||_.test(e))return e.slice(-1);return e}(e.key)),i.join(n)}const b=({label:e,isMac:t,currentShortcut:n,onEdit:o,shouldAutofocusEditButton:r,shortcutSeparator:c=" ",editButton:u})=>{const d={onClick:o,autoFocus:r,"aria-label":`Edit ${e} shortcut`};return i.createElement(s.k,{justify:"space-between",align:"center",flex:"2",height:32,gap:1},i.createElement(a.x,{as:"p",variant:"text-small"},v(n,t,c)),i.createElement(s.k,null,u?i.cloneElement(u,d):i.createElement(l.z,{text:"Edit",variant:"ghost",...d})))},w=({label:e,isMac:t,currentShortcut:n,onSetShortcut:o,ariaDescribedBy:r,onExit:a,shortcutSeparator:l=" "})=>{const[m,f]=i.useState(n),[_,b]=i.useState(!0),[w,y]=i.useState(void 0),S=`${e.replace(/ /g,"-").toLowerCase()}-shortcut-description-id`;return i.createElement(i.Fragment,null,i.createElement(c.u,{id:S},"Type a shortcut to configure the ",e," shortcut. Press tab for actions."),i.createElement(u.n,{label:`${e} shortcut`,value:v(m,t,l),labelDisplay:"hidden",errorMessage:w,onKeyDown:e=>{if(["Tab","Enter","CapsLock","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","PageUp","PageDown","Home","End","Insert","Delete","Backspace"].includes(e.code))b(!0);else{if(e.preventDefault(),p.uU.includes(e.key))if(_)f({key:void 0,modifiers:[e.key]});else{const t=m.modifiers;t.includes(e.key)||f({key:m.key,modifiers:[...t,e.key]})}else f(_?{key:e.code,modifiers:[]}:{key:e.code,modifiers:m.modifiers});b(!1)}},onKeyUp:()=>{b(!0)},autoFocus:!0,"aria-describedby":r?`${S} ${r}`:S}),i.createElement(s.k,{gap:1},i.createElement(d.h,{icon:h.L,accessibilityLabel:`Save ${v(m,t)} as ${e} shortcut`,tooltipContentProps:{children:"Save shortcut"},onClick:()=>{!function(e){return void 0!==e.key}(m)?y("Invalid shortcut. Must use at least one non-modifier key."):(o(m),a())}}),i.createElement(d.h,{icon:g.V,accessibilityLabel:"Cancel edits",onClick:a,variant:"tertiary"})))};const y=({label:e,isMac:t,currentShortcut:n,onSetShortcut:l,ariaDescribedBy:c,disableLegacyLayout:u=!1,shortcutSeparator:d=" ",showLabel:h=!0,editButton:g})=>{const[p,m]=i.useState(!1),[f,_]=i.useState(!1);i.useEffect((()=>{p&&_(!0)}),[p]);const y=p?i.createElement(w,{label:e,isMac:t,currentShortcut:n,onSetShortcut:n=>{l(n),o.E.announce(`Shortcut to ${e} is ${v(n,t)}`)},onExit:()=>m(!1),ariaDescribedBy:c,shortcutSeparator:d}):i.createElement(b,{label:e,isMac:t,currentShortcut:n,onEdit:()=>m(!0),shouldAutofocusEditButton:f,shortcutSeparator:d,editButton:g}),S=u?{}:{marginLeft:-2,marginRight:-2,borderRadius:3};return i.createElement(r.x,{bgColor:p&&!u?"background-base-subdued":"background-base-default",padding:2,...S},i.createElement(s.k,{gap:1,direction:"column"},h&&i.createElement(a.x,{as:"p",weight:"semibold",variant:"text-small"},e),i.createElement(s.k,{gap:3,flex:"2"},y)))}},70843:(e,t,n)=>{n.d(t,{p:()=>a});var i=n(70808),o=n(80891),r=n(45126),s=n(23474);const a={...i.V,...s.j,...r.p,ClientControlsDlp:new o.KS("client_controls_dlp_manakin",["enabled"]),ClientControlsDlpBuffering:new o.KS("client_controls_dlp_buffering_manakin",["enabled"]),KnowledgeHubAtlassian:new o.KS("extension_knowledge_hub_atlassian",["control","test"]),BusinessUphookQtLogic:new o.KS("ext_business_uphook_qt_logic",["control","test"]),GetStartedChecklist:new o.KS("in_product_checklist",["control","auto_open","existing_tour"]),ChecklistUX:new o.KS("checklist_ux",["control","test"]),GbUpgradeHookSharedDocumentFreeV2:new o.KS("gb_upgrade_hook_shared_document_free_v2",["control","test"]),GbUpgradeHookSharedDocumentPremiumV2:new o.KS("gb_upgrade_hook_shared_document_premium_v2",["control","test"]),GbUpgradeHookWorkplaceAppsFreeV2:new o.KS("gb_upgrade_hook_workplace_apps_free_v2",["control","test"]),GbUpgradeHookWorkplaceAppsPremiumV2:new o.KS("gb_upgrade_hook_workplace_apps_premium_v2",["control","test"]),SingleCardAssistantNextToTextField:new o.KS("sca_positioned_next_to_text_field",["control","test"]),LockedUIChrome:new o.KS("locked_ui_chrome_ext_2",["control","unlimited_pool"]),LockedUIGDoc:new o.KS("locked_ui_ext_gdoc_2",["control","unlimited_pool"]),LockedUIWithNewUx:new o.KS("locked_ui_iteration_1",["control","published_limit","non_published_limit"]),ProgressiveExposure:new o.KS("progressive_exposure",["control","test"]),Iterable:new o.KS("iterable_experiment_ext",["enabled"]),InkwellBundle:new o.KS("extension_inkwell_hidden_v2",["control","test"]),GDocsInternalsForReplacementExperiment:new o.KS("gdocs_internals_replacement",["disabled"]),GDocsForceFullRenderExperiment:new o.KS("gdocs_force_full_render",["control","test"]),CheetahSelectionContextUpdates:new o.KS("ggo_context_management_selection_changes",["control","test"]),PerformanceScoreSuccessState:new o.KS("performance_score_success_state",["control","test"]),CAPICheckingInProgressTimeout:new o.KS("extension_gbutton_spinner_timeout",["control","test"]),QualityScore:new o.KS("quality_score",["control","progress_bar","text"]),RemoveSetGoalsGDocs:new o.KS("remove_set_goals_gdocs",["control","test"]),FullySignedInExperience:new o.KS("fully_signedin",["control","suggestions","friction","privacy","same"]),FullySignedInQuickSignup:new o.KS("fully_signed_in_quick_signup",["control","test"]),FullySignedInQuickSignupOnLaunch:new o.KS("fully_signed_in_quick_signup_on_launch",["control","test"]),GOSRollout:new o.KS("extension_gos_rollout_exp",["control","test"]),OggyOnGOS:new o.KS("extension_oggy_on_gos_exp",["control","test"]),G2VBarsSelectionGoogleDocs:new o.KS("vbars_selection_extension_gdocs",["control","test"]),G2VBarsSelectionNonGdocs:new o.KS("vbars_selection_extension_top_sites",["control","test"]),G2VBarsIdleGoogleDocsThreeArms:new o.KS("vbars_idle_extension_gdocs_v2",["control","test_static","test_dynamic"]),G2VBarsIdleNonGdocs:new o.KS("vbars_idle_extension_non_gdocs",["control","test"]),G2VBarsEmailFlexRewrite:new o.KS("vbars_emails_flex_rewrite_extension",["control","flex_rephrase","flex_rephrase_agressive"]),G2VBarsMultilingual:new o.KS("multilingual",["control","test"]),G2VBarsMultilingualV2:new o.KS("extension_vbars_multilingual",["control","without_onboarding","with_onboarding"]),G2VBarsMultilingualV3:new o.KS("extension_vbars_multilingual_v2",["control","multilingual_only","multilingual_and_translate"]),VBarsUphookHub:new o.KS("vbars_classic_uphookhub",["control","test"]),PreserveFormatting:new o.KS("extension_preserve_formatting",["control","test"]),GhostProtocol:new o.KS("ghost_protocol",["control","test"]),TranslationDiscoverability:new o.KS("ext_translation_discoverability",["control","test"]),RecentAppActions:new o.KS("recent_app_actions",["control","test"]),LockedUiDebouncedHoverUnlock:new o.KS("locked_ui_debounced_hover_unlock",["control","test1","test2","test3","test4","test5"]),FullySignedInExperienceInGDocs:new o.KS("fully_signedin_gdocs",["control","test"]),ChromeStoreSignupV2:new o.KS("chrome_store_signup_v2",["control","popup_once","popup_persistent"]),TouchTypistExternalFree:new o.KS("extension_touchtypist_external_v5_free",["control","test"]),TouchTypistProminentTooltip:new o.KS("extension_touchtypist_web_prominent_tooltip",["control","snooze","red"]),TouchTypistAutoOptOut:new o.KS("extension_touchtypist_default_disable",["control","disable","dynamic"]),OAuthSDKV2:new o.KS("extensions_oauth2_sdk_v2",["control","test"]),GDocsInviteNudgeExp:new o.KS("invite_nudge_gdoc_v1",["control","test"]),FullySignedInBlurredSuggestions:new o.KS("fully_signedin_blurred_suggestions_v2",["control","blurred"]),FullySignedInAccountChooser:new o.KS("fully_signedin_account_chooser",["control","test"]),OAuth2Phase2:new o.KS("extensions_oauth2_phase2",["control","test"]),OAuthExplicitTokenExchange:new o.KS("extensions_oauth2_explicit_token_exchange",["control","test"]),InProductDiscount:new o.KS("in_product_discount",["control","enabled"]),ExtensionIframeEnabled:new o.KS("extension_iframe_enabled",["control","test"]),VbarsSampleCounterRemoval:new o.KS("vbars_remove_sample_counter",["control","test"]),VbarsShimmerOnOpen:new o.KS("vbar_locked_ui_motion_ext",["control","test"]),VbarsShimmerAfterLoad:new o.KS("vbar_locked_ui_motion_v2",["control","test"]),VBarsUphookButtonInTitle:new o.KS("vbar_uphook_in_title_ext",["control","test"]),VbarsCopyRotationText:new o.KS("vbar_copy_rotation_text",["control","test"]),OAuth2Phase2Interactive:new o.KS("extensions_oauth2_phase2_interactive",["control","test"]),V5UserInfo:new o.KS("extension_oauth2_v5_userinfo",["control","test"]),FsrIndividualUndoRedoV1:new o.KS("extension_fsr_individual_undos_v1",["control","state_preservation","undo_redo","undo_redo_no_state_preservation"]),CleanUxUiFree:new o.KS("clean_ux_ui_colors_free",["control","test"]),CleanUxUiPro:new o.KS("clean_ux_ui_colors_pro",["control","test"]),SafariWebCompanionAppProtocol:new o.KS("extensions_safari_web_companion_app_protocol",["control","test"])}},90595:(e,t,n)=>{n.d(t,{K:()=>c});var i=n(70808),o=n(80891),r=n(24196),s=n(27982),a=n(24002),l=n(27395);const c={...i.C,...l.D,...a.K,...s.K,...r.Nl,StandWithUkraineGrammarlySuspended:new o.Cc("standWithUkraineExtensionSuspended","enabled"),StandWithUkraineTheme:new o.Cc("standWithUkraineExtensionTheme","enabled"),StudentsOFEGdocs:new o.Cc("citations_rollout_gdocs","enabled"),StudentsOFEInternal:new o.Cc("citations_rollout_internal","enabled"),CitationBuilder:new o.Cc("citation_builder","enabled"),CitationBuilderEditing:new o.Cc("citation_builder_editing","enabled"),CitationBuilderManualInvocation:new o.Cc("citation_builder_manual_invocation","enabled"),ShowPerformanceCard:new o.Cc("extension_show_performance_card","enabled"),ExtensionDebugReport:new o.Cc("extension_debug_report","enabled"),SduiBulkDismiss:new o.Cc("sdui_bulk_dismiss","enabled"),TrackSiblingDataForGMail:new o.Cc("extension_track_sibling_data_for_gmail","enabled"),FixGmailHouseCat:new o.Cc("gmail_housecat_memory_leak_fix","enabled"),KnowledgeHubGdocs:new o.Cc("knowledge_hub_gdocs","enabled"),KnowledgeHubGmail:new o.Cc("knowledge_hub_gmail","enabled"),KnowledgeHubSlack:new o.Cc("knowledge_hub_slack","enabled"),KnowledgeHubWord:new o.Cc("windowsextension_knowledge_hub_word","enabled"),SlackUseInsertHTML:new o.Cc("extension_slack_use_insert_html"),KeyboardShortcut:new o.Cc("extension_keyboard_shortcut","enabled"),EnableFirstVisibleHighlightTracking:new o.Cc("extension_track_first_visible_highlight","enabled"),KnowledgeHubCheetahIntegration:new o.Cc("gbgo_knowledge_share_web","enabled"),GdocsMultiColumnAllCombinations:new o.Cc("gdocs_canvas_multicolumn_compare_all_combination","enabled"),GdocsRefactorDomQuery:new o.Cc("gdocs_refactor_dom_query","enabled"),GDocsUseStackToStoreParentClip:new o.Cc("gdocs_use_stack_to_store_parent_clip","enabled"),GdocsReturnAllRects:new o.Cc("gdocs_return_all_rects","enabled"),SuggestionDeliveryAutoApply:new o.Cc("suggestion_delivery_autoapply_extension_gate_23q3","enabled"),IndianEnglishDialect:new o.Cc("indian_english_dialect","enabled"),IndianEnglishDialectInternal:new o.Cc("indian_english_dialect_internal","enabled"),CheetahFeatureFlagCompose:new o.Cc("cheetah_extension_feature_flag_compose","enabled"),CheetahFeatureFlagRewrite:new o.Cc("cheetah_extension_feature_flag_rewrite","enabled"),CheetahFeatureFlagInlineRewrite:new o.Cc("cheetah_extension_feature_flag_inline_rewrite","enabled"),CheetahFeatureFlagMagicRewrite:new o.Cc("cheetah_extension_feature_flag_magic_rewrite","enabled"),CheetahFeatureFlagQuickReply:new o.Cc("cheetah_extension_feature_flag_quick_reply","enabled"),CheetahFeatureFlagInlineQuickReply:new o.Cc("cheetah_extension_feature_flag_inline_quick_reply","enabled"),CheetahFeatureFlagGDocsInlineRewrites:new o.Cc("cheetah_extension_feature_flag_gdocs_inline_rewrites","enabled"),CheetahFeatureFlagOnboarding:new o.Cc("cheetah_extension_feature_flag_onboarding","enabled"),CheetahStudentsOnboarding:new o.Cc("ggo_students_onboarding","enabled"),CheetahStudentBTS:new o.Cc("ggo_student_bts","enabled"),CheetahStudentPromptsInternal:new o.Cc("ggo_student_prompts_internal","enabled"),GDocsTextCorruptionValidateTextBeforeAlertApply:new o.Cc("gDocs_tc_validate_text_before_alert_apply","enabled"),GDocsGetFormatMap:new o.Cc("gdocs_get_format_map","enabled"),NonGDocsGetFormatMap:new o.Cc("extension_get_format_map","enabled"),SupportMoreStyle:new o.Cc("extension_support_more_style","enabled"),GDocsUseVisibleLayoutRoot:new o.Cc("gdocs_use_visible_layout_root"),GDocsUnloadIfInitArgsChanged:new o.Cc("gdocs_unload_when_init_args_changed"),GDocsDetectDocModeChangeByLayoutRootListener:new o.Cc("gdocs_detect_dom_mode_change_by_layout_root"),Iterable:new o.Cc("iterable_gate_ext","enabled"),IterableGDocsSidebarInitializedTrigger:new o.Cc("iterable_gate_gdoc_sidebar_initialized_ext","enabled"),IterableUserSessionInitializedTrigger:new o.Cc("iterable_gate_user_session_initialized_ext","enabled"),NonGDocsFirstAlertLookedAtTrigger:new o.Cc("iterable_gate_non_gdocs_first_alert_looked_at_ext","enabled"),InkwellSubscribeToSecureKeyRequests:new o.Cc("extension_inkwell_communication","enabled"),SalesforceCK4RichTextFix:new o.Cc("salesforce_ck4_richtext_fix","enabled"),IterablePauseInTypingTrigger:new o.Cc("iterable_gate_pause_in_typing_ext","enabled"),IterableEngagedByAlertsAcceptedTrigger:new o.Cc("iterable_gate_alerts_accepted_ext","enabled"),IterableTriggerFromCustomPayload:new o.Cc("iterable_trigger_from_custom_payload_ext","enabled"),IterableTargetDomain:new o.Cc("iterable_target_domain_ext","enabled"),IterableMetrics:new o.Cc("iterable_metrics_ext","enabled"),IterableTriggerMetrics:new o.Cc("iterable_trigger_metrics_ext","enabled"),IterableLogs:new o.Cc("iterable_logs_ext","enabled"),IterableCooldownAndImpressions:new o.Cc("iterable_cooldown_and_retry_ext","enabled"),IterableGlobalCooldown:new o.Cc("iterable_global_cooldown_ext","enabled"),IterableHideIPMOnPopupStateChange:new o.Cc("iterable_hide_ipm_on_popup_state_change_ext","enabled"),SessionStorageLogsBackup:new o.Cc("session_storage_logs_backup","enabled"),SduiPopoverNotifications:new o.Cc("sdui_popover_manager_ext","enabled"),TextChangeBufferUseLegacy:new o.Cc("text_change_buffer_use_legacy_3","enabled"),TextChangeBufferDontFlushOnApply:new o.Cc("text_change_buffer_dont_flush_on_apply_1","enabled"),DontSyncAlertApplicationsWithInlineMode:new o.Cc("dont_sync_alert_applications_with_inline_mode","enabled"),KnowledgeEngineSearchV2Alpha:new o.Cc("knowledge_engine_search_v2alpha","enabled"),HideReportBugByGrammarlyEmployeeFeature:new o.Cc("hide_report_bug_by_grammarly_employee_feature","enabled"),ExtensionFeatureFlagCAPIClientStorage:new o.Cc("extension_feature_flag_capi_client_storage","enabled"),ExtensionFeatureFlagCAPIClientStorageCleanup:new o.Cc("extension_feature_flag_capi_client_storage_cleanup","enabled"),ExtensionFeatureFlagCAPIClientStorageLogWarnings:new o.Cc("extension_capi_client_storage_log_warnings","enabled"),ExtensionFeatureFlagCAPIClientStorageRunCleanupRequests:new o.Cc("extension_capi_client_storage_run_cleanup_requests","enabled"),CAPIDistinctConnectionStatus:new o.Cc("extension_capi_distinct_connection_status","enabled"),TransformReplacementBeforeApplyFeature:new o.Cc("extension_feature_transform_replacement_before_apply","enabled"),ZendeskTransformReplacementOnlyForString:new o.Cc("extension_zendesk_transform_replacement_only_for_string","enabled"),GDocsInitGbuttonInsideCommentsField:new o.Cc("gdocs_init_gbutton_inside_comments_field","enabled"),GDocsCreateRichText:new o.Cc("gdocs_create_rich_text","enabled"),GDocsFormatGetFontFamily:new o.Cc("gdocs_format_get_font_family","enabled"),GDocsFormatGetColor:new o.Cc("gdocs_format_get_color","enabled"),GDocsAlignBasicStyleForTextDiff:new o.Cc("gdocs_align_basic_style_for_text_diff","enabled"),GDocsReturnAppliedForNonSuccess:new o.Cc("gdocs_return_applied_for_non_success","enabled"),GDocsReturnAppliedForAll:new o.Cc("gdocs_return_applied_for_all","enabled"),GDocsCheckTextForSuggestionMode:new o.Cc("gdocs_check_text_for_suggestion_mode","enabled"),GDocsNoDeleteEventForSuggestionMode:new o.Cc("gdocs_no_delete_event_for_suggestion_mode","enabled"),GDocsUseSelectionServiceForSuggestionMode:new o.Cc("gdocs_use_selection_service_suggestion_mode","enabled"),ExtensionA11yUIFixes:new o.Cc("extension_a11y_ui_fixes","enabled"),AutocorrectKeydownCaptureUserInput:new o.Cc("extension_autocorrect_keydown_capture_user_input","enabled"),AutocorrectAllowCaptureNonTrustedUserEvents:new o.Cc("extension_autocorrect_allow_capture_not_trusted_user_events","enabled"),DispatchDeltaDeleteEvent:new o.Cc("extension_dispatch_deleta_delete_event","enabled"),DiscordTransformInsertToReplace:new o.Cc("extension_discord_transform_insert_to_replace","enabled"),DiscordExecComandReplacementService:new o.Cc("extension_discord_exec_comand_replacement","enabled"),DiscordDelayAfterReplacementInBatch:new o.Cc("extension_discord_delay_after_replacement_in_batch","enabled"),MSTeamsCustomTransformReplacementWithSpaces:new o.Cc("extension_ms_teams_transform_replacement_with_spaces","enabled"),ReplacementExecutionTimeoutValidation:new o.Cc("extension_replacement_execution_timeout_validation","enabled"),CheetahSelectionContextUpdates:new o.Cc("cheetah_selection_context_updates","enabled"),CheetahSelectionContextUpdatesServer:new o.Cc("cheetah_selection_context_updates_server","enabled"),UseBodyToGetViewportDimentions:new o.Cc("extension_use_body_to_get_viewport_dimentions","enabled"),CLEditorIntegration:new o.Cc("extension_cleditor_integration","enabled"),GOSRollout:new o.Cc("extension_gos_rollout","enabled"),GOSTelemetry:new o.Cc("extension_gos_telemetry","enabled"),CentralizeStopEventPropagation:new o.Cc("extension_centralize_stop_event_propagation","enabled"),CollectDataForPreserveFormatting:new o.Cc("extension_collect_data_for_preserve_formatting","enabled"),FormattingUseBatchWhenHaveListItems:new o.Cc("extension_preserve_formatting_skip_list_items","enabled"),FormattingReplaceEmptyStringToNonBreakingSpaceEntity:new o.Cc("extension_formatting_support_continuous_white_spaces","enabled"),GDocsCollectLayoutRenderingStats:new o.Cc("gdocs_collect_layout_rendering_stats","enabled"),GDocsInternalsFilterStrikethrough:new o.Cc("gdocs_internals_filter_strikethrough","enabled"),GDocsTrackUnderline:new o.Cc("gdocs_track_underline","enabled"),GDocsTrackStrikeThrough:new o.Cc("gdocs_track_strikethrough","enabled"),GDocsInternalsFilterCodeBlocks:new o.Cc("gdocs_internals_filter_code_blocks","enabled"),GDocsDebounceDataRendering:new o.Cc("gdocs_debouncing_data_rendering","enabled"),GDocsExtractLinkFromGoogleInternals:new o.Cc("gdocs_extract_link_from_internals","enabled"),GDocsExtractDocumentInternals:new o.Cc("gdocs_extract_document_internals","enabled"),GDocsExtractSuggestionObjectsWithPath:new o.Cc("gdocs_extract_suggestion_objects_with_path"),GDocsretryExtractAnnotationAfterOneSecond:new o.Cc("gdocs_retry_extract_annotation_after_one_second"),GDocsRetryExtractAnnotation100Times:new o.Cc("gdocs_retry_extract_annotation_100_times"),GDocsExtractLinkInternalsByPath:new o.Cc("gdocs_extract_link_internals_by_path"),TrackInstitutionIdToGnar:new o.Cc("extension_track_institution_id_to_gnar","enabled"),GdocsTrackFatalPopup:new o.Cc("extension_gdocs_track_fatal_popup","enabled"),VbarsGlobal:new o.Cc("vbars_global","enabled"),VbarToggleFromSettingsRegistry:new o.Cc("meg_vbars_toggle","enabled"),CheetahOnboardingContextProviderFix:new o.Cc("cheetah_extension_external_onboarding_context_provider_fix","enabled"),CheetahClearSDUIBufferOnReconnect:new o.Cc("cheetah_extension_clear_sdui_buffer_on_reconnect","enabled"),InactiveIntegration:new o.Cc("extension_inactive_integration","enabled"),G2VBarsKillSwitch:new o.Cc("vbars_extension_kill_switch"),G2VBarsInternal:new o.Cc("extension_g2_vbars_internal","enabled"),G2VBarsInternalIgnoreAllowList:new o.Cc("extension_g2_vbars_internal_ignore_allow_list","enabled"),G2VBarsSelectionPreload:new o.Cc("vbars_selection_preload_extension","enabled"),G2VBarsClickAwayFixes:new o.Cc("vbars_clickaway_listener","enabled"),G2VBarsSelectionEnterprise:new o.Cc("vbars_selection_enterprise","enabled"),G2VBarsPushedContent:new o.Cc("pushed_content_extension","enabled"),G2VBarsIdleEnterprise:new o.Cc("vbars_idle_enterprise","enabled"),UseApproximateTCValidation:new o.Cc("use_approximate_tc_validation","enabled"),GDocsCanUseTransformBeforeValidate:new o.Cc("gdocs_can_use_trasfrom_before_validate","enabled"),GDocsSendValidationInfoForBatchReplacement:new o.Cc("gdocs_send_validation_info_for_batch_replacement","enabled"),CanIgnoreNonWidthCharsForTCValidation:new o.Cc("extension_ignore_non_width_chars_for_tc_validaition","enabled"),GDocsCanIgnoreEndNewLine:new o.Cc("gdocs_ignore_end_new_line_for_tc_validaition","enabled"),GDocsWhitespaceSelectionRetry:new o.Cc("gdocs_whitespace_selection_retry","enabled"),OAuth2SelectiveLogout:new o.Cc("extension_oauth2_selective_logout","enabled"),OAuth2LastAuthnEventLogout:new o.Cc("extension_oauth2_last_authn_event_logout","enabled"),LockedUIRollout:new o.Cc("locked_ui_rollout","unlimited_pool"),DebouncedInlineCardUpdate:new o.Cc("extension_debounced_inline_card_update"),GDocsShouldCheckIfMappedSomething:new o.Cc("gdocs_map_result_must_mapped_some_text"),GDocsCheckIndexBoundaryWhenTranslateIndex:new o.Cc("gdocs_check_index_boundary_when_translate_index"),GDocsOnlyAddIncompleteResult:new o.Cc("gdocs_only_add_incomplete_result"),GDocsPageInputValidationForParser:new o.Cc("gdocs_page_input_validation_for_parser"),CheetahProfuseEventsTracking:new o.Cc("cheetah_profuse_events_tracking"),RedditReplacementDuplicationFix:new o.Cc("reddit_replacement_duplication_fix"),RedditNewUseOverlayLayout:new o.Cc("reddit_new_use_overlay_layout"),RedditUseClipboardForCreatePost:new o.Cc("extension_reddit_use_clipboard_for_create_post"),InstagramUseDispatchEventReplacementService:new o.Cc("instagram_use_dispatch_event_replacement_service"),FacebookUseDispatchEventReplacementService:new o.Cc("facebook_use_dispatch_event_replacement_service"),FacebookChatNoDelayBeforeSelection:new o.Cc("facebook_chat_no_delay_before_selection"),PrioritizeLeftNodeAsEndNode:new o.Cc("extension_prioritize_left_node_as_end_node"),SalesforceServiceConsoleReplacementFix:new o.Cc("salesforce_service_console_replacement_fix"),SalesforceFilterEmailThread:new o.Cc("salesforce_filter_email_thread"),SalesforceDetailsTextareaRichReplacementServiceDelay:new o.Cc("salesforce_details_textarea_replacement_service_delay"),StravaReplacementSelectionDelay:new o.Cc("extension_strave_replacement_selection_delay"),SkipParallelAutoFixReplacement:new o.Cc("skip_parallel_autofix_replacement"),AvoidExtraIntegrationControllerInitialization:new o.Cc("extension_avoid_extra_integration_controller_initialization"),OggyOnGOS:new o.Cc("extension_oggy_on_gos","enabled"),UnfixFast570:new o.Cc("extension_unfix_fast_570"),LatticeReplacementDuplicationFix:new o.Cc("lattice_replacement_duplication_fix"),NewSessionEndWithConnectionStats:new o.Cc("new_session_end_with_connection_stats"),GDocsReplacementValidateOnlyFullTextBeforeReplacement:new o.Cc("gdocs_replacement_only_validate_full_text_before_replacement"),GDocsReplacementValidateOnlyFragmentText:new o.Cc("gdocs_replacement_only_validate_fragment_text"),GDocsCachingParserMiddleware:new o.Cc("gdocs_caching_parser_middleware"),OggyIframeWrappers:new o.Cc("extension_oggy_use_iframe_wrappers"),LoadAppActionsFromAppletCdn:new o.Cc("app_actions_applet_cdn_extension"),PerformanceScoreOggy:new o.Cc("performance_score_oggy"),SessionTimeout:new o.Cc("extension_session_timeout"),ConnectorGdocs:new o.Cc("extension_connector_gdocs"),ConnectorNonGdocs:new o.Cc("extension_connector_non_gdocs"),ServiceAvailabilityViewMetrics:new o.Cc("extension_service_availability_view_metrics"),ServiceAvailabilityTypingMetrics:new o.Cc("extension_service_availability_typing_metrics"),GDocsUseCanvasFocusedRule:new o.Cc("extension_gdocs_use_canvas_focused_rule"),GDocsExpireCommentIntegrationByChildCount:new o.Cc("extension_gdocs_expire_by_child_count"),FieldIntegrationManager:new o.Cc("extension_field_integration_manager"),CheetahExecReplacementOnlyWhenItsExists:new o.Cc("extension_cheetah_exec_replacement_only_when_its_exists"),SendChangesToCAPIAfterSequentialApply:new o.Cc("extension_send_changes_to_capi_after_sequential_apply"),GDocsTabSwitchFrequencyTracking:new o.Cc("gdocs_tab_switch_frequency_tracking"),DatabricksPerformanceMetrics:new o.Cc("extension_databricks_performance_metrics"),PersonalizedInsightsConsentPopup:new o.Cc("extension_personalized_insights_consent_onboarding"),PersonalizedInsightsEmailDomainAndSignature:new o.Cc("extension_personalized_insights_email_domain_and_signature"),DataSharing:new o.Cc("data_sharing_optin"),TrackLevenshteinDistanceForTextCorruption:new o.Cc("extension_track_levenshtein_distance_for_text_corruption"),TrackTextCorruptionDebugProductMetric:new o.Cc("extension_track_text_corruption_debug_product_metric"),TouchTypistInternal:new o.Cc("extension_touch_typist_internal"),TouchTypistRelease:new o.Cc("extension_touchtypist_release"),TouchTypistPartialTrigger:new o.Cc("extension_touchtypist_partial_trigger","enabled"),TouchTypistForcedBufferFlush:new o.Cc("extension_touchtypist_internal_dlp_bypass","enabled"),TSMintSdkRollout:new o.Cc("extension-ts-mint-sdk-rollout"),TSMintDeprecateGnar:new o.Cc("extension_deprecate_gnar"),FetchSkills:new o.Cc("extension_fetch_skills"),GDocsParseSmartChipFragments:new o.Cc("gdocs_parse_smart_chip_fragments"),NewsNowSingleInstantiation:new o.Cc("newsnow_disable_multiple"),CanContainsPrivateFieldsInDocInfo:new o.Cc("extension_can_contains_private_fields_in_doc_info"),CleanupPageMapCanvas2dContext:new o.Cc("cleanup_page_map_canvas_2d"),InProductDiscountSpecialOffer:new o.Cc("extension_in_product_discount_m2_special_offer"),MapImageNodeForRichText:new o.Cc("map_image_node_for_rich_text"),PreventEmptySetContext:new o.Cc("extension_prevent_empty_set_context"),GDocsSendComments:new o.Cc("gdocs_send_comments"),TrackAlertProcessingPerformance:new o.Cc("extension_track_alert_processing_performance"),AlertProcessingOptimization:new o.Cc("extension_alert_processing_optimization"),VBarsInjectionContainerDisplayContents:new o.Cc("vbars_injection_container_display_contents"),CodaUseCSSTransformTranslateForUnderlinePosition:new o.Cc("coda_use_css_transform_translate_for_underline_position"),CodaHideUnderlineWhenAnimated:new o.Cc("coda_hide_underline_when_animated"),CodaIntegrateOuterElementsCloser:new o.Cc("coda_integrate_outer_elements_closer"),CodaHideGbuttonForDocumentTitle:new o.Cc("coda_hide_gbutton_for_document_title"),CodaPositionGbuttonIntoFixedContainer:new o.Cc("coda_position_gbutton_into_fixed_container"),UseRefactoredUpdatePortForBg:new o.Cc("use_refactored_update_port_for_bg"),GDocsSignUpPopupReactToUserState:new o.Cc("extension_gdocs_signup_popup_react_to_user_state"),FullySignedInExperienceInGDocsFeature:new o.Cc("fully_signedin_gdocs_feature"),FullySignedInExperienceViaTone:new o.Cc("fully_signedin_block_inline_cards_via_tone"),GDocsAllowToDetectAssistantInjectionMode:new o.Cc("extension_gdocs_allow_to_detect_assistant_injection_mode"),GDocsDetectSidebarTypeDynamically:new o.Cc("extension_gdocs_detect_sidebar_type_dynamically"),GDocsInviteNudge:new o.Cc("extension_gdocs_invite_nudge"),GDocsShareModalTracking:new o.Cc("extension_gdocs_share_modal_tracking"),AttributesTriggerFieldIntegration:new o.Cc("extension_integration_target_attributes"),OAuthCheckTokenServiceState:new o.Cc("extension_check_oauth_token_service_state"),OAuthTokenServiceStateFallback:new o.Cc("extension_oauth_token_service_state_fallback"),SnippetsTemplateVariables:new o.Cc("meg_snippets_dynamic_fields"),DomainClaimedUserCopyWithInstitutionDetails:new o.Cc("meg_domain_claimed_user_copy_with_institution_details"),TrackContainerIdFailures:new o.Cc("extension_track_container_id_failures"),AuthenticationOptionsApi:new o.Cc("authentication_options_api"),UseBlockListToConfigureFieldMinSizeForDefaultIntegrations:new o.Cc("extension_use_block_list_to_configure_field_min_size_for_default_integrations"),EnablePathTrackingForSessionEnd:new o.Cc("extension_enable_path_tracking_for_session_end"),LazyLoadSnippetsSearchTrees:new o.Cc("extensions_lazy_load_snippets","enabled"),ShowLegacyPlagiarismInSidePanel:new o.Cc("always_available_assistant_legacy_plagiarism"),GDocsVersionHistorySidebarSelector:new o.Cc("extension_gdocs_version_history_selector"),GoogleGroupsIntegration:new o.Cc("extension_google_groups_integration","enabled"),EnableIframesByDefault:new o.Cc("extension_iframe_default_enable","enabled"),UphookGnarEvents:new o.Cc("uphook-gnar-events","enabled"),DisableKixApp:new o.Cc("extension_disable_kix_app","enabled"),AgentRuntimeInternalDebug:new o.Cc("agent_runtime_internal_debug"),ExistingSelectionOptimization:new o.Cc("existing_selection_optimization","enabled"),IntegrationResultTracking:new o.Cc("extension_integration_result_tracking","enabled"),GDocsGeminiPreviewRendering:new o.Cc("extension_gdocs_gemini_preview_rendering"),CleanUxUiInternal:new o.Cc("clean_ux_ui_internal"),ExtensionGoOnboarding:new o.Cc("extension_go_onboarding","enabled"),ExtensionBugSubmissionForm:new o.Cc("extension_bug_submission_form","enabled"),EnableSuperhumanIntegration:new o.Cc("extension_enable_superhuman_integration"),CodaTransformDeleteReplacement:new o.Cc("extension_coda_transform_delete_replacement"),GDocsCanvasPrototypePatching:new o.Cc("extension_gdocs_late_canvas_patching")}},84195:(e,t,n)=>{n.d(t,{n:()=>i});class i{constructor(e){this._messageApi=e}on(e){this._messageApi.onRuntimeMessage.addListener(e)}off(e){this._messageApi.onRuntimeMessage.removeListener(e)}sendMessage(e){return this._messageApi.sendRuntimeMessage(e)}}},43912:(e,t,n)=>{n.d(t,{h:()=>p});var i=n(74822),o=n(59179),r=n(90572),s=n(32734),a=n(29416),l=n(13391),c=n(39963),u=n(40594),d=n(31272),h=n(13848),g=n(3774);class p{constructor(e,t=Promise.resolve(),n=u.Y.create("PersistentStore"),p=(0,c.Tb)()){this._api=e,this._current=l.h.create({}),this._mismatchedChanges=new i.x,this.get=async e=>g.s.parse(await this._api.get(e),e),this.getAll=async()=>g.s.parse(await this._api.getAll()),this.patch=async(e,t=!1)=>{if(t||!g.s.hasProtectedKeys(e))return await this._api.set(e);throw new Error("Attempting to directly patch protected keys of the store. Consider using actions for this operation.")},this.view=this._current.view.bind(this._current),this.dispose=()=>{this._subs.forEach((e=>e.unsubscribe())),this._subs=[]},this.changes=(0,h.D)(this._api.changes).pipe((0,o.U)(g.s.parseChange),(0,r.h)((e=>0!==Object.keys(e).length)),(0,s.B)()),this._subs=[],this._applyChanges=(e,t)=>{Object.keys(t).forEach((n=>{var i;if(!d.vZ(null===(i=t[n])||void 0===i?void 0:i.oldValue,e[n]))throw new Error("mismatched_changes")}));const n=d.UI(((e,t)=>null==t?void 0:t.newValue),t);return Object.assign({},e,n)},t.then((()=>this._api.getAll())).then((e=>this._current.set(g.s.parse(e)))).then((()=>{this._subs.push(this.changes.subscribe((e=>{try{this._current.modify((t=>this._applyChanges(t,e)))}catch(e){"mismatched_changes"===e.message?(n.warn("Mismatched changes to Persistent Store",e),this._mismatchedChanges.next(void 0)):(n.error("Unexpected error while applying changes to Persistent Store",e),p.storageApplyChangesFailed(e))}})))})),this._subs.push(this._mismatchedChanges.pipe((0,a.b)(200)).subscribe((()=>{this._api.getAll().then((e=>this._current.set(g.s.parse(e))))})))}}},3774:(e,t,n)=>{n.d(t,{s:()=>i});var i,o=n(87846),r=n(31272);!function(e){e.allPersistentKeys=["user","version","dynamicConfig","extensionSettings","dynamicConfigOverrideKey","environmentState","connection","activeTab","extensionFSM","fieldsSettings","alarms","clickToRunEnabledOnce","dapi","growthSettings","extensionMeta","gnarInternalStorage","extensionInstallDate","extensionInstallSource","lastAuthnEvent","copiedTextMessage","passport","mise","iterable","connectorSettings","oauthSDKTokenExchangeMethod",o.N,"authenticationOptions","authTokenInitialRefreshDone","authenticationStarted","claimedUserSettings","inviteNudgeFirstTimestamp"];const t=["user","dapi","dynamicConfig","alarms","lastAuthnEvent","mise",o.N];e.parse=(t,n=e.allPersistentKeys)=>r.Ue(n.map((e=>[e,t[e]]))),e.parseChange=t=>r.hX(((e,t)=>void 0!==t),r.Ue(e.allPersistentKeys.map((e=>[e,t[e]])))),e.hasProtectedKeys=e=>t.some((t=>t in e))}(i||(i={}))},58777:(e,t,n)=>{n.d(t,{d:()=>i});class i{constructor(e,t,n){this._messageService=e,this._customInboundEventName=t,this._customOutboundEventName=n,this.inbound={subscribe:e=>{const t=t=>{if(!function(e,t){if(!e||"object"!=typeof e)return!1;const n="type"in e&&e.type===t,i="message"in e;return n&&i}(t,this._customInboundEventName))return;const n=t.message;e&&("function"==typeof e?e(n):e.next&&e.next(n))};return this._messageService.on(t),{unsubscribe:()=>this._messageService.off(t)}}},this.outbound=e=>{const t={type:this._customOutboundEventName,message:e};this._messageService.sendMessage(t)}}}},30498:(e,t,n)=>{n.d(t,{S:()=>i});class i{constructor(e,t){this._transport=e,this._api=t,this._disposed=!1,this._sub=this._transport.inbound.subscribe({next:async e=>{try{const t=this._api[e.data.method];if("function"!=typeof t)throw{message:`invalid method name ${String(e.data.method)}`};{const n={clientId:e.clientId},i=await t.call(this._api,n,...e.data.args);this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,res:i}})}}catch(t){this._transport.outbound({clientId:e.clientId,data:{id:e.data.id,err:t}})}}})}dispose(){this._disposed||(this._disposed=!0,this._sub.unsubscribe())}}},11818:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(31272);function o(e){return i.Ue(Object.entries(e).map((([t,n])=>[t,(t,...i)=>n.apply(e,i)])))}},86837:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(40594);const o=e=>{const t=i.Y.create("AuthActions");return{beginAuth:()=>{t.debug("beginAuth"),e.patch({authenticationStarted:(new Date).toISOString()})}}}},89512:(e,t,n)=>{n.d(t,{j:()=>i});const i=e=>{let t;const n=()=>(t||(t={networkOffline:!self.navigator.onLine,online:!0}),t),i=async()=>{const{connection:t}=await e.get(["connection"]);return null!=t?t:n()};return{initConnection:async()=>{const{connection:t}=await e.get(["connection"]);t||await e.patch({connection:n()})},modifyConnection:async t=>{const n=await i();return e.patch({connection:{...n,...t}})},setOffline:async t=>{const n=await i();if(n.networkOffline!==t)return e.patch({connection:{...n,networkOffline:t}})}}}},24534:(e,t,n)=>{n.d(t,{k:()=>i});const i=e=>({modifyEnvironment:async t=>{const{environmentState:n}=await e.get(["environmentState"]);return e.patch({environmentState:{...n,...t}})}})},15933:(e,t,n)=>{n.d(t,{q:()=>r});var i=n(84674),o=n(15362);const r=e=>({gdocsOptedIn:()=>{return e.patch({extensionSettings:(0,i.J_)(null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:o.he,"docs.google.com",{enabled:!0,disabledDate:void 0})});var t}})},31715:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(13162),o=n(84674);function r(e){const t=()=>e.view("extensionSettings").view((e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.common)||void 0===t?void 0:t.keyboardShortcuts)&&void 0!==n?n:{openAssistant:(0,i.e)("openAssistant"),closeAssistant:(0,i.e)("closeAssistant"),openVBar:(0,i.e)("openVBar")}}));return{getKeyboardShortcuts:t,setKeyboardShortcut:n=>{const i=(0,o.gC)(e),r=t().get();return e.patch({extensionSettings:(0,o.k1)(i(),{keyboardShortcuts:{...r,...n}})})}}}},42900:(e,t,n)=>{n.d(t,{QP:()=>d});var i=n(27982),o=n(11816),r=n(28898),s=n(84674),a=n(33976),l=n(20905),c=n(31715);function u(e,t,n,o){var l;void 0===n&&(n=(0,s.gC)(e)),void 0===o&&(o=null===(l=(0,r.O)().experimentClient)||void 0===l?void 0:l.isGateEnabled(i.K.CheckTextWhenTurnOnAAA));const c=n(),u=function(e){var t;return null!==(t=e.common.alwaysAvailableAssistantSettings)&&void 0!==t?t:a.Nr}(c);return e.patch({extensionSettings:(0,s.k1)(c,{alwaysAvailableAssistantSettings:{...u,enabled:t},...o&&{isDesktopIntegrationEnabled:!t&&c.common.isDesktopIntegrationEnabled}})})}const d=e=>{const t=(0,s.gC)(e);return{toggleDefs:n=>e.patch({extensionSettings:(0,s.k1)(t(),{enabledDefs:n})}),toggleAutocorrect:n=>e.patch({extensionSettings:(0,s.k1)(t(),{autocorrectEnabled:n})}),toggleAlwaysAvailableAssistant:n=>u(e,n,t),toggleTouchTypist:n=>{var i;const r=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...r,enabled:n,snoozedUntil:null}})})},setTouchTypistToggledByUser:({userId:n,value:i})=>{var r,a,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:o.c,u=null!==(a=c.autoOptOutExperiment)&&void 0!==a?a:{},d={...null!==(l=u[n])&&void 0!==l?l:{},enabledToggledByUser:i};return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...u,[n]:d}}})})},toggleTouchTypistByUser:({enabled:n,userId:i})=>{var r,a,l,c;const u=t(),d=null!==(r=u.common.touchTypistSettings)&&void 0!==r?r:o.Y,h=null!==(a=u.common.touchTypistState)&&void 0!==a?a:o.c,g=null!==(l=h.autoOptOutExperiment)&&void 0!==l?l:{},p={...null!==(c=g[i])&&void 0!==c?c:{},enabledToggledByUser:!0};return e.patch({extensionSettings:(0,s.k1)(u,{touchTypistSettings:{...d,enabled:n,snoozedUntil:null},touchTypistState:{...h,autoOptOutExperiment:{...g,[i]:p}}})})},snoozeTouchTypist:()=>{var n;const i=null!==(n=t().common.touchTypistSettings)&&void 0!==n?n:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...i,enabled:!1,snoozedUntil:new Date((new Date).getTime()+l.xO).toISOString()}})})},setTouchTypistHotkey:({hotkey:n})=>{var i;const r=null!==(i=t().common.touchTypistSettings)&&void 0!==i?i:o.Y;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistSettings:{...r,hotkey:n}})})},incrementAccessibilityOnboardingAlertsCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:o.c,{accessibilityOnboardingAlertsCount:r=o.c.accessibilityOnboardingAlertsCount}=i;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...i,accessibilityOnboardingAlertsCount:r+1}})})},incrementTouchTypistUserAcceptedCount:()=>{var n;const i=null!==(n=t().common.touchTypistState)&&void 0!==n?n:o.c;return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...i,userAcceptedCount:Math.min(i.userAcceptedCount+1,3),lastUserAcceptedAt:(new Date).toISOString()}})})},setHasBeenAutoOptedOut:({userId:n,hasBeenAutoOptedOut:i})=>{var r,a,l;const c=null!==(r=t().common.touchTypistState)&&void 0!==r?r:o.c,u=null!==(a=c.autoOptOutExperiment)&&void 0!==a?a:{},d={...null!==(l=u[n])&&void 0!==l?l:{},hasBeenAutoOptedOut:i};return e.patch({extensionSettings:(0,s.k1)(t(),{touchTypistState:{...c,autoOptOutExperiment:{...u,[n]:d}}})})},toggleCitationBuilderForDomain:({domain:n,enabled:i,pathName:o,inAllowList:r})=>{var l;const c=null!==(l=t().common.citationBuilder)&&void 0!==l?l:a.KC.empty;return e.patch({extensionSettings:(0,s.k1)(t(),{citationBuilder:{...c,domains:{...c.domains,[n]:{disabled:!i,toggleDate:(new Date).getTime(),togglePathName:o,inAllowList:r}}}})})},toggleTranslateOnboardingForDomain:({domain:n,enabled:i})=>{var o;const r=null!==(o=t().common.translateOnboarding)&&void 0!==o?o:a.aK.empty;return e.patch({extensionSettings:(0,s.k1)(t(),{translateOnboarding:{...r,domains:{...r.domains,[n]:{disabled:!i}}}})})},toggleSite:({enabled:n,domain:i,clickToRunEnabled:o})=>e.patch({extensionSettings:(0,s.J_)(t(),i,{enabled:n,disabledDate:!0===n?void 0:Date.now(),...void 0!==o?{clickToRunEnabled:o}:void 0})}),setKeyboardShortcut:t=>(0,c.R)(e).setKeyboardShortcut(t),toggleEnhancedScreenReaderUXSupport:n=>e.patch({extensionSettings:(0,s.k1)(t(),{isEnhancedScreenReaderUXSupported:n})})}}},55830:(e,t,n)=>{n.d(t,{q:()=>u});var i=n(86837),o=n(89512),r=n(24534),s=n(15933),a=n(44814),l=n(42900),c=n(18428);const u=e=>({quickSettings:(0,l.QP)(e),gdocs:(0,s.q)(e),settings:(0,c.C)(e),connection:(0,o.j)(e),tabs:(0,a.a)(e),environment:(0,r.k)(e),auth:(0,i.a)(e)})},18428:(e,t,n)=>{n.d(t,{C:()=>o});var i=n(84674);const o=e=>{const t=(0,i.gC)(e);let n=Promise.resolve();const o=async o=>{const r=n.then((async()=>{const n=t();Object.keys(o).every((e=>o[e]===n.common[e]))||await e.patch({extensionSettings:(0,i.k1)(n,o)})}));return n=r.catch((()=>{})),r};return{patchCommonSettings:o,setDesktopIntegration:e=>o({isDesktopIntegrationEnabled:e}),enableClickToRunOnAllSites:()=>o({clickToRunOnAllSites:!0}),enableHistoryLoggerUntil:e=>o({historyLoggerEnabledUntil:e}),disableHistoryLogger:()=>o({historyLoggerEnabledUntil:0}),enableAdvancedHistoryLoggerUntil:e=>o({advancedHistoryLoggerEnabledUntil:e}),disableAdvancedHistoryLogger:()=>o({advancedHistoryLoggerEnabledUntil:0}),disableOnTab:n=>e.patch({extensionSettings:(0,i.J_)(t(),n,{enabled:!1,disabledDate:Date.now()})}),toggleDebugMenu:(e=!0)=>o({isDebugMenuVisible:e}),toggleGOSDebugger:e=>o({gOSDebuggerEnabled:e}),setGOSAppletChannel:e=>o({gOSAppletChannel:e}),setGOSAssistantAppletUrl:e=>o({gOSAssistantAppletUrl:e})}}},44814:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(25693);const o=e=>({enableOnceClickToRun:async()=>{const{clickToRunEnabledOnce:t,activeTab:n}=await e.get(["clickToRunEnabledOnce","activeTab"]);return e.patch({clickToRunEnabledOnce:{...null!=t?t:{},...n?{[n.id]:{[(0,i.KK)(n.url)]:!0}}:{}}})},setActiveTab:t=>e.patch({activeTab:t})})},84674:(e,t,n)=>{n.d(t,{J_:()=>r,gC:()=>s,k1:()=>o});var i=n(15362);function o(e,t){return Object.assign({},e,{common:{...e.common,...t}})}function r(e,t,n){return Object.assign({},e,{[t]:{...e[t],...n}})}const s=e=>()=>{var t;return null!==(t=e.view("extensionSettings").get())&&void 0!==t?t:i.he}},15362:(e,t,n)=>{n.d(t,{aT:()=>s,he:()=>i,pN:()=>o,uS:()=>r});const i=Object.assign({},{},{common:{enabledDefs:!1,historyLoggerEnabledUntil:null,historyLoggerEnabled:!1,advancedHistoryLoggerEnabledUntil:null,advancedHistoryLoggerEnabled:!1,isDebugMenuVisible:!1,isEnhancedScreenReaderUXSupported:!1,knowledgeHubSettings:{enabled:!0,onboardingSeen:!1,suggestedTermOnboardingSeen:!1},alwaysAvailableAssistantSettings:{},touchTypistState:{accessibilityOnboardingAlertsCount:0,userAcceptedCount:0,lastUserAcceptedAt:""},touchTypistSettings:{enabled:!0,hotkey:"Tab",snoozedUntil:null}},field:{}}),o={id:0,url:""},r={stage:"installed"},s={valid:!1}},33976:(e,t,n)=>{n.d(t,{G6:()=>u,KC:()=>o,Nr:()=>l,aK:()=>r,v3:()=>c});var i,o,r,s=n(12518),a=n(19724);!function(e){e.fromUserType=e=>{switch(e){case a.F.premium:return s.F2("premium");case a.F.registered:return s.F2("free");default:return s.t$("unknownUserType")}}}(i||(i={})),function(e){let t;!function(e){e.apa="apa",e.mla="mla",e.chicago="chicago"}(t=e.Style||(e.Style={})),e.empty={domains:{},onboardingVersionSeen:-1,style:t.apa}}(o||(o={})),function(e){e.empty={domains:{}}}(r||(r={}));const l={};var c;!function(e){let t;!function(e){e.SUGGESTED_TERM="suggestedTermOnboardingSeen",e.TERM_DETAILS="onboardingSeen"}(t=e.OnboardingSeenFor||(e.OnboardingSeenFor={})),e.empty={enabled:!0,[t.SUGGESTED_TERM]:!1,[t.TERM_DETAILS]:!1},e.get=t=>({...e.empty,...t})}(c||(c={}));const u=()=>({seen:{},accepted:{},detectedTones:{}})},47557:(e,t,n)=>{if(n.d(t,{BM:()=>m,IG:()=>_,Re:()=>f,Tv:()=>p,VD:()=>v,YN:()=>y,_N:()=>b,a2:()=>w,qw:()=>g}),5526!=n.j)var i=n(64271);if(5526!=n.j)var o=n(44071);if(5526!=n.j)var r=n(29479);if(3075==n.j)var s=n(954);if(3075==n.j)var a=n(59179);if(3075==n.j)var l=n(90572);if(5526!=n.j)var c=n(18647);if(3075==n.j)var u=n(45523);if(3075==n.j)var d=n(78767);if(5526!=n.j)var h=n(79707);function g(e){return(0,i.T)((0,o.R)(e,"focus").pipe((0,r.h)(!0)),(0,o.R)(e,"blur").pipe((0,r.h)(!1)))}function p(e){return e.nodeType===Node.ELEMENT_NODE}function m(e){return e.nodeType===Node.TEXT_NODE}function f(e){return e.nodeType===Node.ELEMENT_NODE&&e instanceof HTMLElement}function _(e,t){return u.x.create(e,{childList:!0,subtree:!0,attributes:!1}).pipe((0,s.O)(null),(0,a.U)((e=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:n()})),{});return Object.values(n).filter(d.fQ).length===Object.keys(n).length?n:null})),(0,l.h)((e=>!!e)))}var v;function b(e,t,n){return i((0,c.Me)(t));function i(t){const n=t.elementFromPoint(e.left,e.top);if(!n)return!1;const i=o(n);if(null!==i)return i;const r=t.elementsFromPoint(e.left,e.top);for(const e of r){if(e===n)continue;const t=o(e);if(null!==t)return t}return!1}function o(e){var o;return!(t!==e&&!t.contains(e))||((null==n?void 0:n(e))?null:!!(null===(o=e.shadowRoot)||void 0===o?void 0:o.elementsFromPoint)&&i(e.shadowRoot))}}function w(e){if(e.endsWith("px")){const t=e.slice(0,-2),n=Number(t);return(0,h.hj)(n)?n:null}return null}function y(e){var t;const n=(null!==(t=e.ownerDocument.defaultView)&&void 0!==t?t:self).getComputedStyle(e).zIndex,i="auto"!==n&&parseInt(n||"0",10)||null;return null!==i?i:e.parentNode&&e.parentNode.nodeType===Node.ELEMENT_NODE?y(e.parentNode):null}!function(e){e[e.Escape=27]="Escape",e[e.Return=13]="Return",e[e.Tab=9]="Tab",e[e.RightArrow=39]="RightArrow",e[e.UpArrow=38]="UpArrow",e[e.DownArrow=40]="DownArrow"}(v||(v={}))},53396:(e,t,n)=>{function i(e){return Boolean(e&&"function"==typeof(null==e?void 0:e[Symbol.iterator]))}function*o(e,t){for(const n of e)t(n)&&(yield n)}function*r(e,t){let n=0;for(const i of e)for(const e of t(i,n++))yield e}function s(e,t,n){let i=0;for(const n of e)if(t(n,i++))return n;return n}function a(e){for(const t of e)return t}function l(e,t){const n=e[Symbol.iterator]();let i=0;const o=t[Symbol.iterator]();let r=0,s=n.next(void 0),a=o.next(void 0);return[function*(){for(;!s.done||!a.done;)yield[s.done?null:s.value,a.done?null:a.value,i,r]}(),function(){s=n.next(void 0),i++},function(){a=o.next(void 0),r++}]}function*c(e){let t=e.length;for(;t--;)yield e[t]}n.d(t,{Em:()=>c,TW:()=>i,VS:()=>r,Xh:()=>a,fV:()=>l,hX:()=>o,sE:()=>s})},80239:(e,t,n)=>{if(n.d(t,{UP:()=>a,Zq:()=>l,cG:()=>c,o4:()=>o,xq:()=>r}),3075==n.j)var i=n(53396);function o(...e){return 1===e.length?e[0]:e}function r(e){const t=[];return s(t,e),t}function s(e,t){const n=t;if(Array.isArray(n)||"string"!=typeof n&&(0,i.TW)(n))for(const t of n)s(e,t);else e.push(n)}function*a(e){const t=e;if(Array.isArray(t)||"string"!=typeof t&&(0,i.TW)(t))for(const e of t)yield*a(e);else yield t}function*l(e){const t=e;if(Array.isArray(t))for(let e=t.length-1;e>=0;e--)yield*l(t[e]);else if("string"!=typeof t&&(0,i.TW)(t)){const e=Array.from(t).reverse();for(const t of e)yield*l(t)}else yield t}function c(e){const t=e;if(Array.isArray(t)||"string"!=typeof t&&(0,i.TW)(t)){for(const e of t)if(!c(e))return!1;return!0}return!1}},18473:(e,t,n)=>{n.d(t,{Y:()=>a,f:()=>l});var i=n(92379),o=n(90595);if(5526!=n.j)var r=n(15380);var s=n(29483);function a(){const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{var e,n,i,a;const l=async()=>{try{const[e,n]=await Promise.all([(0,s.OB)().bgRpc.api.getUserGoExperience(),(0,s.OB)().bgRpc.api.getAlwaysAvailableAssistantSettings()]),i=(0,s.OB)().experimentClient.isGateEnabled(o.K.SuperhumanGoBranding),r=null!=e&&e,a=!!(null==n?void 0:n.enabled);t((i||r)&&a)}catch(e){t(!1)}};l();const c=()=>{l()};return(null===(n=null===(e=(0,s.OB)())||void 0===e?void 0:e.message)||void 0===n?void 0:n.on)&&(null===(a=null===(i=(0,s.OB)())||void 0===i?void 0:i.message)||void 0===a||a.on(r.I.Kind.brandingChanged,c)),()=>{var e,t,n,i;(null===(t=null===(e=(0,s.OB)())||void 0===e?void 0:e.message)||void 0===t?void 0:t.off)&&(null===(i=null===(n=(0,s.OB)())||void 0===n?void 0:n.message)||void 0===i||i.off(r.I.Kind.brandingChanged,c))}}),[]),e}function l(){return(0,s.OB)().experimentClient.isGateEnabled(o.K.SuperhumanGoBranding)}},16249:(e,t,n)=>{n.d(t,{J:()=>o});var i=n(29483);const o=new Proxy({},{get:(e,t)=>(...e)=>(0,i.OB)().bgRpc.api.trackGnar(t,e)})},43795:(e,t,n)=>{if(n.d(t,{GH:()=>l,Xv:()=>a,dU:()=>c,hG:()=>u,n1:()=>s}),5526!=n.j)var i=n(66798);if(5526!=n.j)var o=n(90189);if(5526!=n.j)var r=n(90595);const s=2147483647;function a(e={enabled:!1},t){const n=t||(0,o.OB)().experimentClient;return e.enabled&&(null==n?void 0:n.isGateEnabled(r.K.SessionTimeout))}function l(e){try{return JSON.parse(e).refresh_token_expires_at}catch(e){return}}function c(e){if(!e)return!1;return e-Date.now()<=i.p7}function u(e){return e-Date.now()-i.p7}},89895:()=>{},38484:e=>{e.exports={settingsMenu:"OPvuG",settingsMenuVisible:"vDEFm",settingsButton:"RsPvF",keyboardShortcutMenuItem:"ceX4F"}},69550:e=>{e.exports={heroIcon:"S2rLS",heroIconPath:"KZj1D"}},49258:e=>{e.exports={heroWaveAnimation:"ES1dv"}},18952:e=>{e.exports={notchGrammarlyIcon:"evU1f"}},64954:e=>{e.exports={notchContainer:"g0Vgr",notch:"nQgcx",hidden:"MB55l",peeking:"wYEGR",notchButton:"K9COx"}},92706:e=>{e.exports={gr_no_print:"dnXmp"}}}]);