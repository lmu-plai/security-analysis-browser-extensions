/*! For license information please see 8949.vendors.chunk.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[8949],{31744:(e,t,n)=>{n.d(t,{K:()=>a});var r=n(92379);function a(e){const t=(0,r.useCallback)((t=>{const n=e.subscribe((()=>t()));return()=>n.unsubscribe()}),[e]);return(0,r.useSyncExternalStore)(t,(()=>e.get()),(()=>e.get()))}},56501:(e,t,n)=>{n.d(t,{W:()=>d});var r=n(92379),a=Object.defineProperty,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,c=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;const l=/^6(052|168)$/.test(n.j)?[.03125,.0625,.125,.25,.5,1]:null;const d=(e,t={})=>{const{minIntervalSec:n=1,maxIntervalSec:a=30,maxDurationSec:d=360,enabled:u=!0,addFuzz:g=!0,random:h,shouldContinuePolling:p}=t,f=1e3*Math.max(0,n),m=1e3*Math.max(0,a),v=1e3*Math.max(0,d),x=Math.min(f,m),b=Math.max(f,m),C=(0,r.useRef)(null),y=(0,r.useRef)(0),k=(0,r.useRef)(null),w=(0,r.useRef)(!1),[j,S]=(0,r.useState)(0),[I,A]=(0,r.useState)(0),E=(0,r.useRef)(e),_=(0,r.useRef)(p);(0,r.useEffect)((()=>{E.current=e}),[e]),(0,r.useEffect)((()=>{_.current=p}),[p]);const M=(0,r.useCallback)((()=>{C.current&&(clearTimeout(C.current),C.current=null),y.current=0,k.current=null,w.current=!1,S(0),A(0)}),[]);return(0,r.useEffect)((()=>{let e=!1;if(C.current&&(clearTimeout(C.current),C.current=null),!u||!E.current)return w.current=!1,void(k.current=null);null===k.current&&(k.current=Date.now(),y.current=0,S(0),A(0));const t=()=>{var n;if(e)return;if(w.current)return;const r=Date.now(),a=r-(null!=(n=k.current)?n:r);if(a>=v)return A(a),void(w.current=!1);const d=y.current+1;if(y.current=d,S(d),A(a),_.current&&!_.current(d))return void(w.current=!1);w.current=!0;const u=E.current;u?Promise.resolve(u()).finally((()=>{var n;if(e)return;w.current=!1;const r=Date.now(),a=r-(null!=(n=k.current)?n:r);if(a>=v)return void A(a);const u=function({attempt:e,minMs:t,maxMs:n,addFuzz:r,rng:a=Math.random}){var i;const s=(n-t)*(null!=(i=l[e-1])?i:1)+t;if(!r)return Math.min(n,s);const o=.25*s*(a()-.5)*2;return Math.max(t,Math.min(n,s+o))}(((e,t)=>{for(var n in t||(t={}))s.call(t,n)&&c(e,n,t[n]);if(i)for(var n of i(t))o.call(t,n)&&c(e,n,t[n]);return e})({attempt:d,minMs:x,maxMs:b,addFuzz:g},h&&{rng:h}));e||(C.current=setTimeout(t,u))})):w.current=!1};return setTimeout(t,0),()=>{e=!0,C.current&&(clearTimeout(C.current),C.current=null),w.current=!1}}),[u,x,b,v,g,h]),{attemptCount:j,elapsedTimeMs:I,hasReachedMaxDuration:I>=v,reset:M}}},38516:(e,t,n)=>{n.d(t,{D:()=>a});var r=n(92379);function a(e){const t=(0,r.useRef)(void 0);return(0,r.useEffect)((()=>{t.current=e}),[e]),t.current}},32704:(e,t,n)=>{var r,a,i;n.d(t,{BT:()=>r,K0:()=>a,PU:()=>i}),function(e){e.Rewrite="rewrite",e.Ideate="ideate"}(r||(r={})),function(e){e.VbarCard="vbar_card",e.Assistant="assistant"}(a||(a={})),function(e){e.Final="final",e.Partial="partial"}(i||(i={}))},54221:(e,t,n)=>{var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,l="object"==typeof self&&self&&self.Object===Object&&self,d=c||l||Function("return this")(),u=Object.prototype.toString,g=Math.max,h=Math.min,p=function(){return d.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==u.call(e)}(e))return NaN;if(f(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=f(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||s.test(e)?o(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,i,s,o,c,l=0,d=!1,u=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function x(t){var n=r,i=a;return r=a=void 0,l=t,s=e.apply(i,n)}function b(e){return l=e,o=setTimeout(y,t),d?x(e):s}function C(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=i}function y(){var e=p();if(C(e))return k(e);o=setTimeout(y,function(e){var n=t-(e-c);return u?h(n,i-(e-l)):n}(e))}function k(e){return o=void 0,v&&r?x(e):(r=a=void 0,s)}function w(){var e=p(),n=C(e);if(r=arguments,a=this,c=e,n){if(void 0===o)return b(c);if(u)return o=setTimeout(y,t),x(c)}return void 0===o&&(o=setTimeout(y,t)),s}return t=m(t)||0,f(n)&&(d=!!n.leading,i=(u="maxWait"in n)?g(m(n.maxWait)||0,t):i,v="trailing"in n?!!n.trailing:v),w.cancel=function(){void 0!==o&&clearTimeout(o),l=0,r=c=a=o=void 0},w.flush=function(){return void 0===o?s:k(p())},w}},32959:(e,t,n)=>{var r=n(92379);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,s=r.useEffect,o=r.useLayoutEffect,c=r.useDebugValue;function l(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var d="undefined"==typeof self||void 0===self.document||void 0===self.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),a=r[0].inst,d=r[1];return o((function(){a.value=n,a.getSnapshot=t,l(a)&&d({inst:a})}),[e,n,t]),s((function(){return l(a)&&d({inst:a}),e((function(){l(a)&&d({inst:a})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},57807:(e,t,n)=>{var r=n(92379),a=n(43481);var i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,o=r.useRef,c=r.useEffect,l=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var u=o(null);if(null===u.current){var g={hasValue:!1,value:null};u.current=g}else g=u.current;u=l((function(){function e(e){if(!c){if(c=!0,s=e,e=r(e),void 0!==a&&g.hasValue){var t=g.value;if(a(t,e))return o=t}return o=e}if(t=o,i(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(s=e,t):(s=e,o=n)}var s,o,c=!1,l=void 0===n?null:n;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]}),[t,n,r,a]);var h=s(e,u[0],u[1]);return c((function(){g.hasValue=!0,g.value=h}),[h]),d(h),h}},43481:(e,t,n)=>{e.exports=n(32959)},82180:(e,t,n)=>{e.exports=n(57807)},4668:(e,t,n)=>{n.d(t,{Gi:()=>$e,B5:()=>Ee,Th:()=>zt,O6:()=>Bt,Me:()=>Tt,Ot:()=>Oe,zE:()=>Re,vr:()=>Te,qC:()=>ze,_M:()=>De,AA:()=>Pe,Z$:()=>Ne});var r=n(92054);if(6168==n.j)var a=n(11972);if(6168==n.j)var i=n(25453);var s=n(6824),o=n(59190),c=n(32704),l=n(24961),d=n(21622),u=n(36661),g=n(90023),h=ae((function(e){return(0,l.wf)(f(e),e.intersect(e.partial({additionalContext:b(e)}))(e.intersect(e.partial({conversation:k(e)}))(e.struct({entrypoint:w(e),scope:ee(e),args:e.readonly(e.record(z(e)))}))))(e)})),p=ae((function(e){return(0,l.wf)(v(e),e.intersect(e.partial({backendBlob:C(e)}))(e.struct({kind:q(e),actionId:x(e),extraProperties:e.readonly(e.record(z(e)))})))(e)})),f=ae((function(e){return(0,l.wf)(m(e),e.struct({}))(e)})),m=ae((function(e){return e.struct({id:e.number,correlationId:e.string,metadata:e.readonly(e.record(z(e)))})})),v=ae((function(e){return(0,l.wf)(m(e),e.struct({}))(e)})),x=(ae((function(e){return U(e)})),ae((function(e){return e.struct({id:e.string})}))),b=ae((function(e){return e.intersect(e.partial({backendBlob:C(e)}))(e.intersect(e.partial({activeEditorId:e.string}))(e.struct({extraProperties:e.readonly(e.record(z(e)))})))})),C=ae((function(e){return e.intersect(e.partial({id:e.string}))(e.struct({blob:e.string}))})),y=ae((function(e){return e.intersect(e.partial({showLabelNew:e.boolean}))(e.struct({title:e.string,iconUrl:e.string,actionUrl:e.string}))})),k=ae((function(e){return e.intersect(e.partial({title:e.string}))(e.struct({id:e.string}))})),w=ae((function(e){var t;return e.sum("family")(((t={}).ggo=S(e),t.g2=A(e),t.other=E(e),t))})),j=(0,l.Dd)(c.BT),S=ae((function(e){return e.struct({family:e.literal("ggo"),name:j(e)})})),I=(0,l.Dd)(c.K0),A=ae((function(e){return e.intersect(e.partial({request_tag:e.string}))(e.struct({family:e.literal("g2"),name:I(e)}))})),E=ae((function(e){return e.struct({family:e.literal("other"),name:e.string})})),_=ae((function(e){var t;return e.sum("kind")(((t={}).sensitivity=M(e),t.badRequest=R(e),t.serviceLimitExceeded=D(e),t.unsupportedLanguage=O(e),t.updateClient=T(e),t.backendError=L(e),t.other=P(e),t))})),M=ae((function(e){return e.struct({kind:e.literal("sensitivity")})})),R=ae((function(e){return e.struct({kind:e.literal("badRequest")})})),D=ae((function(e){return e.struct({kind:e.literal("serviceLimitExceeded")})})),O=ae((function(e){return e.struct({kind:e.literal("unsupportedLanguage")})})),T=ae((function(e){return e.struct({kind:e.literal("updateClient")})})),L=ae((function(e){return e.struct({kind:e.literal("backendError")})})),P=ae((function(e){return e.struct({kind:e.literal("other"),type:e.string})})),N=ae((function(e){var t;return e.sum("kind")(((t={}).plain=B(e),t.gzip=F(e),t))})),B=ae((function(e){return e.struct({kind:e.literal("plain")})})),F=ae((function(e){return e.struct({kind:e.literal("gzip")})})),z=ae((function(e){return e.intersect(e.partial({encoding:N(e)}))(e.struct({json:e.string}))})),U=ae((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=H(e),t["text_actions:commandResult"]=W(e),t["text_actions:invokeRewrite"]=$(e),t["text_actions:rewriteResult"]=G(e),t["text_actions:error"]=V(e),t))})),H=ae((function(e){return(0,l.wf)(h(e),m(e),e.struct({action:e.literal("text_actions:invokeCommand"),actionId:x(e)}))(e)})),W=ae((function(e){return(0,l.wf)(p(e),m(e),e.struct({action:e.literal("text_actions:commandResult")}))(e)})),$=ae((function(e){return(0,l.wf)(h(e),m(e),e.struct({action:e.literal("text_actions:invokeRewrite"),kind:K(e)}))(e)})),G=ae((function(e){return(0,l.wf)(p(e),m(e),e.intersect(e.partial({callToAction:y(e)}))(e.struct({action:e.literal("text_actions:rewriteResult"),rewrite:e.sensitiveString,explanation:e.string})))(e)})),V=ae((function(e){return(0,l.wf)(m(e),v(e),e.intersect(e.partial({usageLimits:re(e)}))(e.struct({action:e.literal("text_actions:error"),errorType:_(e),title:e.string,details:e.string,extraProperties:e.readonly(e.record(z(e)))})))(e)})),Z=ae((function(e){return e.struct({start:e.number,end:e.number})})),q=(0,l.Dd)(c.PU),K=ae((function(e){var t;return e.sum("kind")(((t={}).default=J(e),t.rephrase=X(e),t.userPrompt=Y(e),t.other=Q(e),t))})),J=ae((function(e){return e.struct({kind:e.literal("default")})})),X=ae((function(e){return e.struct({kind:e.literal("rephrase")})})),Y=ae((function(e){return e.struct({kind:e.literal("userPrompt"),prompt:e.sensitiveString})})),Q=ae((function(e){return e.struct({kind:e.literal("other"),actionId:x(e)})})),ee=ae((function(e){var t;return e.sum("kind")(((t={}).sessionText=te(e),t.otherText=ne(e),t))})),te=ae((function(e){return e.intersect(e.partial({range:Z(e)}))(e.struct({kind:e.literal("sessionText"),rev:e.number}))})),ne=ae((function(e){return e.intersect(e.partial({range:Z(e)}))(e.struct({kind:e.literal("otherText"),text:e.sensitiveString}))})),re=ae((function(e){return e.struct({remaining:e.number,limit:e.number,refillDate:e.string})}));ae((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=H(e),t["text_actions:invokeRewrite"]=$(e),t))})),ae((function(e){var t;return e.sum("action")(((t={})["text_actions:commandResult"]=W(e),t["text_actions:rewriteResult"]=G(e),t))})),ae((function(e){var t;return e.sum("action")(((t={})["text_actions:invokeCommand"]=H(e),t["text_actions:commandResult"]=W(e),t["text_actions:invokeRewrite"]=$(e),t["text_actions:rewriteResult"]=G(e),t["text_actions:error"]=V(e),t))})),ae((function(e){var t;return e.sum("action")(((t={})["text_actions:error"]=V(e),t))}));function ae(e){return d.H(e)}var ie=(0,g.MZ)(u.n);function se(e){return function(t){return(0,o.pi)((0,o.pi)({},e),t)}}if(6168==n.j)var oe=n(28338);var ce,le,de,ue,ge,he,pe,fe,me,ve,xe,be,Ce=n(11633),ye=n(64443),ke=e=>{throw TypeError(e)},we=(e,t,n)=>t.has(e)||ke("Cannot "+n),je=(e,t,n)=>(we(e,t,"read from private field"),n?n.call(e):t.get(e)),Se=(e,t,n)=>t.has(e)?ke("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Ie=(e,t,n,r)=>(we(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),Ae=(e,t,n)=>(we(e,t,"access private method"),n),Ee=(e=>(e.AiEditorOutput="ai_editor_output",e.PromptOutput="prompt_output",e.Other="other",e))(Ee||{});function _e(e,t){return{kind:"nonSessionText",referenceContent:e,selectedRange:null==t?void 0:t.range}}function Me(e){return{kind:"sessionText",selection:e}}function Re(e){return"string"==typeof e}function De(e){return"object"==typeof e&&null!==e&&"selectedText"in e&&"range"in e}function Oe(e){return"object"==typeof e&&null!==e&&"kind"in e&&"default"===e.kind}function Te(e){return"object"==typeof e&&null!==e&&"kind"in e&&"integratedDoc"===e.kind}function Le(e){return Re(e)||De(e)}function Pe(e,t){return!(!e||!t)&&(Oe(e)&&Oe(t)&&e.id===t.id||Le(e)&&Le(t)&&e===t)}function Ne(e){return"user"===e.type}function Be(e,t){return{id:e,type:"assistant",kind:"thinking",content:"",previousMessageId:t}}function Fe(e,t){const n=t?function(e){return Re(e)?{selectedText:e,textScope:_e(e)}:De(e)?{selectedText:e.selectedText,textScope:Me(e)}:{}}(t):{};return{...e,...n}}function ze(e){return"assistant"===(null==e?void 0:e.type)&&("final"!==e.kind&&!e.stopped)}function Ue(e,t,n,a){const i=e.slice();if(function(e){const t=e[e.length-1];return"error"===(null==t?void 0:t.type)}(i)&&i.pop(),null!==t){const e=function(e,t,n){return{id:(0,r.Z)(),type:"user",content:e,context:t,predefinedPromptKind:n}}(t,n,a),s=function(e){return Be(`${e}-response`,e)}(e.id);return[...i,e,s]}const s=Be(`system-${(0,r.Z)()}-response`);return[...i,s]}class He{constructor(e){Se(this,ce),Se(this,le,{}),Se(this,de,{}),Ie(this,ce,e)}async initialize(){const e=await je(this,ce).getAll();Ie(this,le,e.reduce(((e,t)=>(e[t.id]={messages:[],metadata:t},e)),{}))}doesChatExist(e){return void 0!==je(this,le)[e]}getAllChatsMetadata(){return Object.entries(je(this,le)).reduce(((e,[t,n])=>(e[t]=n.metadata,e)),{})}getChatMetadata(e){if(this.doesChatExist(e))return je(this,le)[e].metadata}async getChatMessages(e){if(!this.doesChatExist(e))return[];if(je(this,de)[e])return je(this,le)[e].messages;const t=await je(this,ce).getById(e),n=(null==t?void 0:t.messages)??[],r=n.map((e=>ze(e)?{...e,stopped:"unknown"}:e));return je(this,le)[e].messages=r,je(this,de)[e]=!0,je(this,le)[e].messages}createChat(e){return e||(e=this.createDraft()),je(this,le)[e.metadata.id]=e,je(this,de)[e.metadata.id]=!0,je(this,ce).add({...e.metadata,messages:e.messages}),{id:e.metadata.id,metadata:e.metadata}}deleteChat(e){return!!this.doesChatExist(e)&&(delete je(this,le)[e],je(this,ce).delete(e),!0)}updateMetadata(e,t){if(this.doesChatExist(e))return je(this,ce).update(e,{...t}),je(this,le)[e].metadata={...je(this,le)[e].metadata,...t},je(this,le)[e].metadata}updateMessages(e,t){if(this.doesChatExist(e))return je(this,le)[e].messages=t,je(this,ce).update(e,{messages:t}),je(this,le)[e].messages}createDraft(){return{messages:[],metadata:{id:(0,r.Z)(),name:"New Chat",createdTime:new Date,lastUpdatedTime:new Date}}}}ce=new WeakMap,le=new WeakMap,de=new WeakMap;class We{constructor(){Se(this,ue,{})}static getMessageWithStreamedResponse(e,t){return{...e,id:t.id,previousMessageId:t.previousMessageId}}static getUpdatedMetadata(e,t){if("assistant"===e.type&&e.chatName)return t?void 0:{name:e.chatName}}add(e,t){je(this,ue)[e]={stopGenerating:t}}stop(e){const t=je(this,ue)[e];t&&(t.stopGenerating(),delete je(this,ue)[e])}static getMessagesOnStreamingStopped(e){const t=e[e.length-1];return ze(t)?e.slice(0,-1).concat({...t,stopped:"byUser"}):e}static getMessagesWithUpdate(e,t){return t.map((t=>t.id===e.id?e:t))}static getMessagesWithDebugInfo(e,t,n){return n.map((n=>n.id===e?{...n,debugInfo:t}:n))}}ue=new WeakMap;class $e{constructor(e){Se(this,ge),this.streamingResponse=new We,this.updates=new a.v,this.chatIOProvider=e.chatIO,this.store=new He(e.chatStorage)}async initialize(){await this.store.initialize()}async getAllChatsMetadata(){return this.store.getAllChatsMetadata()}async getChatMessages(e){return this.store.getChatMessages(e)}doesChatExist(e){return this.store.doesChatExist(e)}createDraft(){const e=this.store.createDraft();return this.updates.emit("draftCreated",{id:e.metadata.id,metadata:e.metadata}),e}createChat(e){const{id:t,metadata:n}=this.store.createChat(e);return this.chatIOProvider.reset(),this.updates.emit("chatCreated",{id:t,metadata:n}),t}deleteChat(e){this.store.deleteChat(e)&&this.updates.emit("chatDeleted",{id:e})}updateChatMetadata(e,t){const n=this.store.updateMetadata(e,t);n&&this.updates.emit("chatMetadataUpdated",{id:e,metadata:n})}async sendMessage(e,t,n={},r){if(!this.store.doesChatExist(e))return;const a=await this.getChatMessages(e);return null===t?Ae(this,ge,fe).call(this,e,a,n,r):Ae(this,ge,pe).call(this,e,t,a,n,r)}async stopStreamingResponse(e){if(!this.store.doesChatExist(e))return;this.streamingResponse.stop(e);const t=await this.store.getChatMessages(e);Ae(this,ge,he).call(this,e,We.getMessagesOnStreamingStopped(t)),this.updates.emit("streamingResponseStopped",{id:e})}async retryMessage(e){if(!this.store.doesChatExist(e))return;const t=function(e,t){let n=e.pop();for(;n&&"user"!==n.type;)n=e.pop();if("user"===(null==n?void 0:n.type))return{messages:e,userMessage:n}}(await this.store.getChatMessages(e));if(!t)return;const{messages:n,userMessage:r}=t;this.store.updateMessages(e,n),this.sendMessage(e,r.content,{contextId:void 0},r.context)}}function Ge(e){return"string"==typeof e}function Ve(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}function Ze(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function qe(e){return Array.isArray(e)}ge=new WeakSet,he=function(e,t){this.store.updateMessages(e,t),this.updates.emit("chatMessagesUpdated",{id:e,messages:t})},pe=function(e,t,n,r={},a){const{responseMessageId:i,messageOptions:s}=Ae(this,ge,me).call(this,e,t,n,r,a);this.updates.emit("userMessageSent",{id:e,responseMessageId:i,content:t,messageOptions:s,messageCountBeforeSend:n.length})},fe=function(e,t,n={},r){const{responseMessageId:a,messageOptions:i}=Ae(this,ge,me).call(this,e,null,t,n,r);this.updates.emit("systemMessageSent",{id:e,responseMessageId:a,messageOptions:i,messageCountBeforeSend:t.length})},me=function(e,t,n,r={},a){const{predefinedPromptKind:i,systemMessageKind:s,contextId:o,scopedThirdPartyAgentIds:c,targetLanguage:l}=r,d=Ue(n,t,a,i);Ae(this,ge,he).call(this,e,d);const u=d.length>1?d[d.length-2].id:void 0,g=d[d.length-1].id,h=function(e,t){const n=e.findLast((e=>"assistant"===e.type&&"final"===e.kind));return n&&n.blob,null==n?void 0:n.blob}(d),p=Fe({scopedThirdPartyAgentIds:c,backendBlob:h,predefinedPromptKind:i,systemMessageKind:s,messageId:g,chatId:e,contextId:o,...void 0!==l&&{targetLanguage:l}},a),f=Ae(this,ge,xe).call(this,e,g),m=Ae(this,ge,be).call(this,e,t??"",f,p);return void 0!==u&&void 0!==m&&Ae(this,ge,ve).call(this,m,e,u),{responseMessageId:g,messageOptions:p}},ve=async function(e,t,n){const r=await e;if(void 0===r)return;const a=await this.store.getChatMessages(t),i=We.getMessagesWithDebugInfo(n,r,a);Ae(this,ge,he).call(this,t,i)},xe=function(e,t){return async n=>{if(!this.store.doesChatExist(e))return;const r=(await this.store.getChatMessages(e)).find((e=>e.id===t));if(!r)return;const a=We.getMessageWithStreamedResponse(n,r),i=this.store.getChatMetadata(e),s=We.getUpdatedMetadata(n,null==i?void 0:i.userEditedTitle);if(a){this.updates.emit("chatMessageStreamed",{id:e,message:a,previousVersion:r});const t=await this.store.getChatMessages(e),n=We.getMessagesWithUpdate(a,t);Ae(this,ge,he).call(this,e,n)}s&&this.updateChatMetadata(e,s)}},be=function(e,t,n,r){const a=this.chatIOProvider.sendMessage(t,n,r);return this.streamingResponse.add(e,a),a.debug};const Ke=Ce.dt({start:Ce.pk,end:Ce.pk}),Je=Ce.jV([Ce.dt({location:Ce.Z_,original:Ce.Z_,updated:Ce.Z_}),Ce.r$({reason:Ce.Z_})]),Xe=Ce.r$({original:Ce.Z_,updated:Ce.Z_,reason:Ce.Z_,validated:Ce.O7,edit_span:Ke,raw_edit_proposal:Je}),Ye=Ce.dt({type:Ce.i0("ai_message"),id:Ce.Z_,content:Ce.Z_}),Qe=Ce.dt({type:Ce.i0("proposed_edits"),id:Ce.Z_,edits:Ce.IX(Xe)}),et=Ce.dt({type:Ce.i0("reading_document"),id:Ce.Z_}),tt=Ce.dt({type:Ce.i0("generic_tool_call"),id:Ce.Z_,content:Ce.Z_,sticky:Ce.O7}),nt=Ce.dt({type:Ce.i0("error"),id:Ce.Z_,message:Ce.Z_}),rt=Ce.jV([Ce.dt({type:Ce.i0("generated_text"),id:Ce.Z_,content:Ce.Z_}),Ce.r$({title:Ce.Z_,content_type:Ce.Z_,format:Ce.Z_})]),at=Ce.G0([Ce.i0("chatAgent"),Ce.i0("improve"),Ce.i0("proofreaderAgent"),Ce.i0("plagiarismAgent"),Ce.i0("aiDetectorAgent"),Ce.i0("aiGraderAgent"),Ce.i0("citationFinderAgent"),Ce.i0("expertPanelAgent"),Ce.i0("humanizerAgent"),Ce.i0("readerReactionAgent")]),it=Ce.G0([Ce.i0("onboarding:welcome"),Ce.i0("onboarding:start"),Ce.i0("onboarding:next"),Ce.i0("onboarding:exit")]),st=Ce.jV([Ce.dt({kind:Ce.i0("chatMessage"),label:Ce.Z_,message:Ce.Z_}),Ce.r$({isRecommended:Ce.O7,icon:at,systemMessageKind:it})]),ot=Ce.dt({kind:Ce.i0("OpenAgent"),agentId:Ce.Z_}),ct=Ce.jV([Ce.dt({kind:Ce.i0("assistantCommand"),label:Ce.Z_,command:ot}),Ce.r$({isRecommended:Ce.O7,icon:at})]),lt=Ce.G0([st,ct]),dt=Ce.jV([Ce.dt({type:Ce.i0("quick_actions"),id:Ce.Z_,actions:Ce.IX(lt)}),Ce.r$({title:Ce.Z_})]),ut=Ce.dt({type:Ce.i0("insert_text"),id:Ce.Z_,insert_offset:Ce.pk,text:Ce.Z_}),gt=Ce.dt({type:Ce.i0("widget"),id:Ce.Z_,widget_type:Ce.Z_}),ht=Ce.G0([Ye,nt,rt,tt,ut,Qe,dt,et,gt]),pt=Ce.dt({id:Ce.Z_,name:Ce.Z_,args:Ce.mI});Ce.jV([Ce.dt({items:Ce.IX(ht)}),Ce.r$({clientToolCalls:Ce.IX(pt)})]);const ft=Ce.dt({pname:Ce.Z_,original_paragraph:Ce.Z_,begin:Ce.pk,end:Ce.pk,rewrite:Ce.Z_,explanation:Ce.Z_,contentId:Ce.Z_});let mt;function vt(){return mt||(mt=ye.C8.Logging.getLogger("assistant.chat")),mt}function xt(e){return e.filter((e=>{const t=ht.is(e);if(!t)if(e&&"object"==typeof e){const{type:t,kind:n}=e;vt().warn(`Invalid AiEditor output item. type=${t}, kind=${n}`)}else vt().warn("Invalid AiEditor output item. Not an object.");return t}))}function bt(e){return e.filter((e=>{const t=pt.is(e);return t||vt().warn("Invalid AiEditor client tool call item. Not an object."),t}))}function Ct(e,t=0){return At(e,["responseText",t].filter(Boolean).join(""),"",Ge)}function yt(e){return At(e,"historyTitle",void 0,Ge)}function kt(e){return At(e,"planning",[],(e=>qe(e)&&e.every((e=>Ze(e)&&"title"in e))))}function wt(e){return At(e,"currentSessionRewrites",[],(e=>qe(e)&&e.every((e=>Ze(e)&&"explanation"in e))))}function jt(e){return At(e,"sources",void 0,(e=>qe(e)&&e.every((e=>Ze(e)&&"url"in e&&"title"in e&&"recordId"in e&&"searchRequestId"in e))))}function St(e){return At(e,"kind",Ee.Other,function(e){return t=>"string"==typeof t&&Object.values(e).includes(t)}(Ee))}function It(e){return function(e){if(!qe(e))return[];const t=e.filter(ft.is);if(t.length!==e.length){const n=e.length-t.length,r=e.length;vt().warn(`Invalid AiEditor alerts structure: validation failed for ${n} items out of ${r}`)}return t}(At(e,"alerts",[],qe))}function At(e,t,n,r){const a=e[t];if(!a)return n;try{const e=a.json,i=JSON.parse(e);return r&&!r(i)?(vt().warn(`Parsed value for ${t} does not match expected type`),n):i}catch{return vt().warn(`Failed to parse ${t}`),n}}const Et=e=>{const t=function(e){return At(e,"ideation_approaches",[],Ve)}(e);if(t.length>0){const n=t.map(((t,n)=>({title:t,content:Ct(e,n)})));return{responseFormat:Ee.PromptOutput,variations:n,content:n[0].content}}const n=function(e){return At(e,"tabResponses",[],(e=>qe(e)&&e.every((e=>Ze(e)&&"title"in e&&"mainContent"in e))))}(e);if(n.length>0){const e=n.map((e=>({title:e.title,content:e.mainContent})));return{responseFormat:Ee.PromptOutput,content:e[0].content,variations:e}}const r=Ct(e);return{responseFormat:Ee.PromptOutput,content:r}};function _t(e){const{items:t,clientToolCalls:n}=function(e){const{items:t,clientToolCalls:n}=At(e,"output",{},Ze);return{items:qe(t)?xt(t):[],clientToolCalls:qe(n)?bt(n):[]}}(e);return{responseFormat:Ee.AiEditorOutput,items:t,clientToolCalls:n,alerts:It(e),content:""}}function Mt(e){return{chatName:yt(e)}}function Rt(e){return{sources:jt(e)}}function Dt(e){return{planning:kt(e)}}function Ot(e){return{currentSessionRewrites:wt(e)}}function Tt(e){try{return"```json\n"+JSON.stringify(e,null,2)+"\n```"}catch(e){return`# Failed to serialize message: ${e}`}}const Lt=ie(se(s.Schemable)({sensitiveString:s.string}))(V).is,Pt=ie(se(s.Schemable)({sensitiveString:s.string}))(W).is;function Nt(e){var t;switch(e.kind){case c.PU.Partial:return{kind:c.PU.Partial};case c.PU.Final:return{kind:c.PU.Final,blob:(null==(t=e.backendBlob)?void 0:t.blob)||""};default:(0,oe.vE)(e)}}const Bt=(e,t)=>({...e,debugInfo:{networkMessage:Tt(t)}});function Ft(e){return St(e.extraProperties)===Ee.AiEditorOutput?_t(e.extraProperties):Et(e.extraProperties)}function zt({correlationId:e,onResponse:t,onResponseComplete:n,middleware:r=[]}){return a=>{if(!Pt(a)&&!Lt(a))return i._.Result.CONTINUE_HANDLING;if(a.correlationId!==e)return i._.Result.CONTINUE_HANDLING;const s=Lt(a)?function(e){return{type:"error",title:e.title,content:e.details,errorType:e.errorType.kind,debugInfo:{networkMessage:Tt(e)}}}(a):function(e,t){let n={type:"assistant",...Nt(e),...Ft(e),...Mt(e.extraProperties),...Rt(e.extraProperties),...Dt(e.extraProperties),...Ot(e.extraProperties)};for(const r of t)n=r(n,e);return n}(a,r);return t(s),(Lt(a)||a.kind===c.PU.Final)&&(null==n||n()),i._.Result.STOP_HANDLING}}},68861:(e,t,n)=>{n.d(t,{ID:()=>j,cB:()=>k});var r,a,i,s,o,c,l,d=Object.defineProperty,u=e=>{throw TypeError(e)},g=(e,t,n)=>((e,t,n)=>t in e?d(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),h=(e,t,n)=>t.has(e)||u("Cannot "+n),p=(e,t,n)=>(h(e,t,"read from private field"),n?n.call(e):t.get(e)),f=(e,t,n)=>t.has(e)?u("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),m=(e,t,n,r)=>(h(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),v=(e,t,n)=>(h(e,t,"access private method"),n);class x{constructor(){g(this,"listeners",new Map)}on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{const n=this.listeners.get(e);null==n||n.delete(t)}}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of n)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}class b{constructor(e){f(this,s),f(this,r,new x),f(this,a),f(this,i,[]),m(this,a,e),v(this,s,o).call(this)}on(e,t){return p(this,r).on(e,t)}getAppContext(e){return v(this,s,c).call(this,e)}getInitialContextId(){return p(this,a).getInitialContextId()}dispose(){for(const e of p(this,i))e.dispose();p(this,i).length=0}}r=new WeakMap,a=new WeakMap,i=new WeakMap,s=new WeakSet,o=function(){p(this,i).push(p(this,a).on("available",(e=>{p(this,r).emit("contextAvailable",e)}))),p(this,i).push(p(this,a).on("invalidated",(e=>{p(this,r).emit("contextInvalidated",e)}))),p(this,i).push(p(this,a).on("selectionChange",(e=>{p(this,r).emit("selectionChange",e)})))},c=function(e){p(this,r).emit("contextExtractionStart",e);try{const t=p(this,a).getContext(e);return p(this,r).emit("contextExtractionSuccess",{context:t}),t}catch(e){throw p(this,r).emit("contextExtractionError",{error:e}),e}};class C{constructor(e){f(this,l),m(this,l,e)}get state(){return p(this,l).state}async write(e,t){if(!p(this,l).state.isAvailable)throw new Error("Writable context is not available");p(this,l).write(e,t)}on(e,t){return p(this,l).on(e,t)}}l=new WeakMap;class y{constructor(){this.on=()=>({dispose:()=>{}}),this.write=async()=>{throw new Error("Cannot write into disabled writable context")}}get state(){return{isAvailable:!1}}}class k{constructor(e){this.appContext=new b(e.appContextExtractionProvider),this.documentContext=e.documentContextProvider?new C(e.documentContextProvider):new y}}function w(e){return"string"==typeof e}function j(e){return w(e)?0===e.length:0===e.selectedText.length}},78949:(e,t,n)=>{n.d(t,{pd:()=>ui,uk:()=>gi,i7:()=>cd,IQ:()=>di,w9:()=>Bl,FP:()=>li,wc:()=>Qi,xg:()=>Wu,aM:()=>$u,ZY:()=>Hu,f$:()=>hd,ht:()=>Tc,Op:()=>oi,so:()=>ci,Ie:()=>Jl,D_:()=>yc,GP:()=>bc,eB:()=>Si,Tm:()=>Ii,ar:()=>mi,bF:()=>vi,AX:()=>yi,Ox:()=>Zu,RJ:()=>ji,fK:()=>_o,ej:()=>Ao,Sh:()=>ld,rD:()=>hg,zI:()=>Ku,wz:()=>og,i5:()=>qu,hA:()=>cg});var r=n(28338),a=n(11972),i=n(651),s=n(92379);if(6168==n.j)var o=n(54295);if(6168==n.j)var c=n(88035);if(6168==n.j)var l=n(60132);if(6168==n.j)var d=n(15411);if(6168==n.j)var u=n(18956);if(6168==n.j)var g=n(75362);if(6168==n.j)var h=n(2651);var p=n(74881),f=n(37710),m=n(88915),v=n(90898),x=n(90371),b=n(11087),C=n(60454),y=n(47095),k=n(77382),w=n(71784),j=n(30515);if(6168==n.j)var S=n(61230);if(6168==n.j)var I=n(82494);if(6168==n.j)var A=n(99807);if(6168==n.j)var E=n(692);if(6168==n.j)var _=n(91259);if(6168==n.j)var M=n(13446);if(6168==n.j)var R=n(79223);if(6168==n.j)var D=n(93607);if(6168==n.j)var O=n(72936);if(6168==n.j)var T=n(89923);if(6168==n.j)var L=n(99589);if(6168==n.j)var P=n(39981);if(6168==n.j)var N=n(69237);var B=n(95295);const F="undefined"!=typeof self&&void 0!==self.document&&void 0!==self.document.createElement;function z(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function U(e){return"nodeType"in e}function H(e){var t,n;return e?z(e)?e:U(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:self:self}function W(e){const{Document:t}=H(e);return e instanceof t}function $(e){return!z(e)&&e instanceof H(e).HTMLElement}function G(e){return e instanceof H(e).SVGElement}function V(e){return e?z(e)?e.document:U(e)?W(e)?e:$(e)||G(e)?e.ownerDocument:document:document:document}const Z=6168==n.j?F?s.useLayoutEffect:s.useEffect:null;function q(e){const t=(0,s.useRef)(e);return Z((()=>{t.current=e})),(0,s.useCallback)((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)}),[])}function K(e,t){void 0===t&&(t=[e]);const n=(0,s.useRef)(e);return Z((()=>{n.current!==e&&(n.current=e)}),t),n}function J(e,t){const n=(0,s.useRef)();return(0,s.useMemo)((()=>{const t=e(n.current);return n.current=t,t}),[...t])}function X(e){const t=q(e),n=(0,s.useRef)(null),r=(0,s.useCallback)((e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e}),[]);return[n,r]}function Y(e){const t=(0,s.useRef)();return(0,s.useEffect)((()=>{t.current=e}),[e]),t.current}let Q={};function ee(e,t){return(0,s.useMemo)((()=>{if(t)return t;const n=null==Q[e]?0:Q[e]+1;return Q[e]=n,e+"-"+n}),[e,t])}function te(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce(((t,n)=>{const r=Object.entries(n);for(const[n,a]of r){const r=t[n];null!=r&&(t[n]=r+e*a)}return t}),{...t})}}const ne=te(1),re=te(-1);function ae(e){if(!e)return!1;const{KeyboardEvent:t}=H(e.target);return t&&e instanceof t}function ie(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=H(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const se=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[se.Translate.toString(e),se.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),oe="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ce(e){return e.matches(oe)?e:e.querySelector(oe)}const le={display:"none"};function de(e){let{id:t,value:n}=e;return s.createElement("div",{id:t,style:le},n)}function ue(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return s.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const ge=6168==n.j?(0,s.createContext)(null):null;const he={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},pe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function fe(e){let{announcements:t=pe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=he}=e;const{announce:i,announcement:o}=function(){const[e,t]=(0,s.useState)("");return{announce:(0,s.useCallback)((e=>{null!=e&&t(e)}),[]),announcement:e}}(),c=ee("DndLiveRegion"),[l,d]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{d(!0)}),[]),function(e){const t=(0,s.useContext)(ge);(0,s.useEffect)((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}((0,s.useMemo)((()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}})),[i,t])),!l)return null;const u=s.createElement(s.Fragment,null,s.createElement(de,{id:r,value:a.draggable}),s.createElement(ue,{id:c,announcement:o}));return n?(0,B.createPortal)(u,n):u}var me;function ve(){}function xe(e,t){return(0,s.useMemo)((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(me||(me={}));const be=Object.freeze({x:0,y:0});function Ce(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ye(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function ke(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function we(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function je(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function Se(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const Ie=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=Se(t,t.left,t.top),i=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=Ce(Se(r),a);i.push({id:t,data:{droppableContainer:e,value:n}})}}return i.sort(ye)};function Ae(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const n=t.width*t.height,r=e.width*e.height,a=s*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const Ee=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const e of r){const{id:r}=e,i=n.get(r);if(i){const n=Ae(i,t);n>0&&a.push({id:r,data:{droppableContainer:e,value:n}})}}return a.sort(ke)};function _e(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:be}const Me=6168==n.j?(Re=1,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(((e,t)=>({...e,top:e.top+Re*t.y,bottom:e.bottom+Re*t.y,left:e.left+Re*t.x,right:e.right+Re*t.x})),{...e})}):null;var Re;function De(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Oe={ignoreTransform:!1};function Te(e,t){void 0===t&&(t=Oe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=H(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=De(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,c=e.left-s-(1-a)*parseFloat(n),l=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,u=i?e.height/i:e.height;return{width:d,height:u,top:l,right:c+d,bottom:l+u,left:c}}(n,t,r))}const{top:r,left:a,width:i,height:s,bottom:o,right:c}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:c}}function Le(e){return Te(e,{ignoreTransform:!0})}function Pe(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(W(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!$(a)||G(a))return n;if(n.includes(a))return n;const i=H(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=H(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const r=t[e];return"string"==typeof r&&n.test(r)}))}(a,i)&&n.push(a),function(e,t){return void 0===t&&(t=H(e).getComputedStyle(e)),"fixed"===t.position}(a,i)?n:r(a.parentNode)}(e):n}function Ne(e){const[t]=Pe(e,1);return null!=t?t:null}function Be(e){return F&&e?z(e)?e:U(e)?W(e)||e===V(e).scrollingElement?self:$(e)?e:null:null:null}function Fe(e){return z(e)?e.scrollX:e.scrollLeft}function ze(e){return z(e)?e.scrollY:e.scrollTop}function Ue(e){return{x:Fe(e),y:ze(e)}}var He;function We(e){return!(!F||!e)&&e===document.scrollingElement}function $e(e){const t={x:0,y:0},n=We(e)?{height:self.innerHeight,width:self.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(He||(He={}));const Ge={x:.2,y:.2};function Ve(e,t,n,r,a){let{top:i,left:s,right:o,bottom:c}=n;void 0===r&&(r=10),void 0===a&&(a=Ge);const{isTop:l,isBottom:d,isLeft:u,isRight:g}=$e(e),h={x:0,y:0},p={x:0,y:0},f=t.height*a.y,m=t.width*a.x;return!l&&i<=t.top+f?(h.y=He.Backward,p.y=r*Math.abs((t.top+f-i)/f)):!d&&c>=t.bottom-f&&(h.y=He.Forward,p.y=r*Math.abs((t.bottom-f-c)/f)),!g&&o>=t.right-m?(h.x=He.Forward,p.x=r*Math.abs((t.right-m-o)/m)):!u&&s<=t.left+m&&(h.x=He.Backward,p.x=r*Math.abs((t.left+m-s)/m)),{direction:h,speed:p}}function Ze(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=self;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function qe(e){return e.reduce(((e,t)=>ne(e,Ue(t))),be)}function Ke(e,t){if(void 0===t&&(t=Te),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);Ne(e)&&(a<=0||i<=0||n>=self.innerHeight||r>=self.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Je=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+Fe(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+ze(t)),0)}]];class Xe{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Pe(t),r=qe(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,a]of Je)for(const i of t)Object.defineProperty(this,i,{get:()=>{const t=a(n),s=r[e]-t;return this.rect[i]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ye{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Qe(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var et,tt;function nt(e){e.preventDefault()}function rt(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(et||(et={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(tt||(tt={}));const at={start:[tt.Space,tt.Enter],cancel:[tt.Esc],end:[tt.Space,tt.Enter,tt.Tab]},it=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case tt.Right:return{...n,x:n.x+25};case tt.Left:return{...n,x:n.x-25};case tt.Down:return{...n,y:n.y+25};case tt.Up:return{...n,y:n.y-25}}};class st{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Ye(V(t)),this.windowListeners=new Ye(H(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(et.Resize,this.handleCancel),this.windowListeners.add(et.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(et.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Ke(n),t(be)}handleKeyDown(e){if(ae(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=at,coordinateGetter:i=it,scrollBehavior:s="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:c}=n.current,l=c?{x:c.left,y:c.top}:be;this.referenceCoordinates||(this.referenceCoordinates=l);const d=i(e,{active:t,context:n.current,currentCoordinates:l});if(d){const t=re(d,l),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:i,isRight:o,isLeft:c,isBottom:l,maxScroll:u,minScroll:g}=$e(n),h=Ze(n),p={x:Math.min(a===tt.Right?h.right-h.width/2:h.right,Math.max(a===tt.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(a===tt.Down?h.bottom-h.height/2:h.bottom,Math.max(a===tt.Down?h.top:h.top+h.height/2,d.y))},f=a===tt.Right&&!o||a===tt.Left&&!c,m=a===tt.Down&&!l||a===tt.Up&&!i;if(f&&p.x!==d.x){const e=n.scrollLeft+t.x,i=a===tt.Right&&e<=u.x||a===tt.Left&&e>=g.x;if(i&&!t.y)return void n.scrollTo({left:e,behavior:s});r.x=i?n.scrollLeft-e:a===tt.Right?n.scrollLeft-u.x:n.scrollLeft-g.x,r.x&&n.scrollBy({left:-r.x,behavior:s});break}if(m&&p.y!==d.y){const e=n.scrollTop+t.y,i=a===tt.Down&&e<=u.y||a===tt.Up&&e>=g.y;if(i&&!t.x)return void n.scrollTo({top:e,behavior:s});r.y=i?n.scrollTop-e:a===tt.Down?n.scrollTop-u.y:n.scrollTop-g.y,r.y&&n.scrollBy({top:-r.y,behavior:s});break}}this.handleMove(e,ne(re(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function ot(e){return Boolean(e&&"distance"in e)}function ct(e){return Boolean(e&&"delay"in e)}st.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=at,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==a||a({event:e.nativeEvent}),!0)}return!1}}];class lt{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=H(e);return e instanceof t?e:V(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:i}=a;this.props=e,this.events=t,this.document=V(i),this.documentListeners=new Ye(this.document),this.listeners=new Ye(n),this.windowListeners=new Ye(H(i)),this.initialCoordinates=null!=(r=ie(a))?r:be,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(et.Resize,this.handleCancel),this.windowListeners.add(et.DragStart,nt),this.windowListeners.add(et.VisibilityChange,this.handleCancel),this.windowListeners.add(et.ContextMenu,nt),this.documentListeners.add(et.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ct(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(ot(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(et.Click,rt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(et.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:i,options:{activationConstraint:s}}=a;if(!r)return;const o=null!=(t=ie(e))?t:be,c=re(r,o);if(!n&&s){if(ot(s)){if(null!=s.tolerance&&Qe(c,s.tolerance))return this.handleCancel();if(Qe(c,s.distance))return this.handleStart()}return ct(s)&&Qe(c,s.tolerance)?this.handleCancel():void this.handlePending(s,c)}e.cancelable&&e.preventDefault(),i(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===tt.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const dt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ut extends lt{constructor(e){const{event:t}=e,n=V(t.target);super(e,dt,n)}}ut.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button)&&(null==r||r({event:n}),!0)}}];const gt={move:{name:"mousemove"},end:{name:"mouseup"}};var ht;!function(e){e[e.RightClick=2]="RightClick"}(ht||(ht={}));(class extends lt{constructor(e){super(e,gt,V(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==ht.RightClick&&(null==r||r({event:n}),!0)}}];const pt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var ft,mt;function vt(e){let{acceleration:t,activator:n=ft.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:c=mt.TreeOrder,pointerCoordinates:l,scrollableAncestors:d,scrollableAncestorRects:u,delta:g,threshold:h}=e;const p=function(e){let{delta:t,disabled:n}=e;const r=Y(t);return J((e=>{if(n||!r||!e)return xt;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[He.Backward]:e.x[He.Backward]||-1===a.x,[He.Forward]:e.x[He.Forward]||1===a.x},y:{[He.Backward]:e.y[He.Backward]||-1===a.y,[He.Forward]:e.y[He.Forward]||1===a.y}}}),[n,t,r])}({delta:g,disabled:!i}),[f,m]=function(){const e=(0,s.useRef)(null);return[(0,s.useCallback)(((t,n)=>{e.current=setInterval(t,n)}),[]),(0,s.useCallback)((()=>{null!==e.current&&(clearInterval(e.current),e.current=null)}),[])]}(),v=(0,s.useRef)({x:0,y:0}),x=(0,s.useRef)({x:0,y:0}),b=(0,s.useMemo)((()=>{switch(n){case ft.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ft.DraggableRect:return a}}),[n,a,l]),C=(0,s.useRef)(null),y=(0,s.useCallback)((()=>{const e=C.current;if(!e)return;const t=v.current.x*x.current.x,n=v.current.y*x.current.y;e.scrollBy(t,n)}),[]),k=(0,s.useMemo)((()=>c===mt.TreeOrder?[...d].reverse():d),[c,d]);(0,s.useEffect)((()=>{if(i&&d.length&&b){for(const e of k){if(!1===(null==r?void 0:r(e)))continue;const n=d.indexOf(e),a=u[n];if(!a)continue;const{direction:i,speed:s}=Ve(e,a,b,t,h);for(const e of["x","y"])p[e][i[e]]||(s[e]=0,i[e]=0);if(s.x>0||s.y>0)return m(),C.current=e,f(y,o),v.current=s,void(x.current=i)}v.current={x:0,y:0},x.current={x:0,y:0},m()}else m()}),[t,y,r,m,i,o,JSON.stringify(b),JSON.stringify(p),f,d,k,u,JSON.stringify(h)])}(class extends lt{constructor(e){super(e,pt)}static setup(){return self.addEventListener(pt.move.name,e,{capture:!1,passive:!1}),function(){self.removeEventListener(pt.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(ft||(ft={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(mt||(mt={}));const xt={x:{[He.Backward]:!1,[He.Forward]:!1},y:{[He.Backward]:!1,[He.Forward]:!1}};var bt,Ct;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(bt||(bt={})),function(e){e.Optimized="optimized"}(Ct||(Ct={}));const yt=new Map;function kt(e,t){return J((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function wt(e){let{callback:t,disabled:n}=e;const r=q(t),a=(0,s.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.ResizeObserver)return;const{ResizeObserver:e}=self;return new e(r)}),[n]);return(0,s.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}function jt(e){return new Xe(Te(e),e)}function St(e,t,n){void 0===t&&(t=jt);const[r,a]=(0,s.useState)(null);function i(){a((r=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=r?r:n)?a:null;const i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i}))}const o=function(e){let{callback:t,disabled:n}=e;const r=q(t),a=(0,s.useMemo)((()=>{if(n||"undefined"==typeof self||void 0===self.MutationObserver)return;const{MutationObserver:e}=self;return new e(r)}),[r,n]);return(0,s.useEffect)((()=>()=>null==a?void 0:a.disconnect()),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),c=wt({callback:i});return Z((()=>{i(),e?(null==c||c.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==c||c.disconnect(),null==o||o.disconnect())}),[e]),r}const It=6168==n.j?[]:null;function At(e,t){void 0===t&&(t=[]);const n=(0,s.useRef)(null);return(0,s.useEffect)((()=>{n.current=null}),t),(0,s.useEffect)((()=>{const t=e!==be;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?re(e,n.current):be}function Et(e){return(0,s.useMemo)((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const _t=6168==n.j?[]:null;function Mt(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return $(t)?t:e}const Rt=[{sensor:ut,options:{}},{sensor:st,options:{}}],Dt={current:{}},Ot={draggable:{measure:Le},droppable:{measure:Le,strategy:bt.WhileDragging,frequency:Ct.Optimized},dragOverlay:{measure:Te}};class Tt extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Lt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ve},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ot,measureDroppableContainers:ve,windowRect:null,measuringScheduled:!1},Pt={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ve,draggableNodes:new Map,over:null,measureDroppableContainers:ve},Nt=6168==n.j?(0,s.createContext)(Pt):null,Bt=6168==n.j?(0,s.createContext)(Lt):null;function Ft(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tt}}}function zt(e,t){switch(t.type){case me.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case me.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case me.DragEnd:case me.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case me.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new Tt(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case me.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Tt(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case me.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Tt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Ut(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=(0,s.useContext)(Nt),i=Y(r),o=Y(null==n?void 0:n.id);return(0,s.useEffect)((()=>{if(!t&&!r&&i&&null!=o){if(!ae(i))return;if(document.activeElement===i.target)return;const e=a.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=ce(e);if(t){t.focus();break}}}))}}),[r,t,a,o,i]),null}function Ht(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...r})),n):n}const Wt=(0,s.createContext)({...be,scaleX:1,scaleY:1});var $t;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}($t||($t={}));const Gt=6168==n.j?(0,s.memo)((function(e){var t,n,r,a;let{id:i,accessibility:o,autoScroll:c=!0,children:l,sensors:d=Rt,collisionDetection:u=Ee,measuring:g,modifiers:h,...p}=e;const f=(0,s.useReducer)(zt,void 0,Ft),[m,v]=f,[x,b]=function(){const[e]=(0,s.useState)((()=>new Set)),t=(0,s.useCallback)((t=>(e.add(t),()=>e.delete(t))),[e]);return[(0,s.useCallback)((t=>{let{type:n,event:r}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)}))}),[e]),t]}(),[C,y]=(0,s.useState)($t.Uninitialized),k=C===$t.Initialized,{draggable:{active:w,nodes:j,translate:S},droppable:{containers:I}}=m,A=null!=w?j.get(w):null,E=(0,s.useRef)({initial:null,translated:null}),_=(0,s.useMemo)((()=>{var e;return null!=w?{id:w,data:null!=(e=null==A?void 0:A.data)?e:Dt,rect:E}:null}),[w,A]),M=(0,s.useRef)(null),[R,D]=(0,s.useState)(null),[O,T]=(0,s.useState)(null),L=K(p,Object.values(p)),P=ee("DndDescribedBy",i),N=(0,s.useMemo)((()=>I.getEnabled()),[I]),z=(U=g,(0,s.useMemo)((()=>({draggable:{...Ot.draggable,...null==U?void 0:U.draggable},droppable:{...Ot.droppable,...null==U?void 0:U.droppable},dragOverlay:{...Ot.dragOverlay,...null==U?void 0:U.dragOverlay}})),[null==U?void 0:U.draggable,null==U?void 0:U.droppable,null==U?void 0:U.dragOverlay]));var U;const{droppableRects:W,measureDroppableContainers:G,measuringScheduled:V}=function(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=(0,s.useState)(null),{frequency:c,measure:l,strategy:d}=a,u=(0,s.useRef)(e),g=function(){switch(d){case bt.Always:return!1;case bt.BeforeDragging:return n;default:return!n}}(),h=K(g),p=(0,s.useCallback)((function(e){void 0===e&&(e=[]),h.current||o((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[h]),f=(0,s.useRef)(null),m=J((t=>{if(g&&!n)return yt;if(!t||t===yt||u.current!==e||null!=i){const t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new Xe(l(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t}),[e,i,n,g,l]);return(0,s.useEffect)((()=>{u.current=e}),[e]),(0,s.useEffect)((()=>{g||p()}),[n,g]),(0,s.useEffect)((()=>{i&&i.length>0&&o(null)}),[JSON.stringify(i)]),(0,s.useEffect)((()=>{g||"number"!=typeof c||null!==f.current||(f.current=setTimeout((()=>{p(),f.current=null}),c))}),[c,g,p,...r]),{droppableRects:m,measureDroppableContainers:p,measuringScheduled:null!=i}}(N,{dragging:k,dependencies:[S.x,S.y],config:z.droppable}),q=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return J((e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null}),[r,t])}(j,w),Y=(0,s.useMemo)((()=>O?ie(O):null),[O]),Q=function(){const e=!1===(null==R?void 0:R.autoScrollEnabled),t="object"==typeof c?!1===c.enabled:!1===c,n=k&&!e&&!t;if("object"==typeof c)return{...c,enabled:n};return{enabled:n}}(),te=function(e,t){return kt(e,t)}(q,z.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=(0,s.useRef)(!1),{x:o,y:c}="boolean"==typeof a?{x:a,y:a}:a;Z((()=>{if(!o&&!c||!t)return void(i.current=!1);if(i.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=_e(n(e),r);if(o||(a.x=0),c||(a.y=0),i.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=Ne(e);t&&t.scrollBy({top:a.y,left:a.x})}}),[t,o,c,r,n])}({activeNode:null!=w?j.get(w):null,config:Q.layoutShiftCompensation,initialRect:te,measure:z.draggable.measure});const re=St(q,z.draggable.measure,te),ae=St(q?q.parentElement:null),se=(0,s.useRef)({activatorEvent:null,active:null,activeNode:q,collisionRect:null,collisions:null,droppableRects:W,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),oe=I.getNodeFor(null==(t=se.current.over)?void 0:t.id),ce=function(e){let{measure:t}=e;const[n,r]=(0,s.useState)(null),a=(0,s.useCallback)((e=>{for(const{target:n}of e)if($(n)){r((e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r}));break}}),[t]),i=wt({callback:a}),o=(0,s.useCallback)((e=>{const n=Mt(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)}),[t,i]),[c,l]=X(o);return(0,s.useMemo)((()=>({nodeRef:c,rect:n,setRef:l})),[n,c,l])}({measure:z.dragOverlay.measure}),le=null!=(n=ce.nodeRef.current)?n:q,de=k?null!=(r=ce.rect)?r:re:null,ue=Boolean(ce.nodeRef.current&&ce.rect),he=_e(pe=ue?null:re,kt(pe));var pe;const ve=Et(le?H(le):null),xe=function(e){const t=(0,s.useRef)(e),n=J((n=>e?n&&n!==It&&e&&t.current&&e.parentNode===t.current.parentNode?n:Pe(e):It),[e]);return(0,s.useEffect)((()=>{t.current=e}),[e]),n}(k?null!=oe?oe:q:null),Ce=function(e,t){void 0===t&&(t=Te);const[n]=e,r=Et(n?H(n):null),[a,i]=(0,s.useState)(_t);function o(){i((()=>e.length?e.map((e=>We(e)?r:new Xe(t(e),e))):_t))}const c=wt({callback:o});return Z((()=>{null==c||c.disconnect(),o(),e.forEach((e=>null==c?void 0:c.observe(e)))}),[e]),a}(xe),ye=Ht(h,{transform:{x:S.x-he.x,y:S.y-he.y,scaleX:1,scaleY:1},activatorEvent:O,active:_,activeNodeRect:re,containerNodeRect:ae,draggingNodeRect:de,over:se.current.over,overlayNodeRect:ce.rect,scrollableAncestors:xe,scrollableAncestorRects:Ce,windowRect:ve}),ke=Y?ne(Y,S):null,we=function(e){const[t,n]=(0,s.useState)(null),r=(0,s.useRef)(e),a=(0,s.useCallback)((e=>{const t=Be(e.target);t&&n((e=>e?(e.set(t,Ue(t)),new Map(e)):null))}),[]);return(0,s.useEffect)((()=>{const t=r.current;if(e!==t){i(t);const s=e.map((e=>{const t=Be(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,Ue(t)]):null})).filter((e=>null!=e));n(s.length?new Map(s):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach((e=>{const t=Be(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),(0,s.useMemo)((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>ne(e,t)),be):qe(e):be),[e,t])}(xe),Se=At(we),Ie=At(we,[re]),Ae=ne(ye,Se),Re=de?Me(de,ye):null,De=_&&Re?u({active:_,collisionRect:Re,droppableRects:W,droppableContainers:N,pointerCoordinates:ke}):null,Oe=je(De,"id"),[Le,Fe]=(0,s.useState)(null),ze=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(ue?ye:ne(ye,Ie),null!=(a=null==Le?void 0:Le.rect)?a:null,re),He=(0,s.useRef)(null),$e=(0,s.useCallback)(((e,t)=>{let{sensor:n,options:r}=t;if(null==M.current)return;const a=j.get(M.current);if(!a)return;const i=e.nativeEvent,s=new n({active:M.current,activeNode:a,event:i,options:r,context:se,onAbort(e){if(!j.get(e))return;const{onDragAbort:t}=L.current,n={id:e};null==t||t(n),x({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!j.get(e))return;const{onDragPending:a}=L.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(i),x({type:"onDragPending",event:i})},onStart(e){const t=M.current;if(null==t)return;const n=j.get(t);if(!n)return;const{onDragStart:r}=L.current,a={activatorEvent:i,active:{id:t,data:n.data,rect:E}};(0,B.unstable_batchedUpdates)((()=>{null==r||r(a),y($t.Initializing),v({type:me.DragStart,initialCoordinates:e,active:t}),x({type:"onDragStart",event:a}),D(He.current),T(i)}))},onMove(e){v({type:me.DragMove,coordinates:e})},onEnd:o(me.DragEnd),onCancel:o(me.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=se.current;let s=null;if(t&&a){const{cancelDrop:o}=L.current;if(s={activatorEvent:i,active:t,collisions:n,delta:a,over:r},e===me.DragEnd&&"function"==typeof o){await Promise.resolve(o(s))&&(e=me.DragCancel)}}M.current=null,(0,B.unstable_batchedUpdates)((()=>{v({type:e}),y($t.Uninitialized),Fe(null),D(null),T(null),He.current=null;const t=e===me.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=L.current[t];null==e||e(s),x({type:t,event:s})}}))}}He.current=s}),[j]),Ge=(0,s.useCallback)(((e,t)=>(n,r)=>{const a=n.nativeEvent,i=j.get(r);if(null!==M.current||!i||a.dndKit||a.defaultPrevented)return;const s={active:i};!0===e(n,t.options,s)&&(a.dndKit={capturedBy:t.sensor},M.current=r,$e(n,t))}),[j,$e]),Ve=function(e,t){return(0,s.useMemo)((()=>e.reduce(((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,Ge);!function(e){(0,s.useEffect)((()=>{if(!F)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),Z((()=>{re&&C===$t.Initializing&&y($t.Initialized)}),[re,C]),(0,s.useEffect)((()=>{const{onDragMove:e}=L.current,{active:t,activatorEvent:n,collisions:r,over:a}=se.current;if(!t||!n)return;const i={active:t,activatorEvent:n,collisions:r,delta:{x:Ae.x,y:Ae.y},over:a};(0,B.unstable_batchedUpdates)((()=>{null==e||e(i),x({type:"onDragMove",event:i})}))}),[Ae.x,Ae.y]),(0,s.useEffect)((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=se.current;if(!e||null==M.current||!t||!a)return;const{onDragOver:i}=L.current,s=r.get(Oe),o=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,c={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:o};(0,B.unstable_batchedUpdates)((()=>{Fe(o),null==i||i(c),x({type:"onDragOver",event:c})}))}),[Oe]),Z((()=>{se.current={activatorEvent:O,active:_,activeNode:q,collisionRect:Re,collisions:De,droppableRects:W,draggableNodes:j,draggingNode:le,draggingNodeRect:de,droppableContainers:I,over:Le,scrollableAncestors:xe,scrollAdjustedTranslate:Ae},E.current={initial:de,translated:Re}}),[_,q,De,Re,j,le,de,W,I,Le,xe,Ae]),vt({...Q,delta:S,draggingRect:Re,pointerCoordinates:ke,scrollableAncestors:xe,scrollableAncestorRects:Ce});const Ze=(0,s.useMemo)((()=>({active:_,activeNode:q,activeNodeRect:re,activatorEvent:O,collisions:De,containerNodeRect:ae,dragOverlay:ce,draggableNodes:j,droppableContainers:I,droppableRects:W,over:Le,measureDroppableContainers:G,scrollableAncestors:xe,scrollableAncestorRects:Ce,measuringConfiguration:z,measuringScheduled:V,windowRect:ve})),[_,q,re,O,De,ae,ce,j,I,W,Le,G,xe,Ce,z,V,ve]),Ke=(0,s.useMemo)((()=>({activatorEvent:O,activators:Ve,active:_,activeNodeRect:re,ariaDescribedById:{draggable:P},dispatch:v,draggableNodes:j,over:Le,measureDroppableContainers:G})),[O,Ve,_,re,v,P,j,Le,G]);return s.createElement(ge.Provider,{value:b},s.createElement(Nt.Provider,{value:Ke},s.createElement(Bt.Provider,{value:Ze},s.createElement(Wt.Provider,{value:ze},l)),s.createElement(Ut,{disabled:!1===(null==o?void 0:o.restoreFocus)})),s.createElement(fe,{...o,hiddenTextDescribedById:P}))})):null,Vt=6168==n.j?(0,s.createContext)(null):null,Zt="button";function qt(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=ee("Draggable"),{activators:o,activatorEvent:c,active:l,activeNodeRect:d,ariaDescribedById:u,draggableNodes:g,over:h}=(0,s.useContext)(Nt),{role:p=Zt,roleDescription:f="draggable",tabIndex:m=0}=null!=a?a:{},v=(null==l?void 0:l.id)===t,x=(0,s.useContext)(v?Wt:Vt),[b,C]=X(),[y,k]=X(),w=function(e,t){return(0,s.useMemo)((()=>e.reduce(((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e}),{})),[e,t])}(o,t),j=K(n);Z((()=>(g.set(t,{id:t,key:i,node:b,activatorNode:y,data:j}),()=>{const e=g.get(t);e&&e.key===i&&g.delete(t)})),[g,t]);return{active:l,activatorEvent:c,activeNodeRect:d,attributes:(0,s.useMemo)((()=>({role:p,tabIndex:m,"aria-disabled":r,"aria-pressed":!(!v||p!==Zt)||void 0,"aria-roledescription":f,"aria-describedby":u.draggable})),[r,p,m,v,f,u.draggable]),isDragging:v,listeners:r?void 0:w,node:b,over:h,setNodeRef:C,setActivatorNodeRef:k,transform:x}}function Kt(){return(0,s.useContext)(Bt)}const Jt={timeout:25};function Xt(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const Yt=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return n&&t?Xt(r,n,t):r},Qt=e=>{let{transform:t}=e;return{...t,x:0}};function en(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function tn(e,t){return e.reduce(((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e}),Array(e.length))}function nn(e){return null!==e&&e>=0}const rn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=en(t,r,n),s=t[a],o=i[a];return o&&s?{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}:null},an={scaleX:1,scaleY:1},sn=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=null!=(t=i[n])?t:r;if(!o)return null;if(a===n){const e=i[s];return e?{x:0,y:n<s?e.top+e.height-(o.top+o.height):e.top-o.top,...an}:null}const c=function(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];if(!r)return 0;if(n<t)return a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0;return i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0}(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-c,...an}:a<n&&a>=s?{x:0,y:o.height+c,...an}:{x:0,y:0,...an}};const on="Sortable",cn=s.createContext({activeIndex:-1,containerId:on,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:rn,disabled:{draggable:!1,droppable:!1}});function ln(e){let{children:t,id:n,items:r,strategy:a=rn,disabled:i=!1}=e;const{active:o,dragOverlay:c,droppableRects:l,over:d,measureDroppableContainers:u}=Kt(),g=ee(on,n),h=Boolean(null!==c.rect),p=(0,s.useMemo)((()=>r.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[r]),f=null!=o,m=o?p.indexOf(o.id):-1,v=d?p.indexOf(d.id):-1,x=(0,s.useRef)(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,x.current),C=-1!==v&&-1===m||b,y=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(i);Z((()=>{b&&f&&u(p)}),[b,p,f,u]),(0,s.useEffect)((()=>{x.current=p}),[p]);const k=(0,s.useMemo)((()=>({activeIndex:m,containerId:g,disabled:y,disableTransforms:C,items:p,overIndex:v,useDragOverlay:h,sortedRects:tn(p,l),strategy:a})),[m,g,y.draggable,y.droppable,C,p,v,l,h,a]);return s.createElement(cn.Provider,{value:k},t)}const dn=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return en(n,r,a).indexOf(t)},un=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:c,transition:l}=e;return!(!l||!r)&&((o===i||a!==s)&&(!!n||s!==a&&t===c))},gn={duration:200,easing:"ease"},hn="transform",pn=se.Transition.toString({property:hn,duration:0,easing:"linear"}),fn={roleDescription:"sortable"};function mn(e){let{animateLayoutChanges:t=un,attributes:n,disabled:r,data:a,getNewIndex:i=dn,id:o,strategy:c,resizeObserverConfig:l,transition:d=gn}=e;const{items:u,containerId:g,activeIndex:h,disabled:p,disableTransforms:f,sortedRects:m,overIndex:v,useDragOverlay:x,strategy:b}=(0,s.useContext)(cn),C=function(e,t){var n,r;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,p),y=u.indexOf(o),k=(0,s.useMemo)((()=>({sortable:{containerId:g,index:y,items:u},...a})),[g,a,y,u]),w=(0,s.useMemo)((()=>u.slice(u.indexOf(o))),[u,o]),{rect:j,node:S,isOver:I,setNodeRef:A}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=ee("Droppable"),{active:o,dispatch:c,over:l,measureDroppableContainers:d}=(0,s.useContext)(Nt),u=(0,s.useRef)({disabled:n}),g=(0,s.useRef)(!1),h=(0,s.useRef)(null),p=(0,s.useRef)(null),{disabled:f,updateMeasurementsFor:m,timeout:v}={...Jt,...a},x=K(null!=m?m:r),b=wt({callback:(0,s.useCallback)((()=>{g.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{d(Array.isArray(x.current)?x.current:[x.current]),p.current=null}),v)):g.current=!0}),[v]),disabled:f||!o}),C=(0,s.useCallback)(((e,t)=>{b&&(t&&(b.unobserve(t),g.current=!1),e&&b.observe(e))}),[b]),[y,k]=X(C),w=K(t);return(0,s.useEffect)((()=>{b&&y.current&&(b.disconnect(),g.current=!1,b.observe(y.current))}),[y,b]),(0,s.useEffect)((()=>(c({type:me.RegisterDroppable,element:{id:r,key:i,disabled:n,node:y,rect:h,data:w}}),()=>c({type:me.UnregisterDroppable,key:i,id:r}))),[r]),(0,s.useEffect)((()=>{n!==u.current.disabled&&(c({type:me.SetDroppableDisabled,id:r,key:i,disabled:n}),u.current.disabled=n)}),[r,i,n,c]),{active:o,rect:h,isOver:(null==l?void 0:l.id)===r,node:y,over:l,setNodeRef:k}}({id:o,data:k,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...l}}),{active:E,activatorEvent:_,activeNodeRect:M,attributes:R,setNodeRef:D,listeners:O,isDragging:T,over:L,setActivatorNodeRef:P,transform:N}=qt({id:o,data:k,attributes:{...fn,...n},disabled:C.draggable}),B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.useMemo)((()=>e=>{t.forEach((t=>t(e)))}),t)}(A,D),F=Boolean(E),z=F&&!f&&nn(h)&&nn(v),U=!x&&T,H=U&&z?N:null,W=z?null!=H?H:(null!=c?c:b)({rects:m,activeNodeRect:M,activeIndex:h,overIndex:v,index:y}):null,$=nn(h)&&nn(v)?i({id:o,items:u,activeIndex:h,overIndex:v}):y,G=null==E?void 0:E.id,V=(0,s.useRef)({activeId:G,items:u,newIndex:$,containerId:g}),q=u!==V.current.items,J=t({active:E,containerId:g,isDragging:T,isSorting:F,id:o,index:y,items:u,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:d,wasDragging:null!=V.current.activeId}),Y=function(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=(0,s.useState)(null),c=(0,s.useRef)(n);return Z((()=>{if(!t&&n!==c.current&&r.current){const e=a.current;if(e){const t=Te(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}n!==c.current&&(c.current=n)}),[t,n,r,a]),(0,s.useEffect)((()=>{i&&o(null)}),[i]),i}({disabled:!J,index:y,node:S,rect:j});return(0,s.useEffect)((()=>{F&&V.current.newIndex!==$&&(V.current.newIndex=$),g!==V.current.containerId&&(V.current.containerId=g),u!==V.current.items&&(V.current.items=u)}),[F,$,g,u]),(0,s.useEffect)((()=>{if(G===V.current.activeId)return;if(null!=G&&null==V.current.activeId)return void(V.current.activeId=G);const e=setTimeout((()=>{V.current.activeId=G}),50);return()=>clearTimeout(e)}),[G]),{active:E,activeIndex:h,attributes:R,data:k,rect:j,index:y,newIndex:$,items:u,isOver:I,isSorting:F,isDragging:T,listeners:O,node:S,overIndex:v,over:L,setNodeRef:B,setActivatorNodeRef:P,setDroppableNodeRef:A,setDraggableNodeRef:D,transform:null!=Y?Y:W,transition:function(){if(Y||q&&V.current.newIndex===y)return pn;if(U&&!ae(_)||!d)return;if(F||J)return se.Transition.toString({...d,property:hn});return}()}}function vn(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const xn=[tt.Down,tt.Right,tt.Up,tt.Left],bn=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(xn.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];i.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const i=a.get(n.id);if(i)switch(e.code){case tt.Down:r.top<i.top&&t.push(n);break;case tt.Up:r.top>i.top&&t.push(n);break;case tt.Left:r.left>i.left&&t.push(n);break;case tt.Right:r.left<i.left&&t.push(n)}}));const c=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=we(t),i=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=we(r),s=a.reduce(((e,t,r)=>e+Ce(n[r],t)),0),o=Number((s/4).toFixed(4));i.push({id:t,data:{droppableContainer:e,value:o}})}}return i.sort(ye)})({active:n,collisionRect:r,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let l=je(c,"id");if(l===(null==s?void 0:s.id)&&c.length>1&&(l=c[1].id),null!=l){const e=i.get(n.id),t=i.get(l),s=t?a.get(t.id):null,c=null==t?void 0:t.node.current;if(c&&s&&e&&t){const n=Pe(c).some(((e,t)=>o[t]!==e)),a=Cn(e,t),i=function(e,t){if(!vn(e)||!vn(t))return!1;if(!Cn(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),l=n||!a?{x:0,y:0}:{x:i?r.width-s.width:0,y:i?r.height-s.height:0},d={x:s.left,y:s.top};return l.x&&l.y?d:re(d,l)}}}};function Cn(e,t){return!(!vn(e)||!vn(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var yn=n(83756),kn=n(74091),wn=n(51601);if(6168==n.j)var jn=n(66798);var Sn,In={exports:{}};Sn=In,function(){var e={}.hasOwnProperty;function t(){for(var e="",t=0;t<arguments.length;t++){var a=arguments[t];a&&(e=r(e,n(a)))}return e}function n(n){if("string"==typeof n||"number"==typeof n)return n;if("object"!=typeof n)return"";if(Array.isArray(n))return t.apply(null,n);if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]"))return n.toString();var a="";for(var i in n)e.call(n,i)&&n[i]&&(a=r(a,i));return a}function r(e,t){return t?e?e+" "+t:e+t:e}Sn.exports?(t.default=t,Sn.exports=t):self.classNames=t}();var An=In.exports;const En=6168==n.j?function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(An):null,_n=()=>(0,i.jsxs)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M9 12.5C9 13.3284 8.32843 14 7.5 14C6.67157 14 6 13.3284 6 12.5C6 11.6716 6.67157 11 7.5 11C8.32843 11 9 11.6716 9 12.5Z",fill:"#707070"}),(0,i.jsx)("path",{d:"M9 18.5C9 19.3284 8.32843 20 7.5 20C6.67157 20 6 19.3284 6 18.5C6 17.6716 6.67157 17 7.5 17C8.32843 17 9 17.6716 9 18.5Z",fill:"#707070"}),(0,i.jsx)("path",{d:"M9 6.5C9 7.32843 8.32843 8 7.5 8C6.67157 8 6 7.32843 6 6.5C6 5.67157 6.67157 5 7.5 5C8.32843 5 9 5.67157 9 6.5Z",fill:"#707070"}),(0,i.jsx)("path",{d:"M14 12.5C14 13.3284 13.3284 14 12.5 14C11.6716 14 11 13.3284 11 12.5C11 11.6716 11.6716 11 12.5 11C13.3284 11 14 11.6716 14 12.5Z",fill:"#707070"}),(0,i.jsx)("path",{d:"M14 18.5C14 19.3284 13.3284 20 12.5 20C11.6716 20 11 19.3284 11 18.5C11 17.6716 11.6716 17 12.5 17C13.3284 17 14 17.6716 14 18.5Z",fill:"#707070"}),(0,i.jsx)("path",{d:"M14 6.5C14 7.32843 13.3284 8 12.5 8C11.6716 8 11 7.32843 11 6.5C11 5.67157 11.6716 5 12.5 5C13.3284 5 14 5.67157 14 6.5Z",fill:"#707070"})]}),Mn=async({agentId:e,agentDirectoryService:t,ingestionId:n})=>{if(!(0,yn.kq)(e)||typeof self>"u")return;const r=Number((0,yn.Hr)(e)),a=t.getConfiguredUrl(yn.uK.AGENT_SETUP_URL,`${r}`),i=n?`${a}?ingestionId=${n}`:a,s=self.open(i,"_blank","noopener,noreferrer");s&&(s.opener=null)};var Rn=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.AgentDirectorySearch="agentDirectory/search",e.AgentDirectoryReorderAgent="agentDirectory/reorderAgent",e))(Rn||{}),Dn=(e=>(e.AgentCard="agentDirectory/agentCard",e.LoadMore="agentDirectory/loadMore",e.AddAgent="agentDirectory/addAgent",e.OpenAgent="agentDirectory/openAgent",e.SignInToAgent="agentDirectory/signInToAgent",e.ViewAgentInMarketplace="agentDirectory/viewAgentInMarketplace",e.ManageAgents="agentDirectory/manageAgents",e.RemoveAgent="agentDirectory/manageAgents/removeAgent",e.ViewAgentSettings="agentDirectory/manageAgents/viewAgentSettings",e))(Dn||{}),On=(e=>(e.Directory="directory",e.AgentProfile="agentProfile",e.ManageAgents="manageAgents",e.AgentSettings="agentSettings",e))(On||{});const Tn=(0,s.createContext)(null);function Ln(e){switch(e.viewType){case yn.Gk.Directory:return{type:"directory"};case yn.Gk.AgentProfile:return{type:"agentProfile",agentId:e.agentId};case yn.Gk.ManageAgents:return{type:"manageAgents"};case yn.Gk.AgentSettings:return{type:"agentSettings",agentMetadata:e.agentMetadata};case yn.Gk.AgentChat:return null;default:(0,r.vE)(e)}return null}const Pn=()=>{const e=(0,s.useContext)(Tn);if(!e)throw new Error("useAgentDirectoryModalNavigation must be used within an AgentDirectoryModalNavigationProvider");return e},Nn=(0,s.createContext)(null),Bn=()=>{const e=(0,s.useContext)(Nn);if(!e)throw new Error("useAgentDirectoryService must be used within an AgentDirectoryServiceProvider");return e},Fn=(0,s.createContext)(null),zn=()=>{const e=(0,s.useContext)(Fn);if(!e)throw new Error("useTrackingService must be used within a TrackingServiceProvider");return e};function Un(e,t){return function(e,t,n){const{trackingService:a}=zn(),[i,o]=(0,s.useState)(!1),c=(0,s.useCallback)(((e,t,n)=>{const s={componentId:e,detail:n};switch(t){case wn.Jn.Impression:if(i)return;return null==a||a.trackEvent(Rn.ComponentImpression,s),void o(!0);case wn.Jn.Clicked:return void(null==a||a.trackEvent(Rn.ComponentClicked,s));default:return(0,r.vE)(t)}}),[a,i]);return(0,wn.B9)({componentId:e,detail:t,trackEvent:c,autoTrackedInteractions:n})}(e,t,{clicked:!0})}const Hn=(e,t)=>{const[n,r]=(0,s.useState)(),[a,i]=(0,s.useState)(),[o,c]=(0,s.useState)(),[l,d]=(0,s.useState)(!0),[u,g]=(0,s.useState)(),{agentDirectoryService:h}=Bn();return(0,s.useEffect)((()=>{(async()=>{d(!0),g(void 0);try{const n=await h.getAgentMetadata(e,{includeInstallationContext:(null==t?void 0:t.withInstallationContext)??!1,includeExternalPackMetadata:(null==t?void 0:t.withExternalPackMetadata)??!1});r(null==n?void 0:n.metadata),i(null==n?void 0:n.externalPackMetadata),c(null==n?void 0:n.installationContext)}catch(e){g(e instanceof Error?e.message:"Failed to fetch agent metadata")}finally{d(!1)}})()}),[e,h,null==t?void 0:t.withExternalPackMetadata,null==t?void 0:t.withInstallationContext]),{agentMetadata:n,packMetadata:a,installationContext:o,isLoading:l,error:u}},Wn={item:"_item_yekiz_1",iconSwap:"_iconSwap_yekiz_6",agentIcon:"_agentIcon_yekiz_13",dragHandle:"_dragHandle_yekiz_14",hovered:"_hovered_yekiz_31",iconContainer:"_iconContainer_yekiz_41",openAgentSettingsButton:"_openAgentSettingsButton_yekiz_54",menu:"_menu_yekiz_58"},$n=({item:e,onDelete:t,onOpenAgent:n,shouldUseNativeInstallFlow:r,goBrandingEnabled:a})=>{var u,g,h;const p=Pn(),{agentDirectoryService:f}=Bn(),{trackClicked:m}=Un(Dn.RemoveAgent,{agentId:e.id}),{trackClicked:v}=Un(Dn.ViewAgentSettings,{agentId:e.id}),{attributes:x,listeners:b,setNodeRef:C,transform:y,transition:k}=mn({id:e.id,disabled:!e.canReorder}),[w,j]=(0,s.useState)(!1),S={transform:se.Transform.toString(y),transition:k},I=f.getAgentInstancesForAgent(e.id),{packMetadata:A}=Hn(e.id,{withExternalPackMetadata:!0}),E=void 0!==A,_=(null==(u=null==A?void 0:A.authentication)?void 0:u.type)!==yn.am.None,M=!(null==(g=null==A?void 0:A.syncTables)||!g.length),R=E&&(_||M),D=(0,s.useCallback)((async()=>{var t;await Mn({agentId:e.id,agentDirectoryService:f,ingestionId:null==(t=I[0])?void 0:t.agentInstanceId})}),[f,I,e.id]),O=En(w?Wn.item:""),T=En(e.canReorder?Wn.iconSwap:Wn.iconContainer,e.canReorder&&w?Wn.hovered:""),L=(0,s.useCallback)((()=>{t(e.id),m()}),[t,m,e.id]),P=(0,s.useCallback)((()=>{v(),r?p.showAgentSettings(e):D()}),[D,p,r,e,v]);return(0,i.jsx)("div",{ref:C,style:S,className:En(w&&Wn.visible),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),onFocus:()=>j(!0),onBlur:()=>j(!1),children:(0,i.jsxs)(o.k,{className:O,direction:"row",align:"center",justify:"space-between",padding:2,gap:2,children:[(0,i.jsxs)(o.k,{flex:"1",direction:"row",align:"center",gap:2,children:[(0,i.jsxs)("div",{className:T,children:[e.canReorder&&(0,i.jsx)("div",{className:Wn.dragHandle,"aria-label":`Reorder ${e.name}`,...x,...b,children:(0,i.jsx)(_n,{})}),(0,i.jsx)(rr,{agent:e,size:"large",className:Wn.agentIcon,goBrandingEnabled:a})]}),(0,i.jsx)(c.x,{as:"span",variant:"text-medium",children:e.name})]}),(!0===r||(null==(h=I[0])?void 0:h.agentInstanceId))&&R&&(0,i.jsx)(l.h,{className:Wn.openAgentSettingsButton,size:"small",variant:"tertiary",accessibilityLabel:"Open agent settings",icon:kn.ew,onClick:P}),(0,i.jsxs)(d.v,{className:Wn.menu,activator:"more-horizontal",children:[e.canDelete&&(0,i.jsx)(d.v.Item,{onClick:L,children:(0,i.jsx)(c.x,{as:"p",variant:"text-small",weight:"normal",children:"Remove agent"})},"removeAgent"),(0,i.jsx)(d.v.Item,{onClick:()=>{null==n||n(e.id)},children:(0,i.jsx)(c.x,{as:"p",variant:"text-small",weight:"normal",children:"Open agent"})},"openAgent")]})]})})},Gn="_confirmationBox_15k92_1",Vn="_closeIcon_15k92_7";function Zn({message:e,closeButton:t}){return(0,i.jsx)(u.x,{"data-testid":"ConfirmationBox",className:Gn,padding:3,children:(0,i.jsxs)(o.k,{gap:2,align:"center",children:[(0,i.jsx)(g.J,{icon:h.j,accessibilityLabel:"","aria-hidden":"true"}),(0,i.jsx)(o.k,{flex:"1",children:(0,i.jsx)(c.x,{as:"p",weight:"normal",variant:"text-xsmall",children:e})}),t&&(0,i.jsx)(l.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",className:Vn,icon:kn.Tw,onClick:t})]})})}const qn={hoverBox:"_hoverBox_ioe9q_1"},Kn=({onOpenAgent:e,shouldUseNativeInstallFlow:t,isFirstPartyPackAgentsEnabled:n=!1,selectedAgentId:r,coordinatorAgentId:a,goBrandingEnabled:c})=>{const{agentDirectoryService:l}=Bn(),{trackingService:d}=zn(),{agents:u,refetch:g}=(()=>{const{agentDirectoryService:e}=Bn(),[t,n]=(0,s.useState)([]),[r,a]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),c=(0,s.useCallback)((async()=>{if(e){a(!0),o(null);try{const t=e.listInstalledAgents();n(t)}catch(e){const t=e instanceof Error?e:new Error("Failed to load agents");o(t),console.error("Error fetching installed agents:",t)}finally{a(!1)}}}),[e]),l=(0,s.useCallback)((async()=>{await c()}),[c]);return(0,s.useEffect)((()=>{c()}),[c]),{agents:t,isLoading:r,error:i,refetch:l}})(),h=(0,s.useRef)(null),p=(0,s.useRef)(!1),f=(0,s.useMemo)((()=>n?u:(0,yn.xr)(u)),[u,n]),[m,v]=(0,s.useState)(f),[x,b]=(0,s.useState)(void 0),[C,y]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{v(f)}),[f]);const k=(0,s.useMemo)((()=>m.map((e=>e.id))),[m]),w=e=>{y(e),h.current&&clearTimeout(h.current),h.current=setTimeout((()=>{y(void 0),h.current=null}),1500)};(0,s.useEffect)((()=>()=>{h.current&&clearTimeout(h.current)}),[]);const j=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.useMemo)((()=>[...t].filter((e=>null!=e))),[...t])}(xe(ut),xe(st,{coordinateGetter:bn})),S=async t=>{const n=[...m],i=m.find((e=>e.id===t)),s=m.filter((e=>e.id!==t)),o=r===t;v(s);try{await l.removeAgent(t),g(),i&&w(`${i.name} removed`),o&&a&&e&&e(a)}catch(e){v(n),console.error(`Failed to remove agent ${t}:`,e),b("We hit a bump trying to remove your agent. Please try it again.")}};return(0,i.jsxs)(o.k,{direction:"column",style:{height:"100%",position:"relative"},children:[(0,i.jsx)(o.k,{role:"list","aria-label":"Installed agents",direction:"column","data-testid":"manageAgents",style:{height:"100%",overflowY:"auto"},children:(0,i.jsx)(Gt,{sensors:j,collisionDetection:Ie,onDragEnd:async e=>{var t,n;const{active:r,over:a}=e;if(a&&r.id!==a.id){if(p.current)return;const e=[...m],i=m.findIndex((e=>e.id===r.id)),s=m.findIndex((e=>e.id===a.id));if(-1===i||-1===s||i===s||!m[i].canReorder)return;const o=Math.min(i,s),c=Math.max(i,s);if(m.slice(o,c+1).some(((e,t)=>o+t!==i&&!e.canReorder)))return void b("Cannot move agents across pinned agents.");const u=m[i].id,g=null==(t=m[i+1])?void 0:t.id,h=en(m,i,s),f=null==(n=h[s+1])?void 0:n.id;if(g===f)return void v(h);try{p.current=!0,null==d||d.trackEvent(Rn.AgentDirectoryReorderAgent,{agentId:u,oldIndex:i,newIndex:s}),v(h),await l.setInstalledAgentsOrder(u,f);const e=h.find((e=>e.id===u));e&&w(`${e.name} moved`)}catch(t){console.error(`Failed to reorder agent ${u}:`,t),v(e),b("We hit a snag trying to move your agents. Please try it again.")}finally{p.current=!1}}},modifiers:[Qt,Yt],children:(0,i.jsx)(ln,{items:k,strategy:sn,children:m.map((n=>(0,i.jsx)($n,{item:n,onDelete:S,onOpenAgent:e,shouldUseNativeInstallFlow:t,goBrandingEnabled:c},n.id)))})})}),x&&(0,i.jsx)(o.k,{className:qn.errorBox,role:"alert",children:(0,i.jsx)(kn.Tv,{title:"Let's try that again",content:x,closeButton:()=>b(void 0)})}),C&&(0,i.jsx)(o.k,{className:qn.hoverBox,"aria-live":"polite",children:(0,i.jsx)(Zn,{message:C,closeButton:()=>y(void 0)})})]})},Jn=({children:e,agentDirectoryService:t})=>{const n=(0,s.useMemo)((()=>({agentDirectoryService:t})),[t]);return(0,i.jsx)(Nn.Provider,{value:n,children:e})},Xn=({children:e,trackingService:t})=>{const n=(0,s.useMemo)((()=>({trackingService:t})),[t]);return(0,i.jsx)(Fn.Provider,{value:n,children:e})},Yn=({children:e,initialView:t,agentDirectoryService:n})=>{const[a,o]=(0,s.useState)(t?[t]:[{type:On.Directory}]),c=a[a.length-1],l=a.length>1,d=(0,s.useCallback)((e=>{o((t=>((e,t)=>{if(e.type!==t.type)return!1;switch(e.type){case On.Directory:case On.ManageAgents:return!0;case On.AgentProfile:return t.type===On.AgentProfile&&e.agentId===t.agentId;case On.AgentSettings:return t.type===On.AgentSettings&&e.agentMetadata.id===t.agentMetadata.id;default:return(0,r.vE)(e)}})(t[t.length-1],e)?t:[...t,e]))}),[]),u=(0,s.useCallback)((()=>{d({type:On.Directory})}),[d]),g=(0,s.useCallback)((e=>{d({type:On.AgentProfile,agentId:e})}),[d]),h=(0,s.useCallback)((e=>{d({type:On.AgentSettings,agentMetadata:e})}),[d]),p=(0,s.useCallback)((()=>{d({type:On.ManageAgents})}),[d]),f=(0,s.useCallback)((()=>{o((e=>e.length>1?e.slice(0,-1):e))}),[]),m=(0,s.useCallback)((()=>{o([t??{type:On.Directory}])}),[t]);(0,s.useEffect)((()=>n.onDeeplinkRequested((e=>{const t=Ln(e);t&&d(t)}))),[n,d]);const v=(0,s.useMemo)((()=>({current:c,canGoBack:l,stack:a,showDirectory:u,showAgentProfile:g,showAgentSettings:h,showManageAgents:p,goBack:f,reset:m})),[c,l,a,u,g,h,p,f,m]);return(0,i.jsx)(Tn.Provider,{value:v,children:e})},Qn={agents:[],searchQuery:"",isLoading:!1,isSearching:!1,error:null,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1},hasInitiallyLoaded:!1};function er(e,t){switch(t.type){case"SET_QUERY":return{...e,searchQuery:t.query};case"LOAD_START":return{...e,isLoading:!0,error:null,pagination:{...e.pagination,isLoadingMore:!1}};case"LOAD_SUCCESS":return{...e,isLoading:!1,agents:t.agents,error:null,pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1}};case"LOAD_ERROR":return{...e,isLoading:!1,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"SEARCH_START":return{...e,isSearching:!0,error:null};case"SEARCH_SUCCESS":return{...e,isSearching:!1,agents:t.agents,error:null,pagination:{hasMore:!1,nextPageToken:void 0,isLoadingMore:!1}};case"SEARCH_ERROR":return{...e,isSearching:!1,error:t.error};case"LOAD_MORE_START":return{...e,pagination:{...e.pagination,isLoadingMore:!0}};case"LOAD_MORE_SUCCESS":return{...e,agents:[...e.agents,...t.agents],pagination:{hasMore:t.hasMore,nextPageToken:t.nextPageToken,isLoadingMore:!1},error:null};case"LOAD_MORE_ERROR":return{...e,error:t.error,pagination:{...e.pagination,isLoadingMore:!1}};case"UPDATE_AGENT":{const n=e.agents.findIndex((e=>e.id===t.id));if(n<0)return e;const r=e.agents.slice();return r[n]=t.updated,{...e,agents:r}}case"RESET_PAGINATION":return{...e,pagination:{hasMore:!0,nextPageToken:void 0,isLoadingMore:!1}};case"MARK_INIT_LOADED":return{...e,hasInitiallyLoaded:!0};default:return e}}const tr=({agentDirectoryService:e,initialLimit:t=yn.Cn,searchDebounceMs:n=500,autoLoad:r=!0,certifiedAgentsOnly:a=!1})=>{const[i,o]=(0,s.useReducer)(er,{...Qn,isLoading:r&&!!e}),{trackEvent:c}=function(e){const{trackingService:t}=zn();return{trackEvent:n=>null==t?void 0:t.trackEvent(e,n)}}(Rn.AgentDirectorySearch),l=i.searchQuery.trim().length>0,d=(0,s.useRef)(null),u=(0,s.useRef)(null),g=(0,s.useRef)(null),h=(0,s.useRef)(!0),p=(0,s.useRef)(""),f=(0,s.useMemo)((()=>i.agents.map((t=>({...t,status:t.status??(null!=e&&e.isAgentInstalled(t.id)?yn._W.Installed:yn._W.Uninstalled)})))),[i.agents,e]),m=(0,s.useCallback)((t=>t.map((t=>({...t,status:null!=e&&e.isAgentInstalled(t.id)?yn._W.Installed:yn._W.Uninstalled})))),[e]),v=(0,s.useCallback)((async()=>{var n;if(!e)return;null==(n=d.current)||n.abort(),d.current=new AbortController;const{signal:r}=d.current;o({type:"LOAD_START"});try{const n=i.pagination.nextPageToken?{nextPageToken:i.pagination.nextPageToken}:{limit:t,certifiedAgentsOnly:a},s=await e.listAgents(n);if(r.aborted||!h.current)return;const c=m(s.items),l=!!s.nextPageToken;o({type:"LOAD_SUCCESS",agents:c,hasMore:l,nextPageToken:s.nextPageToken}),i.hasInitiallyLoaded||o({type:"MARK_INIT_LOADED"})}catch(e){if(!r.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to load agents");console.error("Error loading agents:",t),o({type:"LOAD_ERROR",error:t})}}}),[e,t,a,i.pagination.nextPageToken,i.hasInitiallyLoaded,m]),x=(0,s.useCallback)((async n=>{var r;if(!e||p.current!==n)return;null==(r=u.current)||r.abort(),u.current=new AbortController;const{signal:i}=u.current;o({type:"SEARCH_START"}),c({query:n});try{const r={limit:t,certifiedAgentsOnly:a},s=await e.searchAgents(n,r,i);if(i.aborted||!h.current)return;const c=m(s);o({type:"SEARCH_SUCCESS",agents:c})}catch(e){if(!i.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to search agents");console.error("Error searching agents:",t),o({type:"SEARCH_ERROR",error:t})}}}),[e,t,a,m,c]),b=(0,s.useMemo)((()=>(0,kn.Ds)((e=>{x(e)}),n)),[x,n]),C=(0,s.useCallback)((e=>{var t;const n=e.trim();p.current=n,o({type:"SET_QUERY",query:e}),n?b(n):(o({type:"RESET_PAGINATION"}),null==(t=u.current)||t.abort(),v())}),[b,v]),y=(0,s.useRef)(!1),k=(0,s.useCallback)((async()=>{var n;if(!e||l||y.current||!i.pagination.hasMore)return;y.current=!0,null==(n=g.current)||n.abort(),g.current=new AbortController;const{signal:r}=g.current;o({type:"LOAD_MORE_START"});try{const n=i.pagination.nextPageToken?{nextPageToken:i.pagination.nextPageToken}:{limit:t},a=await e.listAgents(n);if(r.aborted||!h.current)return;const s=m(a.items),c=!!a.nextPageToken;o({type:"LOAD_MORE_SUCCESS",agents:s,hasMore:c,nextPageToken:a.nextPageToken})}catch(e){if(!r.aborted&&h.current){const t=e instanceof Error?e:new Error("Failed to load more agents");console.error("Error loading more agents:",t),o({type:"LOAD_MORE_ERROR",error:t})}}finally{y.current=!1}}),[e,t,l,i.pagination.hasMore,i.pagination.nextPageToken,m]),w=(0,s.useCallback)((async()=>{var e,t,n;o({type:"SET_QUERY",query:""}),o({type:"RESET_PAGINATION"}),null==(e=d.current)||e.abort(),null==(t=u.current)||t.abort(),null==(n=g.current)||n.abort(),await v()}),[v]),j=(0,s.useCallback)((async()=>{l?await x(i.searchQuery.trim()):await v()}),[l,i.searchQuery,x,v]),S=(0,s.useCallback)((()=>{C("")}),[C]),I=(0,s.useCallback)((()=>{o({type:"RESET_PAGINATION"}),j()}),[j]);return(0,s.useEffect)((()=>{if(!e)return;const t=e.onStateUpdated(I);return()=>t()}),[e,I]),(0,s.useEffect)((()=>{r&&!i.hasInitiallyLoaded&&e&&v()}),[r,e,v,i.hasInitiallyLoaded]),(0,s.useEffect)((()=>()=>{var e,t,n;h.current=!1,null==(e=d.current)||e.abort(),null==(t=u.current)||t.abort(),null==(n=g.current)||n.abort()}),[]),(0,s.useMemo)((()=>({agents:f,isSearchActive:l,searchQuery:i.searchQuery,isLoading:i.isLoading,isSearching:i.isSearching,error:i.error,pagination:i.pagination,search:C,loadMore:k,reset:w,refetch:j,clearSearch:S})),[f,l,i.searchQuery,i.isLoading,i.isSearching,i.error,i.pagination,C,k,w,j,S])},nr={[yn.Bm.GrammarlyProofreader]:p.O,[yn.Bm.GrammarlyPlagiarismChecker]:f.L,[yn.Bm.GrammarlyAiDetector]:m.b,[yn.Bm.GrammarlyAiGrader]:v._,[yn.Bm.GrammarlyCitationFinder]:x.k,[yn.Bm.GrammarlyParaphraser]:b.y,[yn.Bm.GrammarlyReaderReactions]:C.Q,[yn.Bm.GrammarlyHumanizer]:y.i,[yn.Bm.GrammarlyExpertReview]:k.F,[yn.Bm.GrammarlyReaderTranslate]:p.O,[yn.Bm.GrammarlyReaderComprehension]:p.O,[yn.Bm.SuperhumanGo]:w.j},rr=(0,s.forwardRef)((({agent:e,size:t,className:n,goBrandingEnabled:r=!1,...a},s)=>{let o;if((0,yn.xt)(e.id)){o=((e,t)=>t&&e===yn.Bm.SuperhumanGo?j.O:nr[e])((0,yn.Oo)(e.id),r)}return(0,i.jsx)(kn.J$,{agent:e,size:t,className:n,iconComponent:o,ref:s,...a})})),ar=e=>{const{agentDirectoryService:t}=Bn(),[n,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(r(t.isAgentInstalled(e)),t.onStateUpdated((()=>{r(t.isAgentInstalled(e))})))),[e,t]),{isInstalled:n}},ir="_agentIcon_10pb9_1",sr="_clickableCard_10pb9_6",or="_addedMarker_10pb9_23",cr=({agent:e,onOpenAgent:t,goBrandingEnabled:n})=>{const{trackClicked:r}=Un(Dn.AgentCard,{agentId:e.id}),a=Pn(),{isInstalled:l}=ar(e.id),d=(0,s.useCallback)((()=>{a.showAgentProfile(e.id)}),[e.id,a]),u=(0,s.useCallback)((()=>{null==t||t(e.id)}),[e.id,t]),h=(0,s.useCallback)((()=>{r(),e.status===yn._W.Installed?u():d()}),[e.status,u,d,r]),p=e.status===yn._W.Installed?"Open agent":"View agent details";return(0,i.jsx)("div",{role:"button",tabIndex:0,onClick:h,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),h())},className:sr,"aria-label":`${p} ${e.name}`,children:(0,i.jsxs)(o.k,{direction:"column",paddingLeft:4,paddingRight:4,paddingBottom:3,paddingTop:3,gap:2,borderRadius:3,borderColor:"base-subdued",children:[(0,i.jsxs)(o.k,{direction:"row",gap:3,children:[(0,i.jsx)(rr,{agent:e,size:"xlarge",className:ir,goBrandingEnabled:n}),(0,i.jsxs)(o.k,{direction:"column",flex:"1",children:[(0,i.jsxs)(o.k,{direction:"row",flex:"1",gap:2,justify:"space-between",children:[(0,i.jsx)(c.x,{as:"small",variant:"text-small",weight:"semibold",color:"base-default",children:e.name}),l&&(0,i.jsxs)(S.u,{children:[(0,i.jsx)(S.aJ,{asChild:!0,children:(0,i.jsx)("span",{className:or,children:(0,i.jsx)(g.J,{icon:I.L,accessibilityLabel:"Active agent",size:"small"})})}),(0,i.jsx)(S._v,{root:null,children:"This agent is active"})]})]}),e.creator&&(0,i.jsxs)(c.x,{as:"p",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]}),(0,i.jsx)(c.x,{as:"p",variant:"text-small",color:"base-default",children:e.shortDescription})]})})},lr="_agentDirectory_w3x3n_1",dr="_agentsLoadingEmpty_w3x3n_5",ur="_scrollableContainer_w3x3n_11",gr="_agentSearchFieldContainer_w3x3n_17",hr="_searchField_w3x3n_25",pr=({onOpenAgent:e,certifiedAgentsOnly:t=!1,goBrandingEnabled:n=!1})=>{const{agentDirectoryService:r}=Bn(),{agents:a,isLoading:c,isSearching:l,error:d,search:u,pagination:g,loadMore:h}=tr({agentDirectoryService:r,autoLoad:!0,certifiedAgentsOnly:t}),{trackClicked:p}=Un(Dn.LoadMore,{}),f=(0,s.useCallback)((e=>{u(e)}),[u]),m=(0,s.useCallback)((()=>{p(),h()}),[h,p]),v=c||l,x=!v&&g.hasMore&&a.length>0;return(0,i.jsxs)(o.k,{className:lr,direction:"column",gap:4,paddingBottom:2,children:[(0,i.jsx)("div",{className:gr,children:(0,i.jsx)(A.U,{className:hr,label:"Search agents",placeholder:"Search agents",onChange:f,size:"large"})}),d&&(0,i.jsxs)("div",{className:dr,children:["Error loading agents: ",d.message]}),v?(0,i.jsx)("div",{className:dr,children:"Loading agents..."}):0===a.length?(0,i.jsx)("div",{className:dr,children:"No agents available"}):(0,i.jsxs)(o.k,{className:ur,direction:"column",gap:2,children:[a.map((t=>(0,i.jsx)(cr,{agent:t,onOpenAgent:e,goBrandingEnabled:n},t.id))),x&&(0,i.jsx)(E.z,{variant:"secondary",size:"large",onClick:m,disabled:g.isLoadingMore,children:g.isLoadingMore?"Loading more...":"Load more agents"})]})]})},fr=(e,t)=>{const{agentDirectoryService:n}=Bn();return(0,s.useMemo)((()=>n.getConfiguredUrl(e,t)),[n,e,t])},mr=()=>{const{agentDirectoryService:e}=Bn(),[t,n]=(0,s.useState)(!1),[r,a]=(0,s.useState)(null);return{createAgentInstance:(0,s.useCallback)((async(t,r)=>{n(!0),a(null);let i=null;try{const a={packId:(0,yn.Oo)(t.agentId),originalConnectionId:t.originalConnectionId,packConfigurationId:t.packConfigurationId,...t.ingestionParameters&&{ingestionParams:{ingestionParameters:t.ingestionParameters,timezone:null}}};i=await e.createAgentInstance(a),i&&r&&r(i)}catch(e){a(e instanceof Error?e.message:"An error occurred"),console.error("Failed to create agent instance",e)}finally{n(!1)}return i}),[e]),isInstalling:t,error:r}},vr="Open agent",xr="Agree and sign in",br="Agree and open agent",Cr=({agentMetadata:e,canOneClickInstall:t,installationContext:n,onOpenAgent:r,shouldUseNativeInstallFlow:a})=>{const{createAgentInstance:l,isInstalling:d,error:u}=mr(),{showAgentSettings:g}=Pn(),{agentDirectoryService:h}=Bn(),{isInstalled:p}=ar(e.id),f={agentId:e.id},{trackClicked:m}=Un(Dn.OpenAgent,f),{trackClicked:v}=Un(Dn.SignInToAgent,f),{trackClicked:x}=Un(Dn.AddAgent,f),b=((e,t)=>e?vr:t?br:xr)(p,t),C=(0,s.useCallback)((()=>{m(),null==r||r(e.id)}),[m,r,e.id]),y=(0,s.useCallback)((()=>{var t,a,i;x(),l({agentId:e.id,packConfigurationId:null==(i=null==(a=null==(t=null==n?void 0:n.packInstallability)?void 0:t.mostPermissiveConfigurationAndConnections)?void 0:a.configurationForAgentCreation)?void 0:i.configurationId},(()=>{null==r||r(e.id)}))}),[x,l,e.id,n,r]),k=(0,s.useCallback)((()=>{v(),a?g(e):Mn({agentId:e.id,agentDirectoryService:h})}),[v,a,g,e,h]),w=(0,s.useCallback)((async()=>{p?C():t?y():k()}),[p,t,C,y,k]),j=void 0===t||d,S=j,I="agent-action-error";return(0,i.jsxs)(o.k,{justify:"center",direction:"column",gap:2,children:[u&&(0,i.jsx)(c.x,{as:"p",variant:"text-small",color:"critical-default",id:I,role:"alert","aria-live":"polite",children:u}),(0,i.jsx)(E.z,{id:"agent-action-button",variant:"primary",size:"large",text:b,style:{width:"100%"},onClick:w,isLoading:j,isDisabled:S,"aria-label":`${b} ${e.name} agent`,"aria-describedby":u?I:void 0,"aria-busy":j})]})},yr="_imageContainer_zy259_1",kr="_fallbackImageContainer_zy259_16",wr="_errorIcon_zy259_27",jr=({imageUrl:e,agentName:t,shortDescription:n})=>{const r=()=>(0,i.jsx)("div",{className:kr,children:(0,i.jsx)(g.J,{size:"large",icon:M.E,className:wr,accessibilityLabel:"Image not available"})});return(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[e?(0,i.jsx)(kn.bC,{src:e,alt:t,className:yr,loadingState:()=>(0,i.jsx)(_.g,{accessibilityLabel:"Loading agent image",children:(0,i.jsx)(_.g.Rectangle,{height:232,width:328})}),errorState:r}):r(),(0,i.jsx)(c.x,{as:"span",variant:"text-small",color:"base-subdued",align:"center",children:n})]})},Sr=e=>!(!/^[A-Z]/.test(e)||!/[a-z]/.test(e))&&/^([A-Z]+[a-z]+|[A-Z][a-z]+)([A-Z][a-z]+|[A-Z]{2,})*$/.test(e),Ir=e=>(e.match(/[A-Z]+(?=[A-Z][a-z]|$)|[A-Z][a-z]+/g)||[]).map(((e,t)=>/^[A-Z]+$/.test(e)?e:0===t?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():e.toLowerCase())).join(" "),Ar=e=>Sr(e)?Ir(e):e.toLowerCase().replace(/^./,(e=>e.toUpperCase())),Er="_pill_18a10_1",_r=({name:e,description:t})=>(0,i.jsxs)(S.u,{children:[(0,i.jsx)(S.aJ,{asChild:!0,children:(0,i.jsx)(o.k,{className:Er,children:(0,i.jsx)(o.k,{direction:"row",gap:1,align:"center",children:(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",children:e})})})}),t&&(0,i.jsx)(S._v,{root:null,children:(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",children:t})})]}),Mr=({packMetadata:e})=>{const t=(null==e?void 0:e.syncTables)||[];return 0===t.length?null:(0,i.jsxs)(o.k,{direction:"column",gap:3,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Data sources"}),(0,i.jsx)(o.k,{direction:"row",gap:1,wrap:!0,children:t.map(((e,t)=>{const n=Ar(e.name),r=`${e.name}-${t}`;return(0,i.jsx)(_r,{name:n,description:e.description},r)}))})]})},Rr="_agentIcon_1msim_1",Dr=({agent:e,goBrandingEnabled:t})=>{const n=(s=e.creator)===yn.eh.GRAMMARLY||s===yn.eh.CODA||s===yn.eh.SUPERHUMAN,r=t?yn.eh.SUPERHUMAN:yn.eh.GRAMMARLY,a=n?`${r} agent: ${r} built this agent to meet our high standards of quality and policy compliance.`:"Verified agent: This agent was built by a trusted developer. We made sure it complies with our policies and applied abuse-prevention checks.";var s;return(0,i.jsxs)(o.k,{direction:"row",gap:3,align:"center",children:[(0,i.jsx)(o.k,{width:40,height:40,padding:3,borderRadius:3,style:{border:"1px solid var(--color-border-base-subdued)"},children:(0,i.jsx)(rr,{agent:e,size:"xxlarge",className:Rr,goBrandingEnabled:t})}),(0,i.jsxs)(o.k,{direction:"column",align:"start",children:[(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[(0,i.jsx)(R.X,{as:"h1",variant:"heading-xsmall",children:e.name}),e.certifiedAgent&&(0,i.jsxs)(S.u,{placement:"top",children:[(0,i.jsx)(S.aJ,{asChild:!0,children:(0,i.jsx)("span",{style:{display:"inline-flex"},children:(0,i.jsx)(g.J,{icon:h.j,accessibilityLabel:"Certified Agent",size:"small"})})}),(0,i.jsx)(S._v,{style:{whiteSpace:"pre-wrap"},root:null,children:a})]})]}),(0,i.jsxs)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:["By ",e.creator]})]})]})},Or=()=>{const e=fr(yn.uK.AGENT_SECURITY_URL);return(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"How this agent handles data"}),(0,i.jsxs)(c.x,{as:"span",variant:"text-small",children:["When you're interacting with this agent, it can see info from your apps and tabs to give you personalized help."," ",(0,i.jsx)(D.r,{href:e,target:"_blank",rel:"noopener noreferrer",children:"Learn more"})]})]})},Tr=({packMetadata:e})=>{const t=[...(null==e?void 0:e.skills)||[],...(null==e?void 0:e.formulas)||[]];return 0===t.length?null:(0,i.jsxs)(o.k,{direction:"column",gap:3,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Skills"}),(0,i.jsx)(o.k,{direction:"row",gap:1,wrap:!0,children:t.map(((e,t)=>{const n="displayName"in e?e.displayName:e.name,r=Ar(n),a=`${"displayName"in e?"skill":"formula"}-${e.name}-${t}`;return(0,i.jsx)(_r,{name:r,description:e.description},a)}))})]})},Lr=({domains:e})=>{const t=e.length;return(0,i.jsx)(o.k,{direction:"column",children:t>0?(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Restricted network requests"}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:"Superhuman ensures agents only connect to their specific domains."})]}),(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsxs)(c.x,{as:"span",variant:"text-small",weight:"bold",children:["This agent connects to ",t," domain",t>1?"s":""]}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:e.map(((e,n)=>(0,i.jsxs)("span",{children:[e,n<t-1&&(0,i.jsx)("span",{children:""})]},e)))})]})]}):(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"No connection to external networks"}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:"This agent doesn't connect to any other domains."})]})})},Pr=({agentMetadata:e,externalPackMetadata:t})=>{const n=(null==t?void 0:t.networkDomains)??[];return(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Privacy and security"}),(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:"Agents follow strict security protocols. They only connect to declared domains, never access your login details, and run in isolated environments. Permissions are granular, and you control who can view and act on data. Verified agents are human-reviewed for quality and policy compliance."}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.privacyPolicyUrl)&&(0,i.jsx)(D.r,{href:e.privacyPolicyUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"privacy-policy-link",children:"See developer's privacy policy"})}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(null==e?void 0:e.termsOfServiceUrl)&&(0,i.jsx)(D.r,{href:e.termsOfServiceUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"terms-of-service-link",children:"See developer's terms of service"})})]})]}),(0,i.jsx)(Lr,{domains:n})]})},Nr=({agentMetadata:e,enableAgentWebStoreProfile:t,profileUrl:n})=>{const r=e.releaseId,a=e.lastReleasedAt;if(!a||!r)return null;const s=jn.wj.create(a),l=jn.wj.fullDate(s);return(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Updates"}),(0,i.jsxs)(c.x,{as:"span",variant:"text-small",children:["Last updated ",l," (Release ",r,")"]})]}),t&&n&&(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(0,i.jsx)(D.r,{href:n,target:"_blank",rel:"noopener noreferrer",children:"See all updates"})})]})},Br="_contentContainer_134qn_1",Fr="_descriptionContainer_134qn_12",zr="_actionButtonContainer_134qn_16",Ur=({agentId:e,onOpenAgent:t,shouldUseNativeInstallFlow:n,enableAgentWebStoreProfile:r,goBrandingEnabled:a})=>{var s,l;const{agentMetadata:d,packMetadata:g,installationContext:h,isLoading:p,error:f}=Hn(e,{withExternalPackMetadata:!0,withInstallationContext:!0}),m=null!=d&&d.id?(0,yn.Oo)(d.id):void 0,v=fr(yn.uK.AGENT_STORE_URL,m?`${m}`:void 0),x=fr(yn.uK.REPORT_AN_ISSUE,m?`?agentID=${m}`:void 0),b=(null==h?void 0:h.packInstallability.canInstallPackAndConnectAccountForAgentInstance)&&(null==h?void 0:h.canSkipManualSetup)&&(null==h?void 0:h.hasNoAuth);return p?(0,i.jsx)(_.g,{accessibilityLabel:"Loading agent profile",style:{height:"100%"},children:(0,i.jsxs)(o.k,{direction:"column",gap:2,justify:"space-between",height:"100%",children:[(0,i.jsxs)(o.k,{direction:"column",gap:3,children:[(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(_.g.Rectangle,{height:64,width:"100%"}),(0,i.jsx)(_.g.Rectangle,{height:36,width:"100%"})]}),(0,i.jsx)(_.g.Rectangle,{height:150,width:"80%"})]}),(0,i.jsx)(o.k,{justify:"center",paddingTop:3,children:(0,i.jsx)(_.g.Rectangle,{height:40,width:"100%"})})]})}):d&&g&&!f?(0,i.jsxs)(o.k,{direction:"column",height:"100%",children:[(0,i.jsx)(Dr,{agent:d,goBrandingEnabled:a}),(0,i.jsx)(u.x,{className:Br,children:(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[!d.certifiedAgent&&(0,i.jsx)(kn.Tv,{title:"This agent is not verified",content:"This agent may put your devices and data at risk. We have not reviewed the agent or its developer. Make sure you trust the developer before you use it."}),(0,i.jsx)(jr,{imageUrl:null==(l=null==(s=d.agentImages)?void 0:s[0])?void 0:l.imageUrl,agentName:d.name,shortDescription:d.shortDescription}),(0,i.jsx)("div",{className:Fr,children:(0,i.jsx)(c.x,{as:"pre",variant:"text-small",children:d.description})})]}),(0,i.jsx)(Or,{}),(0,i.jsx)(Tr,{packMetadata:g}),(0,i.jsx)(Mr,{packMetadata:g}),(0,i.jsx)(Pr,{agentMetadata:d,externalPackMetadata:g}),(0,i.jsx)(Nr,{agentMetadata:d,enableAgentWebStoreProfile:r,profileUrl:v}),(0,i.jsxs)(o.k,{direction:"column",children:[r&&m&&(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(0,i.jsx)(D.r,{href:v,target:"_blank",rel:"noopener noreferrer",children:"See full security details"})}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(0,i.jsx)(D.r,{href:x,target:"_blank",rel:"noopener noreferrer",children:"Report an issue"})}),d.supportEmail&&(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:(0,i.jsx)(D.r,{href:`mailto:${d.supportEmail}`,target:"_blank",rel:"noopener noreferrer",children:"Contact developer"})})]})]})}),(0,i.jsx)(u.x,{className:zr,children:(0,i.jsx)(Cr,{agentMetadata:d,canOneClickInstall:b,installationContext:h,onOpenAgent:t,shouldUseNativeInstallFlow:n})})]}):(0,i.jsx)(o.k,{direction:"column",justify:"center",align:"center",height:"100%",gap:2,children:(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:f??"Unable to load agent information"})})};function Hr(e){const{agentMetadata:t,isLoading:n,error:r}=Hn(e),a=null==t?void 0:t.externalMetadataUrl,{packMetadata:i,isLoading:o,error:c}=(e=>{const{agentDirectoryService:t}=Bn(),[n,r]=(0,s.useState)(),[a,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)();return(0,s.useEffect)((()=>{e&&(async()=>{i(!0);try{const n=await t.getExternalPackMetadata(e);r(n)}catch(e){c(e instanceof Error?e.message:"Failed to fetch pack metadata")}finally{i(!1)}})()}),[e,t]),{packMetadata:n,isLoading:a,error:o}})(a);return{agentMetadata:t,packMetadata:i,isLoading:n||!!a&&o,error:{agent:r,pack:c}}}const Wr=({agentId:e,connections:t,agentInstance:n,selectedConnectionId:r})=>{const{createAgentInstance:a,isInstalling:s,error:l}=mr(),{isInstalled:d}=ar(e),u=t?Object.entries(t):[],g=u.length>0,h=u.length>1,p=!!n,{buttonText:f,isButtonDisabled:m}=function({isInstalled:e,hasConnections:t,hasExistingInstance:n,hasMultipleConnections:r,selectedConnectionId:a,connections:i}){let s="Sync Data",o=!1;if(e)s="Open";else if(t)if(n)if(s="Update",r){const e=Object.values(i||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0],t=null==e?void 0:e.connection.id;o=!(a&&a!==t)}else o=!0;else s="Sync Data",o=!a;else s="Sync Data",o=!0;return{buttonText:s,isButtonDisabled:o}}({isInstalled:d,hasConnections:g,hasExistingInstance:p,hasMultipleConnections:h,selectedConnectionId:r,connections:t});return(0,i.jsxs)(o.k,{direction:"column",gap:2,style:{width:"100%"},children:[l&&(0,i.jsx)(c.x,{as:"p",variant:"text-small",color:"critical-default",children:l}),(0,i.jsx)(E.z,{variant:"primary",size:"large",isLoading:s,text:f,style:{width:"100%"},onClick:()=>{d||a({agentId:e,originalConnectionId:r||void 0},(()=>{}))},isDisabled:m})]})};const $r="_container_1sik4_1",Gr="_primaryAccountButton_1sik4_7",Vr="_signInAnotherButton_1sik4_14",Zr="_noAccountContainer_1sik4_18",qr=({connections:e,isLoading:t=!1,agentInstance:n,onConnectionSelect:r})=>{var a;const l=e?Object.entries(e):[],d=l.length>0,u=l.length>1,h=(0,s.useCallback)((()=>{if(!e)return null;const t=Object.values(e).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0];return(null==t?void 0:t.connection.id)||null}),[e]),[p,f]=(0,s.useState)(h());!function(e,t){const n=(0,s.useRef)(!1);(0,s.useEffect)((()=>{!t()||n.current||(n.current=!0,e())}),[e,t])}((0,s.useCallback)((()=>{const e=h();e&&(f(e),null==r||r(e))}),[h,r]),(0,s.useCallback)((()=>d),[d]));let m=null;d&&(m=p&&e&&e[p]?e[p]:Object.values(e||{}).sort(((e,t)=>t.connection.modificationTimestamp-e.connection.modificationTimestamp))[0]||null);const v=null==m?void 0:m.connection,x=(null==v?void 0:v.name)||"Unknown Account",b=!!n;return t?(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,i.jsx)(o.k,{direction:"column",gap:2,className:$r,children:(0,i.jsx)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:"Loading account information..."})})]}):d?(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[u&&(0,i.jsx)(O.P,{label:b?"Switch to another connection":"Select a connection",value:p||"",onChange:e=>(e=>{f(e),null==r||r(e)})(e),children:l.map((([e,t])=>{const n=t.connection.name||"Unknown Connection";return(0,i.jsx)(O.P.Option,{value:e,children:n},e)}))}),(0,i.jsxs)(o.k,{direction:"column",gap:2,className:$r,children:[(0,i.jsx)(o.k,{direction:"row",justify:"space-between",children:(0,i.jsxs)(o.k,{direction:"row",gap:2,align:"center",children:[(0,i.jsx)(g.J,{icon:T.g,accessibilityLabel:"Account avatar",size:"xlarge"}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:x})]})}),b&&(!u||p===(null==(a=l[0])?void 0:a[0]))&&(0,i.jsx)(E.z,{variant:"primary",size:"small",className:Gr,children:"Primary account"})]}),d&&(0,i.jsx)(E.z,{variant:"secondary",size:"small",className:Vr,children:"Sign into another account"})]})]}):(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Account"}),(0,i.jsx)(o.k,{direction:"column",gap:2,className:$r,children:(0,i.jsxs)(o.k,{direction:"column",gap:2,align:"start",className:Zr,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:"No account connected"}),(0,i.jsx)(E.z,{variant:"secondary",size:"small",children:"Sign In"})]})})]})},Kr=({packMetadata:e})=>{const t=(0,s.useMemo)((()=>((null==e?void 0:e.syncTables)||[]).map((e=>{let t=e.name;return Sr(t)&&(t=Ir(t)),{id:e.name.toLowerCase().replace(/\s+/g,"-"),name:t}}))),[e]);return 0===t.length?null:(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(c.x,{as:"span",variant:"text-small",weight:"bold",children:"Info sources"}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:"This connection will let you use info from the selected sources. It updates automatically."}),(0,i.jsx)(o.k,{direction:"column",gap:2,children:t.map((e=>(0,i.jsx)(L.XZ,{isSelected:!0,isDisabled:!0,"aria-label":e.name,children:(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:e.name})},e.id)))})]})},Jr=({agentMetadata:e,agentInstance:t})=>{const{agentDirectoryService:n}=Bn(),{packMetadata:r}=Hr(e.id),{connections:a,isLoading:l,error:d}=(({packId:e,ignoreVersionsAfterLive:t,agentDirectoryService:n})=>{const[r,a]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),d=(0,s.useCallback)((async()=>{if(n&&e){o(!0),l(null);try{const r={packId:e,...void 0!==t&&{ignoreVersionsAfterLive:t}},i=await n.getConnectionsInfoForUser(r);a(i)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch agent connections");l(t),console.error("Error fetching agent connections:",t)}finally{o(!1)}}}),[n,e,t]),u=(0,s.useCallback)((async()=>{await d()}),[d]);return(0,s.useEffect)((()=>{d()}),[d]),{connections:r,isLoading:i,error:c,refetch:u}})({packId:(0,yn.Hr)(e.id),agentDirectoryService:n}),[u,g]=(0,s.useState)(null),h=(0,s.useCallback)((e=>{g(e)}),[]),p=!a||0===Object.keys(a).length;return(0,i.jsxs)(o.k,{direction:"column",justify:"space-between",height:"100%",children:[(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(R.X,{as:"h2",variant:"heading-medium",children:"Settings"}),(0,i.jsxs)(o.k,{direction:"column",gap:4,children:[!l&&p&&(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsx)(R.X,{as:"h3",variant:"heading-small",children:"Make a connection"}),(0,i.jsxs)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Connect your info to Go so you can use it in your chats. You'll get smarter, more relevant responses."," ",(0,i.jsx)(D.r,{href:"https://www.grammarly.com/security",children:"See how we keep your data safe"})]})]}),(0,i.jsx)(qr,{connections:a,isLoading:l,agentInstance:t,onConnectionSelect:h}),(0,i.jsx)(o.k,{paddingTop:4,children:(0,i.jsx)(Kr,{packMetadata:r})}),l&&(0,i.jsx)(_.g,{accessibilityLabel:"Loading settings",children:(0,i.jsx)(_.g.Rectangle,{height:"100px"})})]}),d&&(0,i.jsxs)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:["Error loading connections: ",d.message]})]}),(0,i.jsx)(o.k,{align:"center",justify:"center",direction:"column",gap:2,paddingTop:3,paddingBottom:3,children:(0,i.jsx)(Wr,{agentId:e.id,connections:a,agentInstance:t,selectedConnectionId:u})})]})},Xr="_manageAgentsButton_1po2c_1",Yr="View in Agent Store",Qr="Configure in new tab",ea=({currentView:e,canGoBack:t,onClose:n,onBack:a,onManageAgents:c,shouldShowManageAgents:d,enableAgentWebStoreProfile:u=!1})=>{const{agentDirectoryService:g}=Bn(),h=ta(e),{trackClicked:p}=Un(Dn.ViewAgentInMarketplace,{agentId:h||""}),{trackClicked:f}=Un(Dn.ManageAgents,{}),m=(0,s.useCallback)((async()=>{switch(e.type){case On.AgentSettings:await Mn({agentId:e.agentMetadata.id,agentDirectoryService:g}),p();break;case On.AgentProfile:u?await(({agentId:e,agentDirectoryService:t})=>{if(!(0,yn.kq)(e)||typeof self>"u")return;const n=Number((0,yn.Hr)(e)),r=t.getConfiguredUrl(yn.uK.AGENT_STORE_URL,`${n}`),a=self.open(r,"_blank","noopener,noreferrer");a&&(a.opener=null)})({agentId:e.agentId,agentDirectoryService:g}):await Mn({agentId:e.agentId,agentDirectoryService:g}),p()}}),[e,g,u,p]),v=(()=>{switch(e.type){case On.Directory:return"Add agents";case On.AgentProfile:return"";case On.ManageAgents:return"Manage agents";case On.AgentSettings:return e.agentMetadata.name;default:return(0,r.vE)(e)}})(),x=(0,s.useCallback)((()=>{c(),f()}),[c,f]);return(0,i.jsxs)(o.k,{direction:"row",justify:"space-between",children:[t?(0,i.jsx)(l.h,{size:"small",variant:"tertiary",accessibilityLabel:"Back",icon:P.n,onClick:a}):(0,i.jsx)(l.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:kn.Tw,onClick:n}),(0,i.jsx)(o.k,{justify:"center",flex:"1",align:"center",children:(0,i.jsx)(R.X,{as:"h1",variant:"heading-xxsmall",children:v})}),d&&e.type===On.Directory&&(0,i.jsx)(l.h,{className:Xr,size:"small",variant:"tertiary",accessibilityLabel:"Manage agents",icon:kn.d$,onClick:x}),[On.AgentSettings,On.AgentProfile].includes(e.type)&&(0,i.jsx)(l.h,{size:"small",variant:"tertiary",accessibilityLabel:e.type===On.AgentProfile&&u?Yr:Qr,icon:N.n,onClick:m})]})},ta=e=>{switch(e.type){case On.AgentProfile:return e.agentId;case On.AgentSettings:return e.agentMetadata.id;default:return}},na=({closeModal:e,shouldUseNativeInstallFlow:t,shouldShowManageAgents:n,onOpenAgent:a,isFirstPartyPackAgentsEnabled:c,enableAgentWebStoreProfile:l,certifiedAgentsOnly:d,selectedAgentId:g,coordinatorAgentId:h,goBrandingEnabled:p})=>{const f=Pn(),m=(0,s.useCallback)((e=>{switch(e.type){case On.Directory:return(0,i.jsx)(pr,{onOpenAgent:a,certifiedAgentsOnly:d,goBrandingEnabled:p});case On.AgentProfile:return(0,i.jsx)(Ur,{agentId:e.agentId,onOpenAgent:a,shouldUseNativeInstallFlow:t,enableAgentWebStoreProfile:l,goBrandingEnabled:p});case On.ManageAgents:return(0,i.jsx)(Kn,{onOpenAgent:a,shouldUseNativeInstallFlow:t,isFirstPartyPackAgentsEnabled:c,selectedAgentId:g,coordinatorAgentId:h});case On.AgentSettings:return(0,i.jsx)(Jr,{agentMetadata:e.agentMetadata});default:(0,r.vE)(e)}}),[t,a,c,l,d,g,h,p]);return(0,i.jsxs)(o.k,{direction:"column",gap:8,height:"100%",children:[(0,i.jsx)(ea,{currentView:f.current,canGoBack:f.canGoBack,onClose:e,onBack:f.goBack,onManageAgents:f.showManageAgents,shouldShowManageAgents:n,enableAgentWebStoreProfile:l}),(0,i.jsx)(u.x,{style:{flex:"1",minHeight:0},children:(()=>{const e={display:"none"},t={display:"contents"};return(0,i.jsx)(i.Fragment,{children:f.stack.map((n=>{const r=(e=>{switch(e.type){case On.AgentProfile:return`${e.type}-${e.agentId}`;case On.AgentSettings:return`${e.type}-${e.agentMetadata.id}`;default:return e.type}})(n),a=n===f.current;return(0,i.jsx)("div",{style:a?t:e,children:m(n)},r)}))})})()})]})},ra=({agentDirectoryService:e,trackingService:t,onOpenAgent:n,closeModal:r,initialView:a,shouldUseNativeInstallFlow:s,shouldShowManageAgents:o=!1,isFirstPartyPackAgentsEnabled:c=!1,enableAgentWebStoreProfile:l=!1,certifiedAgentsOnly:d=!1,selectedAgentId:u,coordinatorAgentId:g,goBrandingEnabled:h=!1})=>(0,i.jsx)(Yn,{initialView:a,agentDirectoryService:e,children:(0,i.jsx)(Jn,{agentDirectoryService:e,children:(0,i.jsx)(Xn,{trackingService:t,children:(0,i.jsx)(na,{closeModal:r,onOpenAgent:n,shouldUseNativeInstallFlow:s,shouldShowManageAgents:o,isFirstPartyPackAgentsEnabled:c,enableAgentWebStoreProfile:l,certifiedAgentsOnly:d,selectedAgentId:u,coordinatorAgentId:g,goBrandingEnabled:h})})})});yn.km.all;var aa=n(80324),ia=n(47785);if(6168==n.j)var sa=n(82717);var oa=n(70892),ca=n(57526);if(6168==n.j)var la=n(22825);if(6052==n.j)D=n(93607);if(/^6(052|168)$/.test(n.j))var da=n(6837);if(/^6(052|168)$/.test(n.j))var ua=n(17302);if(/^6(052|168)$/.test(n.j))var ga=n(59189);if(/^6(052|168)$/.test(n.j))var ha=n(3343);var pa=n(68198),fa=n(89566),ma=n(16253),va=n(4968);const xa=()=>{};var ba=n(78393);const Ca=s.createContext({selectedTab:"",setSelectedTab(){},focusedTab:"",setFocusedTab(){},onChangeHandler(){},tabIds:[""],size:"medium"}),ya=e=>`gds-tab-${e}`,ka=e=>`gds-tab-panel-${e}`;const wa=s.forwardRef((function(e,t){const{bottomBorder:n="default",width:r}=e,a=(0,fa.B3)(t),i=s.useRef(null),{hasHiddenLeftContent:c,hasHiddenRightContent:d}=(e=>{const[t,n]=s.useState(!1),[r,a]=s.useState(!1),i=s.useCallback((()=>{const t=e.current;null!==t&&(n(!(t.scrollLeft+t.clientWidth>=t.scrollWidth)),a(t.scrollLeft>0))}),[]);return s.useEffect((()=>{if("undefined"!=typeof self&&void 0!==self.ResizeObserver){const t=new ResizeObserver(i);return null!==e.current&&t.observe(e.current),()=>{t.disconnect()}}return xa}),[e,i]),s.useEffect((()=>{var t;return"undefined"!=typeof self&&void 0!==self?(null==(t=e.current)||t.addEventListener("scroll",i),()=>{var t;null==(t=e.current)||t.removeEventListener("scroll",i)}):xa}),[e]),s.useEffect((()=>{i()}),[i]),{hasHiddenRightContent:t,hasHiddenLeftContent:r}})(i),{setSelectedTab:u,setFocusedTab:g,onChangeHandler:h,focusedTab:p,tabIds:f,size:m}=s.useContext(Ca),[v,x]=s.useState(!1),[b,C]=s.useState(!1);return s.useEffect((()=>{x(d),C(c)}),[v,b,c,d]),s.createElement("div",{ref:a,role:"tablist","aria-orientation":"horizontal","aria-label":e.accessibilityLabel,className:(0,ma.W)("gds-tabs-list-container","none"===n&&"gds-tabs-border-none","full"===r&&"gds-tabs-full-width",`gds-tabs-list-container-${m}`),onKeyDown:e=>{const t=f.length,n=f.indexOf(p),r=e=>{var t;g(e),null==(t=document.getElementById(e))||t.focus()},a={ArrowRight:()=>{const e=f[(n+1)%t];r(e)},ArrowLeft:()=>{const e=f[(n-1+t)%t];r(e)},Enter:()=>{u(p),h(p)}}[e.key];a&&(e.preventDefault(),a())}},b&&s.createElement(l.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-left",size:"small"===m?"small":"medium",variant:"tertiary",icon:P.n,tabIndex:-1,onClick:()=>{null!==i.current&&(i.current.scrollLeft-=500)}}),s.createElement(o.k,{gap:3,align:"center",className:"gds-tabs-list",ref:i},e.children),v&&s.createElement(l.h,{"aria-hidden":!0,accessibilityLabel:"Show more tabs",className:"gds-tabs-list-overflow-button-right",size:"small"===m?"small":"medium",variant:"tertiary",icon:ba.M,tabIndex:-1,onClick:()=>{null!==i.current&&(i.current.scrollLeft+=500)}}))})),ja=s.forwardRef((function(e,t){const{selectedTab:n,setSelectedTab:r,setFocusedTab:a,onChangeHandler:i,size:o}=s.useContext(Ca),l=ya(e.id),d=ka(e.id),u=(0,fa.B3)(t),g=n===l;return s.createElement("button",{"aria-selected":g,"aria-controls":d,className:(0,ma.W)("gds-tabs-tab-container",e.className),id:l,ref:u,role:"tab",tabIndex:g?0:-1,onClick:()=>{r(l),a(l),i(l)},onFocus:()=>{a(l)}},s.createElement("div",{className:(0,ma.W)("gds-tabs-tab",g&&"gds-tabs-tab-selected"),"data-text":e.label},null!=e.label?s.createElement(c.x,{weight:g?"semibold":"normal",as:"span",variant:{small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large",auto:"text-medium"}[o]},e.label):e.children))})),Sa=s.forwardRef((function(e,t){const{selectedTab:n}=s.useContext(Ca),r=(0,fa.B3)(t),a=ya(e.id),i=ka(e.id);let o=n===a;return s.useEffect((()=>{o=n===a}),[n]),o?s.createElement("div",{className:"gds-tabs-panel",role:"tabpanel",id:i,"aria-labelledby":a,ref:r,tabIndex:0},e.children):null})),Ia=(0,va.o)((e=>{const t=function(e){const t=[];return s.Children.forEach(e.children,(e=>{s.isValidElement(e)&&e.type===wa&&s.Children.forEach(e.props.children,(e=>{s.isValidElement(e)&&e.type===ja&&t.push(ya(e.props.id))}))})),t}(e),{defaultSelectedTab:n,children:r,size:a="medium",onChange:i,...o}=e,c=n?ya(n):t[0],[l,d]=s.useState(c),[u,g]=s.useState(c);return s.createElement("div",{className:"gds-tabs",...o},s.createElement(Ca.Provider,{value:{selectedTab:l,setSelectedTab:d,setFocusedTab:g,onChangeHandler:e=>{i&&i(e.replace(/gds-tab-/,""))},focusedTab:u,tabIds:t,size:a}},r))}),"Tabs",{Panel:Sa,TabList:wa,Tab:ja});var Aa=n(82597),Ea=n(82491),_a=n(38076);const Ma=(0,Ea.I)("color",(({title:e,titleId:t,desc:n,descId:r,resourcePrefix:a=(0,_a.O)(),...i})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUp",stroke:"transparent","aria-labelledby":t,"aria-describedby":r,...i},n?s.createElement("desc",{id:r},n):null,e?s.createElement("title",{id:t},e):null,s.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 11 6-6 6 6"}))));var Ra=n(76957);if(6168==n.j)var Da=n(38665);var Oa=n(7368);if(6168==n.j)var Ta=n(33171);var La=n(68861),Pa=n(4668);if(6168==n.j)var Na=n(17862);if(6168==n.j)var Ba=n(35020);if(6168==n.j)var Fa=n(88028);if(6168==n.j)var za=n(31744);if(6168==n.j)var Ua=n(13391);if(6168==n.j)var Ha=n(38516);if(/^6(052|168)$/.test(n.j))var Wa=n(56501);var $a,Ga,Va,Za,qa,Ka,Ja,Xa,Ya=n(83816),Qa=e=>{throw TypeError(e)},ei=(e,t,n)=>t.has(e)||Qa("Cannot "+n),ti=(e,t,n)=>(ei(e,t,"read from private field"),n?n.call(e):t.get(e)),ni=(e,t,n)=>t.has(e)?Qa("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),ri=(e,t,n,r)=>(ei(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ai=(e,t,n)=>(ei(e,t,"access private method"),n),ii=(e=>(e.AgentBench="agentBench",e.ExternalChange="external",e.Command="command",e))(ii||{}),si=(e=>(e.DiscoverabilityPopup="pushedContent/discoverabilityPopup",e.DiscoverabilityPanelFooter="pushedContent/discoverabilityPanelFooter",e.DiscoverabilityPanelFooterAcceptButton="pushedContent/discoverabilityPanelFooter/accept",e.DiscoverabilityPanelFooterDismissButton="pushedContent/discoverabilityPanelFooter/dismiss",e))(si||{}),oi=((Xa=oi||{}).AgentBenchItem="agentBench/agentIcon",Xa.AgentBenchLabelsOverlay="agentBench/agentLabelsOverlay",Xa.AgentPanel="agentBench/agentPanel",Xa.ViewDirectoryBenchItem="agentBench/viewDirectoryBenchItem",Xa.AgentHeaderClose="agent/headerClose",Xa.ChatHistoryDelete="chatHistory/delete",Xa.ChatHistorySelect="chatHistory/select",Xa.ChatHistoryCreate="chatHistory/create",Xa.ErrorFallback="agent/errorFallback",Xa.RetryButton="chat/retryButton",Xa.CopyArtifactButton="chat/copyArtifactButton",Xa.InsertArtifactButton="chat/insertArtifactButton",Xa.IdeationTabs="chat/ideationTabs",Xa.IdeationTabContent="chat/ideationTabContent",Xa.ChatInputUphookSecondaryCta="chat/inputUphookSecondaryCta",Xa.QuickActionButton="chat/quickActionButton",Xa.ApplyAllSuggestionsButton="chat/applyAllSuggestionsButton",Xa.DismissAllSuggestionsButton="chat/dismissAllSuggestionsButton",Xa.ShowSuggestionsButton="chat/summaryButton",Xa.ChatResponseSource="chat/responseSource",Xa.ContextOption="chatAgentPanel/context-option",Xa.RemoveContextItemButton="chatAgentPanel/remove-context-item-button",Xa.ContextSwitcherButton="chatAgentPanel/context-switcher-button",Xa[Xa.AgentDirectoryAgentCard=Dn.AgentCard]="AgentDirectoryAgentCard",Xa[Xa.AgentDirectoryLoadMore=Dn.LoadMore]="AgentDirectoryLoadMore",Xa[Xa.AgentDirectoryAddAgent=Dn.AddAgent]="AgentDirectoryAddAgent",Xa[Xa.AgentDirectoryOpenAgent=Dn.OpenAgent]="AgentDirectoryOpenAgent",Xa[Xa.AgentDirectorySignInToAgent=Dn.SignInToAgent]="AgentDirectorySignInToAgent",Xa[Xa.AgentDirectoryViewAgentInMarketplace=Dn.ViewAgentInMarketplace]="AgentDirectoryViewAgentInMarketplace",Xa[Xa.AgentDirectoryManageAgents=Dn.ManageAgents]="AgentDirectoryManageAgents",Xa[Xa.AgentDirectoryRemoveAgent=Dn.RemoveAgent]="AgentDirectoryRemoveAgent",Xa[Xa.AgentDirectoryViewAgentSettings=Dn.ViewAgentSettings]="AgentDirectoryViewAgentSettings",Xa[Xa.DiscoverabilityPopup=si.DiscoverabilityPopup]="DiscoverabilityPopup",Xa[Xa.DiscoverabilityPanelFooter=si.DiscoverabilityPanelFooter]="DiscoverabilityPanelFooter",Xa[Xa.DiscoverabilityPanelFooterAcceptButton=si.DiscoverabilityPanelFooterAcceptButton]="DiscoverabilityPanelFooterAcceptButton",Xa[Xa.DiscoverabilityPanelFooterDismissButton=si.DiscoverabilityPanelFooterDismissButton]="DiscoverabilityPanelFooterDismissButton",Xa),ci=(e=>(e.ComponentImpression="componentImpression",e.ComponentClicked="componentClicked",e.ComponentInteraction="componentInteraction",e.AgentActivated="agentActivated",e.AgentDeactivated="agentDeactivated",e.ResponseCopied="responseCopied",e.ResponseInserted="responseInserted",e.ResponseStreamingCompleted="responseStreamingCompleted",e.ResponseStoppedByUser="responseStoppedByUser",e.MessageSubmitted="messageSubmitted",e.PredefinedPromptSubmitted="predefinedPromptSubmitted",e[e.AgentDirectorySearch=Rn.AgentDirectorySearch]="AgentDirectorySearch",e[e.AgentDirectoryReorderAgent=Rn.AgentDirectoryReorderAgent]="AgentDirectoryReorderAgent",e))(ci||{}),li=(e=>(e.OpenAgent="OpenAgent",e.OpenCoordinatorAgent="OpenCoordinatorAgent",e.MessageAgent="MessageAgent",e))(li||{}),di=(e=>(e.Command="Command",e.Event="Event",e))(di||{}),ui=(e=>(e.OpenChat="OpenChat",e.CreateChat="CreateChat",e))(ui||{}),gi=(e=>(e.ChatDeleted="ChatDeleted",e))(gi||{});class hi{constructor(e){ni(this,Za),ni(this,$a,new Map),ni(this,Ga,new Map),ni(this,Va,new Set),this.capabilities=e}execute(e){switch(e.kind){case li.OpenAgent:ai(this,Za,qa).call(this,e);break;case li.OpenCoordinatorAgent:ai(this,Za,Ka).call(this);break;case li.MessageAgent:ai(this,Za,Ja).call(this,e);break;default:(0,r.vE)(e)}}registerAgent(e){ti(this,Va).has(e)||(ti(this,Va).add(e),ti(this,Ga).set(e,new a.v))}unregisterAgent(e){ti(this,Va).delete(e),ti(this,Ga).delete(e),ti(this,$a).delete(e)}subscribeToAgentMessages(e){return ti(this,Ga).get(e)}getPendingAgentMessages(e){const t=[...ti(this,$a).get(e)??[]];return ti(this,$a).set(e,[]),t}}$a=new WeakMap,Ga=new WeakMap,Va=new WeakMap,Za=new WeakSet,qa=function(e){this.capabilities.openAgent(e.agentId,ii.Command)},Ka=function(){this.capabilities.openCoordinatorAgent()},Ja=function({agentId:e,message:t}){var n,r;ti(this,Va).has(e)?null==(r=ti(this,Ga).get(e))||r.emit("message",t):ti(this,$a).has(e)?null==(n=ti(this,$a).get(e))||n.push(t):ti(this,$a).set(e,[t])};const pi=(0,s.createContext)({}),fi=({children:e,value:t})=>(0,i.jsx)(pi.Provider,{value:{...t},children:e});function mi(){return(0,s.useContext)(pi)}function vi(e){const{commandExecutor:t,agentId:n}=mi();(0,s.useEffect)((()=>{var r;if(!t||!n)return;t.getPendingAgentMessages(n).forEach((t=>e(t))),t.registerAgent(n);const a=null==(r=t.subscribeToAgentMessages(n))?void 0:r.on("message",e);return()=>{null==a||a.dispose(),t.unregisterAgent(n)}}),[t,n,e])}pi.Provider;const xi=(0,s.createContext)({showModal:()=>{},closeModal:()=>{},isOpen:!1}),bi=()=>(0,s.useContext)(xi),Ci=(0,s.createContext)(null);function yi(e){const t=(0,s.useContext)(Ci);if(!t)throw new Error("Missing AssistantStoreContext.Provider in the tree");return(0,Oa.oR)(t,e)}function ki(){const e=yi((e=>({chats:e.chatHistory.chats,renameChat:e.chatHistory.renameChat,deleteChat:e.chatHistory.deleteChat,initialize:e.chatHistory.initialize,subscribeToChatEvents:e.chatHistory.subscribeToChatEvents,unsubscribeFromChatEvents:e.chatHistory.unsubscribeFromChatEvents})));return{...e,chats:Object.values(e.chats)}}function wi(e,t){return(0,s.useCallback)(((...n)=>t(e,...n)),[t,e])}function ji(){const{agentId:e}=mi();if(!e)throw new Error("Agent ID is required to use chat");const{createNewChat:t,setActiveChat:n,sendMessage:r,retryMessage:a,stopStreamingResponse:i,activeChats:s}=yi((e=>e.chat)),o=s[e];return{id:(null==o?void 0:o.id)??"",messages:(null==o?void 0:o.messages)??[],draft:(null==o?void 0:o.draft)??void 0,createNewChat:wi(e,t),setActiveChat:wi(e,n),sendMessage:wi(e,r),retryMessage:wi(e,a),stopStreamingResponse:wi(e,i)}}function Si(){return yi((e=>({responseCopied:e.tracking.responseCopied,responseInserted:e.tracking.responseInserted,responseStreamed:e.tracking.responseStreamed,responseStoppedByUser:e.tracking.responseStoppedByUser,messageSubmitted:e.tracking.messageSubmitted,trackComponentEvent:e.tracking.trackComponentEvent,subscribeToChatEvents:e.tracking.subscribeToChatEvents,unsubscribeFromChatEvents:e.tracking.unsubscribeFromChatEvents})))}function Ii(){return yi((e=>e.featureToggle))}function Ai(e,t){return(0,s.useCallback)(((...n)=>t(e,...n)),[t,e])}function Ei(){const{agentId:e}=mi();if(!e)throw new Error("Agent ID is required to use suggestions");const t=yi((e=>e.suggestions)),n=Ai(e,t.focusSuggestions),r=Ai(e,t.hasSuggestion),a=Ai(e,t.applyAllSuggestions),i=Ai(e,t.dismissAllSuggestions);return(0,s.useMemo)((()=>({onUpdate:t.onUpdate,focusSuggestions:n,hasSuggestion:r,applyAllSuggestions:a,dismissAllSuggestions:i})),[t,n,r,a,i])}function _i(){const{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n}=yi((e=>e.agentDirectory));return{installedAgents:e,loadInstalledAgents:t,subscribeToAgentStateChanges:n}}function Mi(e,t){var n,r;const{get:a,messages:i,trackImpression:o}=yi((e=>e.inProductMessaging)),c=i[e];(0,s.useEffect)((()=>{a(e,t)}),[a,e,null==(n=null==t?void 0:t.selectedAgent)?void 0:n.id]);const l=(0,s.useCallback)((()=>{o(e,null==c?void 0:c.id,t)}),[o,e,null==c?void 0:c.id,null==(r=null==t?void 0:t.selectedAgent)?void 0:r.id]);return{message:c,trackImpression:l}}const Ri=(0,s.createContext)(null);function Di(){var e;return null==(e=(0,s.useContext)(Ri))?void 0:e.tracking}function Oi(e,t,n=!1){return Pi(e,t,wn.IX.Impression,n)}function Ti(e,t,n=!1){return Pi(e,t,wn.IX.ImpressionAndClicked,n)}function Li(e,t,n=!1){return Pi(e,t,wn.IX.Clicked,n)}function Pi(e,t,n,a=!1){const i=Di(),[o,c]=(0,s.useState)(!1),l=(0,s.useCallback)(((e,t,n)=>{const s={componentId:e,detail:n};switch(t){case wn.Jn.Impression:if(a&&o)return;return null==i||i.trackEvent(ci.ComponentImpression,s),void c(!0);case wn.Jn.Clicked:return void(null==i||i.trackEvent(ci.ComponentClicked,s));default:return(0,r.vE)(t)}}),[i,o,a]);return(0,wn.B9)({componentId:e,detail:t,trackEvent:l,autoTrackedInteractions:n})}const Ni="_chatThreadLink_1wvyl_1",Bi=(0,s.forwardRef)((function({id:e,text:t,chatTimeRange:n,onClick:r},a){const{trackClicked:s}=Li(oi.ChatHistorySelect,{chatId:e,chatTimeRange:n});return(0,i.jsx)("button",{ref:a,className:Ni,onClick:t=>{t.preventDefault(),s(),r(e,n)},children:(0,i.jsx)(c.x,{as:"small",variant:"text-xsmall",children:t})})})),Fi="_chatListItem_heqpe_1",zi="_menu_heqpe_13",Ui="_moreOptions_heqpe_18",Hi=(0,s.forwardRef)((function({id:e,name:t,onEdit:n,chatTimeRange:r,onDelete:a,onSelect:s},l){const{deleteChat:g}=ki(),{trackClicked:h}=Li(oi.ChatHistoryDelete,{chatId:e});return(0,i.jsx)(u.x,{as:"section",width:"full",className:Fi,children:(0,i.jsxs)(o.k,{align:"center",justify:"space-between",width:"100%",children:[(0,i.jsx)(Bi,{ref:l,text:t,id:e,chatTimeRange:r,onClick:s}),(0,i.jsxs)(d.v,{className:zi,activator:(0,i.jsx)(E.z,{variant:"tertiary",className:Ui,iconStart:ia.o,accessibilityLabel:`More options for ${t}`}),children:[(0,i.jsx)(d.v.Item,{onClick:n,children:(0,i.jsx)(c.x,{"aria-label":`Rename chat titled ${t}`,as:"small",variant:"text-small",children:"Rename"})},"rename"),(0,i.jsx)(d.v.Item,{onClick:()=>{h(),g(e),a(e)},children:(0,i.jsx)(c.x,{"aria-label":`Delete chat titled ${t}`,as:"small",variant:"text-small",children:"Delete"})},"delete")]})]})},e)})),Wi="_chatRename_1go1y_1";function $i({id:e,name:t,onComplete:n}){const{renameChat:r}=ki(),a=(0,s.useRef)(null);(0,s.useLayoutEffect)((()=>{if(a.current){const e=requestAnimationFrame((()=>{var e;null==(e=a.current)||e.focus()}));return()=>cancelAnimationFrame(e)}}),[]);const o=t=>{const a=t.currentTarget.value.trim();a&&r(e,a),n(!!a)};return(0,i.jsx)("div",{className:Wi,children:(0,i.jsx)(sa.n,{ref:a,helperMessage:"Type a new chat name. Press Enter to confirm. Press Esc to cancel.",label:"Chat name",type:"text",isRequired:!0,defaultValue:t,onBlur:e=>o(e),onKeyDown:e=>{"Enter"===e.key?(e.preventDefault(),e.stopPropagation(),o(e)):"Escape"===e.key&&n(!1)},labelDisplay:"hidden"})})}const Gi="_hiddenElementStyle_n69is_1";function Vi({chat:e,chatTimeRange:t,onDelete:n,onSelect:r}){const[a,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)(""),[d,u]=(0,s.useState)(!1),g=(0,s.useRef)(null);return(0,s.useEffect)((()=>{if(c){const e=setTimeout((()=>l("")),500);return()=>clearTimeout(e)}}),[c]),(0,s.useLayoutEffect)((()=>{var e;d&&(null==(e=g.current)||e.focus(),u(!1))}),[d]),(0,i.jsxs)(i.Fragment,{children:[a?(0,i.jsx)($i,{id:e.id,name:e.name,onComplete:e=>{o(!1),e&&(l("Chat renamed"),u(!0))}},e.id):(0,i.jsx)(Hi,{ref:g,chatTimeRange:t,id:e.id,name:e.name,onEdit:()=>o(!0),onDelete:n,onSelect:r},e.id),(0,i.jsx)("div",{role:"status","aria-live":"polite",className:Gi,children:c})]})}const Zi="_chatGroupHeading_1gfig_1";function qi(e){switch(e){case"Today":return"today";case"Last 7 days":return"last_7_days";case"Last 30 days":return"last_30_days";default:return"other"}}function Ki({title:e,chats:t,onDelete:n,onSelect:r}){return(0,i.jsxs)(u.x,{as:"div",width:"full",children:[(0,i.jsx)(R.X,{as:"h3",variant:"text-xsmall",color:"base-subdued",margin:2,className:Zi,children:e}),t.map((t=>(0,i.jsx)(Vi,{chat:t,chatTimeRange:qi(e),onDelete:n,onSelect:r},t.id)))]})}const Ji=(0,i.jsxs)("svg",{width:"80",height:"80",viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.71428 43.2002C6.55837 43.2002 4 45.7586 4 48.9145L4 73.6002L11.7109 68.8759H36.6857C39.8416 68.8759 42.4 66.3175 42.4 63.1616V48.9145C42.4 45.7586 39.8416 43.2002 36.6857 43.2002H9.71428Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 48.9145C3.5 45.4824 6.28223 42.7002 9.71428 42.7002H36.6857C40.1178 42.7002 42.9 45.4824 42.9 48.9145V63.1616C42.9 66.5936 40.1178 69.3759 36.6857 69.3759H11.8519L4.26121 74.0265C4.1069 74.1211 3.91356 74.1249 3.75567 74.0364C3.59778 73.948 3.5 73.7812 3.5 73.6002V48.9145ZM9.71428 43.7002C6.83451 43.7002 4.5 46.0347 4.5 48.9145V72.7075L11.4497 68.4495C11.5283 68.4014 11.6187 68.3759 11.7109 68.3759H36.6857C39.5655 68.3759 41.9 66.0414 41.9 63.1616V48.9145C41.9 46.0347 39.5655 43.7002 36.6857 43.7002H9.71428Z",fill:"#1C1C1C"}),(0,i.jsx)("path",{d:"M34.4004 58.7002C34.6764 58.7003 34.9004 58.9241 34.9004 59.2002C34.9002 59.4761 34.6763 59.7 34.4004 59.7002H12L11.8994 59.6904C11.6718 59.6438 11.5002 59.4416 11.5 59.2002C11.5 58.9586 11.6716 58.7566 11.8994 58.71L12 58.7002H34.4004ZM34.4004 52.2998C34.6764 52.3 34.9004 52.5238 34.9004 52.7998C34.9004 53.0758 34.6764 53.2997 34.4004 53.2998H12L11.8994 53.29C11.6716 53.2434 11.5 53.0414 11.5 52.7998C11.5 52.5582 11.6716 52.3562 11.8994 52.3096L12 52.2998H34.4004Z",fill:"#1C1C1C"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M70.2857 6.40039C73.4416 6.40039 76 8.95876 76 12.1147L76 53.7604L64.1123 46.4004H22.5143C19.3584 46.4004 16.8 43.842 16.8 40.6861V12.1147C16.8 8.95876 19.3584 6.40039 22.5143 6.40039H70.2857Z",fill:"white"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M76.5 12.1147C76.5 8.68262 73.7178 5.90039 70.2857 5.90039H22.5143C19.0822 5.90039 16.3 8.68262 16.3 12.1147V40.6861C16.3 44.1182 19.0822 46.9004 22.5143 46.9004H63.9701L75.7368 54.1855C75.891 54.281 76.0849 54.2855 76.2433 54.1972C76.4018 54.1089 76.5 53.9418 76.5 53.7604V12.1147ZM70.2857 6.90039C73.1655 6.90039 75.5 9.23491 75.5 12.1147V52.8628L64.3755 45.9753C64.2964 45.9263 64.2053 45.9004 64.1123 45.9004H22.5143C19.6345 45.9004 17.3 43.5659 17.3 40.6861V12.1147C17.3 9.23491 19.6345 6.90039 22.5143 6.90039H70.2857Z",fill:"#1C1C1C"}),(0,i.jsx)("path",{d:"M46.3996 39.1996C53.4689 39.1996 59.1996 33.4689 59.1996 26.3996C59.1996 19.3304 53.4689 13.5996 46.3996 13.5996C39.3304 13.5996 33.5996 19.3304 33.5996 26.3996C33.5996 33.4689 39.3304 39.1996 46.3996 39.1996Z",fill:"#00E0AC"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M46.3996 14.0996C39.6065 14.0996 34.0996 19.6065 34.0996 26.3996C34.0996 33.1927 39.6065 38.6996 46.3996 38.6996C53.1927 38.6996 58.6996 33.1927 58.6996 26.3996C58.6996 19.6065 53.1927 14.0996 46.3996 14.0996ZM33.0996 26.3996C33.0996 19.0542 39.0542 13.0996 46.3996 13.0996C53.745 13.0996 59.6996 19.0542 59.6996 26.3996C59.6996 33.745 53.745 39.6996 46.3996 39.6996C39.0542 39.6996 33.0996 33.745 33.0996 26.3996Z",fill:"#1C1C1C"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M53.5812 21.7802C53.7765 21.9755 53.7765 22.2921 53.5812 22.4873L44.6944 31.3742L40.0742 26.754C39.8789 26.5587 39.8789 26.2421 40.0742 26.0469C40.2694 25.8516 40.586 25.8516 40.7813 26.0469L44.6944 29.96L52.8741 21.7802C53.0694 21.585 53.3859 21.585 53.5812 21.7802Z",fill:"#1C1C1C"})]});function Xi({onCreate:e}){const{trackClicked:t}=Li(oi.ChatHistoryCreate,{});return(0,i.jsxs)(o.k,{direction:"column",padding:6,gap:6,align:"center",justify:"center",flex:"1 1 0%",children:[Ji,(0,i.jsxs)(u.x,{children:[(0,i.jsx)(R.X,{as:"h3",variant:"heading-small",align:"center",children:"No chats yet"}),(0,i.jsx)(c.x,{as:"p",variant:"text-small",color:"base-subdued",align:"center",children:"You can find a list of your chats here."})]}),(0,i.jsx)(E.z,{onClick:()=>{t(),e()},children:"Start a chat"})]})}const Yi="_chatHistory_1wqog_1";function Qi({onDelete:e,onSelect:t,onCreate:n}){const{chats:r}=ki(),{today:a,last7Days:s,last30Days:c,monthly:l,yearly:d}=function(e){e.sort(((e,t)=>new Date(t.lastUpdatedTime).getTime()-new Date(e.lastUpdatedTime).getTime()));const t=new Date,n={today:[],last7Days:[],last30Days:[],monthly:{},yearly:{}};return e.forEach((e=>{const r=new Date(e.lastUpdatedTime),a=(t.getTime()-r.getTime())/864e5;if(a<=1)n.today.push(e);else if(a<=7)n.last7Days.push(e);else if(a<=30)n.last30Days.push(e);else{const a=r.getFullYear();if(t.getFullYear()===a){const t=r.toLocaleString("default",{month:"long"});n.monthly[t]||(n.monthly[t]=[]),n.monthly[t].push(e)}else n.yearly[a]||(n.yearly[a]=[]),n.yearly[a].push(e)}})),n}(r),u=[["Today",a],["Last 7 days",s],["Last 30 days",c],...Object.entries(l),...Object.entries(d)];return 0===r.length?(0,i.jsx)(Xi,{onCreate:n}):(0,i.jsx)(o.k,{direction:"column",flex:"1",gap:3,className:Yi,children:u.filter((([,e])=>e.length>0)).map((([n,r])=>(0,i.jsx)(Ki,{title:n,chats:r,onDelete:e,onSelect:t},n)))})}const es="_chatHistoryModal_jgsq2_1";function ts({commandExecutor:e,coordinatorAgentId:t}){const{closeModal:n}=bi();return(0,i.jsx)("div",{className:es,children:(0,i.jsx)(Qi,{onDelete:n=>{const r={kind:di.Event,event:{kind:gi.ChatDeleted,chatId:n}},a={kind:li.MessageAgent,agentId:t,message:r};e.execute(a)},onSelect:r=>{n(),e.execute({kind:li.OpenCoordinatorAgent}),e.execute({kind:li.MessageAgent,agentId:t,message:{kind:di.Command,command:{kind:ui.OpenChat,chatId:r}}})},onCreate:()=>{n(),e.execute({kind:li.OpenCoordinatorAgent})}})})}function ns({commandExecutor:e,coordinatorAgentId:t}){const{showModal:n}=bi();return(0,i.jsx)(l.h,{variant:"tertiary",icon:kn.F_,size:"small",accessibilityLabel:"Your chats",onClick:()=>{n({content:(0,i.jsx)(ts,{commandExecutor:e,coordinatorAgentId:t}),title:"Your chats"})}})}const rs="_sidebar_tozyd_1",as="_goBrandingSidebar_tozyd_15",is="_header_tozyd_19",ss="_main_tozyd_24",os="_footer_tozyd_31",cs=({children:e,footer:t,includeChatHistory:n,commandExecutor:r,coordinatorAgentId:a,goBrandingEnabled:s})=>{const o=aa(rs,s&&as);return(0,i.jsxs)("div",{className:o,children:[(0,i.jsx)("div",{className:is,children:n&&(0,i.jsx)(ns,{commandExecutor:r,coordinatorAgentId:a})}),(0,i.jsx)("div",{className:ss,children:e}),t&&(0,i.jsx)("div",{className:os,children:t})]})};var ls,ds,us={exports:{}},gs=us.exports={};function hs(){throw new Error("setTimeout has not been defined")}function ps(){throw new Error("clearTimeout has not been defined")}function fs(e){if(ls===setTimeout)return setTimeout(e,0);if((ls===hs||!ls)&&setTimeout)return ls=setTimeout,setTimeout(e,0);try{return ls(e,0)}catch{try{return ls.call(null,e,0)}catch{return ls.call(this,e,0)}}}!function(){try{ls="function"==typeof setTimeout?setTimeout:hs}catch{ls=hs}try{ds="function"==typeof clearTimeout?clearTimeout:ps}catch{ds=ps}}();var ms,vs=[],xs=!1,bs=-1;function Cs(){!xs||!ms||(xs=!1,ms.length?vs=ms.concat(vs):bs=-1,vs.length&&ys())}function ys(){if(!xs){var e=fs(Cs);xs=!0;for(var t=vs.length;t;){for(ms=vs,vs=[];++bs<t;)ms&&ms[bs].run();bs=-1,t=vs.length}ms=null,xs=!1,function(e){if(ds===clearTimeout)return clearTimeout(e);if((ds===ps||!ds)&&clearTimeout)return ds=clearTimeout,clearTimeout(e);try{ds(e)}catch{try{return ds.call(null,e)}catch{return ds.call(this,e)}}}(e)}}function ks(e,t){this.fun=e,this.array=t}function ws(){}gs.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];vs.push(new ks(e,t)),1===vs.length&&!xs&&fs(ys)},ks.prototype.run=function(){this.fun.apply(null,this.array)},gs.title="browser",gs.browser=!0,gs.env={},gs.argv=[],gs.version="",gs.versions={},gs.on=ws,gs.addListener=ws,gs.once=ws,gs.off=ws,gs.removeListener=ws,gs.removeAllListeners=ws,gs.emit=ws,gs.prependListener=ws,gs.prependOnceListener=ws,gs.listeners=function(e){return[]},gs.binding=function(e){throw new Error("process.binding is not supported")},gs.cwd=function(){return"/"},gs.chdir=function(e){throw new Error("process.chdir is not supported")},gs.umask=function(){return 0};var js=us.exports;const Ss=6168==n.j?function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(js):null;function Is(e){return(t,n,r)=>e(((e,r,a)=>{const i=n();t(e,r);const s=n();console.debug("[Assistant Store Logger]",{action:a??"anonymous",prevState:i,nextState:s})}),n,r)}const As=({set:e,chatService:t})=>{const n=new Set;return{chatHistory:{chats:{},initialize:async()=>{const n=await t.getAllChatsMetadata();e((e=>({chatHistory:{...e.chatHistory,chats:n}})),!1,"initialize")},renameChat:(e,n)=>{t.updateChatMetadata(e,{name:n,userEditedTitle:!0})},deleteChat:e=>{t.deleteChat(e)},subscribeToChatEvents:()=>{const r=({id:t,metadata:n})=>{e((e=>({chatHistory:{...e.chatHistory,chats:{...e.chatHistory.chats,[t]:n}}})),!1,"handleChatMetadataUpdated")};n.add(t.updates.on("chatCreated",r)),n.add(t.updates.on("chatMetadataUpdated",r)),n.add(t.updates.on("chatDeleted",(({id:t})=>{e((e=>({chatHistory:{...e.chatHistory,chats:Object.fromEntries(Object.entries(e.chatHistory.chats).filter((([e])=>e!==t)))}})),!1,"handleChatDeleted")})))},unsubscribeFromChatEvents:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}};var Es=(e=>(e.default="default",e.text_selection="text_selection",e))(Es||{}),_s=(e=>(e.AppContent="app_content",e.TextSelection="text_selection",e))(_s||{});function Ms(e){if(!e)return null;switch(e.type){case _s.AppContent:return e.context;case _s.TextSelection:return e.context.textSelection;default:return null}}function Rs(e){return!!e&&Os(e)&&"loaded"===e.status}const Ds=(e,t)=>Object.fromEntries(Object.entries(e).filter((([e])=>e!==t))),Os=e=>!!e&&e.type===_s.AppContent,Ts=e=>!!e&&e.type===_s.TextSelection,Ls=e=>({id:e.id,type:_s.TextSelection,context:e,lastUpdated:new Date}),Ps=({set:e,get:t,services:n})=>{var r,a;const i=new Set,s=null==(r=n.context.appContext)?void 0:r.getInitialContextId(),o=s?null==(a=n.context.appContext)?void 0:a.getAppContext(s):void 0,c=(null==o?void 0:o.textSelection)&&!(0,La.ID)(null==o?void 0:o.textSelection),l={};c&&(l[Es.text_selection]=Ls(o));const d=[Es.default];return c&&d.push(Es.text_selection),{contextExtraction:{currentAppId:s??Es.default,contextSources:l,selectedContextSourceIds:d,documentContextState:{...n.context.documentContext.state},attachContext:(n,r)=>{const a=t().contextExtraction.contextSources[r];a&&(t().tracking.addContext(n,a.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:[...e.contextExtraction.selectedContextSourceIds.slice(0,-1),r]}})),!1,"attachContext"))},detachCurrentContext:(n,r)=>{const a=t().contextExtraction.contextSources[r];a&&t().tracking.removeContext(n,a.type),e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds.filter((e=>e!==r))}})),!1,"detachCurrentContext")},extractCurrentContext:t=>{var r;if(null!==t){e(function(e){return t=>({...t,contextExtraction:{...t.contextExtraction,currentAppId:e}})}(t),!1,"setCurrentAppId");try{const a=null==(r=n.context.appContext)?void 0:r.getAppContext(t);e(function(e){const t=e.id;return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[t]:{type:_s.AppContent,appId:t,id:t,status:"loaded",context:e,error:null,lastUpdated:new Date}}}})}(a),!1,"extractCurrentContext")}catch(n){e(function(e,t){return n=>({...n,contextExtraction:{...n.contextExtraction,contextSources:{...n.contextExtraction.contextSources,[e]:{type:_s.AppContent,appId:e,id:e,status:"error",context:null,error:t,lastUpdated:new Date}}}})}(t,n),!1,"extractCurrentContext")}}else console.warn("No window ID provided to extractCurrentContext")},resetContextSource:()=>{const n=t().contextExtraction.selectedContextSourceIds.includes(Es.text_selection)&&!!t().contextExtraction.contextSources[Es.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,selectedContextSourceIds:n?[Es.default,Es.text_selection]:[Es.default]}})),!1,"resetContextSource")},getCurrentAppContext:()=>function(e){const{contextSources:t,selectedContextSourceIds:n}=e.contextExtraction,r=n[n.length-1];if(r===Es.text_selection)return Ms(t[r]);const a=e.contextExtraction.currentAppId,i=e.contextExtraction.contextSources[a];return i?Ms(i):null}(t()),getSelectedContextId:()=>{const{selectedContextSourceIds:e}=t().contextExtraction;return e[e.length-1]},subscribeToExternalEvents:()=>{n.context.appContext&&(i.add(n.context.appContext.on("contextAvailable",(e=>{t().contextExtraction.extractCurrentContext(e.id)}))),i.add(n.context.appContext.on("contextInvalidated",(n=>{e((e=>({contextExtraction:{...e.contextExtraction,contextSources:Ds(e.contextExtraction.contextSources,n),selectedContextSourceIds:t().contextExtraction.selectedContextSourceIds.filter((e=>e!==n))}})),!1,"removeAppContext")}))),i.add(n.context.appContext.on("selectionChange",(({context:n})=>{const{textSelection:r}=n,a=!r||(0,La.ID)(r),{[Es.text_selection]:i,...s}=t().contextExtraction.contextSources,o=a?s:{...s,[Es.text_selection]:Ls(n)},c=t().contextExtraction.selectedContextSourceIds.filter((e=>e!==Es.text_selection)),l=a?c:[...c,Es.text_selection];e((e=>({contextExtraction:{...e.contextExtraction,contextSources:o,selectedContextSourceIds:l}})),!1,"textSelectionChange")}))),i.add(n.context.documentContext.on("documentContextStateUpdated",(()=>{e((e=>({contextExtraction:{...e.contextExtraction,documentContextState:{...n.context.documentContext.state}}})))}))))},unsubscribeFromExternalEvents:()=>{i.forEach((e=>{e.dispose()})),i.clear()},insertArtifact:(e,t,r)=>n.context.documentContext.state.isAvailable?n.context.documentContext.write(e,{chatId:t,messageId:r}):Promise.resolve()}}};var Ns,Bs,Fs,zs,Us,Hs,Ws,$s,Gs,Vs,Zs,qs,Ks,Js,Xs,Ys,Qs,eo,to,no,ro,ao,io,so;class oo{constructor(e){ni(this,zs),ni(this,Ns,new Map),ni(this,Bs,new a.v),ni(this,Fs),ri(this,Fs,e)}register(e){if(!e.id)throw new Error("Option must have a non-empty id");ti(this,Ns).set(e.id,e),ti(this,Bs).emit("registered",e),ti(this,Bs).emit("optionsChanged",this.getOptions())}unregister(e){if(!e)throw new Error("Option ID must be provided");ti(this,Ns).delete(e)&&(ti(this,Bs).emit("unregistered",e),ti(this,Bs).emit("optionsChanged",this.getOptions()))}getOptions(){return Array.from(ti(this,Ns).values())}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>ai(this,zs,Us).call(this,t,e))).filter((e=>null!==e))}execute(e){ti(this,Fs).execute(e.command)}on(e,t){return ti(this,Bs).on(e,t)}dispose(){ti(this,Ns).clear()}}Ns=new WeakMap,Bs=new WeakMap,Fs=new WeakMap,zs=new WeakSet,Us=function(e,t){try{return{id:e.id,label:ai(this,zs,Hs).call(this,e.label,t),icon:ai(this,zs,Hs).call(this,e.icon,t),command:ai(this,zs,Hs).call(this,e.command,t)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),null}},Hs=function(e,t){return"function"==typeof e?e(t):e};class co extends(6168==n.j?oo:null){constructor(e,t){super(e),ni(this,Vs),ni(this,Ws,new a.v),ni(this,$s,new Map),ni(this,Gs),ri(this,Gs,t),ai(this,Vs,Zs).call(this)}updateAgentHandles(){for(const[e,t]of ti(this,Gs).entries())ti(this,$s).has(e)||ai(this,Vs,qs).call(this,e,t);for(const e of ti(this,$s).keys())ti(this,Gs).has(e)||ai(this,Vs,Ks).call(this,e);ti(this,Ws).emit("optionsChanged",this.getOptions())}on(e,t){return ti(this,Ws).on(e,t)}getOptions(){return[...super.getOptions(),...ai(this,Vs,Js).call(this)]}resolveOptions(e){return this.getOptions().filter((t=>{try{return t.rule(e)}catch(e){return console.warn(`Error evaluating rule for option ${t.id}:`,e),!1}})).map((t=>ai(this,Vs,Qs).call(this,t,e)))}dispose(){for(const e of ti(this,$s).values())e.forEach((e=>e.dispose()));ti(this,$s).clear()}}Ws=new WeakMap,$s=new WeakMap,Gs=new WeakMap,Vs=new WeakSet,Zs=function(){for(const[e,t]of ti(this,Gs).entries())ai(this,Vs,qs).call(this,e,t)},qs=function(e,t){const n=[];n.push(t.on("registered",(t=>{ti(this,Ws).emit("registered",ai(this,Vs,Xs).call(this,t,e))}))),n.push(t.on("unregistered",(t=>{ti(this,Ws).emit("unregistered",ai(this,Vs,Ys).call(this,t,e))}))),n.push(t.on("optionsChanged",(()=>{ti(this,Ws).emit("optionsChanged",this.getOptions())}))),ti(this,$s).set(e,n)},Ks=function(e){const t=ti(this,$s).get(e);t&&(t.forEach((e=>e.dispose())),ti(this,$s).delete(e))},Js=function(){return Array.from(ti(this,Gs).entries()).flatMap((([e,t])=>t.getOptions().map((t=>ai(this,Vs,Xs).call(this,t,e)))))},Xs=function(e,t){return{...e,id:ai(this,Vs,Ys).call(this,e.id,t)}},Ys=function(e,t){return`${t}/${e}`},Qs=function(e,t){try{return{...e,label:ai(this,Vs,eo).call(this,e.label,t,"Untitled Option"),icon:ai(this,Vs,eo).call(this,e.icon,t,void 0),command:ai(this,Vs,eo).call(this,e.command,t,"function"==typeof e.command?e.command():e.command)}}catch(t){return console.warn(`Error resolving option ${e.id}:`,t),{id:e.id,label:"Error resolving option",icon:void 0,command:"function"==typeof e.command?e.command():e.command}}},eo=function(e,t,n){if("function"==typeof e)try{return e(t)}catch(e){return console.warn("Error resolving deferred value:",e),n}return e};class lo{constructor(e,t){ni(this,io),ni(this,to,new Map),ni(this,no),ni(this,ro),ni(this,ao),ri(this,ro,e),ri(this,ao,t),ri(this,no,new co(t,ti(this,to)))}getAgentHandle(e){return ai(this,io,so).call(this,e)}getAgentIds(){return Array.from(ti(this,to).keys())}getAgentCount(){return ti(this,to).size}hasAgent(e){return e===ti(this,ro)||ti(this,to).has(e)}removeAgent(e){if(e===ti(this,ro))throw new Error("Cannot remove the coordinator agent");const t=ti(this,to).delete(e);return t&&ti(this,no).updateAgentHandles(),t}clear(){ti(this,to).clear(),ti(this,no).updateAgentHandles()}dispose(){ti(this,to).forEach((e=>e.dispose())),ti(this,to).clear(),ti(this,no).dispose()}}function uo(e,t,n=[]){const r=s.useMemo((()=>new lo(e,t)),[e,t]);return s.useEffect((()=>()=>{r.dispose()}),[r]),s.useEffect((()=>(n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).register(function(e,t){return e.icon?e:{...e,icon:t.renderIcon({size:"medium"})}}(t,e))}))})),()=>{n.forEach((e=>{var t;null==(t=e.contextualOptions)||t.forEach((t=>{r.getAgentHandle(e.id).unregister(t.id)}))}))})),[n,r]),r}function go(e,t){const[n,r]=s.useState({status:"loading",data:null,error:null});return s.useEffect((()=>{const t=new AbortController;return r({status:"loading",data:null,error:null}),e(t).then((e=>{t.signal.aborted||r({status:"success",data:e,error:null})})).catch((e=>{t.signal.aborted||r({status:"error",data:null,error:e})})),()=>{t.abort()}}),t),n}function ho(e){switch(e){case"summarize":case"summarizeChat":case"summarizeEmail":case"summarizeWindow":return"Summarize this for me";case"improve":return"Improve this text";case"replyChat":return"Give me some ways I can reply to this chat";case"replyEmail":return"Give me some ways I can reply to this email";case"helpBrainstorm":return"Help me brainstorm";case"createResearchPlan":return"Create a research plan";case"makeFriendlier":return"Make it sound friendlier";case"makeNextStepsClear":return"Make next steps clear";case"shortenAndRemoveJargon":return"Shorten and remove jargon";case"translate":return"Translate this text";default:(0,r.vE)(e)}}to=new WeakMap,no=new WeakMap,ro=new WeakMap,ao=new WeakMap,io=new WeakSet,so=function(e){if(e===ti(this,ro))return ti(this,no);if(!ti(this,to).has(e)){const t=new oo(ti(this,ao));ti(this,to).set(e,t),ti(this,no).updateAgentHandles()}const t=ti(this,to).get(e);if(!t)throw new Error(`Agent handle for agent ${e} not found`);return t};const po={isAvailable:e=>(0,Pa.Ot)(e)&&"aiEditor"===e.app,getActions:()=>[{kind:"helpBrainstorm",icon:"chatAgent",label:"Start brainstorming",predefinedPrompt:ho("helpBrainstorm")},{kind:"createResearchPlan",icon:"chatAgent",label:"Create research plan",predefinedPrompt:ho("createResearchPlan")},{kind:"makeFriendlier",icon:"chatAgent",label:"Sound friendlier",predefinedPrompt:ho("makeFriendlier")}]},fo={isAvailable:()=>!0,getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this page",predefinedPrompt:ho("summarizeWindow")}]},mo={isAvailable:e=>(0,Pa.Ot)(e)&&/docs\.google\.com/.test(e.origin),getActions:()=>[{kind:"summarizeWindow",icon:"summarize",label:"Summarize this document",predefinedPrompt:ho("summarizeWindow")}]},vo=({isAvailable:e})=>({isAvailable:e,getActions:()=>[{kind:"summarizeEmail",icon:"summarize",label:"Summarize this thread",predefinedPrompt:ho("summarizeEmail")}]}),xo=vo({isAvailable:e=>(0,Pa.Ot)(e)&&/mail\.google\.com/.test(e.origin)}),bo=[/outlook\.office\.com/,/outlook\.live\.com/,/outlook\.office365\.com/,/outlook\.office365\.us/],Co=vo({isAvailable:e=>(0,Pa.Ot)(e)&&bo.some((t=>t.test(e.origin)))}),yo={isAvailable:e=>(0,Pa.Ot)(e)&&!!e.textSelection,getActions:()=>[{kind:"improve",icon:"improve",label:"Improve this text",predefinedPrompt:ho("improve")},{kind:"summarize",icon:"summarize",label:"Summarize this text",predefinedPrompt:ho("summarize")}]},ko={isAvailable:e=>(0,Pa.Ot)(e)&&(e=>e.startsWith("https://superhuman.com/superhuman-go-intro"))(e.origin),getActions:()=>[{kind:"summarize",icon:"chatAgent",label:"Summarize this text",predefinedPrompt:ho("summarize")},{kind:"shortenAndRemoveJargon",icon:"chatAgent",label:"Shorten and remove jargon",predefinedPrompt:ho("shortenAndRemoveJargon")}]},wo={isAvailable:e=>(0,Pa.Ot)(e)&&/mail\.superhuman\.com/.test(e.origin),getActions:()=>[]},jo=vo({isAvailable:e=>(0,Pa.Ot)(e)&&/mail\.yahoo\.com/.test(e.origin)}),So=[yo,jo,Co,xo,mo,po,ko,wo,fo];class Io{constructor(e=So){this._rules=e}resolve(e){if(!e)return Promise.resolve([]);const t=this._rules.find((t=>t.isAvailable(e)));return Promise.resolve(t?t.getActions(e):[])}}function Ao(){const e=s.useRef(new Io),t=function(){const{contextualOptionsRegistry:e}=mi(),[t,n]=s.useState([]);return s.useEffect((()=>{if(!e)return;n(e.resolveOptions());const t=e.on("optionsChanged",(()=>n(e.resolveOptions())));return()=>{t.dispose()}}),[e]),t}(),n=yi((e=>{const t=e.contextExtraction.currentAppId,n=e.contextExtraction.selectedContextSourceIds,r=e.contextExtraction.contextSources,a=n.includes(Es.text_selection)?r[Es.text_selection]:r[t];return Os(a)?a:Ts(a)?{status:"loaded",error:null,context:a.context}:{status:"error",error:new Error("No context source found"),context:null}})),r=go((async()=>"loaded"!==n.status?[]:e.current.resolve(n.context)),[n.status,n.context]),a=s.useMemo((()=>function(e,t){return"error"===e.status?{status:"error",error:e.error,actions:null}:"error"===t.status?{status:"error",error:t.error,actions:null}:"loading"===t.status?{status:"loading",error:null,actions:null}:{status:"loaded",error:null,actions:t.data}}(n,r)),[n,r]);if("loaded"===a.status){const e=[...a.actions,...Eo(t)].slice(0,4);return{...a,actions:e}}return a}function Eo(e){return e.map((e=>({kind:"assistantCommand",icon:e.icon,label:e.label,command:e.command})))}function _o(){const{extractCurrentContext:e,subscribeToExternalEvents:t,unsubscribeFromExternalEvents:n,currentAppId:r}=yi((e=>({currentAppId:e.contextExtraction.currentAppId,extractCurrentContext:e.contextExtraction.extractCurrentContext,subscribeToExternalEvents:e.contextExtraction.subscribeToExternalEvents,unsubscribeFromExternalEvents:e.contextExtraction.unsubscribeFromExternalEvents})));s.useEffect((()=>(e(r),t(),()=>{n()})),[e,t,n,r])}const Mo=({services:e,get:t,set:n})=>{const r=new Set;return{tracking:{responseStreamingStartTime:null,responseStreamingStarted:()=>{n((e=>({tracking:{...e.tracking,responseStreamingStartTime:performance.now()}})),!1,"responseStreamingStarted")},responseCopied:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(ci.ResponseCopied,{chatId:t,responseLength:n,messageId:r})},responseStreamed:({chatId:r,message:a,previousVersion:i})=>{var s;if("assistant"===a.type&&"final"!==a.kind||"assistant"!==a.type&&"error"!==a.type)return;const o=t().tracking.responseStreamingStartTime;if(o){const t="assistant"===a.type?a.content.length:(null==(s=null==i?void 0:i.content)?void 0:s.length)||0,c=a.type,l="error"===c?"failed":"loaded",d="error"===c?a.title:void 0,u="error"===c?a.errorType:void 0,g=performance.now()-o;e.tracking.trackEvent(ci.ResponseStreamingCompleted,{chatId:r,messageId:a.id,durationMs:g,contentLength:t,result:l,error:d,errorType:u}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStreamed")}},responseStoppedByUser:({chatId:r,lastMessage:a})=>{const i=t().tracking.responseStreamingStartTime,s=i?performance.now()-i:void 0;a&&e.tracking.trackEvent(ci.ResponseStoppedByUser,{chatId:r,payload:{messageId:a.id,durationMs:s,contentLength:a.content.length||0}}),n((e=>({tracking:{...e.tracking,responseStreamingStartTime:null}})),!1,"responseStoppedByUser")},messageSubmitted:({chatId:t,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:i})=>{a.predefinedPromptKind?e.tracking.trackEvent(ci.PredefinedPromptSubmitted,{chatId:t,contextualActionKind:a.predefinedPromptKind,payload:{messageId:n,messageCount:i}}):e.tracking.trackEvent(ci.MessageSubmitted,{chatId:t,messageLength:r.length,payload:{messageId:n,messageCount:i}})},responseInserted:({chatId:t,responseLength:n,messageId:r})=>{e.tracking.trackEvent(ci.ResponseInserted,{chatId:t,responseLength:n,messageId:r})},trackComponentEvent:({componentId:t,event:n,detail:r})=>{e.tracking.trackEvent(ci.ComponentInteraction,{componentId:t,event:n,detail:r})},subscribeToChatEvents:()=>{r.add(e.chat.updates.on("chatMessageStreamed",(({id:e,message:n,previousVersion:r})=>{t().tracking.responseStreamed({chatId:e,message:n,previousVersion:r})}))),r.add(e.chat.updates.on("userMessageSent",(({id:e,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:i})=>{t().tracking.responseStreamingStarted(),t().tracking.messageSubmitted({chatId:e,responseMessageId:n,content:r,messageOptions:a,messageCountBeforeSend:i})})))},addContext:(t,n)=>{var r,a;null==(a=(r=e.tracking).addContext)||a.call(r,t,n)},removeContext:(t,n)=>{var r,a;null==(a=(r=e.tracking).removeContext)||a.call(r,t,n)},unsubscribeFromChatEvents:()=>{r.forEach((e=>{e.dispose()})),r.clear()}}}},Ro=({set:e,get:t,services:n})=>{const r=new Set;return{chat:{activeChats:{},createNewChat:t=>{var r,a;const i=null==(a=(r=n.chat).createDraft)?void 0:a.call(r);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[t]:{id:i?i.metadata.id:"",messages:i?i.messages:[],draft:i}}}})),!1,"createNewChat")},setActiveChat:async(r,a)=>{var i;if(!n.chat.doesChatExist(a))return void t().chat.createNewChat(r);if((null==(i=t().chat.activeChats[r])?void 0:i.id)===a)return;const s=await n.chat.getChatMessages(a);e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:a,messages:s,draft:void 0}}}})),!1,"setActiveChat")},sendMessage:(r,a,i={},s)=>{const o=t().chat.activeChats[r];if(!o)return;let c=o.id;(o.draft||!c)&&(c=n.chat.createChat(o.draft),e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[r]:{id:c,messages:[],draft:void 0}}}})),!1,"sendMessage")),n.chat.sendMessage(c,a,i,s)},stopStreamingResponse:e=>{var r;const a=null==(r=t().chat.activeChats[e])?void 0:r.id;a&&n.chat.stopStreamingResponse(a)},retryMessage:e=>{var r;const a=null==(r=t().chat.activeChats[e])?void 0:r.id;a&&n.chat.retryMessage(a)},subscribeToChatEvents:a=>{r.add(n.chat.updates.on("chatMessagesUpdated",(({id:n,messages:r})=>{var i;n===(null==(i=t().chat.activeChats[a])?void 0:i.id)&&e((e=>({chat:{...e.chat,activeChats:{...e.chat.activeChats,[a]:{...e.chat.activeChats[a],messages:r}}}})),!1,"chatMessagesUpdated")})))},unsubscribeFromChatEvents:()=>{r.forEach((e=>{e.dispose()})),r.clear()}}}};var Do,Oo=Object.defineProperty,To=Object.defineProperties,Lo=Object.getOwnPropertyDescriptors,Po=Object.getOwnPropertySymbols,No=Object.prototype.hasOwnProperty,Bo=Object.prototype.propertyIsEnumerable,Fo=(e,t,n)=>t in e?Oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zo=(e=>(e[e.TRACE=0]="TRACE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL",e[e.OFF=6]="OFF",e))(zo||{});(e=>{e.fromString=function(e){switch(e){case"TRACE":return 0;case"DEBUG":return 1;case"INFO":return 2;case"WARN":return 3;case"ERROR":return 4;case"FATAL":return 5;case"OFF":return 6;default:throw new TypeError(`Unrecognized log level string '${e}'`)}}})(zo||(zo={})),(e=>{var t;function n(e){return t=>{let n=0;if(null==t||0===t.length)return e;for(let e=0;e<t.length;e++)n=t.charCodeAt(e)+((n<<5)-n),n&=n;return n=(n%50+50)%50,((e,t)=>To(e,Lo(t)))(((e,t)=>{for(var n in t||(t={}))No.call(t,n)&&Fo(e,n,t[n]);if(Po)for(var n of Po(t))Bo.call(t,n)&&Fo(e,n,t[n]);return e})({},e),{lightness:e.lightness-n})}}(t=e.HSL||(e.HSL={})).getContrastTextColor=e=>({hue:0,saturation:0,lightness:e.lightness>50?0:100}),t.toString=e=>`hsl(${e.hue}, ${e.saturation}%, ${e.lightness}%)`,(e=>{e.base={hue:43,saturation:74,lightness:66},e.getColor=n(e.base)})(e.Model||(e.Model={})),(e=>{e.base={hue:12,saturation:76,lightness:61},e.getColor=n(e.base)})(e.ViewModel||(e.ViewModel={})),(e=>{e.base={hue:173,saturation:58,lightness:39},e.getColor=n(e.base)})(e.Manager||(e.Manager={}))})(Do||(Do={}));var Uo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof self<"u"?self:{},Ho={};!function(e){var t=Uo&&Uo.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)(r||!(a in t))&&(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(e,"__esModule",{value:!0}),e.dual=e.getEndomorphismMonoid=e.SK=e.hole=e.constVoid=e.constUndefined=e.constNull=e.constFalse=e.constTrue=e.unsafeCoerce=e.apply=e.getRing=e.getSemiring=e.getMonoid=e.getSemigroup=e.getBooleanAlgebra=void 0,e.identity=n,e.constant=r,e.flip=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length>1?e(t[1],t[0]):function(n){return e(n)(t[0])}}},e.flow=a,e.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},e.increment=function(e){return e+1},e.decrement=function(e){return e-1},e.absurd=i,e.tupled=function(e){return function(t){return e.apply(void 0,t)}},e.untupled=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e(t)}},e.pipe=function(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return n(t(e));case 4:return r(n(t(e)));case 5:return a(r(n(t(e))));case 6:return i(a(r(n(t(e)))));case 7:return s(i(a(r(n(t(e))))));case 8:return o(s(i(a(r(n(t(e)))))));case 9:return c(o(s(i(a(r(n(t(e))))))));default:for(var l=arguments[0],d=1;d<arguments.length;d++)l=arguments[d](l);return l}},e.not=function(e){return function(t){return!e(t)}};e.getBooleanAlgebra=function(e){return function(){return{meet:function(t,n){return function(r){return e.meet(t(r),n(r))}},join:function(t,n){return function(r){return e.join(t(r),n(r))}},zero:function(){return e.zero},one:function(){return e.one},implies:function(t,n){return function(r){return e.implies(t(r),n(r))}},not:function(t){return function(n){return e.not(t(n))}}}}};e.getSemigroup=function(e){return function(){return{concat:function(t,n){return function(r){return e.concat(t(r),n(r))}}}}};e.getMonoid=function(t){var n=(0,e.getSemigroup)(t);return function(){return{concat:n().concat,empty:function(){return t.empty}}}};e.getSemiring=function(e){return{add:function(t,n){return function(r){return e.add(t(r),n(r))}},zero:function(){return e.zero},mul:function(t,n){return function(r){return e.mul(t(r),n(r))}},one:function(){return e.one}}};e.getRing=function(t){var n=(0,e.getSemiring)(t);return{add:n.add,mul:n.mul,one:n.one,zero:n.zero,sub:function(e,n){return function(r){return t.sub(e(r),n(r))}}}};function n(e){return e}function r(e){return function(){return e}}function a(e,t,n,r,a,i,s,o,c){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return n(t(e.apply(this,arguments)))};case 4:return function(){return r(n(t(e.apply(this,arguments))))};case 5:return function(){return a(r(n(t(e.apply(this,arguments)))))};case 6:return function(){return i(a(r(n(t(e.apply(this,arguments))))))};case 7:return function(){return s(i(a(r(n(t(e.apply(this,arguments)))))))};case 8:return function(){return o(s(i(a(r(n(t(e.apply(this,arguments))))))))};case 9:return function(){return c(o(s(i(a(r(n(t(e.apply(this,arguments)))))))))}}}function i(e){throw new Error("Called `absurd` function which should be uncallable")}e.apply=function(e){return function(t){return t(e)}},e.unsafeCoerce=n,e.constTrue=r(!0),e.constFalse=r(!1),e.constNull=r(null),e.constUndefined=r(void 0),e.constVoid=e.constUndefined,e.hole=i;e.SK=function(e,t){return t};e.getEndomorphismMonoid=function(){return{concat:function(e,t){return a(e,t)},empty:n}};e.dual=function(e,n){var r="number"==typeof e?function(t){return t.length>=e}:e;return function(){var e=Array.from(arguments);return r(arguments)?n.apply(this,e):function(r){return n.apply(void 0,t([r],e,!1))}}}}(Ho);var Wo,$o,Go=Object.defineProperty,Vo=Object.defineProperties,Zo=Object.getOwnPropertyDescriptors,qo=Object.getOwnPropertySymbols,Ko=Object.prototype.hasOwnProperty,Jo=Object.prototype.propertyIsEnumerable,Xo=(e,t,n)=>t in e?Go(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;(e=>{e.isErrorLike=function(e){const t=e;return null!=t&&(void 0!==t.message&&void 0!==t.name||void 0!==t.stack)}})(Wo||(Wo={})),(e=>{function t(e,r){if(null==e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e)return e;if("object"==typeof e){if(e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e.toString();if(e instanceof Set)return Array.from(e,(e=>t(e,r)));if(e instanceof Map)return Array.from(e).reduce(((e,[n,a])=>((e,t)=>Vo(e,Zo(t)))(((e,t)=>{for(var n in t||(t={}))Ko.call(t,n)&&Xo(e,n,t[n]);if(qo)for(var n of qo(t))Jo.call(t,n)&&Xo(e,n,t[n]);return e})({},e),{[n]:t(a,r)})),{});if(-1===r.indexOf(e)){r.push(e);const t=n(e,r,Wo.isErrorLike(e));return Object.keys(t).length>0?t:e}}}function n(e,n,r){if(!e)return{};const a={};return(r?Object.getOwnPropertyNames:Object.keys)(e).forEach((r=>{const i=e[r];a[r]=t(i,n)})),a}e.fromAny=function(e){return n(e,[e],Wo.isErrorLike(e))}})($o||($o={}));const Yo=/^(?!\.[\w])[\w.]*\w$/;function Qo(e){if(""===e)throw new Error("Empty name");if(!Yo.test(e))throw new Error(`Invalid name: ${e}. Should be hierarchical dot separated string and may contain only word characters)`)}const ec=function(e="(nomessage)"){Error.call(this,e),this.stack=(new Error).stack,this.message=e,this.name=this.constructor.name};ec.prototype=Object.create(Error.prototype);let tc=class extends ec{};class nc{constructor(e,t){if(this.messageCount=e,this.timeframe=t,e<1)throw new tc("messagesCount should be > 1");if(t<=0)throw new tc("timeframe should be > 0");this._allowance=e,this._lastChecked=Date.now()}hit(){const e=Date.now(),t=e-this._lastChecked;return this._lastChecked=e,this._allowance+=t*(this.messageCount/this.timeframe),this._allowance>this.messageCount&&(this._allowance=this.messageCount),!(this._allowance<1)&&(this._allowance-=1,!0)}toString(){return`[ messageCount: ${this.messageCount}, timeframe: ${this.timeframe}, allowance: ${Math.trunc(1e3*this._allowance)/1e3}, _lastCheck: ${this._lastChecked}]`}}(e=>{e.RateLimitIndicator=class{constructor(e,t){if(this._limiter=e,this._cooldownTime=t,this._lastLimiting=0,this._aboveThreshold=!1,t<0)throw new tc("cooldownTime should be non-negative")}hit(){const e=this._limiter.hit();let t=!1;return e?this._aboveThreshold&&Date.now()-this._cooldownTime>this._lastLimiting&&(this._aboveThreshold=!1,t=!0):(this._lastLimiting=Date.now(),this._aboveThreshold||(this._aboveThreshold=!0,t=!0)),{allow:e,aboveThreshold:this._aboveThreshold,wasTriggered:t}}}})(nc||(nc={}));class rc{constructor(e,t,n,r="."){this.name=e,this.timersSink=t,this.countersSink=n,this._nameSeparator=r,Qo(e)}getMetric(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}get parent(){const e=this.name.lastIndexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?void 0:new rc(t,this.timersSink,this.countersSink,this._nameSeparator)}get root(){const e=this.name.indexOf(this._nameSeparator),t=this.name.substring(0,-1===e?0:e);return""===t?this:new rc(t,this.timersSink,this.countersSink,this._nameSeparator)}createName(e){return this.name+this._nameSeparator+e}start(){const e=Date.now(),t=this;return{stop(){t.recordTime(Date.now()-e)}}}recordTime(e){this.timersSink(this.name,e)}timing(e){const t=this.start();try{return e()}finally{try{t.stop()}catch{}}}increment(e=1){this.countersSink(this.name,e)}decrement(e=1){this.increment(-e)}createChild(e){return new rc(this.createName(e),this.timersSink,this.countersSink,this._nameSeparator)}}let ac=class extends rc{constructor(e){super("MP",((t,n)=>e("TIMER: "+t+" = "+n)),((t,n)=>e("COUNTER: "+t+" = "+n)),".")}},ic=class e{static getRootMetric(){return null==e._metricsRoot&&(console.warn("[WARNING] Using default timeseries implementation."),e._metricsRoot=new ac(console.log)),e._metricsRoot}static configure(t){e._metricsRoot=t}},sc=class e{constructor(e,t,n,r,a,i,s,o){this.level=e,this.message=t,this.logger=n,this.timestamp=r,this.exception=a,this.extra=i,this.context=s,this.logColor=o}dropContext(){return new e(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,this.logColor)}addContext(t){return new e(this.level,this.message,this.logger,this.timestamp,this.exception,this.extra,t,this.logColor)}changeLogger(t){return new e(this.level,this.message,t,this.timestamp,this.exception,this.extra,this.context)}};(e=>{e.show=e=>`[${e.logger}]: ${zo[e.level]} : ${e.message} ${e.extra?JSON.stringify(e.extra):""} ${e.exception?JSON.stringify(e.exception):""}`})(sc||(sc={}));let oc=class e extends rc{constructor(e,t){super(e,((e,n)=>t("TIMER: "+e+" = "+n)),((e,n)=>t("COUNTER: "+e+" = "+n)),"_"),this.name=e,this._fn=t}setContext(e){return console.log(this.name,e),this}getMetric(e){return this.createChild(e)}getCounter(e){return this.createChild(e)}getTimer(e){return this.createChild(e)}createChild(t){return new e(this.createName(t),this._fn)}createName(e){return this.name+"_"+e}},cc=class e{static getRootMetric(){return null==e._femetricsRoot&&(console.warn("[WARNING] Using default femetrics timeseries implementation."),e._femetricsRoot=new oc("FM",console.log)),e._femetricsRoot}static configure(t){e._femetricsRoot=t}};class lc{constructor(e,t,n,r){this.name=e,this.level=t,this.context=n,this.logColor=r,Qo(e)}isEnabled(e){return e>=this.level}handler(e,t){return{trace:n=>{throw this.trace(e,n,t),n},debug:n=>{throw this.debug(e,n,t),n},info:n=>{throw this.info(e,n,t),n},warn:n=>{throw this.warn(e,n,t),n},error:n=>{throw this.error(e,n,t),n},fatal:n=>{throw this.fatal(e,n,t),n}}}trace(e,t,n){this.log(zo.TRACE,e,t,n)}debug(e,t,n){this.log(zo.DEBUG,e,t,n)}info(e,t,n){this.log(zo.INFO,e,t,n)}warn(e,t,n){this.log(zo.WARN,e,t,n)}error(e,t,n){this.log(zo.ERROR,e,t,n)}fatal(e,t,n){this.log(zo.FATAL,e,t,n)}log(e,t,n,r){this.isEnabled(e)&&(n&&r||Wo.isErrorLike(n)?this.logImpl(e,t,n,r):this.logImpl(e,t,void 0,r??n))}}class dc{constructor(e){this.parent=e,this._context=void 0}get(){const e=this.parent&&this.parent.get(),t=this._context;return e||t?Object.assign({},e,t):void 0}add(e){this._context=Object.assign({},this._context,e)}remove(e){this._context&&e.forEach((e=>{e in this._context&&delete this._context[e]}))}clear(){this._context=void 0}}class uc extends lc{constructor(e,t,n,r,a){super(e,t,r||new dc,a),this.appender=n,this.logColor=a}getLogger(e,t,n){return new uc(this.name+"."+e,t??this.level,this.appender,new dc(this.context),n)}logImpl(e,t,n,r){const a=new sc(e,t,this.name,Date.now(),n,r,this.context.get());try{this.appender(a)}catch(e){console.trace("Failed processing log event",e);try{gc.printToConsole(a)}catch(e){console.error("No luck. Can't print the event",e)}}}}class gc extends uc{constructor(e,t,n){super(e,t,(e=>e.level>=t&&gc.printToConsole(e)),n)}static printToConsole(e){let t=console.log;t=e.level<=zo.TRACE||e.level<=zo.DEBUG?"function"==typeof console.debug?console.debug:console.log:e.level<=zo.INFO?console.log:e.level<=zo.WARN?console.warn:console.error,t.apply(console,(e.logColor?[...gc._getStyledLoggerName(e),`${zo[e.level]} : ${e.message}`,e.exception,e.extra]:[`[${e.logger}]: ${zo[e.level]} : ${e.message}`,e.exception,e.extra]).filter((e=>!!e)))}static _getStyledLoggerName(e){const t=Ho.pipe(Do.HSL.getContrastTextColor(e.logColor),Do.HSL.toString),n=Do.HSL.toString(e.logColor);return[`%c${e.logger}`,`color:${t};padding:4px;background:${n};border-radius:4px`]}}class hc{static getRootLogger(){return null==hc._rootLogger&&(hc._rootLogger=hc._createDefaultRootLogger(),hc._rootLogger.warn("Using DEFAULT root logger")),hc._rootLogger}static configure(e){hc._rootLogger=e,hc._rootLogger.debug("ROOT logger changed",e)}static _createDefaultRootLogger(){return new gc("DEFAULT",zo.DEBUG)}}const pc=zo;var fc;(e=>{const t=class e{static configureLogLevelGetter(t){e._getLogLevel=t}static get root(){return hc.getRootLogger()}static getLogger(t,n,r){const a=e._getLogLevel(t,n),i=e.root.getLogger(t,e._getLogLevel(t,n),r);return n!==a&&i.debug(`Logger "${t}" initialized with level "${null!=a&&pc[a]}" instead of "${null!=n&&pc[n]}"`),i}};t._getLogLevel=(e,t)=>t;let n=t;e.Logging=n;e.TimeSeries=class{static get root(){return ic.getRootMetric()}static get rootFemetrics(){return cc.getRootMetric()}}})(fc||(fc={}));const mc=({services:e,set:t})=>{const n=n=>{if(e.agentDirectory)try{const r=e.agentDirectory.listInstalledAgents();t((e=>({agentDirectory:{...e.agentDirectory,installedAgents:r.map((e=>({id:e.id,title:e.name,hasData:e.hasData,renderPanel:e.renderPanel,renderIcon:vc(e),isPaidAgentFreeInBeta:e.isPaidAgentFreeInBeta})))}})),!1,n)}catch(e){fc.Logging.getLogger("agentDirectorySlice").error("Error updating installed agent state:",e)}};return{agentDirectory:{installedAgents:[],subscribeToAgentStateChanges:()=>{if(!e.agentDirectory)return xc;const r=e.agentDirectory.onStateUpdated((()=>n("agentStateChanged"))),a=e.agentDirectory.onInstalledAgentsOrderChanged((e=>{t((t=>{const n=new Map(t.agentDirectory.installedAgents.map((e=>[e.id,e]))),r=e.map((e=>n.get(e))).filter((e=>void 0!==e));return{agentDirectory:{...t.agentDirectory,installedAgents:r}}}),!1,"handleInstalledAgentsOrderChanged")}));return()=>{r(),a()}},loadInstalledAgents:()=>{n("loadInstalledAgents")}}}},vc=e=>({size:t="large",goBrandingEnabled:n=!1})=>(0,i.jsx)(rr,{agent:e,size:t,goBrandingEnabled:n}),xc=()=>{};var bc=(e=>(e.SuggestionsSummary="suggestionsSummary",e.AcceptAllSuggestions="acceptAllSuggestions",e.ManageAgents="manageAgents",e.NativeInstallFlow="nativeInstallFlow",e.AgentDirectory="agentDirectory",e.FirstPartyPackAgents="firstPartyPackAgents",e.GoBranding="goBranding",e.AgentWebStoreProfile="agentWebStoreProfile",e.CertifiedAgentsOnly="certifiedAgentsOnly",e.ApplyClientSideAgentDirectorySorting="applyClientSideAgentDirectorySorting",e.ContextSelectorRedesign="contextSelectorRedesign",e))(bc||{});const Cc={acceptAllSuggestions:!1,agentDirectory:!1,agentWebStoreProfile:!1,certifiedAgentsOnly:!1,firstPartyPackAgents:!1,goBranding:!1,manageAgents:!1,nativeInstallFlow:!1,suggestionsSummary:!1,applyClientSideAgentDirectorySorting:!1,contextSelectorRedesign:!1};class yc{constructor(e={}){this.togglesState={...Cc,...e}}isFeatureEnabled(e){return this.togglesState[e]}}const kc=({services:e})=>({featureToggle:e.featureToggle??new yc}),wc=({set:e,services:t})=>{const n=new Set;return{inProductMessaging:{messages:{},get:async(n,r)=>{var a;const i=await(null==(a=t.inProductMessaging)?void 0:a.get(n,r));e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[n]:i}}})),!1,"get")},trackImpression:(e,n,r)=>{var a;null==(a=t.inProductMessaging)||a.trackImpression(e,n,r)},subscribeToUpdates:()=>{var r;const a=null==(r=t.inProductMessaging)?void 0:r.on("update",(({slot:t,message:n})=>{e((e=>({inProductMessaging:{...e.inProductMessaging,messages:{...e.inProductMessaging.messages,[t]:n}}})))}));a&&n.add(a)},unsubscribeFromUpdates:()=>{n.forEach((e=>{e.dispose()})),n.clear()}}}},jc=({services:e})=>{var t,n,r,a;return{suggestions:{onUpdate:t=>{var n;return(null==(n=e.suggestions)?void 0:n.on("update",t))??{dispose:Sc}},focusSuggestions:(null==(t=e.suggestions)?void 0:t.focusSuggestions)??Sc,hasSuggestion:(null==(n=e.suggestions)?void 0:n.hasSuggestion)??(()=>!1),applyAllSuggestions:(null==(r=e.suggestions)?void 0:r.applyAllSuggestions)??Sc,dismissAllSuggestions:(null==(a=e.suggestions)?void 0:a.dismissAllSuggestions)??Sc}}},Sc=()=>{};function Ic({chatService:e,contextService:t,trackingService:n,featureToggleService:r,suggestionsService:a,agentDirectoryService:o,inProductMessagingService:c,children:l}){const d=(0,s.useMemo)((()=>(e=>{const t="dev"===Ss.env.NODE_ENV?Is:e=>e;return(0,Ta.M)()(t(((t,n)=>({...As({chatService:e.chat,set:t}),...Mo({services:e,set:t,get:n}),...Ro({services:e,set:t,get:n}),...kc({services:e}),...jc({services:e}),...mc({services:e,set:t,get:n}),...wc({services:e,set:t}),...Ps({services:e,set:t,get:n})}))))})({chat:e,context:t,tracking:n,featureToggle:r,suggestions:a,agentDirectory:o,inProductMessaging:c})),[e,t,n,r,a,o,c]);return(0,i.jsx)(Ci.Provider,{value:d,children:(0,i.jsx)(Ac,{children:l})})}function Ac({children:e}){return(()=>{const{subscribeToAgentStateChanges:e,loadInstalledAgents:t}=_i();(0,s.useEffect)((()=>{t();const n=e();return()=>{n()}}),[t,e])})(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t,initialize:n}=ki();(0,s.useEffect)((()=>(n(),e(),()=>{t()})),[n,e,t])}(),function(){const{subscribeToUpdates:e,unsubscribeFromUpdates:t}=yi((e=>e.inProductMessaging));(0,s.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),function(){const{subscribeToChatEvents:e,unsubscribeFromChatEvents:t}=Si();(0,s.useEffect)((()=>(e(),()=>{t()})),[e,t])}(),e}function Ec(){var e;return null==(e=(0,s.useContext)(Ri))?void 0:e.experimental_agentDirectory}class _c{constructor(e){this.assistantTrackingService=e}trackEvent(e,t){this.assistantTrackingService.trackEvent(e,t)}}function Mc({commandExecutor:e,selectedAgentId:t,coordinatorAgentId:n}){const{showModal:r,closeModal:a,isOpen:o}=bi(),c=Ec(),l=Di(),d=Ii(),u=d.isFeatureEnabled(bc.NativeInstallFlow),g=d.isFeatureEnabled(bc.ManageAgents),h=d.isFeatureEnabled(bc.FirstPartyPackAgents),p=d.isFeatureEnabled(bc.AgentWebStoreProfile),f=d.isFeatureEnabled(bc.CertifiedAgentsOnly),m=fc.Logging.getLogger("useOpenAgentDirectory"),v=d.isFeatureEnabled(bc.GoBranding),x=(0,s.useCallback)((t=>{if((0,yn.kq)(t)&&(null==c||!c.isAgentInstalled(t)))return void m.info("Agent not installed but called to open from agent directory");let n=t;if(h&&(0,yn.kq)(t)){const e=(0,yn.HS)(t);e&&(n=e)}e.execute({kind:li.OpenAgent,agentId:n}),a()}),[c,h,e,a,m]),b=(0,s.useCallback)((e=>{if(!c||o)return;const s=l?new _c(l):void 0;r({content:(0,i.jsx)(ra,{agentDirectoryService:c,trackingService:s,onOpenAgent:x,closeModal:a,initialView:e,shouldUseNativeInstallFlow:u,shouldShowManageAgents:g,isFirstPartyPackAgentsEnabled:h,enableAgentWebStoreProfile:p,certifiedAgentsOnly:f,selectedAgentId:t&&(0,yn.d1)(t)?t:void 0,coordinatorAgentId:n&&(0,yn.d1)(n)?n:void 0,goBrandingEnabled:v}),hideDefaultHeader:!0})}),[c,l,r,a,x,u,g,h,p,f,o,t,n,v]);return{openAgentDirectory:(0,s.useCallback)((()=>{b({type:On.Directory})}),[b]),openAgentDirectoryModal:b,handleOpenAgent:x}}function Rc(e){return"agent"===e.type}const Dc={agentNamesOverlay:"_agentNamesOverlay_3k0dd_1",agentName:"_agentName_3k0dd_1"},Oc=({allItems:e,hoveredAgentId:t,selectedAgentId:n,showTopChevron:r,showBottomChevron:a,onHover:o,onSelectItem:l,onScroll:d,scrollContainerRef:u,closeOnAgentReselect:g=!0,onOpenAgentDirectory:h})=>{const p=(0,s.useRef)(null),{trackingRef:f}=Oi(oi.AgentBenchLabelsOverlay,{agentId:t??""}),m=(0,s.useCallback)((e=>{p.current=e,f(e)}),[]),{overlayHeight:v,marginTop:x,marginBottom:b}=(({scrollContainerRef:e,overlayRef:t,showTopChevron:n,showBottomChevron:r})=>{const[a,i]=(0,s.useState)(0),{marginTop:o,marginBottom:c}=(0,s.useMemo)((()=>({marginTop:n?48:4,marginBottom:r?48:4})),[n,r]);return(0,s.useEffect)((()=>{const n=e.current,r=t.current;if(!n||!r)return;i(n.clientHeight);const a=()=>{r.scrollTop=n.scrollTop};return a(),n.addEventListener("scroll",a,{passive:!0}),()=>{n.removeEventListener("scroll",a)}}),[e,n,r,t]),{overlayHeight:a,marginTop:o,marginBottom:c}})({scrollContainerRef:u,overlayRef:p,showTopChevron:r,showBottomChevron:a});return u.current?(0,i.jsx)("div",{ref:m,onScroll:()=>{var e;return d((null==(e=p.current)?void 0:e.scrollTop)??0)},className:Dc.agentNamesOverlay,"data-testid":"agent-names-overlay",style:{maxHeight:v,marginTop:x,marginBottom:b},children:e.map((e=>{const r=Rc(e)?e.item.id:e.id,a=Rc(e)?e.item.title:e.title,s=r===t,d=r===n,u=g||!d,p=aa(Dc.agentName,{[Dc.agentNameHovered]:s,[Dc.agentNameSelected]:d,[Dc.agentNameSubdued]:!s&&!d});return(0,i.jsx)("div",{className:Dc.agentName,style:{minHeight:"32px",marginBottom:"8px",cursor:u?"pointer":"default"},onMouseEnter:()=>o(r),onClick:()=>{!function(e){return"directory"===e.type}(e)?l(r):null==h||h()},children:(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",weight:"medium",color:s||d?"base-default":"base-subdued",className:p,children:a})},r)}))}):null};var Tc=(e=>(e.AgentNoticeCard="AgentNoticeCard",e.AddDataSourcePopover="AddDataSourcePopover",e.FindMoreAgentsPopover="FindMoreAgentsPopover",e.AgentHeaderNoticeCard="AgentHeaderNoticeCard",e))(Tc||{});const Lc=e=>{var t;const n=null==(t=(0,s.useContext)(Ri))?void 0:t.pushedContentService;return n?n.getCollection(e).view((e=>Ba.$.values(e))).view((e=>e.map((e=>e.notification.notificationElement.promotion)).filter((e=>void 0!==e)))):Ua.h.create([])},Pc=({promotions:e,commandExecutor:t})=>{const[n,r]=(0,s.useState)(!0),a=(0,za.K)(e).at(0),l={promotedAgentId:(null==a?void 0:a.agentId)??""},{trackClicked:d}=Li(oi.DiscoverabilityPanelFooterAcceptButton,l),{trackClicked:h}=Li(oi.DiscoverabilityPanelFooterDismissButton,l),{trackingRef:w}=Oi(oi.DiscoverabilityPanelFooter,l,!0),j=void 0!==a,{icon:S,name:I}=(e=>{switch(e){case"AIGrader":return{icon:v._,name:"AI Grader"};case"aiDetector":return{icon:m.b,name:"AI Detector"};case"citationFinder":return{icon:x.k,name:"Citations Finder"};case"expertPanel":return{icon:k.F,name:"Expert Panel"};case"humanizer":return{icon:y.i,name:"Humanizer"};case"paraphraser":return{icon:b.y,name:"Paraphraser"};case"plagiarism":return{icon:f.L,name:"Plagiarism Checker"};case"proofreader":return{icon:p.O,name:"Proofreader"};case"readerReactions":return{icon:C.Q,name:"Reader Reactions"};default:return{icon:void 0,name:void 0}}})(null==a?void 0:a.agentId);return(0,i.jsx)(o.k,{padding:4,ref:a&&w,alignSelf:"center",bgColor:"background-base-default",style:{position:"absolute",bottom:0,visibility:j&&n?"visible":"hidden"},children:(0,i.jsx)(u.x,{borderRadius:2,bgColor:"neutral-gray-0",padding:3,children:(0,i.jsxs)(o.k,{gap:2,children:[S&&(0,i.jsx)(g.J,{icon:S,size:"medium",accessibilityLabel:""}),(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"p",variant:"text-xsmall",children:null==a?void 0:a.message}),(0,i.jsxs)(o.k,{gap:1,marginTop:1,children:[(0,i.jsxs)(E.z,{variant:"primary",onClick:()=>{a&&(t.execute({kind:li.OpenAgent,agentId:a.agentId}),d(),r(!1))},children:["Try ",I]}),(0,i.jsx)(E.z,{variant:"tertiary",onClick:()=>{h(),r(!1)},children:"Not now"})]})]})]})})})},Nc="_discoverabilityPopup_19yoh_1",Bc=({children:e,agents:t,promotions:n,hoveredAgentId:r,setHoveredAgentId:a})=>{const[o,l]=(0,s.useState)(!0),[d,u]=(0,s.useState)(!1),g=(0,za.K)(n).at(0),h=void 0!==g,{setAnchorRef:p,setContentRef:f}=((e,t)=>{const[n,r]=(0,s.useState)(null),[a,i]=(0,s.useState)(null);return(0,s.useEffect)((()=>{var r,i;const s=e.findIndex((e=>"agent"===e.type&&e.item.id===(null==t?void 0:t.agentId))),o=null==n?void 0:n.getBoundingClientRect();if(-1!==s&&e.length&&o&&o.height&&o.top){const t=o.height/e.length*(s-.5)+o.top,n=null==(i=null==(r=null==a?void 0:a.parentElement)?void 0:r.parentElement)?void 0:i.parentElement;n&&(n.style.top=`${t}px`)}}),[e,t,n,a]),{setAnchorRef:r,setContentRef:i}})(t,g),{trackingRef:m}=Oi(oi.DiscoverabilityPopup,{promotedAgentId:(null==g?void 0:g.agentId)??""},!0);return(0,i.jsxs)(oa.J,{placement:"left",open:h&&o&&(!r||d),onOpenChange:l,dismissOnOutsideClick:!1,children:[(0,i.jsx)(oa.J.Anchor,{ref:e=>p(e),children:e}),(0,i.jsx)(oa.J.Content,{width:248,onMouseEnter:()=>{u(!0),a(null)},onMouseLeave:()=>{u(!1),a(r)},className:Nc,accessibilityLabel:`Popup: ${null==g?void 0:g.message}`,children:(0,i.jsx)(c.x,{as:"p",variant:"text-small",ref:e=>{g&&m(e),f(e)},children:null==g?void 0:g.message})})]})},Fc="_chevronButton_1kx4f_1",zc="_disabled_1kx4f_5",Uc=()=>(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M16.7068 13.2929C17.0973 13.6834 17.0973 14.3164 16.7068 14.707C16.3162 15.0974 15.6832 15.0975 15.2927 14.707L11.9997 11.414L8.70675 14.707L8.63058 14.7753C8.23781 15.0956 7.65878 15.073 7.29269 14.707C6.9266 14.3409 6.90406 13.7618 7.22433 13.3691L7.29269 13.2929L11.2927 9.29289C11.6832 8.90237 12.3162 8.90237 12.7068 9.29289L16.7068 13.2929Z",fill:"#707070"})}),Hc=()=>(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M7.29314 10.707C6.90261 10.3164 6.90261 9.68343 7.29314 9.29291C7.68367 8.90247 8.31671 8.90241 8.7072 9.29291L12.0002 12.5859L15.2931 9.29291L15.3693 9.22455C15.7621 8.90428 16.3411 8.92682 16.7072 9.29291C17.0733 9.659 17.0958 10.238 16.7756 10.6308L16.7072 10.707L12.7072 14.707C12.3167 15.0975 11.6837 15.0975 11.2931 14.707L7.29314 10.707Z",fill:"#707070"})}),Wc=({direction:e,onClick:t,disabled:n=!1,className:r})=>{const a=aa(Fc,r,{[zc]:n});return(0,i.jsx)(E.z,{className:a,onClick:()=>{n||t()},disabled:n,size:"small",variant:"ghost",style:{height:"32px",width:"32px",padding:"4px",marginTop:"up"===e?"4px":"",marginBottom:"down"===e?"4px":""},accessibilityLabel:`Scroll ${e}`,children:"up"===e?(0,i.jsx)(Uc,{}):(0,i.jsx)(Hc,{})})};function $c({containerHeight:e,totalItemsCount:t,itemHeight:n}){const r=(0,s.useRef)(null),[a,i]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),l=t*n>e,{scrollUp:d,scrollDown:u}=function(e){const{itemHeight:t}=e,n=(0,s.useCallback)(((e,n)=>{const r=Math.min(.8*e.clientHeight,3*t),a="up"===n?Math.max(0,e.scrollTop-r):Math.min(e.scrollHeight-e.clientHeight,e.scrollTop+r);e.scrollTo({top:a,behavior:"smooth"})}),[t]);return{scrollUp:(0,s.useCallback)((e=>n(e,"up")),[n]),scrollDown:(0,s.useCallback)((e=>n(e,"down")),[n])}}({itemHeight:n}),g=(0,s.useCallback)((()=>{const e=r.current;if(!e)return;const{isAtTop:t,isAtBottom:n}=(e=>{const{scrollTop:t,scrollHeight:n,clientHeight:r}=e;return{isAtTop:t<=1,isAtBottom:t+r>=n-1}})(e);l?(i(!t),c(!n)):(i(!1),c(!1))}),[l]);(0,s.useEffect)((()=>{g()}),[e,g]);const h=(0,s.useCallback)((()=>{const e=r.current;e&&d(e)}),[d]),p=(0,s.useCallback)((()=>{const e=r.current;e&&u(e)}),[u]);return{showTopChevron:a,showBottomChevron:o,scrollContainerRef:r,handleScroll:g,handleScrollUp:h,handleScrollDown:p}}function Gc(e){const[t,n]=(0,s.useState)(!1),r=(0,s.useCallback)(((e,t)=>{if("onscrollend"in e){const n=()=>{t(),e.removeEventListener("scrollend",n)};e.addEventListener("scrollend",n)}else setTimeout(t,500)}),[]);return{handleOverlayScroll:(0,s.useCallback)((n=>{e.current&&!t&&(e.current.scrollTop=n)}),[t]),handleChevronScroll:(0,s.useCallback)((t=>{n(!0),t(),e.current&&r(e.current,(()=>{n(!1)}))}),[r])}}function Vc(e,t){const n=Ii();return(0,s.useMemo)((()=>{if(!n.isFeatureEnabled(bc.FirstPartyPackAgents))return[...e,...t];const r=function(e,t){const n=new Map(t.map((e=>[e.id,e])));return e.map((e=>{const t=(0,yn.Cb)(e.id);if(!t)return e;const r=n.get(t);return r?{...e,title:r.title,renderIcon:r.renderIcon,isPaidAgentFreeInBeta:r.isPaidAgentFreeInBeta}:e}))}(e,t);return function(e,t){const n=new Set(t.map((e=>e.id))),r=new Set(e.map((e=>e.id)));if(!e.some((e=>{const t=(0,yn.Cb)(e.id);return t&&n.has(t)})))return[...e,...t];const a=new Map(e.map((e=>[e.id,e]))),i=[];return t.forEach((e=>{const t=(0,yn.HS)(e.id);if(t&&r.has(t)){const e=a.get(t);e&&i.push(e)}else(0,yn.xt)(e.id)||i.push(e)})),i}(r,t)}),[e,t,n])}const Zc="_agentBenchContainer_qf12b_1",qc="_scrollContainer_qf12b_8",Kc="_agentBench_qf12b_1",Jc="_agentBenchWithGoBranding_qf12b_26",Xc="_itemsContainer_qf12b_29",Yc="_topChevron_qf12b_37",Qc="_bottomChevron_qf12b_38",el=({children:e,totalItemsCount:t,allItems:n,hoveredAgentId:r,selectedAgentId:a,setHoveredAgentId:c,onSelectItem:l,closeOnAgentReselect:d=!0,onOpenAgentDirectory:u})=>{const g=(0,s.useRef)(null),h=(0,s.useRef)(null),{height:p=0}=(0,Na.yU)({ref:g,box:"content-box"}),{showTopChevron:f,showBottomChevron:m,scrollContainerRef:v,handleScroll:x,handleScrollUp:b,handleScrollDown:C}=$c({containerHeight:p,totalItemsCount:t,itemHeight:40}),{handleOverlayScroll:y,handleChevronScroll:k}=Gc(v),w=aa(Kc,[Jc]),j=Lc(Fa.z.isBenchPopup);return(0,i.jsx)("div",{ref:g,className:Zc,onMouseLeave:()=>c(null),children:(0,i.jsxs)(o.k,{ref:h,direction:"column",elevation:"low",gap:2,align:"center",className:w,children:[f&&(0,i.jsx)(Wc,{direction:"up",onClick:()=>k(b),className:Yc,"data-testid":"chevron-up"}),null!==r&&(0,i.jsx)(Oc,{allItems:n,hoveredAgentId:r,selectedAgentId:a,showTopChevron:f,showBottomChevron:m,onHover:c,onSelectItem:l,onScroll:y,scrollContainerRef:v,closeOnAgentReselect:d,onOpenAgentDirectory:u}),(0,i.jsx)(Bc,{agents:n,promotions:j,hoveredAgentId:r,setHoveredAgentId:c,children:(0,i.jsx)("div",{ref:v,className:qc,style:{padding:"4px"},onScroll:x,"data-testid":"scroll-container",children:(0,i.jsx)("div",{className:Xc,children:e})})}),m&&(0,i.jsx)(Wc,{direction:"down",onClick:()=>k(C),className:Qc,"data-testid":"chevron-down"})]})})},tl=(0,i.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{filter:"url(#filter0_d_8766_21194)",children:[(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#533192"}),(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8766_21194)",fillOpacity:"0.2"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8766_21194)",strokeOpacity:"0.4"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_8766_21194",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8766_21194"}),(0,i.jsx)("feOffset",{dy:"3"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.443137 0 0 0 0 0.298039 0 0 0 0 0.713726 0 0 0 1 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8766_21194"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8766_21194",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_8766_21194",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),nl=(0,i.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{filter:"url(#filter0_d_8765_20981)",children:[(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#D4C7FF"}),(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_8765_20981)",fillOpacity:"0.6"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#9E7BE0"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_8765_20981)",strokeOpacity:"0.4"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_8765_20981",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_8765_20981"}),(0,i.jsx)("feOffset",{dy:"3"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.701774 0 0 0 0 0.548002 0 0 0 0 1 0 0 0 0.4 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_8765_20981"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_8765_20981",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_8765_20981",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),rl=(0,i.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{filter:"url(#filter0_d_10515_13844)",children:[(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13844)",fillOpacity:"0.2",shapeRendering:"crispEdges"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694",shapeRendering:"crispEdges"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13844)",strokeOpacity:"0.4",shapeRendering:"crispEdges"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_10515_13844",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13844"}),(0,i.jsx)("feOffset",{dy:"3"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.141176 0 0 0 0 0.670588 0 0 0 0 0.607843 0 0 0 0.4 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13844"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13844",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#17A695",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#16A694"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_10515_13844",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#19A796"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#17A695"})]})]})]}),al=(0,i.jsxs)("svg",{width:"44",height:"44",viewBox:"0 0 44 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsxs)("g",{filter:"url(#filter0_d_10515_13842)",children:[(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"#B1F0E8"}),(0,i.jsx)("path",{d:"M6 19C6 13.3995 6 10.5992 7.08993 8.46009C8.04867 6.57847 9.57847 5.04867 11.4601 4.08993C13.5992 3 16.3995 3 22 3C27.6005 3 30.4008 3 32.5399 4.08993C34.4215 5.04867 35.9513 6.57847 36.9101 8.46009C38 10.5992 38 13.3995 38 19C38 24.6005 38 27.4008 36.9101 29.5399C35.9513 31.4215 34.4215 32.9513 32.5399 33.9101C30.4008 35 27.6005 35 22 35C16.3995 35 13.5992 35 11.4601 33.9101C9.57847 32.9513 8.04867 31.4215 7.08993 29.5399C6 27.4008 6 24.6005 6 19Z",fill:"url(#paint0_linear_10515_13842)",fillOpacity:"0.6"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"#15A694"}),(0,i.jsx)("path",{d:"M22 3.5C24.8085 3.5 26.8849 3.50057 28.5273 3.63477C30.1637 3.76846 31.3253 4.03224 32.3125 4.53516C34.1 5.44595 35.554 6.89996 36.4648 8.6875C36.9678 9.67471 37.2315 10.8363 37.3652 12.4727C37.4994 14.1151 37.5 16.1915 37.5 19C37.5 21.8085 37.4994 23.8849 37.3652 25.5273C37.2315 27.1637 36.9678 28.3253 36.4648 29.3125C35.554 31.1 34.1 32.554 32.3125 33.4648C31.3253 33.9678 30.1637 34.2315 28.5273 34.3652C26.8849 34.4994 24.8085 34.5 22 34.5C19.1915 34.5 17.1151 34.4994 15.4727 34.3652C13.8363 34.2315 12.6747 33.9678 11.6875 33.4648C9.89996 32.554 8.44595 31.1 7.53516 29.3125C7.03224 28.3253 6.76846 27.1637 6.63477 25.5273C6.50057 23.8849 6.5 21.8085 6.5 19C6.5 16.1915 6.50057 14.1151 6.63477 12.4727C6.76846 10.8363 7.03224 9.67471 7.53516 8.6875C8.44595 6.89996 9.89996 5.44595 11.6875 4.53516C12.6747 4.03224 13.8363 3.76846 15.4727 3.63477C17.1151 3.50057 19.1915 3.5 22 3.5Z",stroke:"url(#paint1_linear_10515_13842)",strokeOpacity:"0.4"})]}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("filter",{id:"filter0_d_10515_13842",x:"0",y:"0",width:"44",height:"44",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,i.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,i.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,i.jsx)("feMorphology",{radius:"2",operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_10515_13842"}),(0,i.jsx)("feOffset",{dy:"3"}),(0,i.jsx)("feGaussianBlur",{stdDeviation:"4"}),(0,i.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,i.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.137255 0 0 0 0 0.670588 0 0 0 0 0.603922 0 0 0 0.4 0"}),(0,i.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_10515_13842"}),(0,i.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_10515_13842",result:"shape"})]}),(0,i.jsxs)("linearGradient",{id:"paint0_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_10515_13842",x1:"22",y1:"3",x2:"22",y2:"35",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#F7F5FF",stopOpacity:"0"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#F7F5FF"})]})]})]}),il=({goBrandingEnabled:e})=>{const{scheme:t}=(0,ca.t)(),n="dark"===t;return e?n?tl:nl:n?rl:al},sl={benchItemButton:"_benchItemButton_f99tr_1",benchItem:"_benchItem_f99tr_1",nonActionableSelected:"_nonActionableSelected_f99tr_24",hovered:"_hovered_f99tr_25",selectedAgentPointer:"_selectedAgentPointer_f99tr_39"},ol=(0,s.forwardRef)((({children:e,onClick:t,label:n,id:r,onHover:a,isSelected:s,isHovered:c,isActionableWhenSelected:l=!0},d)=>{const u=Ii().isFeatureEnabled(bc.GoBranding),g=aa(sl.benchItemButton,{[sl.hovered]:c,[sl.nonActionableSelected]:s&&!l}),h=(0,i.jsx)(o.k,{className:sl.selectedAgentPointer,"data-testid":"selected-agent-pointer",align:"center",children:(0,i.jsx)(il,{goBrandingEnabled:u})});return(0,i.jsxs)("div",{className:aa(sl.benchItem,{[sl.goBrandingEnabled]:u}),onMouseEnter:()=>a(r),children:[s&&h,(0,i.jsx)(E.z,{ref:d,className:g,onClick:t,size:"medium",variant:"tertiary","aria-label":n,style:{height:"32px",width:"32px",marginBottom:"8px"},children:e})]})})),cl=({size:e})=>(0,i.jsx)(g.J,{size:e,icon:ll,accessibilityLabel:"Add agent"}),ll=e=>(0,i.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,i.jsx)("path",{d:"M7 12L12.0001 12M17.0001 12H12.0001M12.0001 12V6.99995M12.0001 12V17.0001",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5",strokeLinecap:"round"})});ll.__brand="nocolor";const dl=({children:e,title:t,content:n,placement:r="left",width:a=280,onDismiss:o,trackImpression:l,className:d})=>{const[u,g]=(0,s.useState)(!0),{isOpen:h}=bi(),p=(0,s.useRef)(!1),f=!h&&u,m=(0,s.useCallback)((()=>{p.current||(p.current=!0,l())}),[l]);return(0,i.jsxs)(oa.J,{open:f,placement:r,onOpenChange:e=>{e||(o(),g(!1))},onShow:m,children:[(0,i.jsx)(oa.J.Anchor,{children:e}),(0,i.jsx)(oa.J.Content,{className:d,title:t,accessibilityLabel:t,width:a,children:(0,i.jsx)(c.x,{variant:"text-xsmall",as:"p",children:n})})]})},ul=({children:e,message:t,trackImpression:n})=>(0,i.jsx)(dl,{placement:"left",title:"Find more agents",content:"Build the perfect lineup of agents for your work.",onDismiss:t.onDismiss,trackImpression:n,children:e}),gl=({children:e})=>{const[t,n]=(0,s.useState)(!1),{message:r,trackImpression:a}=Mi(Tc.FindMoreAgentsPopover),{ref:o,isIntersecting:c}=(0,Na.S1)({threshold:1}),l=e(o,(()=>{n(!0)}));return r&&c&&!t?(0,i.jsx)(ul,{message:r,trackImpression:a,children:l}):l},hl=({id:e,onHover:t,isSelected:n,isHovered:r,commandExecutor:a,selectedAgentId:o,coordinatorAgentId:c})=>{const{trackClicked:l}=Li(oi.ViewDirectoryBenchItem,{}),d=Ec(),{openAgentDirectory:u,openAgentDirectoryModal:g,handleOpenAgent:h}=Mc({commandExecutor:a,selectedAgentId:o,coordinatorAgentId:c}),p=(0,s.useRef)(h);p.current=h,(0,s.useEffect)((()=>d?d.onDeeplinkRequested((e=>{if(e.viewType===yn.Gk.AgentChat)return void p.current(e.agentId);const t=Ln(e);t&&g(t)})):void 0),[d,g,p]);const f=u;return(0,i.jsx)(gl,{children:(a,s)=>(0,i.jsx)(pl,{id:e,isHovered:r,isSelected:n,onHover:t,onClick:()=>{l(),s(),f()},ref:a})})},pl=(0,s.forwardRef)(((e,t)=>{const{id:n,isSelected:r,isHovered:a,onHover:s,onClick:o}=e;return(0,i.jsx)(ol,{id:n,ref:t,label:"View agent directory",isSelected:r,isHovered:a,onHover:s,onClick:o,children:(0,i.jsx)(cl,{size:"medium"})})})),fl=({id:e,order:t,children:n,isSelected:r,onClick:a,label:s,onHover:o,isHovered:c,isActionableWhenSelected:l=!0})=>{const{trackingRef:d}=Ti(oi.AgentBenchItem,{agentId:e,order:t});return(0,i.jsx)(ol,{ref:d,label:s,id:e,isSelected:r,isHovered:c,onHover:o,onClick:a,isActionableWhenSelected:l,children:n})},ml=({firstPartyAgents:e,commandExecutor:t,selectedItemId:n,onSelectItem:r,onClose:a,closeOnAgentReselect:o=!0,coordinatorAgentId:c})=>{const l=Ii(),{installedAgents:d}=_i(),[u,g]=(0,s.useState)(null),h=function(e){const t=Ii();return(0,s.useMemo)((()=>{const n=e.map((e=>({type:"agent",item:e})));return t.isFeatureEnabled(bc.AgentDirectory)&&n.push({type:"directory",id:"viewAgentDirectory",title:"More agents"}),n}),[e,t])}(Vc(e,l.isFeatureEnabled(bc.AgentDirectory)?d:[])),p=Ii().isFeatureEnabled(bc.GoBranding),{openAgentDirectory:f}=Mc({commandExecutor:t,selectedAgentId:n,coordinatorAgentId:c}),m=(0,s.useCallback)((e=>{g(null),r(e)}),[r]),v=(0,s.useCallback)((e=>{n!==e?m(e):o&&a()}),[m,n,o,a]);return(0,i.jsx)(el,{totalItemsCount:h.length,hoveredAgentId:u,setHoveredAgentId:g,allItems:h,onSelectItem:m,selectedAgentId:n??null,closeOnAgentReselect:o,onOpenAgentDirectory:f,children:h.map(((e,r)=>{if(Rc(e)){const t=e.item;return(0,i.jsx)(fl,{id:t.id,order:r,isSelected:n===t.id,onClick:()=>v(t.id),label:t.title,onHover:g,isHovered:u===t.id,isActionableWhenSelected:o,children:t.renderIcon({size:"large",goBrandingEnabled:p})},t.id)}return(0,i.jsx)(hl,{commandExecutor:t,id:e.id,onHover:g,isSelected:n===e.id,isHovered:u===e.id,selectedAgentId:n,coordinatorAgentId:c},e.id)}))})},vl="_agentPanelContainer_bo866_1",xl="_open_bo866_6",bl=({children:e,open:t,commandExecutor:n})=>{const r=aa(vl,t&&xl),a=Lc(Fa.z.isAgentPanelFooter);return(0,i.jsxs)(o.k,{direction:"column",flex:"1",className:r,children:[e,(0,i.jsx)(Pc,{promotions:a,commandExecutor:n})]})},Cl={modal:"_modal_1u63o_1"},yl=({title:e,content:t,onClose:n,hideDefaultHeader:r=!1})=>{const a=(0,s.useRef)(null),c=(0,s.useId)();return(0,s.useEffect)((()=>{const e=e=>{"Escape"===e.key&&n()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[n]),(0,s.useEffect)((()=>{var e;null==(e=a.current)||e.focus()}),[]),(0,i.jsx)("div",{role:"dialog","aria-modal":"true","aria-label":e,"aria-labelledby":c,ref:a,tabIndex:-1,children:(0,i.jsxs)(o.k,{direction:"column",gap:8,className:Cl.modal,children:[!r&&(0,i.jsxs)(o.k,{direction:"row",justify:"space-between",children:[(0,i.jsx)(l.h,{size:"small",variant:"tertiary",accessibilityLabel:"Close",icon:kn.Tw,onClick:n}),(0,i.jsx)(o.k,{justify:"center",flex:"1",align:"center",children:(0,i.jsx)(R.X,{as:"h1",variant:"heading-xxsmall",className:Cl.modalTitle,id:c,children:e})})]}),t]})})},kl=({children:e})=>{const[t,n]=(0,s.useState)(null),r=(0,s.useCallback)((e=>n(e)),[]),a=(0,s.useCallback)((()=>n(null)),[]),o=(0,s.useMemo)((()=>({showModal:r,closeModal:a,isOpen:!!t})),[r,a,t]);return(0,i.jsxs)(xi.Provider,{value:o,children:[t&&(0,i.jsx)(yl,{title:t.title,content:t.content,onClose:a,hideDefaultHeader:t.hideDefaultHeader}),e]})};function wl(e){const{installedAgents:t}=_i(),n=(0,s.useMemo)((()=>[...e,...t]),[e,t]),r=(0,s.useMemo)((()=>n.map((e=>e.id))),[n]);return{agents:n,availableAgentsIds:r}}const jl=({id:e,children:t})=>{const n=mi().agentId,{trackingRef:r}=Oi(oi.ErrorFallback,{agentId:n??"",errorFallbackId:e});return(0,i.jsx)("div",{style:{display:"contents"},ref:r,children:t})};class Sl extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){fc.Logging.getLogger(`ErrorBoundary.${this.props.id}`).warn("Triggered error boundary",e,t)}render(){return this.state.hasError?(0,i.jsx)(jl,{id:this.props.id,children:this.props.fallback}):this.props.children}}const Il="_agentPanel_28mfu_1",Al="_selected_28mfu_6",El=({id:e,renderPanel:t,selected:n})=>{const r=s.useRef(!1),{trackingRef:a}=Oi(oi.AgentPanel,{agentId:e});if(s.useEffect((()=>{n&&(r.current=!0)}),[n]),!r.current&&!n)return null;const o=aa(Il,n&&Al);return(0,i.jsx)(Sl,{id:"AgentPanel",fallback:(0,i.jsx)(kn.e$,{title:"The panel cannot be displayed",content:"Try reloading the page."}),children:(0,i.jsx)(u.x,{ref:a,className:o,children:t()})})},_l=({agent:e,selectedAgentId:t,availableAgentsIds:n,commandExecutor:r,contextualOptionsRegistry:a,additionalProviderContext:s,withoutPanel:o=!1})=>{const c=e.id,l=t===e.id,d={agentId:c,selectedAgentId:t,availableAgentsIds:n,commandExecutor:r,contextualOptionsRegistry:a.getAgentHandle(e.id),closeAssistantPanel:s.closeAssistantPanel};return(0,i.jsxs)(fi,{value:d,children:[!o&&(0,i.jsx)(El,{id:e.id,selected:l,renderPanel:()=>e.renderPanel()}),o&&e.renderPanel()]})};function Ml({firstPartyAgents:e,coordinatorAgentId:t,commandExecutor:n,...r}){const{agents:a,availableAgentsIds:i}=wl(e),o=uo(t,n,a);return a.map((e=>(0,s.createElement)(_l,{...r,key:e.id,agent:e,availableAgentsIds:i,contextualOptionsRegistry:o,commandExecutor:n})))}function Rl({commandExecutor:e,coordinatorAgentId:t,firstPartyAgents:n,...r}){const{agents:a,availableAgentsIds:s}=wl(n),o=uo(t,e,a),c=a.find((e=>e.id===t));return c?(0,i.jsx)(_l,{...r,agent:c,availableAgentsIds:s,contextualOptionsRegistry:o,commandExecutor:e}):null}function Dl(){var e;const t=null==(e=(0,s.useContext)(Ri))?void 0:e.user;if(!t)throw new Error("User service not found");return t}function Ol({children:e}){const{openSignInPage:t,openSignUpPage:n,getUserInfo:r}=Dl(),{anonymous:a}=r();return a?(0,i.jsx)(o.k,{justify:"center",align:"center",height:"100%",width:"100%",children:(0,i.jsx)(kn.A4,{onSignIn:t,onSignUp:n})}):e}const Tl="_assistant_r00db_1",Ll=({children:e})=>(0,i.jsx)(o.k,{flex:"1",direction:"row",justify:"end",height:"100%",className:Tl,children:e});const Pl="_assistantColorSchemeProviderContainer_1ohys_1",Nl="_grammarlyAgentIcons_1ohys_10",Bl=({agents:e,coordinatorAgentId:t,selectedAgentId:n,onSelect:r,onClose:a,sidebarFooter:o,services:c,hideCloseInHeader:l=!1,includeChatHistory:d=!1,transparentMode:u=!1,gdsColorScheme:g="auto",closeOnAgentReselect:h=!0})=>{var p;const[f,m]=function(e,t){const[n,r]=(0,s.useState)(e),a=(0,s.useCallback)(((e,n=ii.AgentBench)=>{r((r=>{const a=r;return a===e?a:(a&&t.trackEvent(ci.AgentDeactivated,{agent:a,switchToAgent:e,cause:n}),e&&t.trackEvent(ci.AgentActivated,{agent:e,switchFromAgent:a,cause:n}),e)}))}),[t]);return(0,s.useEffect)((()=>{a(e,ii.ExternalChange)}),[e,a]),[n,a]}(n,c.tracking),v=null==(p=c.experimental_featureToggle)?void 0:p.isFeatureEnabled(bc.GoBranding);!function(e,t){const n=(0,Ha.D)(e);(0,s.useEffect)((()=>{e!==n&&(n&&(null==t||t.deactivateAgent({agentId:n})),e&&(null==t||t.activateAgent({agentId:e})))}),[e,n,t])}(f,c.experimental_agentLifecycle);const x=function(e,t){return(0,s.useCallback)(((n=ii.AgentBench)=>{e(void 0,n),null==t||t()}),[t,e])}(m,a),b=function(e,t){return(0,s.useCallback)(((n,r=ii.AgentBench)=>{e(n,r),null==t||t(n)}),[t,e])}(m,r),C=function(e){const t=(0,s.useMemo)((()=>({openAgent:e.openAgent,openCoordinatorAgent:e.openCoordinatorAgent})),[e.openAgent,e.openCoordinatorAgent]);return(0,s.useMemo)((()=>new hi(t)),[t])}({openAgent:b,openCoordinatorAgent:(0,s.useCallback)((()=>m(t)),[t,m])}),y=l?void 0:x,k={selectedAgentId:f,commandExecutor:C,additionalProviderContext:{closeAssistantPanel:y}},w=aa(Pl,{[Nl]:!v});return(0,i.jsx)(kn.zx,{isEnabled:!!v,style:{height:"100%"},children:(0,i.jsx)(ca.A,{scheme:g,className:w,children:(0,i.jsx)(Ri.Provider,{value:c,children:(0,i.jsx)(Ic,{chatService:c.chat,contextService:c.context,trackingService:c.tracking,featureToggleService:c.experimental_featureToggle,suggestionsService:c.experimental_suggestions,agentDirectoryService:c.experimental_agentDirectory,inProductMessagingService:c.experimental_inProductMessaging,children:(0,i.jsx)(kn.qM.Provider,{value:{closeAssistantPanel:y},children:(0,i.jsxs)(Ol,{children:[u&&(0,i.jsx)(Rl,{...k,coordinatorAgentId:t,firstPartyAgents:e}),!u&&(0,i.jsx)(Ll,{children:(0,i.jsxs)(kl,{children:[(0,i.jsx)(bl,{open:!!f,commandExecutor:C,children:(0,i.jsx)(Ml,{firstPartyAgents:e,coordinatorAgentId:t,...k})}),(0,i.jsx)(cs,{footer:o,commandExecutor:C,includeChatHistory:d,coordinatorAgentId:t,goBrandingEnabled:v,children:(0,i.jsx)(ml,{commandExecutor:C,firstPartyAgents:e,onClose:x,onSelectItem:b,selectedItemId:f,closeOnAgentReselect:h,coordinatorAgentId:t})})]})})]})})})})})})};const Fl=e=>(0,i.jsxs)("svg",{width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{d:"M11.6667 10.5C12.127 10.5 12.5001 10.8731 12.5001 11.3333C12.5001 11.7936 12.127 12.1667 11.6667 12.1667H6.66675C6.20651 12.1667 5.83342 11.7936 5.83342 11.3333C5.83342 10.8731 6.20651 10.5 6.66675 10.5H11.6667Z",fill:"var(--color-icon-base-default, #707070)"}),(0,i.jsx)("path",{d:"M13.3334 7.16667C13.7937 7.16667 14.1667 7.53976 14.1667 8C14.1667 8.46024 13.7937 8.83333 13.3334 8.83333H6.66675C6.20651 8.83333 5.83342 8.46024 5.83342 8C5.83342 7.53976 6.20651 7.16667 6.66675 7.16667H13.3334Z",fill:"var(--color-icon-base-default, #707070)"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.0001 3C16.841 3 18.3334 4.49238 18.3334 6.33333V13C18.3334 14.8409 16.841 16.3333 15.0001 16.3333H13.3334C13.1038 16.3333 12.8859 16.4278 12.7296 16.5921L12.6669 16.667L12.0004 17.5557C11.0317 18.8473 9.12403 18.8877 8.0966 17.6769L7.99976 17.5557L7.33325 16.667C7.17587 16.4572 6.92905 16.3333 6.66675 16.3333H5.00008C3.15913 16.3333 1.66675 14.8409 1.66675 13V6.33333C1.66675 4.49238 3.15913 3 5.00008 3H15.0001ZM5.00008 4.66667C4.07961 4.66667 3.33341 5.41286 3.33341 6.33333V13C3.33341 13.9205 4.07961 14.6667 5.00008 14.6667H6.66675C7.45364 14.6667 8.19494 15.0373 8.66707 15.6668L9.33358 16.5555L9.3995 16.6336C9.74859 16.9983 10.354 16.9722 10.6666 16.5555L11.3331 15.6668L11.425 15.5521C11.8984 14.9925 12.5956 14.6667 13.3334 14.6667H15.0001C15.9206 14.6667 16.6667 13.9205 16.6667 13V6.33333C16.6667 5.41286 15.9206 4.66667 15.0001 4.66667H5.00008Z",fill:"var(--color-icon-base-default, #707070)"})]});function zl({isGoBrandingEnabled:e=!1}){const{closeModal:t}=bi(),{submitFeedback:n}=Dl();return(0,i.jsx)(o.k,{justify:"center",flex:"1",children:(0,i.jsx)(kn.Vn,{onSubmit:e=>{n(e)},onClose:t,heading:e?"How do you like Superhuman Go?":"How do you like Grammarly?"})})}Fl.__brand="nocolor";const Ul=({size:e})=>(0,i.jsx)(g.J,{size:e,icon:Hl,accessibilityLabel:"Anonymous user"}),Hl=e=>(0,i.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,i.jsx)("path",{d:"M7.00004 1.16663C6.22649 1.16663 5.48463 1.47392 4.93765 2.0209C4.39066 2.56788 4.08337 3.30974 4.08337 4.08329C4.08337 4.85684 4.39066 5.59871 4.93765 6.14569C5.48463 6.69267 6.22649 6.99996 7.00004 6.99996C7.77359 6.99996 8.51546 6.69267 9.06244 6.14569C9.60942 5.59871 9.91671 4.85684 9.91671 4.08329C9.91671 3.30974 9.60942 2.56788 9.06244 2.0209C8.51546 1.47392 7.77359 1.16663 7.00004 1.16663ZM5.7626 2.84586C6.09079 2.51767 6.53591 2.33329 7.00004 2.33329C7.46417 2.33329 7.90929 2.51767 8.23748 2.84586C8.56567 3.17404 8.75004 3.61916 8.75004 4.08329C8.75004 4.54742 8.56567 4.99254 8.23748 5.32073C7.90929 5.64892 7.46417 5.83329 7.00004 5.83329C6.53591 5.83329 6.09079 5.64892 5.7626 5.32073C5.43442 4.99254 5.25004 4.54742 5.25004 4.08329C5.25004 3.61916 5.43442 3.17404 5.7626 2.84586Z",fill:"var(--color-icon-base-default, #707070)"}),(0,i.jsx)("path",{d:"M5.25004 7.58329C3.63921 7.58329 2.33337 8.88913 2.33337 10.5V11.6666C2.33337 12.311 2.85571 12.8333 3.50004 12.8333H10.5C11.1444 12.8333 11.6667 12.311 11.6667 11.6666V10.5C11.6667 8.88913 10.3609 7.58329 8.75004 7.58329H5.25004ZM3.50004 10.5C3.50004 9.53346 4.28354 8.74996 5.25004 8.74996H8.75004C9.71654 8.74996 10.5 9.53346 10.5 10.5V11.6666H3.50004V10.5Z",fill:"var(--color-icon-base-default, #707070)"})]});Hl.__brand="nocolor";const Wl={userInitialsAvatar:"_userInitialsAvatar_d99r2_1",small:"_small_d99r2_15",large:"_large_d99r2_23"},$l=({size:e="small"})=>{const{getUserInfo:t}=Dl(),n=t(),r=function(e){if(e.anonymous)return"";const t=[e.firstName,e.lastName].map((e=>e.trim())).filter((e=>e.length>0));return 0===t.length?"":1===t.length?t[0].slice(0,2).toUpperCase():t.map((e=>e[0])).join("").toUpperCase()}(n),a="small"===e?Wl.small:Wl.large;return n.anonymous?(0,i.jsx)("span",{className:aa(Wl.userInitialsAvatar,Wl.anonymous,a),children:(0,i.jsx)(Ul,{size:e})}):(0,i.jsx)("span",{className:aa(Wl.userInitialsAvatar,a),children:r})},Gl="_userInfo_1km94_1",Vl=()=>{const{getUserInfo:e}=Dl(),t=e(),n=t.anonymous?"Anonymous":`${t.firstName} ${t.lastName}`;return(0,i.jsxs)(o.k,{padding:4,gap:3,direction:"row",align:"center",className:Gl,children:[(0,i.jsx)($l,{size:"large"}),(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"span",variant:"heading-xsmall",children:n}),(0,i.jsx)(c.x,{as:"span",variant:"text-small",color:"base-subdued",children:t.email})]})]})},Zl="_userMenu_igj34_1",ql="_userMenuActivator_igj34_22",Kl="_darkModeMenuItem_igj34_35",Jl=({openSettings:e,onDarkModeChange:t,isGoBrandingEnabled:n=!1})=>{const{showModal:r}=bi(),{scheme:a,setScheme:s}=(0,ca.t)(),c=(0,i.jsx)(E.z,{className:ql,accessibilityLabel:"View options",children:(0,i.jsx)($l,{})});return(0,i.jsxs)(d.v,{className:Zl,activator:c,children:[(0,i.jsx)(Vl,{}),(0,i.jsx)(d.v.Item,{icon:kn.ew,onClick:e,children:"Settings"},"settings"),(0,i.jsx)(d.v.Item,{icon:kn.ce,onMouseDown:e=>e.stopPropagation(),className:Kl,children:(0,i.jsx)(o.k,{align:"center",justify:"space-between",gap:2,children:(0,i.jsx)(la.r,{labelDisplay:"left",isSelected:"dark"===a,label:"Dark Mode",onChange:()=>{const e="light"===a||"auto"===a?"dark":"light";s(e),null==t||t(e)}})})},"darkMode"),(0,i.jsx)(d.v.Item,{icon:Fl,onClick:()=>{r({content:(0,i.jsx)(zl,{isGoBrandingEnabled:n}),title:"Give feedback"})},children:"Feedback"},"feedback")]})},Xl="_link_1tj56_1",Yl=({label:e,onClick:t})=>(0,i.jsx)(D.r,{href:"#",className:Xl,onClick:e=>{e.preventDefault(),t()},variant:"inherit",children:e});function Ql({message:e,trackImpression:t}){const{shortcut:n,onChangeShortcut:r}=e,{scheme:a}=(0,ca.t)();(0,s.useEffect)((()=>{t()}),[t]);const l="base-default";return(0,i.jsx)(u.x,{bgColor:"background-base-subdued",borderRadius:2,padding:"var(--space-4) var(--space-3)",children:(0,i.jsx)(o.k,{gap:2,children:(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"p",weight:"semibold",color:l,variant:"text-xsmall",children:"Try the Grammarly shortcut"}),(0,i.jsxs)(c.x,{as:"p",weight:"normal",color:l,variant:"text-xsmall",children:["Use ",n," to open Grammarly any time."]}),(0,i.jsx)(c.x,{as:"p",weight:"normal",color:l,variant:"text-xsmall",children:(0,i.jsx)(Yl,{onClick:r,label:"Change shortcut"})})]})})})}function ed({message:e,trackImpression:t}){const{previewEndDate:n}=e;return(0,s.useEffect)((()=>{t()}),[t]),(0,i.jsx)(u.x,{bgColor:"background-base-subdued",borderRadius:2,padding:3,children:(0,i.jsx)(o.k,{gap:2,children:(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"p",weight:"semibold",color:"base-default",variant:"text-xsmall",children:"Enjoy your free preview"}),(0,i.jsxs)(c.x,{as:"p",weight:"normal",color:"base-default",variant:"text-xsmall",children:["As thanks for trying Go early, you can use this agent free until ",n,"."]})]})})})}function td({message:e,trackImpression:t}){switch(e.type){case"proPreviewAwarenessNoticeCardMessage":return(0,i.jsx)(ed,{message:e,trackImpression:t});case"assistantShortcutNoticeCardMessage":return(0,i.jsx)(Ql,{message:e,trackImpression:t});default:return null}}const nd=(e,t={})=>{const{stopWhenResolved:n=!0,minIntervalSec:r=3,maxIntervalSec:a=30,maxDurationSec:i=360,...o}=t,c=(e=>{const[t,n]=(0,s.useState)(null),[r,a]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[c,l]=(0,s.useState)(null),d=Ec(),u=(0,s.useRef)(e),g=(0,s.useRef)(d),h=(0,s.useRef)(null);(0,s.useEffect)((()=>{u.current=e,g.current=d}),[e,d]);const p=(0,s.useCallback)((async(e=!1)=>{const t=g.current,r=u.current;if(!t)return n(null),a(!1),o(!1),void l(null);if(!r||!r.rootCsbIngestionId)return n(null),a(!1),o(!1),void l(null);e?o(!0):a(!0),l(null);try{const i=await t.getExecutionSummary(r);n(i)}catch(e){const t=e instanceof Error?e:new Error("Failed to fetch execution summary");l(t)}finally{e?o(!1):a(!1)}}),[]);return(0,s.useEffect)((()=>{const t=(null==e?void 0:e.agentInstanceId)??null;t!==h.current&&(h.current=t,n(null),l(null))}),[null==e?void 0:e.agentInstanceId]),{executionSummary:t,isLoading:r,isRefetching:i,error:c,refetch:(0,s.useCallback)((async()=>{await p(!0)}),[p])}})(e),{executionSummary:l,refetch:d}=c,u=(0,s.useMemo)((()=>{if(null==l||!l.ingestions)return!1;const e=Object.values(l.ingestions);return e.some((e=>null===e.lastIndexedTimestamp))||e.some((e=>e.failedIngestions>0))}),[l]),g=(0,s.useCallback)((()=>!n||(!l||u)),[n,u,l]),{attemptCount:h,elapsedTimeMs:p,hasReachedMaxDuration:f,reset:m}=(0,Wa.W)(d,{minIntervalSec:r,maxIntervalSec:a,maxDurationSec:i,...o,enabled:!1!==o.enabled&&null!==e,shouldContinuePolling:g});return(0,s.useEffect)((()=>{m()}),[e,m]),{...c,attemptCount:h,elapsedTimeMs:p,hasReachedMaxDuration:f,reset:m}},rd="_inlineLink_1i76p_1";var ad=(e=>(e.Info="info",e.Warning="warning",e.Success="success",e))(ad||{});function id({title:e,content:t,actions:n=[],severity:r="info",containerPadding:a=4,containerPaddingTop:s,containerPaddingBottom:l,containerPaddingLeft:d,containerPaddingRight:h,ariaLive:p="polite",testId:f="Banner"}){const{scheme:m}=(0,ca.t)(),v="dark"===m,x=n.length>0,b=t||x,C="warning"!==r?"background-base-subdued":v?"gold-20":"gold-0",y=(()=>{if("warning"===r)return v?"dark-default":"base-default"})(),k="warning"===r?da.F:"success"===r?ua.t:ga.r;return(0,i.jsx)(u.x,{padding:a,paddingTop:s,paddingBottom:l,paddingLeft:d,paddingRight:h,"aria-live":p,children:(0,i.jsx)(u.x,{"data-testid":f,bgColor:C,borderRadius:2,padding:3,children:(0,i.jsxs)(o.k,{gap:2,align:b?void 0:"center",children:[(0,i.jsx)(o.k,{children:(0,i.jsx)(g.J,{size:"medium",icon:k,accessibilityLabel:"","aria-hidden":"true"})}),(0,i.jsxs)(o.k,{direction:"column",children:[(0,i.jsx)(c.x,{as:"p",weight:"semibold",color:y,variant:"text-xsmall",children:e}),b&&(0,i.jsx)(c.x,{as:"p",weight:"normal",color:y,variant:"text-xsmall",children:"string"!=typeof t&&void 0!==t?t:"string"==typeof t?(0,i.jsxs)(i.Fragment,{children:[t,x&&(0,i.jsxs)(i.Fragment,{children:[" ",n.map(((e,t)=>{const r=t===n.length-1;return(0,i.jsxs)("span",{children:[(0,i.jsx)(D.r,{href:"",onClick:t=>{t.preventDefault(),e.onClick()},className:rd,variant:"inherit",accessibilityLabel:e.accessibilityLabel||e.label,"data-testid":e.testId,children:e.label}),!r&&(0,i.jsx)(i.Fragment,{children:t===n.length-2?", or ":", "}),r&&"."]},t)}))]})]}):null})]})]})})})}const sd=({agentId:e,selectedAgentId:t})=>{const{installedAgents:n}=_i(),r=Ec(),a=e===t,[o,c]=(0,s.useState)(!1),l=(0,s.useRef)(null),d=(0,s.useMemo)((()=>n.find((e=>e.id===t))),[n,t]),u=(0,s.useMemo)((()=>{if(!(a&&t&&(0,yn.d1)(t)&&r))return null;const e=r.getAgentInstancesForAgent(t);return e.length>0?e[0]:null}),[a,t,r]),{executionSummary:g,isLoading:h,error:p,attemptCount:f,hasReachedMaxDuration:m,refetch:v,reset:x}=nd(u,{enabled:a}),b=(0,s.useCallback)((async()=>{if(t&&(0,yn.d1)(t)&&r)try{await Mn({agentId:t,agentDirectoryService:r,ingestionId:null==u?void 0:u.agentInstanceId})}catch(e){fc.Logging.getLogger("AgentHeaderBanners").warn("openAgentSetupInNewTab failed",e)}}),[t,r,null==u?void 0:u.agentInstanceId]),C=(0,s.useCallback)((async()=>{x(),await v()}),[x,v]),y=(0,s.useMemo)((()=>!(null==g||!g.ingestions)&&Object.values(g.ingestions).some((e=>e.failedIngestions>0))),[g]),k=(0,s.useMemo)((()=>!(null==g||!g.ingestions)&&Object.values(g.ingestions).some((e=>null===e.lastIndexedTimestamp))),[g]);return(0,s.useEffect)((()=>{if(e!==t||h||p)return;const n=(null==g?void 0:g.ingestions)&&Object.keys(g.ingestions).length>0;if(!0===l.current&&!k&&!y&&n){c(!0);const e=setTimeout((()=>{c(!1)}),5e3);return()=>clearTimeout(e)}l.current=k}),[e,t,k,y,g,h,p]),(0,s.useEffect)((()=>{c(!1),l.current=null}),[t]),e!==t||h||p?null:o?(0,i.jsx)(id,{severity:ad.Success,title:`${null==d?void 0:d.title} is connected`,testId:"Banner-Success"}):y?(0,i.jsx)(id,{severity:ad.Warning,title:"Connected data issue",content:(0,i.jsxs)(i.Fragment,{children:["There's an issue with this connection's data, so it may not work properly. To learn more, check your"," ",(0,i.jsx)(D.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:rd,variant:"inherit",accessibilityLabel:"Check your connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-FailedIngestions"}):null!=g&&g.hasTruncatedAtLimit?(0,i.jsx)(id,{severity:ad.Warning,title:"Data limit reached",content:(0,i.jsxs)(i.Fragment,{children:["Your ",null==d?void 0:d.title," connection has reached its data limit. To fix this, select fewer data sources in your"," ",(0,i.jsx)(D.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:rd,variant:"inherit",accessibilityLabel:"Go to connection settings","data-testid":"BannerSettingsLink",children:"connection settings"}),"."]}),testId:"Banner-LimitReached"}):k?f>=5&&!m?(0,i.jsx)(id,{severity:ad.Info,title:`Still connecting ${null==d?void 0:d.title}`,content:(0,i.jsxs)(i.Fragment,{children:["This connection is taking a while. Check"," ",(0,i.jsx)(D.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:rd,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors or make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","for detailed status info."]}),testId:"Banner-TakingLonger"}):m?(0,i.jsx)(id,{severity:ad.Info,title:"Connection is taking too long",content:(0,i.jsxs)(i.Fragment,{children:["This agent is still trying to connect in the background. You can check for errors in"," ",(0,i.jsx)(D.r,{href:"",onClick:e=>{e.preventDefault(),b()},className:rd,variant:"inherit",accessibilityLabel:"Go to connection settings to check for errors and make changes","data-testid":"BannerSettingsLink",children:"connection settings"})," ","or"," ",(0,i.jsx)(D.r,{href:"",onClick:e=>{e.preventDefault(),C()},className:rd,variant:"inherit",accessibilityLabel:"Try again to refresh the connection","data-testid":"BannerTryAgainLink",children:"refresh"}),"."]}),testId:"Banner-Timeout"}):(0,i.jsx)(id,{severity:ad.Info,title:`Connecting ${null==d?void 0:d.title}`,content:"When it's done, you can work with the info you connected.",testId:"Banner-Connecting"}):null},od=e=>{const{controls:t}=e,{agentId:n,closeAssistantPanel:r}=mi(),a=Oi(oi.AgentHeaderClose,{agentId:n}),o=(0,s.useMemo)((()=>({left:[...r?[{icon:ha.V,label:"Close",onClick:r,trackingRef:a.trackingRef}]:[],...(null==t?void 0:t.left)??[]],right:null==t?void 0:t.right})),[r,null==t?void 0:t.left,null==t?void 0:t.right,a.trackingRef]);return(0,i.jsx)(kn.i7,{...e,controls:o})},cd=e=>{const{agentId:t,selectedAgentId:n}=mi(),{installedAgents:r}=_i(),a=(0,s.useMemo)((()=>r.find((e=>e.id===n))),[r,n]),{message:o,trackImpression:c}=Mi(Tc.AgentHeaderNoticeCard,{selectedAgent:a}),l=e.isAgentEmptyState&&o&&t===n;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(od,{...e,state:l?"collapsed":e.state}),l?(0,i.jsx)(u.x,{paddingTop:4,paddingLeft:4,paddingRight:4,paddingBottom:0,children:(0,i.jsx)(td,{message:o,trackImpression:c})}):null,(0,i.jsx)(sd,{agentId:t,selectedAgentId:n})]})};const ld=()=>{if(!(0,s.useContext)(Ci))throw new Error("Please ensure this agent is rendered inside the <Assistant /> component. If rendering the agent independently, use transparentMode prop with Assistant component.")};function dd(e){const t=s.useRef(null),[n,r]=s.useState(""),a=Ii().isFeatureEnabled(bc.GoBranding),c=""!==n.trim(),l=a?"Ask Go":"Ask AI",d=e.placeholder||l,u=(0,i.jsx)(kn.oP,{size:"medium",goBrandingEnabled:a,accessibilityLabel:d});return(0,i.jsx)(kn.xg,{textAreaRef:t,value:n,onChange:r,placeholder:d,autoFocus:c,controls:e=>(0,i.jsx)(o.k,{direction:"row",justify:"end",width:"100%",align:"end",children:(0,i.jsx)(kn.TH,{hasValue:c,isProcessing:!1,onStop:()=>{},onSubmit:e.handleSubmit})}),disabled:e.disabled,icon:u,onSubmit:e.onSubmit,contextChip:void 0})}const ud="_separator_g8reo_1",gd="_inputContainer_g8reo_7";function hd(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:ud}),(0,i.jsx)(o.k,{direction:"column",justify:"center",className:gd,children:(0,i.jsx)(dd,{...e})})]})}const pd=e=>{const t=function(){var e;return null==(e=(0,s.useContext)(Ri))?void 0:e.uphook}(),n=(null==t?void 0:t.isEligibleForUphook(e))??!1,[r,a]=(0,s.useState)(void 0),i=go((async()=>{if(t&&n)return t.getUphook(e)}),[t,e,n]);return(0,s.useEffect)((()=>{"success"===i.status&&a(i.data)}),[i]),(0,s.useEffect)((()=>{if(!t||!n)return;const r=t.updates.on(e,(e=>{a((t=>t&&{...t,value:{...t.value,...e}}))}));return()=>{null==r||r.dispose()}}),[t,e,n]),(0,s.useMemo)((()=>n?"loading"===i.status?{status:"loading"}:"error"===i.status?{status:"error",error:i.error}:r?{status:"success",data:r}:{status:"not-eligible"}:{status:"not-eligible"}),[n,i,r])};var fd=(e=>(e.ChatInputUphookSlot="ChatInputUphookSlot",e))(fd||{});function md(e){const t=e.cloneNode(!0);[".gds-sr-only"].forEach((e=>{t.querySelectorAll(e).forEach((e=>e.remove()))})),t.querySelectorAll("a span").forEach((e=>{var t;"Opens a new window"===((null==(t=e.textContent)?void 0:t.trim())||"")&&e.remove()}));return{html:t.innerHTML,text:t.textContent??""}}function vd(e){const{messageId:t,copyableTextId:n,title:r,rawArtifactContent:a}=e,{id:o}=ji(),{agentId:c}=mi(),{responseCopied:d}=Si(),[u,g]=(0,s.useState)("default"),{trackingRef:h,trackClicked:p}=Oi(oi.CopyArtifactButton,{agentId:c??"",chatId:o,messageId:t??""});(0,s.useEffect)((()=>{if("copied"===u){const e=setTimeout((()=>{g("default")}),1500);return()=>clearTimeout(e)}}),[u]);const f="copied"===u;return(0,i.jsx)(l.h,{ref:h,onClick:()=>{var e;null==(e=document.activeElement)||e.blur(),p(),d({chatId:o,responseLength:a.length,messageId:t}),function(e){const{html:t,text:n}=md(e);if(typeof ClipboardItem<"u"){const e=new Blob([t],{type:"text/html"}),r=new Blob([n],{type:"text/plain"}),a=new ClipboardItem({"text/plain":r,"text/html":e});navigator.clipboard.write([a]).catch(console.error)}else{const e=e=>{var r,a;null==(r=e.clipboardData)||r.setData("text/html",t),null==(a=e.clipboardData)||a.setData("text/plain",n),e.preventDefault()};document.addEventListener("copy",e),document.execCommand("copy"),document.removeEventListener("copy",e)}}(document.getElementById(n)),g("copied")},variant:"tertiary",icon:pa.c,accessibilityLabel:r?`Copy Grammarly generated text for ${r}`:"Copy Grammarly generated text",tooltipContentProps:{children:f?"Copied":"Copy"},tooltipProps:{open:!!f||void 0},"aria-describedby":n})}function xd({messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:a}){var o,c;const{id:l}=ji(),{agentId:d}=mi(),u=null==(o=null==a?void 0:a.insertArtifact)?void 0:o.isEnabled,g=null==(c=null==a?void 0:a.insertArtifact)?void 0:c.tooltip,[h,p]=(0,s.useState)(bd(u,g)),{trackingRef:f,trackClicked:m}=Oi(oi.InsertArtifactButton,{agentId:d??"",chatId:l,messageId:e??""});switch((0,s.useEffect)((()=>{p(bd(u,g))}),[u,g]),h){case"displayed":return(0,i.jsx)(Cd,{trackingRef:f,chatId:l,messageId:e,copyableTextId:t,rawArtifactContent:n,capabilities:a,onClick:()=>{m(),p("inserted")}});case"inserted":return(0,i.jsx)(yd,{trackingRef:f,onTimeout:()=>p("displayed")});case"disabled":return(0,i.jsxs)(S.u,{children:[(0,i.jsx)(S.aJ,{asChild:!0,children:(0,i.jsx)(E.z,{variant:"secondary",text:"Insert",isDisabled:!0})}),(0,i.jsx)(S._v,{root:null,children:g})]});case"hidden":return null;default:(0,r.vE)(h)}}function bd(e,t){return e?"displayed":t?"disabled":"hidden"}function Cd(e){const{chatId:t,messageId:n,copyableTextId:r,rawArtifactContent:a,onClick:s,trackingRef:o,capabilities:c}=e,{responseInserted:l}=Si();return(0,i.jsx)(E.z,{ref:o,variant:"secondary",text:"Insert",onClick:()=>{var e;l({chatId:t,responseLength:a.length,messageId:n});const i=document.getElementById(r),{html:o,text:d}=md(i);null==(e=null==c?void 0:c.insertArtifact)||e.execute({html:o,plainText:d,rawArtifactContent:a,messageId:n}),s()}})}function yd(e){const{trackingRef:t,onTimeout:n}=e;return(0,s.useEffect)((()=>{const e=setTimeout(n,3e3);return()=>clearTimeout(e)}),[n]),(0,i.jsx)(E.z,{ref:t,iconStart:I.L,variant:"tertiary",text:"Inserted"})}const kd="_artifactContent_r2gxs_1",wd="_verticalBar_r2gxs_7";function jd(e){const{title:t,content:n,messageId:r,artifactId:a,capabilities:s}=e;return(0,i.jsxs)(o.k,{className:kd,direction:"column",children:[(0,i.jsx)("div",{id:a,children:(0,i.jsx)(kn.r4,{children:n})}),(0,i.jsx)("div",{className:wd}),(0,i.jsxs)(o.k,{gap:2,children:[(0,i.jsx)(xd,{messageId:r,copyableTextId:a,rawArtifactContent:n,capabilities:s}),(0,i.jsx)(vd,{messageId:r,copyableTextId:a,title:t,rawArtifactContent:n})]})]})}function Sd(e){const{content:t,artifactId:n}=e;return(0,i.jsxs)(o.k,{className:kd,direction:"column",children:[(0,i.jsx)("div",{id:n,children:(0,i.jsx)(kn.e5,{content:t,isStreaming:!0})}),(0,i.jsx)("div",{className:wd})]})}function Id(e){const{content:t,isStreaming:n=!1,messageId:r,title:a,capabilities:o}=e,c=(0,s.useId)();return n?(0,i.jsx)(Sd,{artifactId:c,content:t}):(0,i.jsx)(jd,{messageId:r,artifactId:c,title:a,content:t,capabilities:o})}function Ad({debugInfo:e,children:t,debugTitle:n="Raw Message"}){const[r,a]=s.useState(!1),o=s.useCallback((e=>{if(e.metaKey){const t=e.target;if(t.closest("button")||t.closest("a")||t.closest('[role="button"]'))return;a((e=>!e))}}),[]),c=e?e.networkMessage:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{onClick:void 0!==e?o:void 0,children:t}),r&&c&&(0,i.jsx)(Id,{isStreaming:!1,title:n,content:c})]})}const Ed="_thinkingBox_c7dl5_1";function _d(){return(0,i.jsx)(u.x,{className:Ed,accessibilityLabel:"Assistant is thinking",children:(0,i.jsxs)(o.k,{"aria-hidden":"true",gap:1,padding:.25,children:[(0,i.jsx)(kn.Xd,{}),(0,i.jsx)(kn.Xd,{}),(0,i.jsx)(kn.Xd,{})]})})}const Md="_citation_nj8l7_1";function Rd({href:e,citationIndex:t,recordId:n,searchRequestId:r}){const{trackingRef:a}=Ti(oi.ChatResponseSource,{location:"inline",recordId:n,searchRequestId:r});return(0,i.jsx)("a",{href:e,className:Md,ref:a,target:"_blank",rel:"noopener noreferrer",children:t})}function Dd(e){const{messageId:t,title:n,tabIndex:r,content:a,isStreaming:s,capabilities:o}=e,{id:c}=ji(),{agentId:l}=mi(),{trackingRef:d}=Oi(oi.IdeationTabContent,{agentId:l??"",chatId:c,messageId:t??"",tabIndex:r});return(0,i.jsx)("div",{ref:d,children:(0,i.jsx)(Id,{title:n,content:a,isStreaming:s,messageId:t,capabilities:o})})}const Od="_root_1b8kx_1";function Td(e){const{alternatives:t,isStreaming:n=!1,messageId:r,capabilities:a}=e,{id:s}=ji(),{agentId:o}=mi(),{trackingRef:c}=Oi(oi.IdeationTabs,{agentId:o??"",chatId:s,messageId:r??"",count:t.length});if(1===t.length)return(0,i.jsx)(Id,{messageId:r,isStreaming:n,content:t[0].content,title:t[0].title,capabilities:a});const l=t.map((e=>e.title)).join(";");return(0,i.jsx)(u.x,{children:(0,i.jsxs)(Ia,{size:"small",className:aa(Od),children:[(0,i.jsx)(Ia.TabList,{ref:c,accessibilityLabel:"Ideation tabs",bottomBorder:"none",children:t.map(((e,t)=>(0,i.jsx)(Ia.Tab,{id:t.toString(),label:e.title},t)))},l),t.map((({content:e,title:t},s)=>(0,i.jsx)(Ia.Panel,{id:s.toString(),children:(0,i.jsx)(Dd,{messageId:r,title:t,tabIndex:s,content:e,isStreaming:n,capabilities:a},s)},s)))]})})}const Ld=({icon:e,accessibilityLabel:t=""})=>{const n=Ii().isFeatureEnabled(bc.GoBranding);if(!e)return null;switch(e){case"aiDetectorAgent":return(0,i.jsx)(kn.Fq,{size:"medium",accessibilityLabel:t});case"plagiarismAgent":return(0,i.jsx)(kn.PJ,{size:"medium",accessibilityLabel:t});case"proofreaderAgent":return(0,i.jsx)(kn.YN,{size:"medium",accessibilityLabel:t});case"aiGraderAgent":return(0,i.jsx)(kn.DV,{size:"medium",accessibilityLabel:t});case"citationFinderAgent":return(0,i.jsx)(kn.ro,{size:"medium",accessibilityLabel:t});case"expertPanelAgent":return(0,i.jsx)(kn.W5,{size:"medium",accessibilityLabel:t});case"humanizerAgent":return(0,i.jsx)(kn.bN,{size:"medium",accessibilityLabel:t});case"readerReactionAgent":return(0,i.jsx)(kn.f8,{size:"medium",accessibilityLabel:t});default:return(0,i.jsx)(kn.oP,{size:"medium",accessibilityLabel:t,goBrandingEnabled:n})}},Pd="_highlight_10ijo_1",Nd="_stopHighlight_10ijo_18",Bd=({action:e,onClick:t})=>{const{id:n}=ji(),[r,a]=(0,s.useState)("animating"),{agentId:o}=mi(),{trackingRef:c,trackClicked:l}=Oi(oi.QuickActionButton,{agentId:o??"",chatId:n,quickAction:e.kind,message:Fd(e)?e.message:void 0,systemKind:Fd(e)?e.systemMessageKind:void 0});return(0,i.jsx)(kn.Kk,{ref:c,iconStart:e.icon?(0,i.jsx)(Ld,{icon:e.icon}):void 0,text:e.label,className:aa(e.isRecommended&&"animating"===r&&Pd,e.isRecommended&&"stopped"===r&&Nd),onClick:()=>{l(),a("stopped"),null==t||t()}})},Fd=e=>"chatMessage"===e.kind,zd="_stack_1air9_1",Ud=({actions:e,title:t,isStreaming:n,isMostRecentMessage:r,capabilities:a})=>n||!r?null:(0,i.jsxs)(o.k,{direction:"column",align:"stretch",gap:3,paddingTop:2,className:zd,children:[t&&(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",weight:"medium",color:"base-subdued",children:t}),(0,i.jsx)(o.k,{direction:"column",align:"stretch",gap:2,children:e.map((e=>(0,i.jsx)(Bd,{action:e,onClick:()=>{var t;return null==(t=null==a?void 0:a.sendQuickAction)?void 0:t.execute(e)}},e.label)))})]});function Hd(e){const{status:t,isStreaming:n}=e;return n?(0,i.jsx)(c.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",marginTop:2,marginBottom:2,children:t}):null}function Wd({messageId:e,suggestionIds:t}){const{id:n}=ji(),{agentId:r}=mi(),{applyAllSuggestions:a}=Ei(),s=Ii(),{trackingRef:o,trackClicked:c}=Ti(oi.ApplyAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return s.isFeatureEnabled(bc.AcceptAllSuggestions)?(0,i.jsx)(E.z,{ref:o,variant:"secondary",size:"small",onClick:()=>{a(t),c()},children:"Apply all"}):null}function $d({messageId:e,suggestionIds:t}){const{id:n}=ji(),{agentId:r}=mi(),{dismissAllSuggestions:a}=Ei(),{trackingRef:s,trackClicked:o}=Ti(oi.DismissAllSuggestionsButton,{agentId:r??"",chatId:n,messageId:e});return(0,i.jsx)(E.z,{ref:s,variant:"secondary",size:"small",onClick:()=>{a(t),o()},children:"Dismiss all"})}function Gd(e){const{messageId:t,availableSuggestionsCount:n}=e,{id:r}=ji(),{agentId:a}=mi(),{focusSuggestions:s}=Ei(),{trackingRef:o,trackClicked:c}=Ti(oi.ShowSuggestionsButton,{agentId:a??"",chatId:r,messageId:t});return(0,i.jsx)(kn.WD,{ref:o,title:"Suggestions",suggestions:n,onClick:()=>{s(),c()}})}function Vd(e){const{messageId:t,suggestions:n,isStreaming:r}=e,a=Ii(),c=function(e){const{onUpdate:t,hasSuggestion:n}=Ei(),[r,a]=(0,s.useState)([]),i=(0,s.useCallback)((()=>{const t=e.filter((e=>n(e.contentId))).map((e=>e.contentId));a((e=>e.length===t.length&&e.every(((e,n)=>e===t[n]))?e:t))}),[n,e]);return(0,s.useEffect)((()=>{i()}),[e,n,i]),(0,s.useEffect)((()=>{const e=t(i);return()=>e.dispose()}),[t,i]),r}(n);return!a.isFeatureEnabled(bc.SuggestionsSummary)||r||0===c.length?null:(0,i.jsxs)(o.k,{direction:"column",gap:2,marginTop:2,marginBottom:2,children:[(0,i.jsx)(Gd,{messageId:t,availableSuggestionsCount:c.length}),c.length>1&&(0,i.jsxs)(o.k,{align:"center",gap:2,children:[(0,i.jsx)(Wd,{messageId:t,suggestionIds:c}),(0,i.jsx)($d,{messageId:t,suggestionIds:c})]})]})}function Zd({content:e,isStreaming:t=!1,sticky:n=!0}){return n||t?(0,i.jsx)(c.x,{as:"p",color:"base-subdued",italic:!0,variant:"text-small",children:e}):null}function qd(e){return"string"==typeof e?e:Array.isArray(e)?e.map((e=>qd(e))).join(""):s.isValidElement(e)?s.Children.toArray(e.props.children).map((e=>qd(e))).join(""):""}function Kd(e,t,n){if(null==n||!n.length||!e)return;const r=qd(t);if(!r)return;const a=r.match(/^\[(\d+)\]$/),i=a?parseInt(a[1],10):0;if(i<1||i>n.length)return;const s=n[i-1];return(null==s?void 0:s.url)===e?{index:i,source:s}:void 0}function Jd({part:e,isStreaming:t,isMostRecentMessage:n,messageId:a,capabilities:o,sources:c}){const l=(0,s.useCallback)((e=>({...e,a:t=>{var n;const{children:r,node:a,...s}=t,o=Kd(s.href,r,c);return o?(0,i.jsx)(Rd,{href:o.source.url,citationIndex:o.index,recordId:o.source.recordId,searchRequestId:o.source.searchRequestId}):null==(n=e.a)?void 0:n.call(e,t)}})),[c]);switch(e.kind){case"text":return(0,i.jsx)(kn.e5,{content:e.content,isStreaming:t,updateComponents:l});case"artifact":return(0,i.jsx)(Id,{messageId:a,content:e.content,isStreaming:t,capabilities:o});case"alt-artifacts":return(0,i.jsx)(Td,{messageId:a,alternatives:e.alts,isStreaming:t,capabilities:o});case"tool-call":return(0,i.jsx)(Zd,{content:e.content,sticky:e.sticky,isStreaming:t});case"suggestions-status":return(0,i.jsx)(Hd,{status:e.status,isStreaming:t});case"suggestions-summary":return(0,i.jsx)(Vd,{messageId:a,suggestions:e.suggestions,isStreaming:t});case"quick-actions":return(0,i.jsx)(Ud,{actions:e.actions,title:e.title,isStreaming:t,isMostRecentMessage:n,capabilities:o});case"widget":return null;default:return(0,r.vE)(e)}}function Xd(e){switch(e.type){case"ai_message":return[{kind:"text",content:e.content}];case"generated_text":return[{kind:"artifact",content:e.content}];case"proposed_edits":return function(e){return e.edits.filter((e=>e.reason)).map((e=>({kind:"suggestions-status",status:e.reason||""})))}(e);case"reading_document":return[{kind:"tool-call",content:"Reading document",sticky:!1}];case"generic_tool_call":return[{kind:"tool-call",content:e.content,sticky:e.sticky}];case"error":default:return[];case"quick_actions":return[{kind:"quick-actions",actions:e.actions,title:e.title}];case"widget":return[{kind:"widget",widget:e.widget_type}]}}const Yd="`````artifact";function Qd(e){const t=e.indexOf(Yd);if(-1===t)return[{kind:"text",content:e}];const n=e.slice(0,t),r=e.lastIndexOf("`````");return r<=t?[{kind:"text",content:n}]:[{kind:"text",content:n},{kind:"artifact",content:e.slice(t+Yd.length,r)}]}function eu(e){const t=[],n=[];for(const r of e){const[e,a]=Qd(r.content);if(e&&0===t.length&&t.push(e),!a||"artifact"!==a.kind)break;n.push({title:r.title,content:a.content})}return n.length>0&&t.push({kind:"alt-artifacts",alts:n}),t}function tu(e){return"kind"in e&&"thinking"===e.kind}function nu(e,t,n){if(tu(e))return[];if(function(e){return"responseFormat"in e&&e.responseFormat===Pa.B5.AiEditorOutput}(e))return function(e,t,n,r){const a=e.flatMap(Xd);return t.length>0&&n&&!r&&a.push({kind:"suggestions-summary",suggestions:t.map((e=>({contentId:e.contentId})))}),a}(e.items,e.alerts,t,n);if(function(e){return"responseFormat"in e&&e.responseFormat===Pa.B5.PromptOutput}(e)){const t=e.variations;return t?eu(t):Qd(e.content)}if(function(e){return!("responseFormat"in e&&void 0!==e.responseFormat||tu(e))}(e)){const t=e.variations;return t?eu(t):Qd(e.content)}return function(e){return"responseFormat"in e&&e.responseFormat===Pa.B5.Other}(e)?Qd(e.content):[]}const ru="_hideSourcesButton_1ad1j_1",au="_viewSourcesButton_1ad1j_1",iu="_sourcePill_1ad1j_31",su="_index_1ad1j_47",ou="_icon_1ad1j_59",cu="_title_1ad1j_63";function lu(e){const{sources:t}=e,[n,r]=(0,s.useState)(!0),a=(0,s.useCallback)((()=>{r((e=>!e))}),[]);if(null==t||!t.length)return null;const c=(0,Ya._6)(t.length,"source","sources");return(0,i.jsxs)(o.k,{direction:"column",gap:1,children:[(0,i.jsxs)("button",{className:au,onClick:a,children:[t.length," ",c,(0,i.jsx)(g.J,{icon:n?Aa.b:Ma,accessibilityLabel:"",size:"small"})]}),n?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.k,{direction:"column",gap:2,children:t.map(((e,t)=>(0,i.jsx)(du,{source:e,index:t+1},e.url)))}),t.length>5&&(0,i.jsxs)("button",{className:ru,onClick:a,children:["Hide ",c]})]})]})}function du({source:e,index:t}){const{trackingRef:n}=Ti(oi.ChatResponseSource,{location:"footer",recordId:e.recordId,searchRequestId:e.searchRequestId});return(0,i.jsxs)("a",{ref:n,className:iu,href:e.url,target:"_blank",rel:"noopener noreferrer",children:[(0,i.jsx)("div",{className:su,children:t}),(0,i.jsx)("img",{className:ou,alt:"",src:e.iconUrl}),(0,i.jsx)("div",{className:cu,children:e.title})]})}const uu="_stepList_m4x3r_1",gu="_step_m4x3r_1",hu="_animatedStep_m4x3r_39",pu="_animatedStepText_m4x3r_47";function fu({message:e,initialCollapsed:t}){const[n,r]=(0,s.useState)(t),a=n?"Show thought process":"Hide thought process";if("thinking"===e.kind||!e.planning||0===e.planning.length)return null;if("final"===e.kind)return(0,i.jsxs)(o.k,{gap:3,direction:"column",children:[(0,i.jsxs)(E.z,{onClick:()=>{r(!n)},variant:"secondary",size:"small",children:[a,(0,i.jsx)(g.J,{icon:n?Aa.b:Ma,accessibilityLabel:a,size:"small"})]}),!n&&(0,i.jsx)("ul",{className:uu,children:e.planning.map(((e,t)=>(0,i.jsx)("li",{className:gu,children:e.title},`index-${t}`)))})]});const l=e.planning[e.planning.length-1];return(0,i.jsx)(o.k,{gap:3,direction:"column",children:(0,i.jsx)("div",{className:hu,children:(0,i.jsx)(c.x,{className:pu,as:"span",variant:"text-small",children:l.title})},l.title)})}function mu(e){const{message:t,isMostRecentMessage:n,capabilities:r}=e,a="final"!==t.kind&&!t.stopped,o=(0,s.useMemo)((()=>nu(t,n,a)),[t,n,a]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(fu,{message:t,initialCollapsed:"final"===t.kind}),o.map(((s,c)=>{var l;const d=a&&c===o.length-1,u={part:s,messageId:t.id,isStreaming:d,isMostRecentMessage:n,capabilities:r,sources:"thinking"!==t.kind?t.sources:void 0},g=null==(l=e.externalContentPartHandler)?void 0:l.handleContentPart(u);return g&&"handled"===g.kind?g.component:(0,i.jsx)(Sl,{id:"ContentPart",fallback:(0,i.jsx)(kn.Tv,{content:"Part of the message cannot be displayed"}),children:(0,i.jsx)(Jd,{...u})},`${s.kind}-${c}`)})),(0,i.jsx)(lu,{sources:"thinking"!==t.kind?t.sources:void 0})]})}function vu(e){return(0,i.jsx)(Sl,{id:"RenderedResponse",fallback:(0,i.jsx)(kn.Tv,{content:"Part of the message cannot be displayed"}),children:(0,i.jsx)(mu,{...e})})}const xu="_assistantChatMessage_525qj_1",bu=s.forwardRef(((e,t)=>{const{message:n,isMostRecentMessage:r,capabilities:a}=e;return(0,i.jsx)(Sl,{id:"AssistantChatMessage",fallback:(0,i.jsx)(kn.Tv,{title:"Something went wrong",content:"Message cannot be displayed."}),children:(0,i.jsx)(Ad,{debugInfo:n.debugInfo,debugTitle:"Raw Response Message",children:(0,i.jsx)(u.x,{className:xu,"data-testid":"AssistantChatMessage","aria-live":"polite",ref:t,children:"thinking"!==n.kind||n.stopped?(0,i.jsx)(vu,{externalContentPartHandler:e.externalContentPartHandler,message:n,capabilities:a,isMostRecentMessage:r}):(0,i.jsx)(_d,{})})})})}));bu.displayName="AssistantChatMessage";const Cu="_scrollToBottomButton_hi5xi_1",yu="_scrollToBottomButtonHidden_hi5xi_27",ku=s.forwardRef(((e,t)=>{const{children:n,className:r,padding:a=3,gap:c=6,disableAutoScroll:l=!1}=e,[d,u]=s.useState(!1),g=s.useRef(0),h=s.useRef(!1),p=s.useRef(null),f=s.useCallback((()=>{var e;l||h.current?u(!!p.current&&ju(p.current)):null==(e=p.current)||e.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})}),[l]);s.useEffect((()=>{p.current&&u(ju(p.current))}),[]),function(e,t){s.useEffect((()=>{const n=e.current;if(!n)return;const r=new MutationObserver(t);return r.observe(n,{childList:!0,subtree:!0}),()=>{r.disconnect()}}),[e,t])}(p,f),s.useEffect((()=>{const e=e=>{const t=e.target,n=t.scrollTop;h.current=n<g.current,u(ju(t)),g.current=n};return p.current&&p.current.addEventListener("scroll",e),()=>{p.current&&p.current.removeEventListener("scroll",e)}}),[]);return(0,i.jsxs)(o.k,{direction:"column",style:{overflow:"auto",position:"relative"},children:[(0,i.jsx)(o.k,{"data-testid":"gr-auto-scroll-container",direction:"column",padding:a,className:r,gap:c,ref:e=>{t&&("function"==typeof t?t(e):t.current=e),p.current=e},style:{overflow:"auto"},children:n}),(0,i.jsx)(E.z,{className:wu(Cu,!d&&yu),variant:"secondary",onClick:()=>{var e;u(!1),h.current=!1,null==(e=p.current)||e.scrollTo({top:p.current.scrollHeight,behavior:"smooth"})},"aria-label":"Scroll to the bottom",children:(0,i.jsx)(kn.Hf,{accessibilityLabel:""})})]})}));function wu(...e){return e.filter(Boolean).join(" ")}ku.displayName="AutoScrollContainer";function ju(e){return e.scrollTop+e.clientHeight<e.scrollHeight-50}function Su(e){return"assistant"===(null==e?void 0:e.type)&&"thinking"===(null==e?void 0:e.kind)}const Iu="_chatAutoScrollContainer_16t37_1",Au=({children:e,mostRecentMessage:t,mostRecentAssistantMessageRef:n})=>{const r=(0,kn.VL)("chatAutoScrollContainer"),a=(({ref:e,mostRecentAssistantMessageRef:t,mostRecentMessage:n})=>{const[r,a]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{if(!t.current||!e.current)return;if(Su(n))return void a(!1);const r=new IntersectionObserver((([t])=>{if(!e.current)return;const n=t.boundingClientRect.top<=100;a(n)}),{root:e.current,threshold:[.85,.9,.95,1],rootMargin:"0px"});return r.observe(t.current),()=>{r.disconnect()}}),[e,t,n]),r})({ref:r,mostRecentAssistantMessageRef:n,mostRecentMessage:t});return(0,s.useEffect)((()=>{const e=Su(t);r.current&&e&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}),[r,t]),(0,i.jsx)(ku,{ref:e=>{r.current=e},gap:4,padding:3,className:Iu,disableAutoScroll:a,children:e})};function Eu({onRetry:e,message:t,previousMessage:n}){const{id:r}=ji(),{agentId:a}=mi(),s=Ti(oi.RetryButton,{chatId:r,agentId:a??""});return(0,i.jsx)("div",{"data-testid":"ChatError",children:(0,i.jsx)(Ad,{debugInfo:t.debugInfo,debugTitle:"Raw Error Message",children:(0,i.jsx)(kn.Tv,{title:t.title,content:t.content,action:{onClick:e,label:"Retry",accessibilityLabel:`Retry send message "${n}"`,tracking:s}})})})}function _u({accessibilityLabel:e,className:t,height:n,width:r}){return(0,i.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:r??16,height:n??16,viewBox:"0 0 16 16",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,i.jsx)("path",{d:"M8.00003 11.9981C10.2092 11.9981 12.0001 10.2072 12.0001 7.99807C12.0001 5.78892 10.2092 3.99805 8.00003 3.99805C5.79087 3.99805 4 5.78892 4 7.99807C4 10.2072 5.79087 11.9981 8.00003 11.9981Z",fill:"white"}),(0,i.jsx)("path",{d:"M7.99988 4.00004H14.927C14.2251 2.78383 13.2153 1.77386 11.9992 1.07169C10.7831 0.369521 9.40359 -9.79574e-05 7.99935 1.94734e-08C6.59511 9.79964e-05 5.21564 0.369909 3.99966 1.07225C2.78367 1.77459 1.77404 2.7847 1.07227 4.00101L4.53582 10.0001L4.53892 9.99928C4.18659 9.3917 4.00065 8.70197 3.99986 7.99962C3.99907 7.29727 4.18346 6.60713 4.53443 5.99876C4.88539 5.39038 5.39054 4.88529 5.99895 4.53439C6.60736 4.18348 7.29753 3.99918 7.99988 4.00004Z",fill:"url(#paint0_linear_5622_4937)"}),(0,i.jsx)("path",{d:"M8.00018 11.1664C9.7491 11.1664 11.1669 9.74861 11.1669 7.9997C11.1669 6.25078 9.7491 4.83301 8.00018 4.83301C6.25127 4.83301 4.8335 6.25078 4.8335 7.9997C4.8335 9.74861 6.25127 11.1664 8.00018 11.1664Z",fill:"#1A73E8"}),(0,i.jsx)("path",{d:"M11.464 10.0009L8.00046 16C9.40469 16.0002 10.7842 15.6307 12.0004 14.9286C13.2165 14.2265 14.2263 13.2166 14.9284 12.0005C15.6304 10.7843 15.9999 9.40478 15.9996 8.00054C15.9994 6.5963 15.6294 5.21688 14.9269 4.00098H7.99986L7.99902 4.00408C8.70137 4.00272 9.39167 4.18655 10.0003 4.53704C10.609 4.88753 11.1145 5.39228 11.4659 6.00042C11.8172 6.60855 12.0021 7.29858 12.0018 8.00093C12.0014 8.70328 11.816 9.39314 11.464 10.0009Z",fill:"url(#paint1_linear_5622_4937)"}),(0,i.jsx)("path",{d:"M4.53616 10.001L1.0726 4.00195C0.370305 5.21796 0.000540619 6.59744 0.000488287 8.00168C0.000435955 9.40592 0.370098 10.7854 1.0723 12.0015C1.77451 13.2175 2.78451 14.2273 4.00074 14.9292C5.21698 15.6311 6.59657 16.0004 8.00082 16L11.4644 10.001L11.4621 9.99869C11.1121 10.6076 10.6078 11.1135 9.99991 11.4654C9.39205 11.8172 8.70217 12.0026 7.99982 12.0028C7.29747 12.0031 6.60747 11.8182 5.99938 11.4667C5.39128 11.1153 4.88658 10.6097 4.53616 10.001Z",fill:"url(#paint2_linear_5622_4937)"}),(0,i.jsxs)("defs",{children:[(0,i.jsxs)("linearGradient",{id:"paint0_linear_5622_4937",x1:"1.07227",y1:"5.00005",x2:"14.927",y2:"5.00005",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#D93025"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#EA4335"})]}),(0,i.jsxs)("linearGradient",{id:"paint1_linear_5622_4937",x1:"6.90752",y1:"15.8931",x2:"13.8349",y2:"3.89451",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#FCC934"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#FBBC04"})]}),(0,i.jsxs)("linearGradient",{id:"paint2_linear_5622_4937",x1:"8.86602",y1:"15.5005",x2:"1.93864",y2:"3.50195",gradientUnits:"userSpaceOnUse",children:[(0,i.jsx)("stop",{stopColor:"#1E8E3E"}),(0,i.jsx)("stop",{offset:"1",stopColor:"#34A853"})]})]})]})}function Mu({accessibilityLabel:e,className:t,width:n=18,height:r=18}){return(0,i.jsxs)("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",width:n,height:r,viewBox:"0 0 18 18",fill:"none","aria-hidden":""===e,"aria-label":e,children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.25 16.5H13.5C15.1569 16.5 16.5 15.1569 16.5 13.5V11.25H15V13.5C15 14.3284 14.3284 15 13.5 15H11.25V16.5ZM3 11.25V13.5C3 14.3284 3.67157 15 4.5 15H6.75V16.5H4.5C2.84315 16.5 1.5 15.1569 1.5 13.5V11.25H3ZM6.75 3H4.5C3.67157 3 3 3.67157 3 4.5V6.75H1.5V4.5C1.5 2.84315 2.84315 1.5 4.5 1.5H6.75V3ZM15 6.75V4.5C15 3.67157 14.3284 3 13.5 3H11.25V1.5H13.5C15.1569 1.5 16.5 2.84315 16.5 4.5V6.75H15Z",fill:"var(--color-icon-base-default, #707070)"}),(0,i.jsx)("path",{d:"M5.625 7.125H9L12.375 7.125",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"}),(0,i.jsx)("path",{d:"M5.625 10.875H9L10.875 10.875",stroke:"var(--color-icon-base-default, #707070)",strokeWidth:"1.5"})]})}function Ru(e){const t=function(e){return"kind"in e?e:(0,Pa.zE)(e.context)||(0,Pa._M)(e.context)?{kind:"selection",className:e.className,height:e.height,width:e.width}:(0,Pa.Ot)(e.context)&&e.context.icon?{kind:"icon",iconSrc:e.context.icon.src,className:e.className,height:e.height,width:e.width}:{kind:"fallback",className:e.className,height:e.height,width:e.width}}(e);if("selection"===t.kind)return(0,i.jsx)(Mu,{accessibilityLabel:"Selected text context",className:t.className,width:t.width,height:t.height});if("icon"===t.kind&&t.iconSrc){const e=t.iconAlt||"Custom icon for context";return(0,i.jsx)(kn.bC,{alt:e,className:t.className,src:t.iconSrc,width:t.width??14,height:t.height??14,errorState:()=>(0,i.jsx)(_u,{accessibilityLabel:e,className:t.className})})}return"fallback"===t.kind?(0,i.jsx)(_u,{accessibilityLabel:"Application context",className:t.className,width:t.width,height:t.height}):null}function Du(e){return(0,Pa.zE)(e)?`"${e}"`:(0,Pa._M)(e)?e.selectedText:(0,Pa.Ot)(e)?e.title:""}const Ou="_truncateLongText_8pr95_1",Tu="_defaultColor_8pr95_7",Lu="_subduedColor_8pr95_11";function Pu(e){const{context:t,className:n,height:r,width:a,iconContainerClassName:s,includeSubtitle:l}=e;if(!t)return null;const d=function(e){return(0,Pa._M)(e)||(0,Pa.zE)(e)?"Selected text":(0,Pa.Ot)(e)?e.origin:null}(t),u=(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",weight:"medium",className:aa(Ou,l?Tu:Lu),children:Du(t)});return(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:2,className:aa(n,Ou),children:[(0,i.jsx)(o.k,{flex:"0 0 auto",className:s,children:(0,i.jsx)(Ru,{context:t,height:r,width:a})}),l&&d?(0,i.jsxs)(o.k,{direction:"column",className:Ou,children:[u,(0,i.jsx)(c.x,{as:"span",variant:"text-xsmall",weight:"medium",className:aa(Ou,Lu),children:d})]}):u]})}const Nu={attachedContextChip:"_attachedContextChip_1jv2y_1",interactive:"_interactive_1jv2y_16",removeSourceButtonContainer:"_removeSourceButtonContainer_1jv2y_20",removeSourceButton:"_removeSourceButton_1jv2y_20",iconContainer:"_iconContainer_1jv2y_42"};function Bu({context:e,onClear:t}){const n=function(e){return"object"==typeof e&&"kind"in e?e.kind:"selection"}(e),[r,a]=(0,s.useState)(null),c=!!t,{trackingRef:d,trackClicked:u}=Oi(oi.RemoveContextItemButton,{contextType:n});return(0,i.jsxs)(o.k,{className:aa(Nu.attachedContextChip,c&&Nu.interactive),gap:1,children:[(0,i.jsx)(Pu,{context:e,className:Nu.attachedContextHint,iconContainerClassName:Nu.iconContainer,height:16,width:16,includeSubtitle:!0}),(0,i.jsx)("div",{className:Nu.removeSourceButtonContainer,ref:a,children:r&&c&&(0,i.jsx)(l.h,{ref:d,onClick:()=>{u(),t()},size:"small",icon:ha.V,className:Nu.removeSourceButton,accessibilityLabel:"Remove source",variant:"tertiary",tooltipContentProps:{root:r}})})]})}const Fu="_userChatMessage_1bbcw_1";function zu(e){const{message:t,showAttachedContextHint:n=!0}=e;return(0,i.jsx)(Ad,{debugInfo:t.debugInfo,debugTitle:"Raw User Message",children:(0,i.jsxs)(o.k,{gap:6,direction:"column",children:[t.context&&n?(0,i.jsxs)(o.k,{children:[(0,i.jsx)(o.k,{flex:"1 1 auto"}),(0,i.jsx)(Bu,{context:t.context})]}):null,(0,i.jsx)(u.x,{className:Fu,"data-testid":"UserChatMessage",children:(0,i.jsx)(c.x,{as:"span",variant:"text-small",children:t.content})})]})})}function Uu(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(t(r,n))return r}}const Hu=({capabilities:e,externalContentPartHandler:t})=>{const{messages:n,retryMessage:a}=ji(),o=(0,s.useRef)(null),c=n[n.length-1],l=(0,s.useMemo)((()=>{const e=Uu(n,(e=>"assistant"===e.type));return null==e?void 0:e.id}),[n]),d=()=>{a()};return(0,i.jsx)(Au,{mostRecentMessage:c,mostRecentAssistantMessageRef:o,children:n.map(((a,s,c)=>{var u;switch(a.type){case"user":{const e=Uu(c,((e,t)=>(0,Pa.Z$)(e)&&t<s)),t=e&&(0,Pa.Z$)(e)&&!(0,Pa.AA)(e.context,a.context);return(0,i.jsx)(zu,{message:a,showAttachedContextHint:t},a.id)}case"assistant":return(0,i.jsx)(bu,{externalContentPartHandler:t,message:a,isMostRecentMessage:a.id===l,ref:a.id===l?o:null,capabilities:e},a.id);case"error":return(0,i.jsx)(Eu,{message:a,onRetry:d,previousMessage:null==(u=n[s-1])?void 0:u.content},a.id);default:(0,r.vE)(a)}}))})};function Wu({contextChip:e,contextSwitcher:t,contextId:n,placeholder:r,selectedContext:a,selectedAgentIds:c,agentSelector:l}){const{installedAgents:d}=_i(),{stopStreamingResponse:u,messages:g,sendMessage:h,id:p}=ji(),{responseStoppedByUser:f}=Si(),m=Ii().isFeatureEnabled(bc.GoBranding),v=s.useRef(null),[x,b]=s.useState(""),C=""!==x.trim(),y=g[g.length-1],k=(0,Pa.qC)(y),w=()=>{var e;u(),f({chatId:p}),null==(e=v.current)||e.focus()},j=d.length>0,S=t||j;return(0,i.jsx)(kn.xg,{alwaysShowControls:!0,textAreaRef:v,value:x,onSubmit:(e,t)=>{if(!k){const r=((null==c?void 0:c.length)??0)>0,i=n||r?{...r&&{scopedThirdPartyAgentIds:c},...n&&{contextId:n}}:void 0,s=null!=t&&t.includeContext?a:void 0;h(e,i,s)}},onChange:e=>{b(e)},controls:({handleSubmit:e})=>(0,i.jsxs)(o.k,{direction:"row",justify:S?"space-between":"end",width:"100%",gap:2,align:"center",children:[S?(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[t,j&&l]}):null,(0,i.jsx)(kn.TH,{hasValue:C,isProcessing:k,onStop:w,onSubmit:e})]}),contextChip:e,placeholder:r||(m?"Ask Go":"Ask AI")})}const $u=({chatId:e,children:t})=>{const{setActiveChat:n,createNewChat:r}=ji();return function(){const{agentId:e}=mi();if(!e)throw new Error("Agent ID is required to use chat subscription");const{subscribeToChatEvents:t,unsubscribeFromChatEvents:n}=yi((e=>e.chat));(0,s.useEffect)((()=>(t(e),()=>{n(e)})),[t,n,e])}(),(0,s.useEffect)((()=>{void 0!==e?n(e):r()}),[e,n,r]),t};function Gu(e){return(0,Pa.Z$)(e)&&!!e.context}function Vu(e){return e.filter(Gu).map((({context:e})=>e))}function Zu(){const{contextSources:e,currentAppId:t,selectedContextSourceIds:n,detachCurrentContext:r,attachContext:a,resetContextSource:i,getCurrentAppContext:s,getSelectedContextId:o}=yi((e=>({contextSources:e.contextExtraction.contextSources,currentAppId:e.contextExtraction.currentAppId,selectedContextSourceIds:e.contextExtraction.selectedContextSourceIds,attachContext:e.contextExtraction.attachContext,detachCurrentContext:e.contextExtraction.detachCurrentContext,resetContextSource:e.contextExtraction.resetContextSource,getCurrentAppContext:e.contextExtraction.getCurrentAppContext,getSelectedContextId:e.contextExtraction.getSelectedContextId}))),{messages:c}=ji(),l=((e,t,n)=>{const r=t[t.length-1],a=n[r===Es.default?e:r];return(null==a?void 0:a.type)===_s.AppContent&&"error"===a.status?null:a||null})(t,n,e),d=o(),u=Ms(l),g=Vu(c);return{currentAppId:t,availableContexts:Object.values(e).filter((e=>{const t=Ms(e)??void 0;return e.id!==(null==l?void 0:l.id)&&g.every((e=>!(0,Pa.AA)(e,t)))})),selectedContext:u,selectedContextSource:l,attachContext:a,detachCurrentContext:e=>d&&r(e,d),resetContextSource:i,getCurrentAppContext:s}}function qu(e){return t=>{const{selectedContext:n,selectedContextSource:r}=Zu(),a=null==r?void 0:r.id;return(0,i.jsx)(e,{...t,contextId:a,selectedContext:n??void 0})}}function Ku(e){return t=>{const{id:n,messages:r}=ji(),{selectedContext:a,detachCurrentContext:c}=Zu(),l=0===r.length,d=!!a&&(0,Pa.vr)(a),u=(0,s.useMemo)((()=>{if(d)return!1;const e=Vu(r).some((e=>(0,Pa.AA)(e,a??void 0)));return l||!e}),[l,r,a,d]);return(0,i.jsx)(e,{...t,contextChip:a&&u?(0,i.jsx)(o.k,{align:"center",justify:"start",children:(0,i.jsx)(Bu,{context:a,onClear:()=>{c(n)}})}):null})}}const Ju="_popoverContent_1ccss_1",Xu=({children:e,message:t,trackImpression:n})=>(0,i.jsx)(dl,{title:"Add a source",content:"Go gets smarter when it knows more. Share what you're working on.",placement:"top-start",onDismiss:t.onDismiss,trackImpression:n,className:Ju,children:e}),Yu=({isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:n,children:r})=>{const{message:a,trackImpression:o}=Mi(Tc.AddDataSourcePopover),{agentId:c,selectedAgentId:l}=mi(),d=c===l,[u,g]=(0,s.useState)(!1),h=(0,s.useCallback)((()=>{g(!0),o()}),[o]),p=!!a,f=!n;return p&&!e&&!t&&f&&d||u&&p&&f&&d?(0,i.jsx)(Xu,{message:a,trackImpression:h,children:r}):r},Qu="_contextSwitcherButton_1gg6x_1",eg=(0,s.forwardRef)((({isDisabled:e,hasSelectedContext:t,onClick:n,...r},a)=>{const{id:o}=ji(),{trackClicked:c}=Oi(oi.ContextSwitcherButton,{chatId:o}),[d,u]=(0,s.useState)(!1);return(0,i.jsx)(Yu,{isDisabled:e,hasSelectedContext:t,contextSwitcherWasOpened:d,children:(0,i.jsx)(l.h,{...r,ref:a,className:Qu,icon:Ra.m,accessibilityLabel:"Add sources to chat",tooltipProps:{children:"Add sources to chat"},variant:"tertiary",isDisabled:e,onClick:e=>{c(),u(!0),setTimeout((()=>null==n?void 0:n(e)),0)}})})})),tg="_root_1gqz8_1",ng="_menuItemIcon_1gqz8_9",rg="_contextSwitcherMenu_1gqz8_30",ag=8;function ig(e){const{availableContexts:t,onSelect:n,maxContexts:r=ag,hasSelectedContext:a}=e,s=Math.max(Math.min(r,ag),1),c=t.filter(Rs).sort(((e,t)=>t.lastUpdated.getTime()-e.lastUpdated.getTime())).slice(0,s),l=t.filter(Ts),u=c.length>0,g=l.length>0,h=(0,i.jsx)(eg,{isDisabled:!u&&!g,hasSelectedContext:a});return(0,i.jsx)(d.v,{className:tg,activator:h,children:(0,i.jsxs)(o.k,{className:rg,direction:"column",children:[(0,i.jsx)(d.v.Section,{label:"Select a tab",children:c.map(((e,t)=>(0,i.jsx)(sg,{contextSource:e,onClick:n},t)))}),u&&g&&(0,i.jsx)(d.v.Separator,{}),l.map(((e,t)=>(0,i.jsx)(sg,{contextSource:e,onClick:n},t)))]})})}function sg(e){var t,n,a;const{contextSource:o,onClick:c}=e,{id:l}=ji(),{trackingRef:u,trackClicked:g}=Oi(oi.ContextOption,{chatId:l,contextType:o.type});let h="fallback";o.type===_s.AppContent?h=null!=(t=o.context)&&t.icon?"icon":"fallback":o.type===_s.TextSelection?h="selection":(0,r.vE)(o,`Unknown context source type: ${o.type}`);const p=null==(a=null==(n=o.context)?void 0:n.icon)?void 0:a.src,f=(0,s.useCallback)((()=>(0,i.jsx)(Ru,{kind:h,iconSrc:p,className:ng})),[h,p]),m=Ms(o);return null===m?null:(0,i.jsx)(d.v.Item,{onClick:()=>{g(),c(o)},icon:f,children:(0,i.jsx)("span",{ref:u,children:Du(m)})},o.id)}function og(e){return t=>{const{id:n}=ji(),{availableContexts:r,selectedContext:a,attachContext:s}=Zu(),o=!(a&&(0,Pa.vr)(a))&&(0,i.jsx)(ig,{onSelect:e=>{s(n,e.id)},availableContexts:r,hasSelectedContext:!!a});return(0,i.jsx)(e,{...t,contextSwitcher:o})}}const cg=e=>t=>{const n=(()=>{var e;const t=pd(fd.ChatInputUphookSlot),{messages:n}=ji(),r=0===n.length,{commandExecutor:a}=mi(),{trackClicked:i}=Oi(oi.ChatInputUphookSecondaryCta,{agentId:"success"===t.status?null==(e=t.data)?void 0:e.value.secondaryCtaTargetAgentId:""}),o=(0,s.useCallback)((()=>{var e;"success"===t.status&&null!=(e=t.data)&&e.value.secondaryCtaTargetAgentId&&(i(),null==a||a.execute({kind:li.OpenAgent,agentId:t.data.value.secondaryCtaTargetAgentId}))}),[a,t,i]);if(r)return{visibilityStatus:"hidden"};if("loading"===t.status)return{visibilityStatus:"loading"};if("success"===t.status&&t.data){const e=t.data;return{visibilityStatus:"visible",data:{...e.value,onClick:e.onClick,onShow:e.onShow,onSecondaryCtaClick:o}}}return{visibilityStatus:"hidden"}})();return(0,i.jsx)(kn.v8,{uphook:n,children:(0,i.jsx)(e,{...t})})},lg="_agentIcon_9z4ye_1";function dg({selectedAgents:e}){const t=e.length-3;if(0===e.length)return(0,i.jsx)(g.J,{icon:Da.F,accessibilityLabel:"Select agents"});const n={bgColor:"white",direction:"row",align:"center",justify:"center",borderRadius:1,borderColor:"base-subdued"};return(0,i.jsxs)(o.k,{direction:"row",children:[e.slice(0,3).map(((e,t)=>(0,i.jsx)(o.k,{className:lg,marginLeft:0===t?0:-2,...n,children:e.renderIcon({size:"small"})},e.id))),t>0&&(0,i.jsxs)(o.k,{className:lg,marginLeft:-2,height:12,width:12,color:"base-default",...n,children:["+",t]},"remaining")]})}const ug="_menu_10z3n_1";function gg({onChange:e,selectedAgents:t}){const{installedAgents:n}=_i(),r=(0,s.useCallback)((n=>{t.includes(n)?e((e=>e.filter((e=>e.id!==n.id)))):e((e=>[...e,n]))}),[t,e]),a=(0,s.useCallback)((e=>t.some((t=>t.id===e.id))),[t]),c=(0,s.useMemo)((()=>n.filter((e=>e.hasData))),[n]);return(0,i.jsx)(d.v,{className:ug,activator:(0,i.jsx)(E.z,{variant:"tertiary",size:"small",isDisabled:0===c.length,children:(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:2,borderRadius:1,children:[(0,i.jsx)(dg,{selectedAgents:t}),"Connections"]})}),children:c.length?(0,i.jsx)(d.v.Section,{label:"Add connections to chat",children:c.map((e=>(0,i.jsx)(d.v.Item,{onClick:()=>r(e),children:(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:1,justify:"space-between",children:[(0,i.jsxs)(o.k,{direction:"row",align:"center",gap:1,children:[e.renderIcon({size:"medium"}),(0,i.jsx)("span",{children:e.title})]}),a(e)&&(0,i.jsx)(g.J,{size:"small",icon:I.L,accessibilityLabel:"Selected"})]})},e.id)))}):null})}function hg(e){return t=>{const[n,r]=(0,s.useState)([]),a=(0,i.jsx)(gg,{onChange:r,selectedAgents:n}),o=(0,s.useMemo)((()=>function(e){const t=[];for(const n of e)try{t.push((0,yn.Oo)(n.id))}catch{}return t}(n)),[n]);return(0,i.jsx)(e,{...t,agentSelector:a,selectedAgentIds:o})}}},51990:(e,t,n)=>{if(n.d(t,{c:()=>a}),6168==n.j)var r=n(9417);function a(e){let[t,n]=(0,r.z)(i(e.value),i(e.defaultValue)||"",e.onChange);return{value:t,setValue:n}}function i(e){if(null!=e)return e.toString()}},54667:(e,t,n)=>{if(n.d(t,{l:()=>a}),6168==n.j)var r=n(9417);function a(e={}){let{isReadOnly:t}=e,[n,a]=(0,r.z)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:n,setSelected:function(e){t||a(e)},toggle:function(){t||a(!n)}}}},99589:(e,t,n)=>{n.d(t,{XZ:()=>g});var r=n(92379);if(6168==n.j)var a=n(89566);if(6168==n.j)var i=n(16253);if(6168==n.j)var s=n(54667);if(6168==n.j)var o=n(13599);if(6168==n.j)var c=n(11278);if(6168==n.j)var l=n(64810);if(6168==n.j)var d=n(38253);if(6168==n.j)var u=n(60598);const g=6168==n.j?r.forwardRef((function(e,t){var n;const{helperMessage:u,labelDisplay:g="visible",errorMessage:p,isOptional:f,isRequired:m,labelIndicatorForRequired:v="(Required)",labelIndicatorForOptional:x="(Optional)",className:b,style:C,size:y="medium"}=e,k=(0,a.Me)(e.id),w=(0,a.Me)(),j=(0,s.l)(e),S=(0,a.B3)(t),{inputProps:I}=(0,o.O)({...e,validationState:null!=e.errorMessage?"invalid":"valid"},j,S),[A,E]=r.useState(!1),_=!0===e.isDisabled,M=!0===e.isIndeterminate,R=null!=u?w:void 0,D={labelDisplay:g,isDisabled:_,isSelected:j.isSelected||M,isIndeterminate:M,errorMessage:p,size:y};return r.createElement("div",{className:(0,i.W)("gds-checkbox",`gds-checkbox-${y}`,A&&"gds-checkbox-focus-visible",_&&"gds-checkbox-disabled")},r.createElement(c.A,{label:e.children,labelDisplay:g,htmlFor:k,helperMessage:u,errorMessage:p,isOptional:f,isRequired:m,labelIndicatorForOptional:x,labelIndicatorForRequired:v,size:y},r.createElement(d.u,{style:{width:24,height:24}},r.createElement("input",{...null!=(n=e.__inputProps)?n:I,onFocus:()=>E(!0),onBlur:()=>E(!1),id:k,ref:S,tabIndex:_?-1:0,"aria-describedby":null!=R?R:I["aria-describedby"],className:(0,i.W)("gds-checkbox-input",`gds-checkbox-input-${y}`,b),style:C})),r.createElement(h,{...D})),r.createElement(l.f,{size:y,errorMessage:p,className:"gds-checkbox-label-margin"}))})):null,h=e=>{const{labelDisplay:t,isDisabled:n,isSelected:a,isIndeterminate:s,errorMessage:o,size:c="medium"}=e,l=null!=o?u.I.Border.Critical.Default:u.I.Border.Base.Default;return r.createElement("svg",{className:(0,i.W)("gds-checkbox-icon",`gds-checkbox-icon-${c}`,"visible"===t&&"gds-checkbox-icon-label",n&&"gds-checkbox-element-disabled"),viewBox:"0 0 16 16","aria-hidden":"true",style:{backgroundColor:a?u.I.Background.Interactive.Default:void 0,border:`1px solid ${a?u.I.Background.Interactive.Default:l}`}},a&&!s&&r.createElement("path",{transform:"translate(2 4)",strokeWidth:0,fill:"var(--color-icon-base-inverse)",d:"M11.7071 1.41421L4.49995 8.62132L0.292847 4.41421L1.70706 3L4.49995 5.79289L10.2928 0L11.7071 1.41421Z"}),s&&r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",transform:"translate(2.5 7)",d:"M10.5 2H0.5V0H10.5V2Z",fill:"white"}))}},99807:(e,t,n)=>{n.d(t,{U:()=>h});var r=n(92379);if(6168==n.j)var a=n(16253);if(6168==n.j)var i=n(49642);if(6168==n.j)var s=n(51990);if(6168==n.j)var o=n(79615);if(6168==n.j)var c=n(75001);if(6168==n.j)var l=n(55167);if(6168==n.j)var d=n(95638);if(6168==n.j)var u=n(11278);if(6168==n.j)var g=n(75362);const h=6168==n.j?r.forwardRef((function(e,t){const{labelDisplay:n="hidden",accessibilityLabelClearButton:d="Clear search",className:h,label:f,placeholder:m,onClear:v,style:x,size:b="medium"}=e,C=(0,s.c)(e),y=r.useRef(null);r.useImperativeHandle(t,(()=>y.current));const{labelProps:k,inputProps:w,clearButtonProps:j}=(0,o.t)(e,C,y);(0,i.j)(w,e);const S={...j,excludeFromTabOrder:!1,"aria-label":d,onKeyDown:e=>{var t;"Enter"!==e.key&&"Space"!==e.key||(C.setValue(""),null==(t=y.current)||t.focus(),null==v||v())}};return r.createElement("div",{className:(0,a.W)("gds-text-field",`gds-text-field-${b}`)},r.createElement(u.A,{label:f,labelDisplay:n,...k,size:b}),r.createElement("div",{className:"gds-text-field-container"},r.createElement("div",{className:"gds-text-field-icon-start"},r.createElement(g.J,{icon:c.D,accessibilityLabel:""})),r.createElement("input",{ref:y,className:(0,a.W)("gds-text-field-input",h),...w,placeholder:m,spellCheck:!1,style:x}),""!==C.value&&r.createElement(p,{...S},r.createElement(g.J,{icon:l.L,accessibilityLabel:"",size:"medium"===b?"small":"medium"}))))})):null,p=e=>{const t=r.useRef(null),{buttonProps:n}=(0,d.U)(e,t);return r.createElement("button",{...n,ref:t},e.children)}},72936:(e,t,n)=>{n.d(t,{P:()=>g});var r=n(92379),a=n(16253),i=n(4968);var s=n(89566),o=n(82597),c=n(11278),l=n(75362),d=n(64810);const u=r.forwardRef((function(e,t){const n=(0,s.Me)(e.id),{label:i,labelIndicatorForOptional:u,labelIndicatorForRequired:g,labelDisplay:h="visible",errorMessage:p,helperMessage:f,isOptional:m,isRequired:v,isDisabled:x,className:b,onChange:C,...y}=e;return r.createElement("div",{className:"gds-select"},r.createElement(c.A,{label:i,labelDisplay:h,htmlFor:n,className:"gds-select-label",helperMessage:f,errorMessage:p,isOptional:m,isRequired:v,labelIndicatorForOptional:u,labelIndicatorForRequired:g}),r.createElement("div",{className:"gds-select-container"},r.createElement("select",{ref:t,id:n,className:(0,a.W)("gds-select-inner",b),disabled:x,required:v,"aria-invalid":null!=p?Boolean(p):void 0,onChange:null!=C?e=>C(e.target.value):void 0,...y}),r.createElement(l.J,{accessibilityLabel:"",icon:o.b,size:"small",className:"gds-select-icon"})),r.createElement(d.f,{errorMessage:p}))})),g=(0,i.o)(u,"Select",{Option:e=>r.createElement("option",{...e})})},22825:(e,t,n)=>{n.d(t,{r:()=>g});var r=n(92379);if(6168==n.j)var a=n(89566);var i=n(16253);if(6168==n.j)var s=n(54145);if(6168==n.j)var o=n(46538);if(6168==n.j)var c=n(38253);if(6168==n.j)var l=n(88035);if(6168==n.j)var d=n(54295);var u=n(60598);const g=6168==n.j?r.forwardRef((function(e,t){const{label:n,labelDisplay:i="left",isSelected:s,defaultSelected:c,helperMessage:l,isDisabled:d,onChange:u,size:g="medium",id:h,...p}=e,m=(0,a.Me)(),x=h||m,b=(0,a.B3)(t),C=void 0!==s,[y,k]=r.useState(c||!1);r.useEffect((()=>{C&&k(s)}),[s,C]);const w=(0,o.T)(),j=(0,a.Me)(),S=l?j:void 0;return r.createElement("div",{className:"gds-switch","data-disabled":d,"data-label-display":i},r.createElement(f,{label:n,labelDisplay:i,helperMessage:l,helperMessageId:S,inputId:x,size:g}),r.createElement(v,{label:e.label,labelDisplay:i,ref:b,size:g,isDisabled:e.isDisabled,isSelected:y,onChange:function(e){const t=e.target.checked;C||k(t),u&&u(t)},prefersReducedMotion:w,maybeHelperId:S,inputProps:{id:x,...p}}))})):null,h={small:"text-xsmall",medium:"text-small",large:"text-medium",xlarge:"text-large"},p={small:"text-xsmall",medium:"text-xsmall",large:"text-small",xlarge:"text-medium"};function f({label:e,labelDisplay:t,inputId:n,helperMessage:a,helperMessageId:i,size:o}){if("hidden"===t)return r.createElement(c.u,null,r.createElement("label",{htmlFor:n},r.createElement(l.x,{as:"span"},e)),a&&r.createElement(l.x,{as:"p",id:i},a));let u;return"top"===t?u="1 1 100%":"left"===t||"right"===t?u="1 1 auto":(0,s.v)(t),r.createElement(d.k,{direction:"column",gap:1,flex:u},r.createElement("label",{htmlFor:n,className:"gds-switch-label"},r.createElement(l.x,{as:"span",variant:h[o],weight:"medium"},e)),a&&r.createElement(l.x,{as:"p",id:i,variant:p[o],color:"base-subdued"},a))}const m={small:{height:18,width:34,selectedKnobRadius:7,deselectedKnobRadius:5,rectRadius:10,checkmarkScale:.75,checkmarkTranslation:"27 6.5"},medium:{height:21,width:40,selectedKnobRadius:8,deselectedKnobRadius:6,rectRadius:10.5,checkmarkScale:1,checkmarkTranslation:"24 5"},large:{height:24,width:44,selectedKnobRadius:9,deselectedKnobRadius:7,rectRadius:14,checkmarkScale:1.2,checkmarkTranslation:"21.5 4.5"},xlarge:{height:32,width:60,selectedKnobRadius:12,deselectedKnobRadius:10,rectRadius:16,checkmarkScale:1.5,checkmarkTranslation:"25 5.5"}},v=r.forwardRef((function({isDisabled:e,isSelected:t,maybeHelperId:n,prefersReducedMotion:a,size:s,onChange:o,inputProps:{className:c,"aria-describedby":l,tabIndex:d=0,...g}},h){return r.createElement("div",{"data-size":s},r.createElement("input",{...g,tabIndex:d,role:"switch",ref:h,className:(0,i.W)("gds-switch-input",c),"aria-describedby":n&&l?`${l} ${n}`:l||n,value:t?"on":"off",type:"checkbox",onChange:o,checked:t,disabled:e,"data-size":s}),r.createElement("svg",{width:m[s].width+2,height:m[s].height+2,"aria-hidden":"true",className:"gds-switch-indicator"},r.createElement("rect",{x:1,y:1,width:m[s].width,height:m[s].height,rx:m[s].rectRadius,stroke:t?u.I.Border.Interactive.Default:u.I.Border.Base.Default,strokeWidth:"1",fill:t?u.I.Background.Interactive.Default:u.I.Background.Base.Subdued,className:(0,i.W)(!a&&"gds-switch-animation")}),r.createElement("circle",{cx:t?m[s].width-m[s].selectedKnobRadius-2:2*m[s].deselectedKnobRadius,cy:(m[s].height+2)/2,r:t?m[s].selectedKnobRadius:m[s].deselectedKnobRadius,fill:t?u.I.Background.Base.Default:u.I.Background.Neutral.Default,className:(0,i.W)(!a&&"gds-switch-animation")}),r.createElement("path",{transform:`scale(${m[s].checkmarkScale}) translate(${m[s].checkmarkTranslation})`,opacity:t?"100":"0",fill:"none",d:"M1.5 6.83333L4.26923 9.5L10.5 3.5",stroke:u.I.Icon.Interactive.Default,strokeWidth:"1.5",strokeLinecap:"round",className:(0,i.W)(!a&&"gds-switch-check-animation-turning-"+(t?"on":"off"))})))}))},54145:(e,t,n)=>{function r(e){throw new Error("Unexpected object: "+e)}n.d(t,{v:()=>r})},46538:(e,t,n)=>{n.d(t,{T:()=>a});var r=n(92379);function a(){const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if("undefined"==typeof self||!self.matchMedia)return void t(!1);const e=self.matchMedia("(prefers-reduced-motion: reduce)");function n(e){t(e.matches)}return t(e.matches),e.addEventListener?(e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}):(e.addListener(n),()=>{e.removeListener(n)})}),[]),e}},11087:(e,t,n)=>{n.d(t,{y:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("nocolor",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"AgentsParaphraser",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},e?r.createElement("title",{id:t},e):null,void 0===n?r.createElement("desc",{id:a},"Vector graphic: paraphraser"):n?r.createElement("desc",{id:a},n):null,r.createElement("path",{fill:"var(--color-icon-agent-default)",d:"M15.31 2.917H4.69c-.98 0-1.773.793-1.773 1.773v10.62c0 .98.793 1.773 1.773 1.773h10.62c.98 0 1.773-.793 1.773-1.772V4.69c0-.98-.793-1.773-1.772-1.773M12.43 13.99c-.899.632-1.83.923-2.93.923-2.68 0-4.623-1.919-4.623-4.558 0-2.331 1.83-4.234 4.08-4.234h.461l-.615-.55a.61.61 0 0 1-.049-.858.61.61 0 0 1 .858-.049l1.798 1.611a.61.61 0 0 1 0 .907L9.61 8.793a.6.6 0 0 1-.404.155.6.6 0 0 1-.454-.203.605.605 0 0 1 .049-.858l.615-.55h-.461c-1.579 0-2.866 1.352-2.866 3.02 0 1.966 1.4 3.343 3.408 3.343.85 0 1.538-.219 2.234-.705a.6.6 0 0 1 .842.146.6.6 0 0 1-.145.842zm2.363-2.493h-4.509a.61.61 0 0 1-.607-.607c0-.332.275-.608.607-.608h4.51c.331 0 .607.276.607.608a.61.61 0 0 1-.608.607m0-2.55h-1.756a.61.61 0 0 1-.607-.607c0-.332.275-.608.607-.608h1.756c.332 0 .607.276.607.608a.61.61 0 0 1-.607.607"}))))},82494:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCheckmark",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M2 8.444 5.692 12 14 4"}))))},38665:(e,t,n)=>{n.d(t,{F:()=>s});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var i=n(38076);const s=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceControls",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M8.5 4H14M2 4h2.667m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0ZM2 8h5.5m3.833 0H14m-2.667 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM10 12h4M2 12h4m0 0a1 1 0 1 0 2 0 1 1 0 0 0-2 0Z"})))):null},68198:(e,t,n)=>{n.d(t,{c:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceCopy",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",strokeLinejoin:"round",d:"M7.053 10.842v1.908c0 .69.56 1.25 1.25 1.25h4.447c.69 0 1.25-.56 1.25-1.25V8.303c0-.69-.56-1.25-1.25-1.25h-1.908M8.947 3.25v4.447c0 .69-.56 1.25-1.25 1.25H3.25c-.69 0-1.25-.56-1.25-1.25V3.25C2 2.56 2.56 2 3.25 2h4.447c.69 0 1.25.56 1.25 1.25"}))))},82597:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceDown",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m2 5 6 6 6-6"}))))},69237:(e,t,n)=>{n.d(t,{n:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceExternalLink",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M6.2 2H3.25C2.56 2 2 2.56 2 3.25v9.5c0 .69.56 1.25 1.25 1.25h9.5c.69 0 1.25-.56 1.25-1.25V9.8M8 8l6-6m0 0H9.2M14 2v4.8"}))))},39981:(e,t,n)=>{n.d(t,{n:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceLeft",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M11 2 5 8l6 6"}))))},2651:(e,t,n)=>{n.d(t,{j:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("nocolor",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceOk",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#05735A",fillRule:"evenodd",d:"M8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12m3.498-7.44a.75.75 0 1 0-.996-1.12L6.5 8.996l-1.002-.89a.75.75 0 0 0-.996 1.12L6.5 11.004z",clipRule:"evenodd"}))))},55167:(e,t,n)=>{n.d(t,{L:()=>s});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var i=n(38076);const s=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRemove",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#646B81",fillRule:"evenodd",d:"M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0M6.53 5.47a.75.75 0 0 0-1.06 1.06L6.94 8 5.47 9.47a.75.75 0 1 0 1.06 1.06L8 9.06l1.47 1.47a.75.75 0 1 0 1.06-1.06L9.06 8l1.47-1.47a.75.75 0 1 0-1.06-1.06L8 6.94z",clipRule:"evenodd"})))):null},78393:(e,t,n)=>{n.d(t,{M:()=>s});var r=n(92379),a=n(82491),i=n(38076);const s=(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceRight",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"m5 2 6 6-6 6"}))))},75001:(e,t,n)=>{n.d(t,{D:()=>s});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var i=n(38076);const s=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceSearch",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",strokeLinecap:"round",d:"M9.784 9.784 14 14m-2.919-7.46A4.54 4.54 0 1 1 2 6.54a4.54 4.54 0 0 1 9.081 0Z"})))):null},17302:(e,t,n)=>{n.d(t,{t:()=>s});var r=n(92379);if(/^6(052|168)$/.test(n.j))var a=n(82491);if(/^6(052|168)$/.test(n.j))var i=n(38076);const s=/^6(052|168)$/.test(n.j)?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none",viewBox:"0 0 20 20","aria-hidden":"true","data-icon":"InterfaceStatusCheck",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{fill:"#707070",d:"M10 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16m0 1a7 7 0 1 0 0 14 7 7 0 0 0 0-14m3.153 4.64a.5.5 0 0 1 .694.72L9 13.027l-2.347-2.26a.5.5 0 0 1 .694-.72L9 11.64z"})))):null},89923:(e,t,n)=>{n.d(t,{g:()=>s});var r=n(92379);if(6168==n.j)var a=n(82491);if(6168==n.j)var i=n(38076);const s=6168==n.j?(0,a.I)("color",(({title:e,titleId:t,desc:n,descId:a,resourcePrefix:s=(0,i.O)(),...o})=>r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 16 16","aria-hidden":"true","data-icon":"InterfaceUser",stroke:"transparent","aria-labelledby":t,"aria-describedby":a,...o},n?r.createElement("desc",{id:a},n):null,e?r.createElement("title",{id:t},e):null,r.createElement("path",{stroke:"#646B81",d:"m3.714 12 2.11-.88a2.14 2.14 0 0 0 1.319-1.977M12.286 12l-2.11-.88a2.14 2.14 0 0 1-1.319-1.977M6 6.286v1.143a2 2 0 1 0 4 0V6.286a2 2 0 1 0-4 0ZM14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0Z"})))):null},11972:(e,t,n)=>{n.d(t,{v:()=>r});class r{listeners=new Map;on(e,t){return this._getOrInitializeListeners(e).add(t),{dispose:()=>{this.listeners.get(e)?.delete(t)}}}emit(e,t){const n=this.listeners.get(e);if(n)for(const r of n)try{r(t)}catch(t){console.error(`Error in event listener for event "${String(e)}":`,t)}}_getOrInitializeListeners(e){return this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e)}}},51601:(e,t,n)=>{n.d(t,{B9:()=>y,IX:()=>o,Jn:()=>c});var r=n(92379),a=n(95295),i=n(64443);const s=Object.freeze({BLUR:"blur",CLICK:"click",CONTEXT_MENU:"contextmenu",COPY:"copy",CUT:"cut",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DRAG_START:"dragstart",DROP:"drop",ERROR:"error",FOCUS:"focus",HASH_CHANGE:"hashchange",KEY_DOWN:"keydown",KEY_UP:"keyup",LOAD:"load",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_OVER:"mouseover",MOUSE_UP:"mouseup",PASTE:"paste",POP_STATE:"popstate",RESIZE:"resize",SCROLL:"scroll",TOUCH_END:"touchend",TOUCH_START:"touchstart"}),o=Object.freeze({Off:Object.seal({impression:!1,clicked:!1}),Clicked:Object.seal({impression:!1,clicked:!0}),Impression:Object.seal({impression:!0,clicked:!1}),ImpressionAndClicked:Object.seal({impression:!0,clicked:!0})});var c=(e=>(e.Clicked="clicked",e.Impression="impression",e))(c||{}),l=(e=>(e.Noop="noop",e))(l||{});function d(e,t){"function"==typeof e?e(t):e&&"current"in e&&(e.current=t)}function u(e,t){return e===t||"object"==typeof e&&"object"==typeof t&&null===function(e,t,n=[]){if(e===t||!e&&!t)return null;if(!e||!t)return g;let r=0;for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&!n.includes(a)&&(r++,!Object.prototype.hasOwnProperty.call(t,a)||t[a]!==e[a]))return a;let a=0;for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&!n.includes(e)&&(a++,a>r))return e;return null}(e,t)}const g="(falsy value)";const h=Symbol("uninitialized");function p(e,t=u){return function(e,t=u){const n=(0,r.useRef)(h);let a;a=n.current!==h&&t(n.current,e)?n.current:e,(0,r.useEffect)((()=>{n.current=a}),[a]);const i=n.current===h?void 0:n.current;return[a,i]}(e,t)[0]}const f=typeof self<"u",m=Object.freeze(f?r.useLayoutEffect:r.useEffect);function v(e){const t=(0,r.useRef)(e);return m((()=>{t.current=e}),[e]),t}class x{constructor(e,t){this.root=null,this.rootMargin="0px",this.thresholds=[0]}disconnect(){}observe(e){}takeRecords(){return[]}unobserve(e){}}function b(e={}){const t=i.C8.Logging.getLogger("useIntersectionObserver"),n=(0,r.useRef)(new Map),s=(0,r.useRef)(),{getRootElement:o,threshold:c,rootMargin:l}=e,d=v(o),u=p(c),g=(0,r.useCallback)(((e,t)=>{a.unstable_batchedUpdates((()=>{for(const r of e){const e=n.current.get(r.target);for(const n of e??[])n([r],t)}}))}),[]);(0,r.useEffect)((()=>{var e;s.current=function(e,t){return typeof IntersectionObserver>"u"?new x(e,t):new IntersectionObserver(e,t)}(g,{threshold:u,rootMargin:l,root:null==(e=d.current)?void 0:e.call(d)});for(const e of n.current.keys())s.current.observe(e);return()=>{var e;null==(e=s.current)||e.disconnect(),s.current=void 0}}),[d,g,l,u]);const h=(0,r.useCallback)(((e,r)=>{var a;let i=n.current.get(e);i||(i=new Set,n.current.set(e,i)),i.has(r)?t.warn("Received call to 'observe' with already registered callback for target: ",e):(i.add(r),1===i.size&&(null==(a=s.current)||a.observe(e)))}),[]),f=(0,r.useCallback)(((e,r)=>{var a;const i=n.current.get(e);null!=i&&i.has(r)?(i.delete(r),0===i.size&&(n.current.delete(e),null==(a=s.current)||a.unobserve(e))):t.warn("Received call to 'unobserve' for unregistered callback on target: ",e)}),[]),m=(0,r.useCallback)((e=>n.current.has(e)),[]),b=(0,r.useMemo)((()=>({observe:h,unobserve:f,isObserved:m})),[m,h,f]);return(0,r.useMemo)((()=>({observer:b})),[b])}function C(e,t,n){const{observer:a}=b(t);return function(e,t,{disabled:n}={}){const a=i.C8.Logging.getLogger("useIntersectionObserverConsumer"),s=v(t),o=(0,r.useRef)(null);e||a.error("Intersection observer not provided");const c=(0,r.useCallback)(((...e)=>s.current(...e)),[s]),l=(0,r.useCallback)((()=>{!o.current||!e||e.isObserved(o.current)||e.observe(o.current,c)}),[e,c]),u=(0,r.useCallback)((()=>{!o.current||!e||e.isObserved(o.current)&&e.unobserve(o.current,c)}),[e,c]);return(0,r.useEffect)((()=>{n?u():l()}),[n,l,u]),(0,r.useCallback)((e=>{o.current!==e&&(u(),d(o,e),l())}),[l,u])}(a,e,n)}function y({componentId:e,autoTrackedInteractions:t,trackEvent:n,detail:a,intersectionThreshold:i,shouldTrackClickEvent:o=k}){const u=e===l.Noop;a=p(a);const g=(0,r.useCallback)((()=>{u||n(e,c.Impression,a)}),[e,a,u,n]),h=(0,r.useCallback)((t=>{!u&&(!t||o(t))&&n(e,c.Clicked,a)}),[e,a,u,o,n]),f=C(((e,t)=>{e[e.length-1].isIntersecting&&(g(),t.disconnect())}),{threshold:[i||0]},{disabled:u||!(null!=t&&t.impression)}),m=(0,r.useRef)(null),v=function(e){return(0,r.useCallback)((t=>{for(const n of e)n&&d(n,t)}),e)}([f,(0,r.useCallback)((e=>{var n;null==(n=m.current)||n.call(m),null!=t&&t.clicked&&(null==e||e.addEventListener(s.MOUSE_DOWN,h),d(m,(()=>{null==e||e.removeEventListener(s.MOUSE_DOWN,h)})))}),[null==t?void 0:t.clicked,h])]);return{trackImpression:g,trackClicked:h,trackingRef:v}}function k(){return!0}},13599:(e,t,n)=>{n.d(t,{O:()=>i});var r=n(92379);if(6168==n.j)var a=n(80578);function i(e,t,n){let{inputProps:i,isSelected:s,isPressed:o,isDisabled:c,isReadOnly:l}=(0,a.O)(e,t,n),{isIndeterminate:d}=e;return(0,r.useEffect)((()=>{n.current&&(n.current.indeterminate=d)})),{inputProps:Object.assign(Object.assign({},i),{checked:s}),isSelected:s,isPressed:o,isDisabled:c,isReadOnly:l}}},79615:(e,t,n)=>{if(n.d(t,{t:()=>c}),6168==n.j)var r=n(89566);if(6168==n.j)var a=n(66708);if(6168==n.j)var i=n(73909);function s(e){return e&&e.__esModule?e.default:e}var o;function c(e,t,n){let c=(0,i.qb)(s(o)),{isDisabled:l,isReadOnly:d,onSubmit:u=(()=>{}),onClear:g,type:h="search"}=e,{labelProps:p,inputProps:f,descriptionProps:m,errorMessageProps:v}=(0,a.h)(Object.assign(Object.assign({},e),{value:t.value,onChange:t.setValue,onKeyDown:(0,r.tS)((e=>{const n=e.key;"Enter"!==n&&"Escape"!==n||e.preventDefault(),l||d||("Enter"===n&&u(t.value),"Escape"===n&&(t.setValue(""),g&&g()))}),e.onKeyDown),type:h}),n);return{labelProps:p,inputProps:Object.assign(Object.assign({},f),{defaultValue:void 0}),clearButtonProps:{"aria-label":c.format("Clear search"),excludeFromTabOrder:!0,preventFocusOnPress:!0,isDisabled:l||d,onPress:()=>{t.setValue(""),g&&g()},onPressStart:()=>{n.current.focus()}},descriptionProps:m,errorMessageProps:v}}o={"ar-AE":{"Clear search":" "},"bg-BG":{"Clear search":"  "},"cs-CZ":{"Clear search":"Vymazat hledn"},"da-DK":{"Clear search":"Ryd sgning"},"de-DE":{"Clear search":"Suche zurcksetzen"},"el-GR":{"Clear search":" "},"en-US":{"Clear search":"Clear search"},"es-ES":{"Clear search":"Borrar bsqueda"},"et-EE":{"Clear search":"Thjenda otsing"},"fi-FI":{"Clear search":"Tyhjenn haku"},"fr-FR":{"Clear search":"Effacer la recherche"},"he-IL":{"Clear search":" "},"hr-HR":{"Clear search":"Obrii pretragu"},"hu-HU":{"Clear search":"Keress trlse"},"it-IT":{"Clear search":"Cancella ricerca"},"ja-JP":{"Clear search":""},"ko-KR":{"Clear search":" "},"lt-LT":{"Clear search":"Ivalyti iek"},"lv-LV":{"Clear search":"Notrt meklanu"},"nb-NO":{"Clear search":"Tm sk"},"nl-NL":{"Clear search":"Zoekactie wissen"},"pl-PL":{"Clear search":"Wyczy zawarto wyszukiwania"},"pt-BR":{"Clear search":"Limpar pesquisa"},"pt-PT":{"Clear search":"Limpar pesquisa"},"ro-RO":{"Clear search":"tergei cutarea"},"ru-RU":{"Clear search":" "},"sk-SK":{"Clear search":"Vymaza vyhadvanie"},"sl-SI":{"Clear search":"Poisti iskanje"},"sr-SP":{"Clear search":"Obrii pretragu"},"sv-SE":{"Clear search":"Rensa skning"},"tr-TR":{"Clear search":"Aramay temizle"},"uk-UA":{"Clear search":" "},"zh-CN":{"Clear search":""},"zh-TW":{"Clear search":""}}},80578:(e,t,n)=>{if(n.d(t,{O:()=>s}),6168==n.j)var r=n(89566);if(6168==n.j)var a=n(70172);if(6168==n.j)var i=n(38715);function s(e,t,n){let{isDisabled:s=!1,isRequired:o=!1,isReadOnly:c=!1,value:l,name:d,children:u,"aria-label":g,"aria-labelledby":h,validationState:p="valid"}=e;null!=u||(null!=g||null!=h)||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:f,isPressed:m}=(0,i.r7)({isDisabled:s}),{focusableProps:v}=(0,a.kc)(e,n),x=(0,r.dG)(f,v),b=(0,r.zL)(e,{labelable:!0});return(0,r.y$)(n,t.isSelected,t.setSelected),{inputProps:(0,r.dG)(b,Object.assign(Object.assign(Object.assign({"aria-invalid":"invalid"===p||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":c||void 0,"aria-required":o||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:s},null==l?{}:{value:l}),{name:d,type:"checkbox"}),x)),isSelected:t.isSelected,isPressed:m,isDisabled:s,isReadOnly:c}}},17862:(e,t,n)=>{n.d(t,{S1:()=>a,yU:()=>s});var r=n(92379);n(54221);"undefined"!=typeof self?r.useLayoutEffect:r.useEffect;function a({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:a=!1,initialIsIntersecting:i=!1,onChange:s}={}){var o;const[c,l]=(0,r.useState)(null),[d,u]=(0,r.useState)((()=>({isIntersecting:i,entry:void 0}))),g=(0,r.useRef)();g.current=s;const h=(null==(o=d.entry)?void 0:o.isIntersecting)&&a;(0,r.useEffect)((()=>{if(!c)return;if(!("IntersectionObserver"in self))return;if(h)return;let r;const i=new IntersectionObserver((e=>{const t=Array.isArray(i.thresholds)?i.thresholds:[i.thresholds];e.forEach((e=>{const n=e.isIntersecting&&t.some((t=>e.intersectionRatio>=t));u({isIntersecting:n,entry:e}),g.current&&g.current(n,e),n&&a&&r&&(r(),r=void 0)}))}),{threshold:e,root:t,rootMargin:n});return i.observe(c),()=>{i.disconnect()}}),[c,JSON.stringify(e),t,n,h,a]);const p=(0,r.useRef)(null);(0,r.useEffect)((()=>{var e;c||!(null==(e=d.entry)?void 0:e.target)||a||h||p.current===d.entry.target||(p.current=d.entry.target,u({isIntersecting:i,entry:void 0}))}),[c,d.entry,a,h,i]);const f=[l,!!d.isIntersecting,d.entry];return f.ref=f[0],f.isIntersecting=f[1],f.entry=f[2],f}var i={width:void 0,height:void 0};function s(e){const{ref:t,box:n="content-box"}=e,[{width:a,height:s},c]=(0,r.useState)(i),l=function(){const e=(0,r.useRef)(!1);return(0,r.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,r.useCallback)((()=>e.current),[])}(),d=(0,r.useRef)({...i}),u=(0,r.useRef)(void 0);return u.current=e.onResize,(0,r.useEffect)((()=>{if(!t.current)return;if("undefined"==typeof self||!("ResizeObserver"in self))return;const e=new ResizeObserver((([e])=>{const t="border-box"===n?"borderBoxSize":"device-pixel-content-box"===n?"devicePixelContentBoxSize":"contentBoxSize",r=o(e,t,"inlineSize"),a=o(e,t,"blockSize");if(d.current.width!==r||d.current.height!==a){const e={width:r,height:a};d.current.width=r,d.current.height=a,u.current?u.current(e):l()&&c(e)}}));return e.observe(t.current,{box:n}),()=>{e.disconnect()}}),[n,t,l]),{width:a,height:s}}function o(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}},7368:(e,t,n)=>{n.d(t,{oR:()=>l});var r=n(92379),a=n(82180);const{useDebugValue:i}=r,{useSyncExternalStoreWithSelector:s}=a;let o=!1;const c=e=>e;function l(e,t=c,n){n&&!o&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),o=!0);const r=s(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return i(r),r}},33171:(e,t,n)=>{n.d(t,{M:()=>a});const r=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach((n=>n(t,e)))}},a=()=>t,i={setState:r,getState:a,getInitialState:()=>s,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},s=t=e(r,a,i);return i},a=e=>e?r(e):r}}]);