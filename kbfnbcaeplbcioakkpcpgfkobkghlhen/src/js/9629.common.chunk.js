(self.webpackChunk=self.webpackChunk||[]).push([[9629],{19194:(e,t,s)=>{if(s.d(t,{N:()=>n}),/^6(052|168)$/.test(s.j))var i=s(8867);function n(e){return new i.y((t=>{const s=new DisposableStack,i=s.use(e());return s.adopt(i.subscribe((e=>t.next(e))),(e=>e.unsubscribe())),()=>s.dispose()}))}},10556:(e,t,s)=>{s.d(t,{D8:()=>n.D,N4:()=>a.N,TJ:()=>n.T,kX:()=>i.k});var i=s(16386),n=s(24071);if(/^6(052|168)$/.test(s.j))var a=s(19194)},27543:(e,t,s)=>{s.r(t),s.d(t,{activate:()=>N});var i,n,a,o,r,c,d,h=s(651),u=s(90572),l=s(33885),p=s(77115),v=s(10556),m=s(74091),w=s(13391),b=s(84197),S=s(85936),k=s(56544),f=e=>{throw TypeError(e)},y=(e,t,s)=>t.has(e)||f("Cannot "+s),x=(e,t,s)=>(y(e,t,"read from private field"),s?s.call(e):t.get(e)),A=(e,t,s)=>t.has(e)?f("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),g=(e,t,s,i)=>(y(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),D=(e,t,s)=>(y(e,t,"access private method"),s);class C{constructor(e){A(this,c),A(this,i),A(this,n),A(this,a),A(this,o),A(this,r),g(this,i,new DisposableStack),g(this,n,w.h.create({kind:S.x.State.Kind.Initial})),g(this,a,w.h.create(null)),this.title=k.K_,this.state=x(this,n).view(),this.audience=x(this,a).view((e=>null!=e?e:void 0)),this.loadReactions=()=>(D(this,c,d).call(this,{kind:"loadReactionsAction"}),Promise.resolve()),this.goBack=()=>{D(this,c,d).call(this,{kind:"goBackAction"})},this.selectAudience=()=>{D(this,c,d).call(this,{kind:"selectAudienceAction"})},this.setAudience=e=>(D(this,c,d).call(this,{kind:"setAudienceAction",audience:e}),Promise.resolve()),this.editAudience=()=>{D(this,c,d).call(this,{kind:"editAudienceAction"})},this.saveAudience=e=>(D(this,c,d).call(this,{kind:"saveAudienceAction",name:e}),Promise.resolve()),g(this,o,e.documentId),g(this,r,e.bus),x(this,i).adopt(e.agentState.subscribe((e=>x(this,n).set(e))),(e=>e.unsubscribe())),x(this,i).adopt(e.audience.subscribe((e=>x(this,a).set(e))),(e=>e.unsubscribe())),this.textWordsCount=x(this,i).use(x(this,r).state.textInfo.view(x(this,o),null)),this.capiSessionId=x(this,i).use(x(this,r).state.capiSessionId.view(x(this,o),null)),this.context={tracking:{trackEvent:(e,t)=>x(this,r).events.trackingEvent.emit(x(this,o),{event:e,detail:t})},textWordsCount:this.textWordsCount.view((e=>{var t;return null!=(t=null==e?void 0:e.wordsCount)?t:0})),capiSessionId:this.capiSessionId.view((e=>null!=e?e:void 0))},this.featureFlags={customAudiences:e.experimentation.isAssigned(b.bI)},this.hasTextChanges=x(this,i).use(x(this,r).state.hasTextChanges.view(x(this,o),!1))}[Symbol.dispose](){x(this,i).dispose()}dispose(){x(this,i).dispose()}}i=new WeakMap,n=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakMap,c=new WeakSet,d=function(e){x(this,r).events.panelUIAction.emit(x(this,o),e)};s(84848);var I=s(39117),j=s(9790),W=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),P=e=>{throw TypeError(e)},E=(e,t,s)=>{var i;null!=t?("object"!=typeof t&&"function"!=typeof t&&P("Object expected"),s&&(i=t[W("asyncDispose")]),void 0===i&&(i=t[W("dispose")]),"function"!=typeof i&&P("Object not disposable"),e.push([s,i,t])):s&&e.push([s]);return t},M=(e,t,s)=>{var i="function"==typeof SuppressedError?SuppressedError:function(e,t,s,i){return(i=Error(s)).name="SuppressedError",i.error=e,i.suppressed=t,i},n=e=>t=s?new i(e,t,"An error was suppressed during disposal"):(s=!0,e),a=i=>{for(;i=e.pop();)try{var o=i[1]&&i[1].call(i[2]);if(i[0])return Promise.resolve(o).then(a,(e=>(n(e),a())))}catch(e){n(e)}if(s)throw t};return a()};const N=e=>((e,t,s)=>new Promise(((i,n)=>{var a=e=>{try{r(s.next(e))}catch(e){n(e)}},o=e=>{try{r(s.throw(e))}catch(e){n(e)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(a,o);r((s=s.apply(e,t)).next())})))(void 0,[e],(function*({bus:e,documents:t,experimentation:s}){var i=[];try{const o=E(i,new DisposableStack),r=o.use(new v.D8({activeDocument:t.activeDocument,documentSessionDisposed:t.documentSessionDisposed,createNewSession:t=>{var i=[];try{const o=E(i,new DisposableStack),r=o.use(e.state.agentState.view(t,{kind:S.x.State.Kind.Initial})),c=o.use(e.state.audience.view(t,null)),d=o.use(new C({bus:e,experimentation:s,agentState:r,audience:c.pipe(u.h(p.C_)),documentId:t})),h=o.move();return{viewModel:d,[Symbol.dispose]:()=>h.dispose()}}catch(e){var n=e,a=!0}finally{M(i,n,a)}}})),c=o.move();return{title:k.K_,renderPanel:e=>(0,h.jsx)(l.F.Fragment,{children:r.activeSession.view(v.TJ.match({activeSession:t=>(0,h.jsx)(j.n,{viewModel:t.viewModel,onClosePanel:e.onClosePanel}),noActiveSession:()=>(0,h.jsx)(m.ZD,{agentName:k.K_}),documentNotSupported:()=>(0,h.jsx)(m.Di,{agentName:k.K_})}))}),renderIcon:e=>(0,h.jsx)(I.b,{size:e.size}),[Symbol.dispose]:()=>c.dispose()}}catch(e){var n=e,a=!0}finally{M(i,n,a)}}))}}]);