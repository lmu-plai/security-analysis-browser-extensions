import{l as e,s as o,m as t,o as n,q as s,v as i,w as a,x as d}from"./index-B9SbLlJ5.js";import{e as r}from"./DataSyncService-BIQVYvDv.js";const c=({widgetId:c,onAllComponentsMountedOverride:u}={})=>{var p;const l=e({}),f=o(),$=null==(p=t())?void 0:p.proxy;if(!$)throw new Error("[useAllComponentsMounted]: Component instance not found!");const v=$.$options.components??{};Object.keys(v).forEach((e=>{const o=v[e];"function"==typeof o&&(v[e]=function(...t){n(l,e,!1);const i=`${e}:${f}:mounted`,a=()=>{n(l,e,!0)};return r.$once(i,a),o(t).then((o=>{const t=o.default;return t&&t.doNotWaitForMount&&(s(l,e),r.$off(i,a)),o}))}.bind($))}));const w=()=>{r.$off("widgets:timeoutExceeded",j)},y=()=>{var e;r.$emit(`${$.$options.name}:${(null==(e=$.$vnode.context)?void 0:e.uid)||""}:mounted`)},g=()=>{u?u.apply($):c?m.widgetManager.appReady(c):y(),w()},j=()=>{const e=Object.keys(l).filter((e=>!l[e]));e.length&&console.warn(`${$.$options.name} is awaiting ${e.join(", ")} to mount.`)};return r.$on("widgets:timeoutExceeded",j),i((()=>{if(Object.keys(l).length){const e=a(l,(o=>{Object.values(o).every((e=>e))&&(g(),e())}),{deep:!0,immediate:!0})}else g()})),d((()=>{w()})),{uid:f,emitComponentMounted:y}};export{c as u};