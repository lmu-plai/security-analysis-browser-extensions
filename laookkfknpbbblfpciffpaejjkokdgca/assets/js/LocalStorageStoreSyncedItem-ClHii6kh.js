import{r as e,w as t}from"./index-B9SbLlJ5.js";class a{constructor(a,r){this.propertyGetter=e(null),this.parseLocalStorageValue=(e,t)=>("string"==typeof e?t:"undefined"!==t&&JSON.parse(t||"null"))||e;const o=localStorage.getItem(a),s=this.parseLocalStorageValue(r,o);this.localStorageKey=a,this.defaultValue=r,this.property=e(s),t((()=>this.currentValue),(e=>localStorage.setItem(this.localStorageKey,"string"==typeof e?e:JSON.stringify(e)))),this.watchLocalStorageChanges()}get currentValue(){return this.propertyGetter.value?this.propertyGetter.value():this.property.value}switchOverToWatchedStoreItem(e){this.stopWatchingLocalStorageChanges(),this.propertyGetter.value=e}updateOnLocalStorageEvent(e){e.key===this.localStorageKey&&(this.property.value=this.parseLocalStorageValue(this.defaultValue,e.newValue))}watchLocalStorageChanges(){window.addEventListener("storage",(e=>this.updateOnLocalStorageEvent(e)))}stopWatchingLocalStorageChanges(){window.removeEventListener("storage",(e=>this.updateOnLocalStorageEvent(e)))}}export{a as L};