import{B as t}from"./BaseDropdownText-CSYTEDLS.js";import{B as i}from"./BaseDropdownOption-NzB_bdFk.js";import{L as s}from"./constants-Bt_TxKWw.js";import{u as n}from"./useAllComponentsMounted-jOG8AT3X.js";import{B as e}from"./BaseDropdown-DNbKWQaF.js";import{F as o}from"./FavIcon-DTKNZxhp.js";import a from"./BaseIcon-CAXE-xBw.js";import{n as r}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{c as l}from"./DataSyncService-BIQVYvDv.js";import{L as p}from"./links-BiNnZQ-c.js";import{p as c}from"./promisifiedChrome-vGTrjPj6.js";import{a9 as d,av as k,aw as u,a as h}from"./index-B9SbLlJ5.js";import{computed as L}from"./reactiveCustomization-l1DAJU8W.js";import{a as f}from"./constants-KuzCZNtH.js";import w from"./icon-lock-BDcjUj_s.js";import v from"./icon-pin-5KioIhLy.js";import g from"./icon-edit-CgpGeR-V.js";import y from"./icon-trash-BSyM-ydR.js";const _=r({name:"LinksListItemIcon",components:{BaseIcon:a,FavIcon:o},props:{linkGroup:{type:Object,default:null},iconSrc:{type:String,default:""}},computed:{topFourLinks(){return this.linkGroup.links.slice(0,4)}}},(function(){var t=this,i=t._self._c;return t.iconSrc?i("div",{staticClass:"link-favicon"},[i("base-icon",{staticClass:"icon-favicon",attrs:{src:t.iconSrc}})],1):t.linkGroup.hasManyLinks?i("div",{staticClass:"link-favicon-grid"},t._l(t.topFourLinks,(function(t){return i("fav-icon",{key:t.id,staticClass:"link-favicon",attrs:{url:t.url}})})),1):i("fav-icon",{staticClass:"link-favicon",attrs:{url:t.linkGroup.links[0].url}})}),[],!1,null,"cd643a4b").exports;const b=r({name:"LinksListItem",components:{LinksListItemToastHeader:r({name:"LinksListItemToastHeader",components:{LinksListItemIcon:_},props:{linkGroup:{type:Object,required:!0}}},(function(){var t=this,i=t._self._c;return i("div",{staticClass:"links-list-item-toast-header"},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))])],1)}),[],!1,null,"2412573f").exports,LinksListItemIcon:_,BaseDropdown:e,BaseDropdownOption:i,BaseDropdownText:t},inject:["viewStateStore","itemStore","capture","batchCapture"],props:{linkGroup:{type:Object,required:!0},isTile:{type:Boolean,default:!1},isOnDash:{type:Boolean,default:!1},isTeamLink:{type:Boolean,default:!1}},setup:()=>({...n()}),computed:{linkGroupTitle(){const t=new Set(this.linkGroup.links.map((t=>d(t.url)?new URL(t.url).hostname:t.url)));return Array.from(t).join("\n")},isLegacyLink(){return this.linkGroup instanceof p},showLabel:()=>L.dashAppTextLabels===f.Always},methods:{openLinks(t){this.batchCapture((this.linkGroup.hasManyLinks?"tab group":"link")+" click",{is_paid_event:this.linkGroup.hasManyLinks});let i=k()||m.models.bookmarksSettings.get("openInNewTab")||t.metaKey||"auxclick"===t.type;this.linkGroup.links.forEach((({url:t},s)=>{u()?window.open(t,i?"_blank":"_self"):c.tabs.openUrl(t,i).then((t=>{t&&0===s&&h.isSafari()&&c.tabs.update(t.id,{active:!0})})),i=!0}))},async toggleLinkPinned(){this.closeLinkDropdown(),await this.itemStore.update(this.linkGroup.id,{pinned:!this.linkGroup.pinned})},async editLink(){if(this.closeLinkDropdown(),this.$admin&&this.isTeamLink){const t=await l.sendMessage({handler:"getSid",args:[this.linkGroup.id]});m.cmd("window.account.open.login","team/links?id="+t.substring(1))}else await this.viewStateStore.togglePopup(!0),this.itemStore.editItem(this.linkGroup.id),await this.viewStateStore.setActiveView(s.Form)},async deleteLink(){this.closeLinkDropdown(),await this.viewStateStore.togglePopup(!0),await this.viewStateStore.setConfirmation({title:"Are you sure you want to delete this link?"})&&(this.capture((this.linkGroup.hasManyLinks?"tab group":"link")+" delete",{is_paid_event:this.linkGroup.hasManyLinks}),await this.itemStore.deleteLinkGroup(this.linkGroup.id))},closeLinkDropdown(){var t;null==(t=this.$refs["link-dropdown"])||t.closeDropdown()}}},(function(){var t=this,i=t._self._c;return i("li",{class:["link-list-item",{tile:t.isTile,dash:t.isOnDash,dark:t.isOnDash,"show-label":t.showLabel}],attrs:{"data-test":"list-item",title:t.linkGroupTitle},on:{click:t.openLinks,auxclick:t.openLinks}},[i("links-list-item-icon",{attrs:{"link-group":t.linkGroup}}),i("span",{staticClass:"link-title"},[t._v(t._s(t.linkGroup.title))]),t.isTeamLink&&!t.$admin?i("div",{staticClass:"link-dropdown lock-wrapper",attrs:{title:"Managed by Team","data-test":"list-item-lock"}},[i("inline-svg",{staticClass:"icon icon-lock",attrs:{src:w}})],1):i("base-dropdown",{ref:"link-dropdown",staticClass:"link-dropdown",attrs:{"container-class":t.isOnDash?"dash":"app","data-test":"list-item-dropdown",title:""},scopedSlots:t._u([{key:"toastHeader",fn:function(){return[i("links-list-item-toast-header",{attrs:{"link-group":t.linkGroup}})]},proxy:!0}])},[t.isTeamLink?i("base-dropdown-text",{attrs:{"is-title":!0,"data-test":"team-link-title"}},[t._v("Team Link")]):t._e(),t.isTeamLink||t.isLegacyLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"pin-item"},on:{click:t.toggleLinkPinned}},[i("inline-svg",{staticClass:"icon icon-pin",attrs:{src:v}}),i("span",{staticClass:"text"},[t._v(" "+t._s(t.linkGroup.pinned?"Unpin":"Pin")+" ")])],1),!t.isLegacyLink||t.isTeamLink?i("base-dropdown-option",{attrs:{"data-test":"edit-item"},on:{click:t.editLink}},[i("inline-svg",{staticClass:"icon icon-edit",attrs:{src:g}}),i("span",{staticClass:"text"},[t._v("Edit")])],1):t._e(),t.isTeamLink?t._e():i("base-dropdown-option",{attrs:{"data-test":"delete-item"},on:{click:t.deleteLink}},[i("inline-svg",{staticClass:"icon icon-trash",attrs:{src:y}}),i("span",{staticClass:"text"},[t._v("Delete")])],1)],1)],1)}),[],!1,null,"89453873").exports,G=Object.freeze(Object.defineProperty({__proto__:null,default:b},Symbol.toStringTag,{value:"Module"}));export{_ as L,b as a,G as b};