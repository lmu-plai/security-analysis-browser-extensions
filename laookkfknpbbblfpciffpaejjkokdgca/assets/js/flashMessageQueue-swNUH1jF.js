import{e as s,c as e}from"./DataSyncService-BIQVYvDv.js";import{r as t}from"./index-B9SbLlJ5.js";import{u as i}from"./Logger-BTKFyPnc.js";import n from"./info-DdD9a7JK.js";const o={messageText:"If the problem persists, please ",linkText:"contact us."};class a{constructor({message:s,id:e=i(),error:t=!1,button:a,buttons:r,persist:c=t,closeButtonEnabled:d=!0===c,contact:g=!!t&&o,icon:m=(t?n:void 0),onDismiss:l,description:f,confetti:u}){this.id=e,this.message=s,this.persist=c||4e3,this.closeButtonEnabled=d,m&&(this.icon=m),t&&(this.error=t),a?this.buttons=[a]:r&&(this.buttons=r),l&&(this.onDismiss=l),g&&(this.contact=!0===g?o:g),f&&(this.description=f),u&&(this.confetti=u)}}const r=e,c=t([]);function d(){return c.value[0]}function g(s){c.value.push(new a(s))}function m(e){s.sendCrossTabMessage("flashMessage:dismiss",e),l(e)}function l(s){var e,t;const i=c.value.findIndex((e=>e.id===s));null==(t=null==(e=c.value[i])?void 0:e.onDismiss)||t.call(e),~i&&c.value.splice(i,1)}s.$on("flashMessage",g),s.$on("flashMessage:dismiss",m),s.addCrossTabMessageListener("flashMessage:dismiss",l),r.addRecurringCrossTabMessageListener({msgId:"flashMessage",success:g}),window.addEventListener("message",(s=>{if("data"in s&&"object"==typeof s.data&&s.data){const e=s.data;if("msgId"in e&&"string"==typeof e.msgId&&"flashMessage"===e.msgId&&"response"in e&&"object"==typeof e.response&&e.response){const s=e.response;"message"in s&&"string"==typeof s.message&&s.message&&g({...s,message:s.message})}}}));export{d as g,m as r};