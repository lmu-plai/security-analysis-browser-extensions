import{V as e,d as t}from"./index-B9SbLlJ5.js";import{g as i,d as s}from"./onboarding-D-_C2fNa.js";import"./Logger-BTKFyPnc.js";import"./style-cpFB66wV.js";import"./DataSyncService-BIQVYvDv.js";import"./enums-C0TfsRui.js";import"./helpers-CVyQ58id.js";import"./TabLeaderElection-Ci9XU4di.js";import"./state-C7K8Oenp.js";import"./LocalStorageStoreSyncedItem-ClHii6kh.js";import"./onboarding-DKrOugBj.js";import"./compareObjects-R6Hcs7xe.js";import"./modal-CUt-4jrz.js";import"./SubscriptionSummary-DTKaK_m5.js";import"./persistStore-C6CQfgEA.js";import"./reactiveCustomization-l1DAJU8W.js";import"./constants-CALDQiUE.js";import"./constants-KuzCZNtH.js";import"./state-B00254AG.js";import"./constants-3_GhJRHQ.js";import"./authService-dK6ZN9yA.js";import"./auth-B1eW30AJ.js";import"./legacyUserMigration-BBmM2Q1F.js";import"./migrateLegacyUserMessageHandler-BMN9RYlR.js";import"./login-D3lslwtx.js";import"./index-FW5FYBiS.js";import"./PomodoroTimers-CqOVDo7T.js";import"./settings-ClOtDILp.js";import"./experiments-CUd_VD1Q.js";import"./settingsViewState-5xgdbrfZ.js";import"./ViewState-CaQI4PuO.js";import"./appZStack-Duidf5Sm.js";import"./siteBlockerGroups-DVPsrCxl.js";import"./ErrorPulseInput-CkNsRuJq.js";import"./SettingsTypes-C_Wf2Ybw.js";import"./accessToken-BQcp6xmY.js";import"./tasksMockData-CfX-tA_z.js";import"./tasksViewState-BBA-SwRl.js";const n=new(e.extend({name:"ModalDevPanelManager",data:()=>({experimentMap:i(),definitions:s,pinnedStep:null}),methods:{setStepActive(e,t){const i=()=>m.trigger("modal:show",e,{subStepIndex:t,force:!0});m.modals?i():m.once("modalContainer:created:checkForced",i)},setPinnedStepActiveOnDashLoad({stepId:e,subStepIndex:i,experimentId:s,variantId:n}={}){let p;if(s){const t=this.experimentMap[s],i=t&&t.variants[n];p=i&&i.steps[e]}else p=this.definitions[e];p&&(this.toggleStepPinned(p,{stepId:e,subStepIndex:i,experimentId:s,variantId:n}),t.appsReady?this.setStepActive(p,i):m.once("appsReady",(()=>{this.setStepActive(p,i)})))},toggleStepPinned(e,{stepId:t,subStepIndex:i,experimentId:s,variantId:n}={}){const p=localStorage.getObject("devPanel:pinnedStep");p?this.objectsMatch(p,{stepId:t,subStepIndex:i,experimentId:s,variantId:n})?(this.$set(e,"pinned",!e.pinned),this.pinnedStep=e.pinned?e:null,this.updateSubStepIndex(e,e.pinned?i:void 0),null===this.pinnedStep&&m.trigger("modal:close")):this.objectsMatch((({stepId:e,experimentId:t,variantId:i})=>({stepId:e,experimentId:t,variantId:i}))(p),{stepId:t,experimentId:s,variantId:n})?this.updateSubStepIndex(e,i):(this.pinnedStep&&(this.$set(this.pinnedStep,"pinned",!1),this.updateSubStepIndex(this.pinnedStep,void 0)),this.$set(e,"pinned",!0),this.updateSubStepIndex(e,i),this.pinnedStep=e):(this.$set(e,"pinned",!0),this.pinnedStep=e,this.updateSubStepIndex(e,i)),e.pinned?localStorage.setObject("devPanel:pinnedStep",{stepId:t,subStepIndex:i,experimentId:s,variantId:n}):localStorage.removeItem("devPanel:pinnedStep")},updateSubStepIndex(e,t){void 0===t?this.$delete(e,"pinnedSubStepIndex"):this.$set(e,"pinnedSubStepIndex",t)},objectsMatch:(e,t)=>new Array(...new Set([...Object.keys(e),...Object.keys(t)])).every((i=>e[i]===t[i]))}}));export{n as default};