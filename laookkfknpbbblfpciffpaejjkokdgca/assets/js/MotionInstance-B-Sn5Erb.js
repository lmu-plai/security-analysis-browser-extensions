import{g as e}from"./FlashMessage-BVeDUGkw.js";import"./flashMessageQueue-swNUH1jF.js";import"./DataSyncService-BIQVYvDv.js";import"./index-B9SbLlJ5.js";import"./Logger-BTKFyPnc.js";import"./style-cpFB66wV.js";import"./info-DdD9a7JK.js";import"./globalKeyEventManager-ByOI7Z15.js";import"./icon-close-DRlspKs3.js";import"./_plugin-vue2_normalizer-DeUNqxFl.js";class t{constructor(e,t){this._handleMotionChange=e=>{const t=this._container,i=t.actualOptions.motion;i&&(e.matches?i.disable?t.retina.reduceFactor=0:t.retina.reduceFactor=i.reduce.value?1/i.reduce.factor:1:t.retina.reduceFactor=1)},this._container=e,this._engine=t}async init(){const t=this._container,i=t.actualOptions.motion;if(!i||!i.disable&&!i.reduce.value)return void(t.retina.reduceFactor=1);const r=e("(prefers-reduced-motion: reduce)");if(!r)return void(t.retina.reduceFactor=1);this._handleMotionChange(r);const a=()=>{(async()=>{this._handleMotionChange(r);try{await t.refresh()}catch{}})()};void 0!==r.addEventListener?r.addEventListener("change",a):void 0!==r.addListener&&r.addListener(a),await Promise.resolve()}}export{t as MotionInstance};