import{I as e,a8 as i,a,H as o}from"./index-B9SbLlJ5.js";import{g as n}from"./Logger-BTKFyPnc.js";import r from"./BaseIcon-CAXE-xBw.js";import{n as s}from"./_plugin-vue2_normalizer-DeUNqxFl.js";const t=s(e({name:"FavIcon",components:{BaseIcon:r},props:{url:{type:String,default:""}},data(){return{imgLoading:!0,updatedUrl:this.url,faviconServiceUrl:null,debouncedUrlChange:void 0,configResolved:!1}},computed:{faviconUrl(){return i(a.ensureUrlScheme(this.updatedUrl),this.faviconServiceUrl)}},watch:{url(){this.debouncedUrlChange&&clearTimeout(this.debouncedUrlChange),this.debouncedUrlChange=setTimeout((()=>{this.updatedUrl=this.url}),300)}},async mounted(){this.faviconServiceUrl=await Promise.race([n("faviconServiceUrl"),o(2e3)])??null,this.configResolved=!0}}),(function(){var e=this,i=e._self._c;return e._self._setupProxy,i("div",[e.imgLoading?i("base-icon",{staticClass:"icon-favicon",attrs:{src:"globe",size:"16px"}}):e._e(),e.configResolved&&"/img/icon/links-fallback.svg"!==e.faviconUrl?i("img",{directives:[{name:"show",rawName:"v-show",value:!e.imgLoading,expression:"!imgLoading"}],staticClass:"icon-favicon",attrs:{src:e.faviconUrl,draggable:"false"},on:{load:function(i){e.imgLoading=!1}}}):e._e()],1)}),[],!1,null,null).exports;export{t as F};