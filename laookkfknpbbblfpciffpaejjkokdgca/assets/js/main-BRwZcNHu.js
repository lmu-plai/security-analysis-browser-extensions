const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/BaseMetricsApp-BP6MbBTI.js","assets/js/index-B9SbLlJ5.js","assets/js/Logger-BTKFyPnc.js","assets/js/style-cpFB66wV.js","assets/css/style-CrTXrpPu.css","assets/js/AppViewSwitchDynamic-7Q3nGfPx.js","assets/js/SmoothReflow-CN2CnQb0.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/useAllComponentsMounted-jOG8AT3X.js","assets/js/DataSyncService-BIQVYvDv.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/SmoothReflow-C80bIkgz.css","assets/js/appViewSwitchMixin-BsLJ76Hr.js","assets/css/AppViewSwitchDynamic-BvKRKS9r.css","assets/js/AppView-Du2InOAV.js","assets/css/AppView-CsYj23U-.css","assets/js/AppHeader-DINik7Wl.js","assets/js/AppHeaderControl-CYSrwe76.js","assets/css/AppHeaderControl-B2WuFnb1.css","assets/js/constants-KuzCZNtH.js","assets/js/icon-close-DRlspKs3.js","assets/css/AppHeader-CM5L_Lkb.css","assets/js/BaseIcon-CAXE-xBw.js","assets/js/dynamic-import-helper-DIl3ayLm.js","assets/css/BaseIcon-Bkqy2Cka.css","assets/js/AppEmpty-Rom0E1b_.js","assets/css/AppEmpty-D0QAg47r.css","assets/js/BaseItemList-kFdAe94b.js","assets/js/index-CbkRD371.js","assets/js/constants-BpVlFj04.js","assets/css/BaseItemList-D8h6-5ZQ.css","assets/js/BaseMetric-ClLQP9bU.js","assets/js/metrics-BQKdARjt.js","assets/js/errors-CZrPVA9A.js","assets/js/compareObjects-R6Hcs7xe.js","assets/js/reactiveCustomization-l1DAJU8W.js","assets/js/pinia-4ulFHh2N.js","assets/js/AppLoading-DWsYUtJy.js","assets/css/AppLoading-DHYBGgbD.css","assets/js/BaseDropdown-DNbKWQaF.js","assets/js/BaseDropdownContent-BfXd6hD-.js","assets/js/constants-CALDQiUE.js","assets/css/BaseDropdownContent-BVfvvT0B.css","assets/js/portal-vue.esm-BlbL0ibK.js","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/BaseDropdownOption-NzB_bdFk.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/ToggleSwitch-DSwcb4Go.js","assets/css/ToggleSwitch-CJxlu7QV.css","assets/js/AppConfirmCancel-Cl42ZKbi.js","assets/js/globalKeyEventManager-ByOI7Z15.js","assets/css/AppConfirmCancel-BcDJGg2Q.css","assets/js/FormFieldWrapper-BlAvXZ8z.js","assets/css/FormFieldWrapper-DhQDPdZ3.css","assets/js/FormInput-TnE29k8J.js","assets/js/SoftFocus-BUhesXB-.js","assets/js/FormToggle-Buxq446e.js","assets/css/FormToggle-DUKt37kY.css","assets/js/FormSelectIcon-BSNnxGog.js","assets/css/FormSelectIcon-CgAAO56F.css","assets/js/clocks-BKFIGann.js","assets/js/countdowns-DgPkbMo-.js","assets/js/icon-x-caret-half-Ciiq12QG.js","assets/js/LocationTypeahead-DVwXQCwx.js","assets/css/LocationTypeahead-DXTz2-um.css","assets/js/BaseForm-BHIC1rD-.js","assets/js/BaseMessage-B1Cb2q_O.js","assets/css/BaseMessage-r5wpiN8K.css","assets/js/ErrorPulseInput-CkNsRuJq.js","assets/css/BaseForm-Dmq27kqX.css","assets/js/AppPopup-CBVX3XyQ.js","assets/css/AppPopup-BXpiIkq_.css","assets/js/VueBase-BB-58KAg.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/AppDash-CSffn7xe.js","assets/css/AppDash-Bgvh0Jie.css","assets/js/AddMetric-CPvWgDHW.js","assets/js/appZStack-Duidf5Sm.js","assets/js/icon-confetti-BvRSomF2.js","assets/js/internalDataMetrics-D1gWPDaj.js","assets/js/useAppToggle-CWDyropZ.js","assets/js/focusModeInsightsViewState-Bp-WMnI-.js","assets/js/ViewState-CaQI4PuO.js","assets/js/CircleIndicator-DM0zp1kg.js","assets/css/CircleIndicator-BLqDnS_I.css","assets/js/state-C7K8Oenp.js","assets/js/LocalStorageStoreSyncedItem-ClHii6kh.js","assets/js/settings-ClOtDILp.js","assets/js/modal-DQlfZdMt.js","assets/js/enums-C0TfsRui.js","assets/js/AppContainer-BbrPMYLy.js","assets/js/showAnyway-Bb-tkUYJ.js","assets/css/AppContainer-Okwrv5EP.css","assets/css/AddMetric-BZp8oTLz.css","assets/css/BaseMetricsApp-B0VdyX1q.css"])))=>i.map(i=>d[i]);
import"./VueBase-BB-58KAg.js";import{_ as e}from"./style-cpFB66wV.js";import{computed as t,persistent as i}from"./reactiveCustomization-l1DAJU8W.js";import{I as s,ai as a,r,z as o,y as n,f as c,d,n as l,A as p,V as h,h as m}from"./index-B9SbLlJ5.js";import{u,M as b}from"./metrics-BQKdARjt.js";import w from"./BaseIcon-CAXE-xBw.js";import{u as f}from"./useAllComponentsMounted-jOG8AT3X.js";import{n as v}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import{A as y}from"./AppDash-CSffn7xe.js";import{A as M,F as g,a as A}from"./AddMetric-CPvWgDHW.js";import{u as V}from"./ViewState-CaQI4PuO.js";import{u as k}from"./countdowns-DgPkbMo-.js";import{u as S}from"./clocks-BKFIGann.js";import C from"./AppContainer-BbrPMYLy.js";import{B as _}from"./BaseMetric-ClLQP9bU.js";import{b as j,a as I}from"./constants-KuzCZNtH.js";import{a as T}from"./index-CbkRD371.js";import{u as D}from"./useAppToggle-CWDyropZ.js";const x=v(s({name:"MetricAdjust",components:{BaseIcon:w},props:{item:{type:Object,required:!0},location:{type:String,required:!0}},setup:()=>({...f(),metricsStore:u(),capture:a("capture")}),methods:{async adjust(e,t){var i;e.metaKey&&(t*=100),e.shiftKey&&(t*=10);const s=Number(Number(this.item.value).toPrecision(12))+t;await this.metricsStore.update(this.item.id,{value:`${s}`}),null==(i=this.capture)||i.call(this,`metric ${t>0?"in":"de"}crement`,{properties:{location:this.location}})}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("div",{staticClass:"metric-adjust",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"icon-wrapper",on:{click:function(t){return e.adjust(t,-1)}}},[t("base-icon",{attrs:{src:"circle-minus"}})],1),t("div",{staticClass:"icon-wrapper",attrs:{"data-test":"metric-adjust-add"},on:{click:function(t){return e.adjust(t,1)}}},[t("base-icon",{attrs:{src:"circle-plus"}})],1)])}),[],!1,null,"4d795665").exports;const B=v(s({name:"BaseMetricDash",components:{AppDash:y,MetricAdjust:x},props:{item:{type:Object,required:!0}},emits:["click"],setup:()=>({...f(),selectedMetric:a("selectedMetric")}),computed:{icon(){return this.itemIsMetric(this.item)&&this.item.authNeeded?"circle-alert":this.item.icon??""},selected(){var e;return(null==(e=this.selectedMetric)?void 0:e.id)===this.item.id}},methods:{itemIsMetric:e=>e instanceof b}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,t("app-dash",{staticClass:"base-metric-dash",attrs:{icon:e.icon,label:e.item.name,title:e.item.displayTooltip,"app-visible":e.selected,"inline-label-width":!0,"blur-background-hover":!0,"background-blur":"bottom","data-test":"app-dash"},on:{click:function(t){return e.$emit("click",t)}},scopedSlots:e._u([{key:"icon-right",fn:function(){return[t("span",[e._v(e._s(e.item.displayValue))])]},proxy:!0},{key:"icon-below",fn:function(){return[e.itemIsMetric(e.item)&&e.item.shouldDisplayQuickAdjust?t("metric-adjust",{attrs:{item:e.item,location:"dash"}}):e._e()]},proxy:!0}])})}),[],!1,null,"d3b24eb4").exports;var z=(e=>(e.Archived="archive",e.List="list",e.MetricTypeSelect="metricTypeSelect",e.Form="form",e))(z||{});const W=V("baseMetrics",{views:{archive:{order:1},list:{order:2,defaultView:!0},metricTypeSelect:{order:3},form:{order:4}}}),O=(e,t)=>T(e,(e=>{window.requestAnimationFrame((()=>{var i;const s=e[0];(null==(i=null==s?void 0:s.borderBoxSize)?void 0:i[0])&&t({width:s.borderBoxSize[0].inlineSize,height:s.borderBoxSize[0].blockSize})}))})),P=new p({feature:"metrics"});const F=v(s({name:"BaseMetrics",components:{AppContainer:C,AppDash:y,BaseMetricsApp:()=>e((()=>import("./BaseMetricsApp-BP6MbBTI.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96])),AddMetric:M,BaseMetricDash:B,FocusModeMetric:g},setup(){const e=r(),t=r(),i=r(0),s=r(0);O(e,(({width:e})=>i.value=e)),O(t,(({width:e})=>s.value=e));const a=r(),d=r();o("selectedMetric",n((()=>a.value))),o("selectedType",n((()=>d.value)));const l=S(),p=k(),h=u();return o("activeTypeStore",n((()=>d.value===_.Clock?l:d.value===_.Countdown?p:h))),{...f({widgetId:"base-metrics"}),...D(W,{analytics:P}),nippleDisplacement:c.nippleDisplacementPx,viewStateStore:W(),add:r(),clocksStore:l,countdownsStore:p,metricsStore:h,baseMetric:e,dashItems:t,appContainerWidth:i,dashItemsWidth:s,selectedMetric:a,selectedType:d,AddMetricTypeData:A}},data:()=>({activeItem:void 0,right:0,top:0,enableFadeTransitions:!1}),computed:{iconsOnly(){return this.appContainerWidth<this.dashItemsWidth||this.$mobile},overlayConfirmationVisible(){var e,t;return(null==(t=null==(e=this.viewStateStore)?void 0:e.confirmationProps)?void 0:t.type)===j.Overlay},allLoaded(){return this.metricsStore.loaded&&this.clocksStore.loaded&&this.countdownsStore.loaded},allMetricsHidden(){return!(this.metricsVisible||this.clocksVisible||this.countdownsVisible||this.focusModeInsightVisible)},metricsVisible:()=>t.metricVisible,clocksVisible:()=>t.multiClockVisible,countdownsVisible:()=>t.countdownVisible,focusModeInsightVisible:()=>t.focusInsightVisible,pinnedClocks(){return this.clocksVisible?[...this.clocksStore.randomItems,...this.clocksStore.pinnedItems]:[]},pinnedCountdowns(){return this.countdownsVisible?[...this.countdownsStore.randomItems,...this.countdownsStore.pinnedItems]:[]},pinnedMetrics(){return this.metricsVisible?[...this.metricsStore.randomItems,...this.metricsStore.pinnedItems]:[]},pinnedItems(){return[...this.pinnedClocks,...this.pinnedCountdowns,...this.pinnedMetrics]},keepAddMetricVisible(){return this.popupActive&&!this.selectedMetric},showLabel:()=>t.dashAppTextLabels===I.Always,weatherOrCalendarVisible:()=>t.weatherVisible||t.calendarVisible,weatherDashAppWidth:()=>t.weatherVisible?d.weatherDashAppWidth:0,calendarDashAppWidth:()=>t.calendarVisible?d.calendarDashAppWidth:0},watch:{async allLoaded(e){e&&(await l(),this.enableFadeTransitions=!0)},popupActive(){this.popupActive||(this.selectedMetric=void 0,this.selectedType=void 0)},metricsVisible:{handler(){this.metricsVisible&&this.metricsStore.refresh()},immediate:!0},countdownsVisible:{handler(){this.countdownsVisible&&this.countdownsStore.refresh()},immediate:!0},clocksVisible:{handler(){this.clocksVisible&&this.clocksStore.refresh()},immediate:!0}},mounted(){var e,t;this.pinnedItems.length&&(this.onAppContainerResize({width:(null==(e=this.baseMetric)?void 0:e.$el.clientWidth)??0}),this.onDashItemsResize({width:(null==(t=this.dashItems)?void 0:t.clientWidth)??0}))},methods:{onAppContainerResize({width:e}){this.appContainerWidth=e},onDashItemsResize({width:e}){this.dashItemsWidth=e},async addMetric(e){let t=z.Form;e===_.Countdown?(i.countdownVisible=!0,this.countdownsStore.newItem()):e===_.Clock?(i.multiClockVisible=!0,this.clocksStore.newItem()):(i.metricVisible=!0,t=z.MetricTypeSelect),await this.togglePopup(!0),this.selectedType=e,await this.viewStateStore.setActiveView(t),this.add&&this.positionApp(this.add.$el)},async toggleApp(e,t,i){if(i&&this.selectedMetric&&i.id===this.selectedMetric.id)return this.togglePopup(!1);this.selectedType=t,this.selectedMetric=i,this.positionApp(e.currentTarget),await this.togglePopup(!0)},positionApp(e){var t;const i=e.getBoundingClientRect(),s=null==(t=this.baseMetric)?void 0:t.$el.getBoundingClientRect();s&&(this.top=Math.round(i.bottom-s.top),this.right=Math.round(s.right-i.right+i.width/2-this.nippleDisplacement))}}}),(function(){var e=this,t=e._self._c;return e._self._setupProxy,e.allMetricsHidden?e._e():t("app-container",{ref:"baseMetric",staticClass:"base-metric",class:{"icons-only":e.iconsOnly},style:{"--weather-width":`${e.weatherDashAppWidth}px`,"--calendar-width":`${e.calendarDashAppWidth}px`},attrs:{"data-test":"base-metric","app-name":"baseMetric","deep-transition-app-dash":!0,overlay:e.popupActive}},[e.iconsOnly?t("transition-group",{staticClass:"dash-items",attrs:{tag:"div",name:"fade",duration:e.enableFadeTransitions?500:0}},[e.weatherOrCalendarVisible?t("div",{key:"dash-measure",staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e(),e._l(e.AddMetricTypeData,(function(i,s){return t("app-dash",{key:s,staticClass:"hide-apps-fade",attrs:{icon:i.icon,"data-type":s,"data-test":s,label:i.name},on:{click:function(t){return e.toggleApp(t,s)}}})}))],2):e._e(),t("transition-group",{ref:"dashItems",staticClass:"dash-items pinned-items",attrs:{tag:"div",name:"fade-deep",duration:e.enableFadeTransitions?500:0}},[e.weatherOrCalendarVisible?t("div",{key:"dash-measure",staticClass:"top-right-dash-measure",class:{labels:e.showLabel}}):e._e(),e.focusModeInsightVisible?t("focus-mode-metric",{key:"focus-mode-insight",staticClass:"hide-apps-fade"}):e._e(),e._l(e.pinnedItems,(function(i){return t("base-metric-dash",{key:i.id,attrs:{item:i,"data-type":i.type,"data-test":i.type+"-app-dash"},on:{click:function(t){return e.toggleApp(t,i.type,i)}}})})),t("add-metric",{key:"add",ref:"add",attrs:{"force-active":e.keepAddMetricVisible},on:{add:e.addMetric}})],2),t("transition",{attrs:{name:"slide-down-fade-blurred-app"}},[e.popupActive?t("base-metrics-app",{staticClass:"hide-apps-fade",attrs:{right:e.right,top:e.top}}):e._e()],1)],1)}),[],!1,null,"a3e7a8d6").exports,$=document.querySelector(".region.top-right"),L=document.createElement("div");$.appendChild(L),new h({render:()=>m(F)}).$mount(L);const R=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{z as B,x as M,R as m,W as u};