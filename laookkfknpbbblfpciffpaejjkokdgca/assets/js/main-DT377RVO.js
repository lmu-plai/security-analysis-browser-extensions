import{I as t,A as s,V as e,h as a}from"./index-B9SbLlJ5.js";import n from"./AppContainer-BbrPMYLy.js";import{S as r}from"./SmoothReflow-CN2CnQb0.js";import o from"./BaseIcon-CAXE-xBw.js";import{A as i}from"./AppHeaderControl-CYSrwe76.js";import{u}from"./plusStatusBanner-TQBfwwtG.js";import{S as p}from"./SubscriptionSummary-DTKaK_m5.js";import{n as l}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./VueBase-BB-58KAg.js";import"./Logger-BTKFyPnc.js";import"./style-cpFB66wV.js";import"./showAnyway-Bb-tkUYJ.js";import"./reactiveCustomization-l1DAJU8W.js";import"./DataSyncService-BIQVYvDv.js";import"./useAllComponentsMounted-jOG8AT3X.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./pinia-4ulFHh2N.js";import"./portal-vue.esm-BlbL0ibK.js";import"./ResizeSensor-ZXOsDHeC.js";import"./dynamic-import-helper-DIl3ayLm.js";import"./persistStore-C6CQfgEA.js";const c=new s({feature:"plus status banner"});const d=l(t({name:"PlusStatusBanner",components:{AppHeaderControl:i,BaseIcon:o,SmoothReflow:r,AppContainer:n},setup:()=>({plusStatusBannerStore:u()}),computed:{expiredStatusCopy(){switch(this.plusStatusBannerStore.activeSubscriptionSummaryStore.status){case p.ExpiredTrial:return"Your Plus trial has expired";case p.ExpiredPlus:default:return"You've lost access to Plus!"}}},async mounted(){await this.plusStatusBannerStore.activeSubscriptionSummaryStore.refresh(),m.widgetManager.appReady("plus-status-banner")},methods:{openUpgradeModal(){c.capture("add payment clicked",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status});null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/upgrade"):m.cmd("window.account.open.login","subscription?add_card=true")},openActionRequiredModal(){c.capture("action required clicked",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status});null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/home"):m.cmd("window.account.open.login","subscription")},openPastDue(){null!==m.models.teamInfo.get("team")?m.cmd("window.account.open.login","team/settings/billing"):m.cmd("window.account.open.login","subscription")},closeBanner(){c.capture("dismissed",{type:this.plusStatusBannerStore.activeSubscriptionSummaryStore.status}),this.plusStatusBannerStore.trialVisible?this.plusStatusBannerStore.dismissTrialBannerForDay():this.plusStatusBannerStore.expiredVisible?this.plusStatusBannerStore.dismissExpiredBannerIndefinitely():this.plusStatusBannerStore.pastDueVisible&&this.plusStatusBannerStore.dismissPastDueBanner()}}}),(function(){var t=this,s=t._self._c;return t._self._setupProxy,s("smooth-reflow",{attrs:{disabled:t.plusStatusBannerStore.bannerVisible}},[t.plusStatusBannerStore.bannerVisible?s("app-container",{staticClass:"plus-status-banner dark dark-full",attrs:{"app-name":"plus-status-banner","data-test":"plus-status-banner"}},[t.plusStatusBannerStore.requiresActionVisible?[s("span",{staticClass:"status-title"},[t._v("Action is required on your account to confirm your card")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"requires-action"},on:{click:t.openActionRequiredModal}},[t._v("Complete confirmation")])]:t.plusStatusBannerStore.trialVisible?[s("span",{staticClass:"status-title"},[t._v(" "+t._s(t.plusStatusBannerStore.trialDaysText)+" remaining in Plus trial â€¢ Don't lose access to Plus! ")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v("Subscribe")])]:t.plusStatusBannerStore.expiredVisible?[s("span",{staticClass:"status-title"},[t._v(t._s(t.expiredStatusCopy))]),s("button",{staticClass:"dash-button",attrs:{"data-test":"upgrade"},on:{click:t.openUpgradeModal}},[t._v("Subscribe to access all features")])]:t.plusStatusBannerStore.pastDueVisible?[s("span",{staticClass:"status-title"},[t._v("We were unable to charge the card you have on file")]),s("button",{staticClass:"dash-button",attrs:{"data-test":"requires-action"},on:{click:t.openPastDue}},[t._v("Update payment")])]:t._e(),t.plusStatusBannerStore.bannerDismissDisabled?t._e():s("app-header-control",{attrs:{"data-test":"dismiss"},on:{click:t.closeBanner}},[s("base-icon",{staticClass:"icon close",attrs:{src:"icon-close",size:"11px"}})],1)],2):t._e()],1)}),[],!1,null,"aeb1debd").exports,S=document.querySelector(".region.top-bar"),b=document.createElement("div");S&&S.prepend(b);const h=m.models.teamInfo.get("team");(null===h||h.userIsAdmin)&&new e({render:()=>a(d)}).$mount(b);