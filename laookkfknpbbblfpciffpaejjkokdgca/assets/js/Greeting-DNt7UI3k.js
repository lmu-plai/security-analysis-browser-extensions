import{M as t}from"./Message-D0Rc36LQ.js";import{u as e}from"./useAllComponentsMounted-jOG8AT3X.js";import{persistent as a}from"./reactiveCustomization-l1DAJU8W.js";import{T as o}from"./index-DQnUe-E8.js";import{s}from"./showAnyway-Bb-tkUYJ.js";import{r,a as i,A as n}from"./index-B9SbLlJ5.js";import{e as p}from"./DataSyncService-BIQVYvDv.js";import{a as d}from"./modal-DQlfZdMt.js";import{U as l}from"./enums-C0TfsRui.js";import{B as g}from"./BaseDropdown-DNbKWQaF.js";import{B as c}from"./BaseDropdownOption-NzB_bdFk.js";import{B as u}from"./BaseDropdownDivider-Bay0Demn.js";import h from"./BaseIcon-CAXE-xBw.js";import{n as j}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./MobileBlur-B2s9dLKD.js";import"./Logger-BTKFyPnc.js";import"./style-cpFB66wV.js";import"./pinia-4ulFHh2N.js";import"./localStorage-B4mFdj8F.js";import"./legacyUserMigration-BBmM2Q1F.js";import"./migrateLegacyUserMessageHandler-BMN9RYlR.js";import"./auth-B1eW30AJ.js";import"./persistStore-C6CQfgEA.js";import"./embeddedApp-K-x6feEl.js";import"./experiments-CUd_VD1Q.js";import"./flashMessageQueue-swNUH1jF.js";import"./info-DdD9a7JK.js";import"./constants-Bt_TxKWw.js";import"./dynamic-import-helper-DIl3ayLm.js";import"./index-CDlxyr_L.js";import"./appZStack-Duidf5Sm.js";import"./ResizeSensor-ZXOsDHeC.js";import"./promisifiedChrome-vGTrjPj6.js";import"./modal-CUt-4jrz.js";import"./VueBase-BB-58KAg.js";import"./_commonjsHelpers-B3K3fdV-.js";import"./ClickOutside-DCLvi2fj.js";import"./portal-vue.esm-BlbL0ibK.js";import"./BaseDropdownContent-BfXd6hD-.js";import"./constants-CALDQiUE.js";import"./index-CbkRD371.js";import"./icon-ellipsis-D7nTOXaQ.js";const w=j({name:"Greeting",components:{BaseIcon:h,BaseDropdownDivider:u,BaseDropdownOption:c,BaseDropdown:g,ThreeColLayout:o,Message:t},setup:()=>({...e(),mantraManager:m.models.mantraManager,showAnyway:s,dropdown:r()}),data:()=>({editingName:!1}),computed:{date:()=>m.models.date,name:()=>(a.displayname||"").trim(),greeting(){const t=i.getDayPart(this.date.get("date"));let e={name:this.name,punctuation:i.endsWithEndPunctuation(this.name)?"":"."};return e.content=this.name||this.editingName?`Good ${t}, `:`Good ${t}`,e}},mounted(){p.$on("greeting:name:edit",(()=>this.editing(!0)))},destroyed(){p.$off("greeting:name:edit",(()=>this.editing(!0)))},methods:{toggleDropdown(t){var e;this.$emit("stop-cycle",t),null==(e=this.dropdown)||e.openDropdown()},showMantra(){var t;!this.mantraManager.noMantra||this.$plus?(this.mantraManager.isEnabled()&&!this.mantraManager.getActiveItem()?this.mantraManager.getActiveItem():this.mantraManager.isEnabled()||this.mantraManager.getActiveItem()?this.mantraManager.isEnabled()&&this.mantraManager.getActiveItem()&&this.$emit("show-mantra"):(this.mantraManager.toggleEnabled(),this.mantraManager.getActiveItem()),null==(t=this.dropdown)||t.closeDropdown(),n.capture("mantra show",{feature:"mantras"})):d(l.MANTRAS,"dash")},editing(t){var e;this.$emit("stop-cycle",t),this.editingName=t,null==(e=this.dropdown)||e.closeDropdown()},onEditNameClick(){this.editing(!0),n.capture("display name change",{feature:"profile"})}}},(function(){var t=this,e=t._self._c;return e("three-col-layout",{directives:[{name:"mobile-click",rawName:"v-mobile-click",value:t.toggleDropdown.bind(null,!0),expression:"toggleDropdown.bind(null, true)"}],staticClass:"app-container has-dash-icon greeting",class:{"show-anyway":t.showAnyway.includes("greeting")},attrs:{"data-show-anyway":"greeting","data-test":"greeting"},scopedSlots:t._u([{key:"center",fn:function(){return[e("message",{attrs:{message:t.greeting,"editing-name":t.editingName},on:{editing:t.editing,toggle:t.toggleDropdown}})]},proxy:!0},{key:"right",fn:function(){return[e("base-dropdown",{ref:"dropdown",attrs:{"container-class":"dash","data-test":"more-toggle"},scopedSlots:t._u([{key:"toggle",fn:function(){return[e("div",{staticClass:"icon-wrapper dark dark-full"},[e("base-icon",{staticClass:"icon",attrs:{src:"icon-ellipsis",size:"18px"}})],1)]},proxy:!0}])},[e("base-dropdown-option",{attrs:{"data-test":"show-mantra"},on:{click:t.showMantra}},[e("base-icon",{attrs:{src:"message-square-quote"}}),e("span",[t._v("Show today's mantra")])],1),e("base-dropdown-divider"),e("base-dropdown-option",{attrs:{"data-test":"edit-name"},on:{click:function(e){return e.stopPropagation(),t.onEditNameClick.apply(null,arguments)}}},[e("base-icon",{attrs:{src:"pencil"}}),e("span",[t._v("Edit your name")])],1)],1)]},proxy:!0}])})}),[],!1,null,"7aa3b34b").exports;export{w as default};