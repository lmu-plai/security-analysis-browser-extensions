const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Greeting-DNt7UI3k.js","assets/js/Message-D0Rc36LQ.js","assets/js/MobileBlur-B2s9dLKD.js","assets/js/reactiveCustomization-l1DAJU8W.js","assets/js/index-B9SbLlJ5.js","assets/js/Logger-BTKFyPnc.js","assets/js/style-cpFB66wV.js","assets/css/style-CrTXrpPu.css","assets/js/DataSyncService-BIQVYvDv.js","assets/js/_plugin-vue2_normalizer-DeUNqxFl.js","assets/css/Message-BUUnEHTK.css","assets/js/useAllComponentsMounted-jOG8AT3X.js","assets/js/index-DQnUe-E8.js","assets/js/pinia-4ulFHh2N.js","assets/js/localStorage-B4mFdj8F.js","assets/js/legacyUserMigration-BBmM2Q1F.js","assets/js/enums-C0TfsRui.js","assets/js/migrateLegacyUserMessageHandler-BMN9RYlR.js","assets/js/auth-B1eW30AJ.js","assets/js/persistStore-C6CQfgEA.js","assets/js/embeddedApp-K-x6feEl.js","assets/js/experiments-CUd_VD1Q.js","assets/js/flashMessageQueue-swNUH1jF.js","assets/js/info-DdD9a7JK.js","assets/js/constants-Bt_TxKWw.js","assets/js/dynamic-import-helper-DIl3ayLm.js","assets/js/index-CDlxyr_L.js","assets/js/appZStack-Duidf5Sm.js","assets/js/ResizeSensor-ZXOsDHeC.js","assets/js/promisifiedChrome-vGTrjPj6.js","assets/js/modal-CUt-4jrz.js","assets/css/index-BXUxMXk7.css","assets/js/showAnyway-Bb-tkUYJ.js","assets/js/VueBase-BB-58KAg.js","assets/js/_commonjsHelpers-B3K3fdV-.js","assets/js/ClickOutside-DCLvi2fj.js","assets/js/portal-vue.esm-BlbL0ibK.js","assets/js/modal-DQlfZdMt.js","assets/js/BaseDropdown-DNbKWQaF.js","assets/js/BaseDropdownContent-BfXd6hD-.js","assets/js/constants-CALDQiUE.js","assets/js/index-CbkRD371.js","assets/css/BaseDropdownContent-BVfvvT0B.css","assets/js/icon-ellipsis-D7nTOXaQ.js","assets/css/BaseDropdown-CwtM7hMN.css","assets/js/BaseDropdownOption-NzB_bdFk.js","assets/css/BaseDropdownOption-DaYMTb1b.css","assets/js/BaseDropdownDivider-Bay0Demn.js","assets/css/BaseDropdownDivider-D_a21TP7.css","assets/js/BaseIcon-CAXE-xBw.js","assets/css/BaseIcon-Bkqy2Cka.css","assets/css/Greeting-sHTEOJZf.css","assets/js/Mantra-BMiw6i4m.js","assets/js/settingsViewState-5xgdbrfZ.js","assets/js/ViewState-CaQI4PuO.js","assets/css/Mantra-CoYdKf6K.css"])))=>i.map(i=>d[i]);
import{_ as e}from"./style-cpFB66wV.js";import{u as t}from"./useAllComponentsMounted-jOG8AT3X.js";import{n}from"./_plugin-vue2_normalizer-DeUNqxFl.js";import"./index-B9SbLlJ5.js";import"./Logger-BTKFyPnc.js";import"./DataSyncService-BIQVYvDv.js";const a=n({name:"GreetingMantraContainer",components:{Greeting:()=>e((()=>import("./Greeting-DNt7UI3k.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),Mantra:()=>e((()=>import("./Mantra-BMiw6i4m.js")),__vite__mapDeps([52,1,2,3,4,5,6,7,8,9,10,33,34,35,13,36,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,37,45,40,46,49,50,47,48,38,39,41,42,43,44,53,54,55]))},setup:()=>({...t()}),mantraManager:m.models.mantraManager,data:()=>({showGreeting:null,timeoutId:null,intervalId:null,mantraOverride:null}),computed:{isMantraShowing(){return!1===this.showGreeting}},created(){m.on("globalEvent:pageHidden",this.clearMantraGreetingCycleIfInAlternatingMode),m.on("globalEvent:pageShown",this.setMantraGreetingCycleIfInAlternatingMode),m.models.customization.on("change:mantraVisible",this.toggleMantraFromTrigger),m.models.mantraManager.on("show-mantra",this.showMantraFromTrigger),m.models.mantraSettings.on("change:firstMantraActivated",this.showMantraFromTrigger),m.models.mantraManager.on("show-greeting",this.showGreetingFromTrigger),m.models.mantraSettings.on("change:frequency",this.mantraFrequencyChangeFromTrigger),m.models.mantraManager.on("mantra-pin",this.showPinnnedMantraFromTrigger),m.models.mantraManager.on("mantra-un-pin",this.hidePinnnedMantraFromTrigger),m.models.mantraManager.on("mantra-active-change",this.showMantraFromTrigger),this.$options.mantraManager.shouldShowMantraAfterGreetingFirstTabOfDay()&&this.showMantraOnTimeoutForFirstTabOfDay(),m.on("mantra:override",this.overrideMantra),m.trigger("greetingMantraContainer:created"),this.showGreeting=!this.$options.mantraManager.checkIfMantraShouldBeShown(),this.showGreeting&&!this.$options.mantraManager.hasSeenGreetingToday()&&this.$options.mantraManager.markGreetingAsSeenToday(),this.setMantraGreetingCycleIfInAlternatingMode()},destroyed(){this.clearMantraGreetingCycle(),m.off("globalEvent:pageHidden",this.clearMantraGreetingCycleIfInAlternatingMode),m.off("globalEvent:pageShown",this.setMantraGreetingCycleIfInAlternatingMode),m.models.customization.off("change:mantraVisible",this.toggleMantraFromTrigger),m.models.mantraManager.off("show-mantra",this.showMantraFromTrigger),m.models.mantraManager.off("show-greeting",this.showGreetingFromTrigger),m.models.mantraManager.off("mantra-pin",this.clearAndSetMantraGreetingCycleIfInAlternatingMode),m.models.mantraSettings.off("change:frequency",this.mantraFrequencyChangeFromTrigger),m.off("mantra:override",this.overrideMantra)},methods:{overrideMantra(e){this.mantraOverride=e,this.clearMantraGreetingCycle()},showMantraOnTimeoutForFirstTabOfDay(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((()=>{this.showGreeting=!1}),this.$options.mantraManager.durationGreetingFirstTabOfDay),this.$options.mantraManager.markGreetingAsSeenToday()},showGreetingFromTrigger(){this.clearAndSetMantraGreetingCycleIfInAlternatingMode(),this.showGreeting=!0},showMantraFromTrigger(){this.$options.mantraManager.getActiveItem()&&(this.clearAndSetMantraGreetingCycleIfInAlternatingMode(),this.showGreeting=!1)},toggleMantraFromTrigger(){this.$options.mantraManager.isEnabled()&&this.$options.mantraManager.getActiveItem()&&this.showGreeting?this.showGreeting=!1:this.showGreeting=!0,this.clearAndSetMantraGreetingCycleIfInAlternatingMode()},mantraFrequencyChangeFromTrigger(){this.clearMantraGreetingCycle(),this.$options.mantraManager.isFrequencyAlways()?this.showGreeting=!1:this.setMantraGreetingCycleIfInAlternatingMode()},setMantraGreetingCycleIfInAlternatingMode(){this.intervalId||this.$options.mantraManager.noMantra||this.$options.mantraManager.activeFeedsEmpty()||!this.$options.mantraManager.isEnabled()||!this.$options.mantraManager.isInAlternatingMode()||this.setMantraGreetingCycleInterval()},setMantraGreetingCycleInterval(){if(this.intervalId)return;const e=this.$options.mantraManager.getDurationTotal();e&&(this.intervalId=setInterval(this.setMantraGreetingCycleTimeout,e),this.setMantraGreetingCycleTimeoutInitial())},setMantraGreetingCycleTimeout(){this.isMantraShowing?(this.setMantraGreetingCycleTimeoutHelper("mantra","greeting"),document.hidden||(this.showGreeting=!0)):(document.hidden||(this.showGreeting=!1),this.setMantraGreetingCycleTimeoutHelper("greeting","mantra"))},setMantraGreetingCycleTimeoutInitial(){this.isMantraShowing?this.setMantraGreetingCycleTimeoutHelper("greeting","mantra"):this.setMantraGreetingCycleTimeoutHelper("mantra","greeting")},setMantraGreetingCycleTimeoutHelper(e,t){this.$options.mantraManager.getDuration(t)>0&&(this.timeoutId=setTimeout((()=>{document.hidden||("greeting"===e?this.showGreeting=!0:"mantra"===e&&(this.showGreeting=!1))}),this.$options.mantraManager.getDuration(t)))},clearMantraGreetingCycleIfInAlternatingMode(){this.intervalId&&this.$options.mantraManager.isEnabled()&&this.$options.mantraManager.isInAlternatingMode()&&this.clearMantraGreetingCycle()},clearMantraGreetingCycle(){clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.intervalId=null,this.timeoutId=null},clearAndSetMantraGreetingCycleIfInAlternatingMode(){this.clearMantraGreetingCycle(),this.setMantraGreetingCycleIfInAlternatingMode()},stopMantraGreetingCycle(e){e?this.clearMantraGreetingCycle():this.setMantraGreetingCycleIfInAlternatingMode()},showPinnnedMantraFromTrigger(){this.showGreeting=!1,this.clearMantraGreetingCycleIfInAlternatingMode()},hidePinnnedMantraFromTrigger(){this.showGreeting=!0,this.clearMantraGreetingCycleIfInAlternatingMode()}}},(function(){var e=this,t=e._self._c;return!e.showGreeting||e.mantraOverride?t("div",{key:"mantra"},[t("mantra",{attrs:{"mantra-override":e.mantraOverride},on:{"show-greeting":function(t){e.showGreeting=!0},"stop-cycle":e.stopMantraGreetingCycle}})],1):t("div",{key:"greeting"},[t("greeting",{on:{"show-mantra":function(t){e.showGreeting=!1},"stop-cycle":e.stopMantraGreetingCycle}})],1)}),[],!1,null,null).exports;export{a as default};