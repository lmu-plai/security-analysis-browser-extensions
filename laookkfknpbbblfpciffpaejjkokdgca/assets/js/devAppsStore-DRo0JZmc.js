import{P as e}from"./main-CjnLz_R3.js";import{d as t,s as i}from"./DataSyncService-BIQVYvDv.js";import{useLinksViewStateStore as s}from"./linksViewState-BeUTz-Jr.js";import{u as a}from"./links-BiNnZQ-c.js";import{u as c}from"./notesViewState-BrxGvZwb.js";import{u as d}from"./notes-Dj6OnzbX.js";import{u as o}from"./chatViewState-D7B5cnYo.js";import{u as n}from"./chat-CI4_1_m1.js";import{u as r,F as p}from"./focusModeInsightsViewState-Bp-WMnI-.js";import{u as v}from"./settingsViewState-5xgdbrfZ.js";import{w as l}from"./index-B9SbLlJ5.js";const m=async e=>{if(!e.loaded)return e.loading?new Promise((t=>{e.$subscribe(((e,i)=>i.loaded&&t()))})):e.refresh()},w=(e,t)=>{const i={resetBeforeViewChange:()=>e.resetBeforeViewChange(),isOpen:()=>e.popupActive,open:async()=>e.popupActive||await e.togglePopup(!0),close:async()=>!e.popupActive||await e.togglePopup(!1),loaded:()=>!0};return t&&("refresh"in t&&(i.refresh=()=>t.refresh()),"loaded"in t&&(i.loaded=()=>t.loaded)),i},I=s(),u=a(),A={...w(I,u),views:{links:{setActive:()=>I.setActiveView("list"),isActive:()=>I.popupActive&&"list"===I.activeViewId},add:{setActive:()=>(u.addItem(),I.setActiveView("form")),isActive:()=>I.popupActive&&"form"===I.activeViewId&&!u.activeItemId},edit:{async setActive(e){await m(u),u.editItem(e),await I.setActiveView("form")},isActive:()=>I.popupActive&&"form"===I.activeViewId&&u.activeItemId,selectableItems:()=>u.getUnPinnedItems.map((({id:e,title:t})=>({id:e,name:t})))}}},f=c(),g=d(),h={...w(f,g),refresh:()=>g.refresh(!0),views:{notes:{async setActive(e){e&&await m(g),g.activeItemId=e,await f.setActiveView("list")},isActive:()=>f.popupActive&&"list"===f.activeViewId,selectableItems:()=>Object.values({...g.getUnpinnedItems,...g.getPinnedItems}).map((({id:e,titlePreview:t})=>({id:e,name:t})))},deleted:{setActive:()=>f.setActiveView("deleted"),isActive:()=>f.popupActive&&"deleted"===f.activeViewId,selectableItems:()=>Object.values(g.getDeletedItems).map((({id:e,titlePreview:t})=>({id:e,name:t})))}}},j={...w(o(),n()),loaded:()=>!0,views:{chat:{isActive:()=>!0,setActive(){}}}},V=r(),b={...w(V,{refresh:()=>{},loaded:!0}),views:{[p.Overview]:{setActive:()=>V.setActiveView(p.Overview),isActive:()=>V.popupActive&&V.activeViewId===p.Overview},[p.Settings]:{setActive:()=>V.setActiveView(p.Settings),isActive:()=>V.popupActive&&V.activeViewId===p.Settings}}},S=v(),O={settings:{...w(S),views:Object.entries(S.views).reduce(((e,[t])=>(e[t]={setActive:()=>S.setActiveView(t),isActive:()=>S.activeViewId===t},e)),{})},chat:j,links:A,notes:h,focusModeInsights:b},y=t("devApps",{state(){return{pinned:localStorage.getObject(e)||{appId:null,viewId:null,itemId:null},selectedItems:(t=O,Object.entries(t).reduce(((e,[t,i])=>{const s=Object.entries(i.views).reduce(((e,[t,i])=>(i.selectableItems&&(e[t]=null),e)),{});return Object.keys(s).length&&(e[t]=s),e}),{}))};var t},getters:{loaded:()=>Object.values(O).every((e=>e.loaded()))},actions:{async openView(e,t,i){await O[e].open(),O[e].resetBeforeViewChange(),O[e].views[t].setActive(i)},closeApp:e=>O[e].close(),pinApp(t,i,s){this.pinned.appId=t,this.pinned.viewId=i,localStorage.setObject(e,{appId:t,viewId:i,itemId:s})},clearPinned(){this.pinned={appId:null,viewId:null,itemId:null},localStorage.removeItem(e)},setActiveSelectedItems(){Object.entries(this.selectedItems).forEach((([e,t])=>{Object.keys(t).forEach((i=>{const s=O[e].views[i].selectableItems();this.pinned.appId===e&&this.pinned.viewId===i&&((e,t)=>t.find((t=>t.id===e)))(this.pinned.itemId,s)?t[i]=this.pinned.itemId:s.length&&(t[i]=s[0].id)}))}))}}}),P=y();l(i(P).loaded,(e=>e&&P.setActiveSelectedItems()));const k=Object.freeze(Object.defineProperty({__proto__:null,useDevAppsStore:y},Symbol.toStringTag,{value:"Module"}));export{O as a,k as d,y as u};